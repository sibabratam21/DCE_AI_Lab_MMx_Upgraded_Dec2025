var Ik=Object.defineProperty;var Ok=(e,t,n)=>t in e?Ik(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var np=(e,t,n)=>Ok(e,typeof t!="symbol"?t+"":t,n);function Lk(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rp={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function jk(){if(AC)return jl;AC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:o}}return jl.Fragment=t,jl.jsx=n,jl.jsxs=n,jl}var EC;function Uk(){return EC||(EC=1,rp.exports=jk()),rp.exports}var x=Uk(),ip={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MC;function $k(){if(MC)return Be;MC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,w={};function A($,Y,te){this.props=$,this.context=Y,this.refs=w,this.updater=te||S}A.prototype.isReactComponent={},A.prototype.setState=function($,Y){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Y,"setState")},A.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function M(){}M.prototype=A.prototype;function P($,Y,te){this.props=$,this.context=Y,this.refs=w,this.updater=te||S}var N=P.prototype=new M;N.constructor=P,T(N,A.prototype),N.isPureReactComponent=!0;var O=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function k($,Y,te,he,Ce,De){return te=De.ref,{$$typeof:e,type:$,key:Y,ref:te!==void 0?te:null,props:De}}function B($,Y){return k($.type,Y,void 0,void 0,void 0,$.props)}function j($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function re($){var Y={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(te){return Y[te]})}var K=/\/+/g;function V($,Y){return typeof $=="object"&&$!==null&&$.key!=null?re(""+$.key):Y.toString(36)}function U(){}function ee($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(U,U):($.status="pending",$.then(function(Y){$.status==="pending"&&($.status="fulfilled",$.value=Y)},function(Y){$.status==="pending"&&($.status="rejected",$.reason=Y)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function ue($,Y,te,he,Ce){var De=typeof $;(De==="undefined"||De==="boolean")&&($=null);var Ae=!1;if($===null)Ae=!0;else switch(De){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch($.$$typeof){case e:case t:Ae=!0;break;case m:return Ae=$._init,ue(Ae($._payload),Y,te,he,Ce)}}if(Ae)return Ce=Ce($),Ae=he===""?"."+V($,0):he,O(Ce)?(te="",Ae!=null&&(te=Ae.replace(K,"$&/")+"/"),ue(Ce,Y,te,"",function(ve){return ve})):Ce!=null&&(j(Ce)&&(Ce=B(Ce,te+(Ce.key==null||$&&$.key===Ce.key?"":(""+Ce.key).replace(K,"$&/")+"/")+Ae)),Y.push(Ce)),1;Ae=0;var Ye=he===""?".":he+":";if(O($))for(var $e=0;$e<$.length;$e++)he=$[$e],De=Ye+V(he,$e),Ae+=ue(he,Y,te,De,Ce);else if($e=v($),typeof $e=="function")for($=$e.call($),$e=0;!(he=$.next()).done;)he=he.value,De=Ye+V(he,$e++),Ae+=ue(he,Y,te,De,Ce);else if(De==="object"){if(typeof $.then=="function")return ue(ee($),Y,te,he,Ce);throw Y=String($),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function q($,Y,te){if($==null)return $;var he=[],Ce=0;return ue($,he,"","",function(De){return Y.call(te,De,Ce++)}),he}function H($){if($._status===-1){var Y=$._result;Y=Y(),Y.then(function(te){($._status===0||$._status===-1)&&($._status=1,$._result=te)},function(te){($._status===0||$._status===-1)&&($._status=2,$._result=te)}),$._status===-1&&($._status=0,$._result=Y)}if($._status===1)return $._result.default;throw $._result}var ae=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function pe(){}return Be.Children={map:q,forEach:function($,Y,te){q($,function(){Y.apply(this,arguments)},te)},count:function($){var Y=0;return q($,function(){Y++}),Y},toArray:function($){return q($,function(Y){return Y})||[]},only:function($){if(!j($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Be.Component=A,Be.Fragment=n,Be.Profiler=i,Be.PureComponent=P,Be.StrictMode=r,Be.Suspense=d,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Be.__COMPILER_RUNTIME={__proto__:null,c:function($){return _.H.useMemoCache($)}},Be.cache=function($){return function(){return $.apply(null,arguments)}},Be.cloneElement=function($,Y,te){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var he=T({},$.props),Ce=$.key,De=void 0;if(Y!=null)for(Ae in Y.ref!==void 0&&(De=void 0),Y.key!==void 0&&(Ce=""+Y.key),Y)!D.call(Y,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Y.ref===void 0||(he[Ae]=Y[Ae]);var Ae=arguments.length-2;if(Ae===1)he.children=te;else if(1<Ae){for(var Ye=Array(Ae),$e=0;$e<Ae;$e++)Ye[$e]=arguments[$e+2];he.children=Ye}return k($.type,Ce,void 0,void 0,De,he)},Be.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},Be.createElement=function($,Y,te){var he,Ce={},De=null;if(Y!=null)for(he in Y.key!==void 0&&(De=""+Y.key),Y)D.call(Y,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ce[he]=Y[he]);var Ae=arguments.length-2;if(Ae===1)Ce.children=te;else if(1<Ae){for(var Ye=Array(Ae),$e=0;$e<Ae;$e++)Ye[$e]=arguments[$e+2];Ce.children=Ye}if($&&$.defaultProps)for(he in Ae=$.defaultProps,Ae)Ce[he]===void 0&&(Ce[he]=Ae[he]);return k($,De,void 0,void 0,null,Ce)},Be.createRef=function(){return{current:null}},Be.forwardRef=function($){return{$$typeof:c,render:$}},Be.isValidElement=j,Be.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:H}},Be.memo=function($,Y){return{$$typeof:f,type:$,compare:Y===void 0?null:Y}},Be.startTransition=function($){var Y=_.T,te={};_.T=te;try{var he=$(),Ce=_.S;Ce!==null&&Ce(te,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(pe,ae)}catch(De){ae(De)}finally{_.T=Y}},Be.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Be.use=function($){return _.H.use($)},Be.useActionState=function($,Y,te){return _.H.useActionState($,Y,te)},Be.useCallback=function($,Y){return _.H.useCallback($,Y)},Be.useContext=function($){return _.H.useContext($)},Be.useDebugValue=function(){},Be.useDeferredValue=function($,Y){return _.H.useDeferredValue($,Y)},Be.useEffect=function($,Y,te){var he=_.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect($,Y)},Be.useId=function(){return _.H.useId()},Be.useImperativeHandle=function($,Y,te){return _.H.useImperativeHandle($,Y,te)},Be.useInsertionEffect=function($,Y){return _.H.useInsertionEffect($,Y)},Be.useLayoutEffect=function($,Y){return _.H.useLayoutEffect($,Y)},Be.useMemo=function($,Y){return _.H.useMemo($,Y)},Be.useOptimistic=function($,Y){return _.H.useOptimistic($,Y)},Be.useReducer=function($,Y,te){return _.H.useReducer($,Y,te)},Be.useRef=function($){return _.H.useRef($)},Be.useState=function($){return _.H.useState($)},Be.useSyncExternalStore=function($,Y,te){return _.H.useSyncExternalStore($,Y,te)},Be.useTransition=function(){return _.H.useTransition()},Be.version="19.1.1",Be}var _C;function xs(){return _C||(_C=1,ip.exports=$k()),ip.exports}var E=xs();const Kn=Hr(E),Bk=Lk({__proto__:null,default:Kn},[E]);var ap={exports:{}},Ul={},op={exports:{}},sp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC;function qk(){return NC||(NC=1,function(e){function t(q,H){var ae=q.length;q.push(H);e:for(;0<ae;){var pe=ae-1>>>1,$=q[pe];if(0<i($,H))q[pe]=H,q[ae]=$,ae=pe;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var H=q[0],ae=q.pop();if(ae!==H){q[0]=ae;e:for(var pe=0,$=q.length,Y=$>>>1;pe<Y;){var te=2*(pe+1)-1,he=q[te],Ce=te+1,De=q[Ce];if(0>i(he,ae))Ce<$&&0>i(De,he)?(q[pe]=De,q[Ce]=ae,pe=Ce):(q[pe]=he,q[te]=ae,pe=te);else if(Ce<$&&0>i(De,ae))q[pe]=De,q[Ce]=ae,pe=Ce;else break e}}return H}function i(q,H){var ae=q.sortIndex-H.sortIndex;return ae!==0?ae:q.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],f=[],m=1,y=null,v=3,S=!1,T=!1,w=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(q){for(var H=n(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=q)r(f),H.sortIndex=H.expirationTime,t(d,H);else break;H=n(f)}}function _(q){if(w=!1,O(q),!T)if(n(d)!==null)T=!0,D||(D=!0,V());else{var H=n(f);H!==null&&ue(_,H.startTime-q)}}var D=!1,k=-1,B=5,j=-1;function re(){return A?!0:!(e.unstable_now()-j<B)}function K(){if(A=!1,D){var q=e.unstable_now();j=q;var H=!0;try{e:{T=!1,w&&(w=!1,P(k),k=-1),S=!0;var ae=v;try{t:{for(O(q),y=n(d);y!==null&&!(y.expirationTime>q&&re());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,v=y.priorityLevel;var $=pe(y.expirationTime<=q);if(q=e.unstable_now(),typeof $=="function"){y.callback=$,O(q),H=!0;break t}y===n(d)&&r(d),O(q)}else r(d);y=n(d)}if(y!==null)H=!0;else{var Y=n(f);Y!==null&&ue(_,Y.startTime-q),H=!1}}break e}finally{y=null,v=ae,S=!1}H=void 0}}finally{H?V():D=!1}}}var V;if(typeof N=="function")V=function(){N(K)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ee=U.port2;U.port1.onmessage=K,V=function(){ee.postMessage(null)}}else V=function(){M(K,0)};function ue(q,H){k=M(function(){q(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(q){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var ae=v;v=H;try{return q()}finally{v=ae}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(q,H){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=v;v=q;try{return H()}finally{v=ae}},e.unstable_scheduleCallback=function(q,H,ae){var pe=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?pe+ae:pe):ae=pe,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ae+$,q={id:m++,callback:H,priorityLevel:q,startTime:ae,expirationTime:$,sortIndex:-1},ae>pe?(q.sortIndex=ae,t(f,q),n(d)===null&&q===n(f)&&(w?(P(k),k=-1):w=!0,ue(_,ae-pe))):(q.sortIndex=$,t(d,q),T||S||(T=!0,D||(D=!0,V()))),q},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(q){var H=v;return function(){var ae=v;v=H;try{return q.apply(this,arguments)}finally{v=ae}}}}(sp)),sp}var RC;function Vk(){return RC||(RC=1,op.exports=qk()),op.exports}var lp={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC;function zk(){if(PC)return un;PC=1;var e=xs();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,f,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:d,containerInfo:f,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,un.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,m)},un.flushSync=function(d){var f=l.T,m=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=f,r.p=m,r.d.f()}},un.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},un.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},un.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):m==="script"&&r.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},un.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},un.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin);r.d.L(d,m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},un.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},un.requestFormReset=function(d){r.d.r(d)},un.unstable_batchedUpdates=function(d,f){return d(f)},un.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},un.useFormStatus=function(){return l.H.useHostTransitionStatus()},un.version="19.1.1",un}var DC;function lM(){if(DC)return lp.exports;DC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),lp.exports=zk(),lp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC;function Fk(){if(kC)return Ul;kC=1;var e=Vk(),t=xs(),n=lM();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,u=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(u=s.return),a=s.return;while(a)}return s.tag===3?u:null}function l(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function c(a){if(o(a)!==a)throw Error(r(188))}function d(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(r(188));return s!==a?null:a}for(var u=a,g=s;;){var b=u.return;if(b===null)break;var C=b.alternate;if(C===null){if(g=b.return,g!==null){u=g;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===u)return c(b),a;if(C===g)return c(b),s;C=C.sibling}throw Error(r(188))}if(u.return!==g.return)u=b,g=C;else{for(var R=!1,I=b.child;I;){if(I===u){R=!0,u=b,g=C;break}if(I===g){R=!0,g=b,u=C;break}I=I.sibling}if(!R){for(I=C.child;I;){if(I===u){R=!0,u=C,g=b;break}if(I===g){R=!0,g=C,u=b;break}I=I.sibling}if(!R)throw Error(r(189))}}if(u.alternate!==g)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:s}function f(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=f(a),s!==null)return s;a=a.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function V(a){return a===null||typeof a!="object"?null:(a=K&&a[K]||a["@@iterator"],typeof a=="function"?a:null)}var U=Symbol.for("react.client.reference");function ee(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===U?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case T:return"Fragment";case A:return"Profiler";case w:return"StrictMode";case _:return"Suspense";case D:return"SuspenseList";case j:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case S:return"Portal";case N:return(a.displayName||"Context")+".Provider";case P:return(a._context.displayName||"Context")+".Consumer";case O:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return s=a.displayName||null,s!==null?s:ee(a.type)||"Memo";case B:s=a._payload,a=a._init;try{return ee(a(s))}catch{}}return null}var ue=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},pe=[],$=-1;function Y(a){return{current:a}}function te(a){0>$||(a.current=pe[$],pe[$]=null,$--)}function he(a,s){$++,pe[$]=a.current,a.current=s}var Ce=Y(null),De=Y(null),Ae=Y(null),Ye=Y(null);function $e(a,s){switch(he(Ae,s),he(De,a),he(Ce,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?ZS(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=ZS(s),a=eC(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}te(Ce),he(Ce,a)}function ve(){te(Ce),te(De),te(Ae)}function Le(a){a.memoizedState!==null&&he(Ye,a);var s=Ce.current,u=eC(s,a.type);s!==u&&(he(De,a),he(Ce,u))}function Ee(a){De.current===a&&(te(Ce),te(De)),Ye.current===a&&(te(Ye),Dl._currentValue=ae)}var se=Object.prototype.hasOwnProperty,Ze=e.unstable_scheduleCallback,Ue=e.unstable_cancelCallback,ct=e.unstable_shouldYield,We=e.unstable_requestPaint,et=e.unstable_now,Rr=e.unstable_getCurrentPriorityLevel,Os=e.unstable_ImmediatePriority,va=e.unstable_UserBlockingPriority,go=e.unstable_NormalPriority,yo=e.unstable_LowPriority,ku=e.unstable_IdlePriority,Ni=e.log,Ls=e.unstable_setDisableYieldValue,Pr=null,Lt=null;function yr(a){if(typeof Ni=="function"&&Ls(a),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Pr,a)}catch{}}var gn=Math.clz32?Math.clz32:Ou,Iu=Math.log,js=Math.LN2;function Ou(a){return a>>>=0,a===0?32:31-(Iu(a)/js|0)|0}var vo=256,Ri=4194304;function Kr(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function de(a,s,u){var g=a.pendingLanes;if(g===0)return 0;var b=0,C=a.suspendedLanes,R=a.pingedLanes;a=a.warmLanes;var I=g&134217727;return I!==0?(g=I&~C,g!==0?b=Kr(g):(R&=I,R!==0?b=Kr(R):u||(u=I&~a,u!==0&&(b=Kr(u))))):(I=g&~C,I!==0?b=Kr(I):R!==0?b=Kr(R):u||(u=g&~a,u!==0&&(b=Kr(u)))),b===0?0:s!==0&&s!==b&&(s&C)===0&&(C=b&-b,u=s&-s,C>=u||C===32&&(u&4194048)!==0)?s:b}function Pi(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function xo(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xa(){var a=vo;return vo<<=1,(vo&4194048)===0&&(vo=256),a}function Lu(){var a=Ri;return Ri<<=1,(Ri&62914560)===0&&(Ri=4194304),a}function Us(a){for(var s=[],u=0;31>u;u++)s.push(a);return s}function ba(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function nm(a,s,u,g,b,C){var R=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var I=a.entanglements,L=a.expirationTimes,X=a.hiddenUpdates;for(u=R&~u;0<u;){var oe=31-gn(u),ce=1<<oe;I[oe]=0,L[oe]=-1;var Q=X[oe];if(Q!==null)for(X[oe]=null,oe=0;oe<Q.length;oe++){var Z=Q[oe];Z!==null&&(Z.lane&=-536870913)}u&=~ce}g!==0&&ju(a,g,0),C!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=C&~(R&~s))}function ju(a,s,u){a.pendingLanes|=s,a.suspendedLanes&=~s;var g=31-gn(s);a.entangledLanes|=s,a.entanglements[g]=a.entanglements[g]|1073741824|u&4194090}function Uu(a,s){var u=a.entangledLanes|=s;for(a=a.entanglements;u;){var g=31-gn(u),b=1<<g;b&s|a[g]&s&&(a[g]|=s),u&=~b}}function $s(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Dr(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function $u(){var a=H.p;return a!==0?a:(a=window.event,a===void 0?32:xC(a.type))}function rm(a,s){var u=H.p;try{return H.p=a,s()}finally{H.p=u}}var vr=Math.random().toString(36).slice(2),Mt="__reactFiber$"+vr,on="__reactProps$"+vr,Pn="__reactContainer$"+vr,Bs="__reactEvents$"+vr,qs="__reactListeners$"+vr,Bu="__reactHandles$"+vr,qu="__reactResources$"+vr,Sa="__reactMarker$"+vr;function bo(a){delete a[Mt],delete a[on],delete a[Bs],delete a[qs],delete a[Bu]}function Di(a){var s=a[Mt];if(s)return s;for(var u=a.parentNode;u;){if(s=u[Pn]||u[Mt]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(a=iC(a);a!==null;){if(u=a[Mt])return u;a=iC(a)}return s}a=u,u=a.parentNode}return null}function ki(a){if(a=a[Mt]||a[Pn]){var s=a.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return a}return null}function kr(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function Ii(a){var s=a[qu];return s||(s=a[qu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Rt(a){a[Sa]=!0}var Vu=new Set,zu={};function G(a,s){J(a,s),J(a+"Capture",s)}function J(a,s){for(zu[a]=s,a=0;a<s.length;a++)Vu.add(s[a])}var ie=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fe={},ge={};function ye(a){return se.call(ge,a)?!0:se.call(fe,a)?!1:ie.test(a)?ge[a]=!0:(fe[a]=!0,!1)}function Me(a,s,u){if(ye(s))if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+u)}}function Ke(a,s,u){if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+u)}}function Pe(a,s,u,g){if(g===null)a.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(s,u,""+g)}}var xn,Dn;function xr(a){if(xn===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);xn=s&&s[1]||"",Dn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xn+a+Dn}var br=!1;function gt(a,s){if(!a||br)return"";br=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(Z){var Q=Z}Reflect.construct(a,[],ce)}else{try{ce.call()}catch(Z){Q=Z}a.call(ce.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ce=a())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),R=C[0],I=C[1];if(R&&I){var L=R.split(`
`),X=I.split(`
`);for(b=g=0;g<L.length&&!L[g].includes("DetermineComponentFrameRoot");)g++;for(;b<X.length&&!X[b].includes("DetermineComponentFrameRoot");)b++;if(g===L.length||b===X.length)for(g=L.length-1,b=X.length-1;1<=g&&0<=b&&L[g]!==X[b];)b--;for(;1<=g&&0<=b;g--,b--)if(L[g]!==X[b]){if(g!==1||b!==1)do if(g--,b--,0>b||L[g]!==X[b]){var oe=`
`+L[g].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=g&&0<=b);break}}}finally{br=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?xr(u):""}function sn(a){switch(a.tag){case 26:case 27:case 5:return xr(a.type);case 16:return xr("Lazy");case 13:return xr("Suspense");case 19:return xr("SuspenseList");case 0:case 15:return gt(a.type,!1);case 11:return gt(a.type.render,!1);case 1:return gt(a.type,!0);case 31:return xr("Activity");default:return""}}function Fu(a){try{var s="";do s+=sn(a),a=a.return;while(a);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function bn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Vs(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Hu(a){var s=Vs(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),g=""+a[s];if(!a.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var b=u.get,C=u.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return b.call(this)},set:function(R){g=""+R,C.call(this,R)}}),Object.defineProperty(a,s,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Yr(a){a._valueTracker||(a._valueTracker=Hu(a))}function Gu(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return a&&(g=Vs(a)?a.checked?"true":"false":a.value),a=g,a!==u?(s.setValue(a),!0):!1}function So(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var im=/[\n"\\]/g;function Ct(a){return a.replace(im,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zs(a,s,u,g,b,C,R,I){a.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?a.type=R:a.removeAttribute("type"),s!=null?R==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+bn(s)):a.value!==""+bn(s)&&(a.value=""+bn(s)):R!=="submit"&&R!=="reset"||a.removeAttribute("value"),s!=null?Co(a,R,bn(s)):u!=null?Co(a,R,bn(u)):g!=null&&a.removeAttribute("value"),b==null&&C!=null&&(a.defaultChecked=!!C),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?a.name=""+bn(I):a.removeAttribute("name")}function Ku(a,s,u,g,b,C,R,I){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),s!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||s!=null))return;u=u!=null?""+bn(u):"",s=s!=null?""+bn(s):u,I||s===a.value||(a.value=s),a.defaultValue=s}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=I?a.checked:!!g,a.defaultChecked=!!g,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(a.name=R)}function Co(a,s,u){s==="number"&&So(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Wr(a,s,u,g){if(a=a.options,s){s={};for(var b=0;b<u.length;b++)s["$"+u[b]]=!0;for(u=0;u<a.length;u++)b=s.hasOwnProperty("$"+a[u].value),a[u].selected!==b&&(a[u].selected=b),b&&g&&(a[u].defaultSelected=!0)}else{for(u=""+bn(u),s=null,b=0;b<a.length;b++){if(a[b].value===u){a[b].selected=!0,g&&(a[b].defaultSelected=!0);return}s!==null||a[b].disabled||(s=a[b])}s!==null&&(s.selected=!0)}}function Fs(a,s,u){if(s!=null&&(s=""+bn(s),s!==a.value&&(a.value=s),u==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=u!=null?""+bn(u):""}function Yu(a,s,u,g){if(s==null){if(g!=null){if(u!=null)throw Error(r(92));if(ue(g)){if(1<g.length)throw Error(r(93));g=g[0]}u=g}u==null&&(u=""),s=u}u=bn(s),a.defaultValue=u,g=a.textContent,g===u&&g!==""&&g!==null&&(a.value=g)}function Oi(a,s){if(s){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=s;return}}a.textContent=s}var am=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ca(a,s,u){var g=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":g?a.setProperty(s,u):typeof u!="number"||u===0||am.has(s)?s==="float"?a.cssFloat=u:a[s]=(""+u).trim():a[s]=u+"px"}function Hs(a,s,u){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var b in s)g=s[b],s.hasOwnProperty(b)&&u[b]!==g&&Ca(a,b,g)}else for(var C in s)s.hasOwnProperty(C)&&Ca(a,C,s[C])}function To(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(a){return kn.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var wo=null;function Ao(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Li=null,Sr=null;function Gs(a){var s=ki(a);if(s&&(a=s.stateNode)){var u=a[on]||null;e:switch(a=s.stateNode,s.type){case"input":if(zs(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ct(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==a&&g.form===a.form){var b=g[on]||null;if(!b)throw Error(r(90));zs(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<u.length;s++)g=u[s],g.form===a.form&&Gu(g)}break e;case"textarea":Fs(a,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Wr(a,!!u.multiple,s,!1)}}}var me=!1;function Jr(a,s,u){if(me)return a(s,u);me=!0;try{var g=a(s);return g}finally{if(me=!1,(Li!==null||Sr!==null)&&(Ic(),Li&&(s=Li,a=Sr,Sr=Li=null,Gs(s),a)))for(s=0;s<a.length;s++)Gs(a[s])}}function Qn(a,s){var u=a.stateNode;if(u===null)return null;var g=u[on]||null;if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,s,typeof u));return u}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eo=!1;if(Jt)try{var In={};Object.defineProperty(In,"passive",{get:function(){Eo=!0}}),window.addEventListener("test",In,In),window.removeEventListener("test",In,In)}catch{Eo=!1}var ji=null,om=null,Ju=null;function rx(){if(Ju)return Ju;var a,s=om,u=s.length,g,b="value"in ji?ji.value:ji.textContent,C=b.length;for(a=0;a<u&&s[a]===b[a];a++);var R=u-a;for(g=1;g<=R&&s[u-g]===b[C-g];g++);return Ju=b.slice(a,1<g?1-g:void 0)}function Xu(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Qu(){return!0}function ix(){return!1}function Sn(a){function s(u,g,b,C,R){this._reactName=u,this._targetInst=b,this.type=g,this.nativeEvent=C,this.target=R,this.currentTarget=null;for(var I in a)a.hasOwnProperty(I)&&(u=a[I],this[I]=u?u(C):C[I]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Qu:ix,this.isPropagationStopped=ix,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qu)},persist:function(){},isPersistent:Qu}),s}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=Sn(wa),Ks=m({},wa,{view:0,detail:0}),IP=Sn(Ks),sm,lm,Ys,ec=m({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ys&&(Ys&&a.type==="mousemove"?(sm=a.screenX-Ys.screenX,lm=a.screenY-Ys.screenY):lm=sm=0,Ys=a),sm)},movementY:function(a){return"movementY"in a?a.movementY:lm}}),ax=Sn(ec),OP=m({},ec,{dataTransfer:0}),LP=Sn(OP),jP=m({},Ks,{relatedTarget:0}),um=Sn(jP),UP=m({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),$P=Sn(UP),BP=m({},wa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),qP=Sn(BP),VP=m({},wa,{data:0}),ox=Sn(VP),zP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GP(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=HP[a])?!!s[a]:!1}function cm(){return GP}var KP=m({},Ks,{key:function(a){if(a.key){var s=zP[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=Xu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?FP[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(a){return a.type==="keypress"?Xu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Xu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),YP=Sn(KP),WP=m({},ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sx=Sn(WP),JP=m({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),XP=Sn(JP),QP=m({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZP=Sn(QP),eD=m({},ec,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),tD=Sn(eD),nD=m({},wa,{newState:0,oldState:0}),rD=Sn(nD),iD=[9,13,27,32],fm=Jt&&"CompositionEvent"in window,Ws=null;Jt&&"documentMode"in document&&(Ws=document.documentMode);var aD=Jt&&"TextEvent"in window&&!Ws,lx=Jt&&(!fm||Ws&&8<Ws&&11>=Ws),ux=" ",cx=!1;function fx(a,s){switch(a){case"keyup":return iD.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dx(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Mo=!1;function oD(a,s){switch(a){case"compositionend":return dx(s);case"keypress":return s.which!==32?null:(cx=!0,ux);case"textInput":return a=s.data,a===ux&&cx?null:a;default:return null}}function sD(a,s){if(Mo)return a==="compositionend"||!fm&&fx(a,s)?(a=rx(),Ju=om=ji=null,Mo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return lx&&s.locale!=="ko"?null:s.data;default:return null}}var lD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mx(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!lD[a.type]:s==="textarea"}function hx(a,s,u,g){Li?Sr?Sr.push(g):Sr=[g]:Li=g,s=Bc(s,"onChange"),0<s.length&&(u=new Zu("onChange","change",null,u,g),a.push({event:u,listeners:s}))}var Js=null,Xs=null;function uD(a){YS(a,0)}function tc(a){var s=kr(a);if(Gu(s))return a}function px(a,s){if(a==="change")return s}var gx=!1;if(Jt){var dm;if(Jt){var mm="oninput"in document;if(!mm){var yx=document.createElement("div");yx.setAttribute("oninput","return;"),mm=typeof yx.oninput=="function"}dm=mm}else dm=!1;gx=dm&&(!document.documentMode||9<document.documentMode)}function vx(){Js&&(Js.detachEvent("onpropertychange",xx),Xs=Js=null)}function xx(a){if(a.propertyName==="value"&&tc(Xs)){var s=[];hx(s,Xs,a,Ao(a)),Jr(uD,s)}}function cD(a,s,u){a==="focusin"?(vx(),Js=s,Xs=u,Js.attachEvent("onpropertychange",xx)):a==="focusout"&&vx()}function fD(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return tc(Xs)}function dD(a,s){if(a==="click")return tc(s)}function mD(a,s){if(a==="input"||a==="change")return tc(s)}function hD(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var On=typeof Object.is=="function"?Object.is:hD;function Qs(a,s){if(On(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var u=Object.keys(a),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var b=u[g];if(!se.call(s,b)||!On(a[b],s[b]))return!1}return!0}function bx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Sx(a,s){var u=bx(a);a=0;for(var g;u;){if(u.nodeType===3){if(g=a+u.textContent.length,a<=s&&g>=s)return{node:u,offset:s-a};a=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=bx(u)}}function Cx(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Cx(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Tx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=So(a.document);s instanceof a.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)a=s.contentWindow;else break;s=So(a.document)}return s}function hm(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var pD=Jt&&"documentMode"in document&&11>=document.documentMode,_o=null,pm=null,Zs=null,gm=!1;function wx(a,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;gm||_o==null||_o!==So(g)||(g=_o,"selectionStart"in g&&hm(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Zs&&Qs(Zs,g)||(Zs=g,g=Bc(pm,"onSelect"),0<g.length&&(s=new Zu("onSelect","select",null,s,u),a.push({event:s,listeners:g}),s.target=_o)))}function Aa(a,s){var u={};return u[a.toLowerCase()]=s.toLowerCase(),u["Webkit"+a]="webkit"+s,u["Moz"+a]="moz"+s,u}var No={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},ym={},Ax={};Jt&&(Ax=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Ea(a){if(ym[a])return ym[a];if(!No[a])return a;var s=No[a],u;for(u in s)if(s.hasOwnProperty(u)&&u in Ax)return ym[a]=s[u];return a}var Ex=Ea("animationend"),Mx=Ea("animationiteration"),_x=Ea("animationstart"),gD=Ea("transitionrun"),yD=Ea("transitionstart"),vD=Ea("transitioncancel"),Nx=Ea("transitionend"),Rx=new Map,vm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vm.push("scrollEnd");function Cr(a,s){Rx.set(a,s),G(s,[a])}var Px=new WeakMap;function Zn(a,s){if(typeof a=="object"&&a!==null){var u=Px.get(a);return u!==void 0?u:(s={value:a,source:s,stack:Fu(s)},Px.set(a,s),s)}return{value:a,source:s,stack:Fu(s)}}var er=[],Ro=0,xm=0;function nc(){for(var a=Ro,s=xm=Ro=0;s<a;){var u=er[s];er[s++]=null;var g=er[s];er[s++]=null;var b=er[s];er[s++]=null;var C=er[s];if(er[s++]=null,g!==null&&b!==null){var R=g.pending;R===null?b.next=b:(b.next=R.next,R.next=b),g.pending=b}C!==0&&Dx(u,b,C)}}function rc(a,s,u,g){er[Ro++]=a,er[Ro++]=s,er[Ro++]=u,er[Ro++]=g,xm|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function bm(a,s,u,g){return rc(a,s,u,g),ic(a)}function Po(a,s){return rc(a,null,null,s),ic(a)}function Dx(a,s,u){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u);for(var b=!1,C=a.return;C!==null;)C.childLanes|=u,g=C.alternate,g!==null&&(g.childLanes|=u),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(b=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,b&&s!==null&&(b=31-gn(u),a=C.hiddenUpdates,g=a[b],g===null?a[b]=[s]:g.push(s),s.lane=u|536870912),C):null}function ic(a){if(50<wl)throw wl=0,Eh=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Do={};function xD(a,s,u,g){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(a,s,u,g){return new xD(a,s,u,g)}function Sm(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xr(a,s){var u=a.alternate;return u===null?(u=Ln(a.tag,s,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=s,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,s=a.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function kx(a,s){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,s=u.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function ac(a,s,u,g,b,C){var R=0;if(g=a,typeof a=="function")Sm(a)&&(R=1);else if(typeof a=="string")R=Sk(a,u,Ce.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case j:return a=Ln(31,u,s,b),a.elementType=j,a.lanes=C,a;case T:return Ma(u.children,b,C,s);case w:R=8,b|=24;break;case A:return a=Ln(12,u,s,b|2),a.elementType=A,a.lanes=C,a;case _:return a=Ln(13,u,s,b),a.elementType=_,a.lanes=C,a;case D:return a=Ln(19,u,s,b),a.elementType=D,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:case N:R=10;break e;case P:R=9;break e;case O:R=11;break e;case k:R=14;break e;case B:R=16,g=null;break e}R=29,u=Error(r(130,a===null?"null":typeof a,"")),g=null}return s=Ln(R,u,s,b),s.elementType=a,s.type=g,s.lanes=C,s}function Ma(a,s,u,g){return a=Ln(7,a,g,s),a.lanes=u,a}function Cm(a,s,u){return a=Ln(6,a,null,s),a.lanes=u,a}function Tm(a,s,u){return s=Ln(4,a.children!==null?a.children:[],a.key,s),s.lanes=u,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var ko=[],Io=0,oc=null,sc=0,tr=[],nr=0,_a=null,Qr=1,Zr="";function Na(a,s){ko[Io++]=sc,ko[Io++]=oc,oc=a,sc=s}function Ix(a,s,u){tr[nr++]=Qr,tr[nr++]=Zr,tr[nr++]=_a,_a=a;var g=Qr;a=Zr;var b=32-gn(g)-1;g&=~(1<<b),u+=1;var C=32-gn(s)+b;if(30<C){var R=b-b%5;C=(g&(1<<R)-1).toString(32),g>>=R,b-=R,Qr=1<<32-gn(s)+b|u<<b|g,Zr=C+a}else Qr=1<<C|u<<b|g,Zr=a}function wm(a){a.return!==null&&(Na(a,1),Ix(a,1,0))}function Am(a){for(;a===oc;)oc=ko[--Io],ko[Io]=null,sc=ko[--Io],ko[Io]=null;for(;a===_a;)_a=tr[--nr],tr[nr]=null,Zr=tr[--nr],tr[nr]=null,Qr=tr[--nr],tr[nr]=null}var yn=null,wt=null,Qe=!1,Ra=null,Ir=!1,Em=Error(r(519));function Pa(a){var s=Error(r(418,""));throw nl(Zn(s,a)),Em}function Ox(a){var s=a.stateNode,u=a.type,g=a.memoizedProps;switch(s[Mt]=a,s[on]=g,u){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(u=0;u<El.length;u++)Fe(El[u],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Fe("invalid",s),Ku(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Yr(s);break;case"select":Fe("invalid",s);break;case"textarea":Fe("invalid",s),Yu(s,g.value,g.defaultValue,g.children),Yr(s)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||g.suppressHydrationWarning===!0||QS(s.textContent,u)?(g.popover!=null&&(Fe("beforetoggle",s),Fe("toggle",s)),g.onScroll!=null&&Fe("scroll",s),g.onScrollEnd!=null&&Fe("scrollend",s),g.onClick!=null&&(s.onclick=qc),s=!0):s=!1,s||Pa(a)}function Lx(a){for(yn=a.return;yn;)switch(yn.tag){case 5:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:yn=yn.return}}function el(a){if(a!==yn)return!1;if(!Qe)return Lx(a),Qe=!0,!1;var s=a.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Vh(a.type,a.memoizedProps)),u=!u),u&&wt&&Pa(a),Lx(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(s===0){wt=wr(a.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;a=a.nextSibling}wt=null}}else s===27?(s=wt,Zi(a.type)?(a=Gh,Gh=null,wt=a):wt=s):wt=yn?wr(a.stateNode.nextSibling):null;return!0}function tl(){wt=yn=null,Qe=!1}function jx(){var a=Ra;return a!==null&&(wn===null?wn=a:wn.push.apply(wn,a),Ra=null),a}function nl(a){Ra===null?Ra=[a]:Ra.push(a)}var Mm=Y(null),Da=null,ei=null;function Ui(a,s,u){he(Mm,s._currentValue),s._currentValue=u}function ti(a){a._currentValue=Mm.current,te(Mm)}function _m(a,s,u){for(;a!==null;){var g=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),a===u)break;a=a.return}}function Nm(a,s,u,g){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var C=b.dependencies;if(C!==null){var R=b.child;C=C.firstContext;e:for(;C!==null;){var I=C;C=b;for(var L=0;L<s.length;L++)if(I.context===s[L]){C.lanes|=u,I=C.alternate,I!==null&&(I.lanes|=u),_m(C.return,u,a),g||(R=null);break e}C=I.next}}else if(b.tag===18){if(R=b.return,R===null)throw Error(r(341));R.lanes|=u,C=R.alternate,C!==null&&(C.lanes|=u),_m(R,u,a),R=null}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===a){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}}function rl(a,s,u,g){a=null;for(var b=s,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var R=b.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var I=b.type;On(b.pendingProps.value,R.value)||(a!==null?a.push(I):a=[I])}}else if(b===Ye.current){if(R=b.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(Dl):a=[Dl])}b=b.return}a!==null&&Nm(s,a,u,g),s.flags|=262144}function lc(a){for(a=a.firstContext;a!==null;){if(!On(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ka(a){Da=a,ei=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ln(a){return Ux(Da,a)}function uc(a,s){return Da===null&&ka(a),Ux(a,s)}function Ux(a,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},ei===null){if(a===null)throw Error(r(308));ei=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else ei=ei.next=s;return u}var bD=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(u,g){a.push(g)}};this.abort=function(){s.aborted=!0,a.forEach(function(u){return u()})}},SD=e.unstable_scheduleCallback,CD=e.unstable_NormalPriority,jt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rm(){return{controller:new bD,data:new Map,refCount:0}}function il(a){a.refCount--,a.refCount===0&&SD(CD,function(){a.controller.abort()})}var al=null,Pm=0,Oo=0,Lo=null;function TD(a,s){if(al===null){var u=al=[];Pm=0,Oo=kh(),Lo={status:"pending",value:void 0,then:function(g){u.push(g)}}}return Pm++,s.then($x,$x),s}function $x(){if(--Pm===0&&al!==null){Lo!==null&&(Lo.status="fulfilled");var a=al;al=null,Oo=0,Lo=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function wD(a,s){var u=[],g={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return a.then(function(){g.status="fulfilled",g.value=s;for(var b=0;b<u.length;b++)(0,u[b])(s)},function(b){for(g.status="rejected",g.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),g}var Bx=q.S;q.S=function(a,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&TD(a,s),Bx!==null&&Bx(a,s)};var Ia=Y(null);function Dm(){var a=Ia.current;return a!==null?a:mt.pooledCache}function cc(a,s){s===null?he(Ia,Ia.current):he(Ia,s.pool)}function qx(){var a=Dm();return a===null?null:{parent:jt._currentValue,pool:a}}var ol=Error(r(460)),Vx=Error(r(474)),fc=Error(r(542)),km={then:function(){}};function zx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function dc(){}function Fx(a,s,u){switch(u=a[u],u===void 0?a.push(s):u!==s&&(s.then(dc,dc),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Gx(a),a;default:if(typeof s.status=="string")s.then(dc,dc);else{if(a=mt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(g){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=g}},function(g){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Gx(a),a}throw sl=s,ol}}var sl=null;function Hx(){if(sl===null)throw Error(r(459));var a=sl;return sl=null,a}function Gx(a){if(a===ol||a===fc)throw Error(r(483))}var $i=!1;function Im(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Om(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Bi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function qi(a,s,u){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(rt&2)!==0){var b=g.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),g.pending=s,s=ic(a),Dx(a,null,u),s}return rc(a,g,s,u),ic(a)}function ll(a,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var g=s.lanes;g&=a.pendingLanes,u|=g,s.lanes=u,Uu(a,u)}}function Lm(a,s){var u=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var b=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var R={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?b=C=R:C=C.next=R,u=u.next}while(u!==null);C===null?b=C=s:C=C.next=s}else b=C=s;u={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=s:a.next=s,u.lastBaseUpdate=s}var jm=!1;function ul(){if(jm){var a=Lo;if(a!==null)throw a}}function cl(a,s,u,g){jm=!1;var b=a.updateQueue;$i=!1;var C=b.firstBaseUpdate,R=b.lastBaseUpdate,I=b.shared.pending;if(I!==null){b.shared.pending=null;var L=I,X=L.next;L.next=null,R===null?C=X:R.next=X,R=L;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,I=oe.lastBaseUpdate,I!==R&&(I===null?oe.firstBaseUpdate=X:I.next=X,oe.lastBaseUpdate=L))}if(C!==null){var ce=b.baseState;R=0,oe=X=L=null,I=C;do{var Q=I.lane&-536870913,Z=Q!==I.lane;if(Z?(He&Q)===Q:(g&Q)===Q){Q!==0&&Q===Oo&&(jm=!0),oe!==null&&(oe=oe.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var je=a,ke=I;Q=s;var lt=u;switch(ke.tag){case 1:if(je=ke.payload,typeof je=="function"){ce=je.call(lt,ce,Q);break e}ce=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ke.payload,Q=typeof je=="function"?je.call(lt,ce,Q):je,Q==null)break e;ce=m({},ce,Q);break e;case 2:$i=!0}}Q=I.callback,Q!==null&&(a.flags|=64,Z&&(a.flags|=8192),Z=b.callbacks,Z===null?b.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},oe===null?(X=oe=Z,L=ce):oe=oe.next=Z,R|=Q;if(I=I.next,I===null){if(I=b.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,b.lastBaseUpdate=Z,b.shared.pending=null}}while(!0);oe===null&&(L=ce),b.baseState=L,b.firstBaseUpdate=X,b.lastBaseUpdate=oe,C===null&&(b.shared.lanes=0),Wi|=R,a.lanes=R,a.memoizedState=ce}}function Kx(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function Yx(a,s){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)Kx(u[a],s)}var jo=Y(null),mc=Y(0);function Wx(a,s){a=li,he(mc,a),he(jo,s),li=a|s.baseLanes}function Um(){he(mc,li),he(jo,jo.current)}function $m(){li=mc.current,te(jo),te(mc)}var Vi=0,qe=null,ot=null,Pt=null,hc=!1,Uo=!1,Oa=!1,pc=0,fl=0,$o=null,AD=0;function _t(){throw Error(r(321))}function Bm(a,s){if(s===null)return!1;for(var u=0;u<s.length&&u<a.length;u++)if(!On(a[u],s[u]))return!1;return!0}function qm(a,s,u,g,b,C){return Vi=C,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=a===null||a.memoizedState===null?Db:kb,Oa=!1,C=u(g,b),Oa=!1,Uo&&(C=Xx(s,u,g,b)),Jx(a),C}function Jx(a){q.H=Sc;var s=ot!==null&&ot.next!==null;if(Vi=0,Pt=ot=qe=null,hc=!1,fl=0,$o=null,s)throw Error(r(300));a===null||zt||(a=a.dependencies,a!==null&&lc(a)&&(zt=!0))}function Xx(a,s,u,g){qe=a;var b=0;do{if(Uo&&($o=null),fl=0,Uo=!1,25<=b)throw Error(r(301));if(b+=1,Pt=ot=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}q.H=DD,C=s(u,g)}while(Uo);return C}function ED(){var a=q.H,s=a.useState()[0];return s=typeof s.then=="function"?dl(s):s,a=a.useState()[0],(ot!==null?ot.memoizedState:null)!==a&&(qe.flags|=1024),s}function Vm(){var a=pc!==0;return pc=0,a}function zm(a,s,u){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~u}function Fm(a){if(hc){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}hc=!1}Vi=0,Pt=ot=qe=null,Uo=!1,fl=pc=0,$o=null}function Cn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?qe.memoizedState=Pt=a:Pt=Pt.next=a,Pt}function Dt(){if(ot===null){var a=qe.alternate;a=a!==null?a.memoizedState:null}else a=ot.next;var s=Pt===null?qe.memoizedState:Pt.next;if(s!==null)Pt=s,ot=a;else{if(a===null)throw qe.alternate===null?Error(r(467)):Error(r(310));ot=a,a={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Pt===null?qe.memoizedState=Pt=a:Pt=Pt.next=a}return Pt}function Hm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(a){var s=fl;return fl+=1,$o===null&&($o=[]),a=Fx($o,a,s),s=qe,(Pt===null?s.memoizedState:Pt.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?Db:kb),a}function gc(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return dl(a);if(a.$$typeof===N)return ln(a)}throw Error(r(438,String(a)))}function Gm(a){var s=null,u=qe.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var g=qe.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Hm(),qe.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(a),g=0;g<a;g++)u[g]=re;return s.index++,u}function ni(a,s){return typeof s=="function"?s(a):s}function yc(a){var s=Dt();return Km(s,ot,a)}function Km(a,s,u){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=u;var b=a.baseQueue,C=g.pending;if(C!==null){if(b!==null){var R=b.next;b.next=C.next,C.next=R}s.baseQueue=b=C,g.pending=null}if(C=a.baseState,b===null)a.memoizedState=C;else{s=b.next;var I=R=null,L=null,X=s,oe=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?(He&ce)===ce:(Vi&ce)===ce){var Q=X.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===Oo&&(oe=!0);else if((Vi&Q)===Q){X=X.next,Q===Oo&&(oe=!0);continue}else ce={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(I=L=ce,R=C):L=L.next=ce,qe.lanes|=Q,Wi|=Q;ce=X.action,Oa&&u(C,ce),C=X.hasEagerState?X.eagerState:u(C,ce)}else Q={lane:ce,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(I=L=Q,R=C):L=L.next=Q,qe.lanes|=ce,Wi|=ce;X=X.next}while(X!==null&&X!==s);if(L===null?R=C:L.next=I,!On(C,a.memoizedState)&&(zt=!0,oe&&(u=Lo,u!==null)))throw u;a.memoizedState=C,a.baseState=R,a.baseQueue=L,g.lastRenderedState=C}return b===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Ym(a){var s=Dt(),u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var g=u.dispatch,b=u.pending,C=s.memoizedState;if(b!==null){u.pending=null;var R=b=b.next;do C=a(C,R.action),R=R.next;while(R!==b);On(C,s.memoizedState)||(zt=!0),s.memoizedState=C,s.baseQueue===null&&(s.baseState=C),u.lastRenderedState=C}return[C,g]}function Qx(a,s,u){var g=qe,b=Dt(),C=Qe;if(C){if(u===void 0)throw Error(r(407));u=u()}else u=s();var R=!On((ot||b).memoizedState,u);R&&(b.memoizedState=u,zt=!0),b=b.queue;var I=tb.bind(null,g,b,a);if(ml(2048,8,I,[a]),b.getSnapshot!==s||R||Pt!==null&&Pt.memoizedState.tag&1){if(g.flags|=2048,Bo(9,vc(),eb.bind(null,g,b,u,s),null),mt===null)throw Error(r(349));C||(Vi&124)!==0||Zx(g,s,u)}return u}function Zx(a,s,u){a.flags|=16384,a={getSnapshot:s,value:u},s=qe.updateQueue,s===null?(s=Hm(),qe.updateQueue=s,s.stores=[a]):(u=s.stores,u===null?s.stores=[a]:u.push(a))}function eb(a,s,u,g){s.value=u,s.getSnapshot=g,nb(s)&&rb(a)}function tb(a,s,u){return u(function(){nb(s)&&rb(a)})}function nb(a){var s=a.getSnapshot;a=a.value;try{var u=s();return!On(a,u)}catch{return!0}}function rb(a){var s=Po(a,2);s!==null&&qn(s,a,2)}function Wm(a){var s=Cn();if(typeof a=="function"){var u=a;if(a=u(),Oa){yr(!0);try{u()}finally{yr(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:a},s}function ib(a,s,u,g){return a.baseState=u,Km(a,ot,typeof g=="function"?g:ni)}function MD(a,s,u,g,b){if(bc(a))throw Error(r(485));if(a=s.action,a!==null){var C={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){C.listeners.push(R)}};q.T!==null?u(!0):C.isTransition=!1,g(C),u=s.pending,u===null?(C.next=s.pending=C,ab(s,C)):(C.next=u.next,s.pending=u.next=C)}}function ab(a,s){var u=s.action,g=s.payload,b=a.state;if(s.isTransition){var C=q.T,R={};q.T=R;try{var I=u(b,g),L=q.S;L!==null&&L(R,I),ob(a,s,I)}catch(X){Jm(a,s,X)}finally{q.T=C}}else try{C=u(b,g),ob(a,s,C)}catch(X){Jm(a,s,X)}}function ob(a,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){sb(a,s,g)},function(g){return Jm(a,s,g)}):sb(a,s,u)}function sb(a,s,u){s.status="fulfilled",s.value=u,lb(s),a.state=u,s=a.pending,s!==null&&(u=s.next,u===s?a.pending=null:(u=u.next,s.next=u,ab(a,u)))}function Jm(a,s,u){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=u,lb(s),s=s.next;while(s!==g)}a.action=null}function lb(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function ub(a,s){return s}function cb(a,s){if(Qe){var u=mt.formState;if(u!==null){e:{var g=qe;if(Qe){if(wt){t:{for(var b=wt,C=Ir;b.nodeType!==8;){if(!C){b=null;break t}if(b=wr(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){wt=wr(b.nextSibling),g=b.data==="F!";break e}}Pa(g)}g=!1}g&&(s=u[0])}}return u=Cn(),u.memoizedState=u.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ub,lastRenderedState:s},u.queue=g,u=Nb.bind(null,qe,g),g.dispatch=u,g=Wm(!1),C=th.bind(null,qe,!1,g.queue),g=Cn(),b={state:s,dispatch:null,action:a,pending:null},g.queue=b,u=MD.bind(null,qe,b,C,u),b.dispatch=u,g.memoizedState=a,[s,u,!1]}function fb(a){var s=Dt();return db(s,ot,a)}function db(a,s,u){if(s=Km(a,s,ub)[0],a=yc(ni)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=dl(s)}catch(R){throw R===ol?fc:R}else g=s;s=Dt();var b=s.queue,C=b.dispatch;return u!==s.memoizedState&&(qe.flags|=2048,Bo(9,vc(),_D.bind(null,b,u),null)),[g,C,a]}function _D(a,s){a.action=s}function mb(a){var s=Dt(),u=ot;if(u!==null)return db(s,u,a);Dt(),s=s.memoizedState,u=Dt();var g=u.queue.dispatch;return u.memoizedState=a,[s,g,!1]}function Bo(a,s,u,g){return a={tag:a,create:u,deps:g,inst:s,next:null},s=qe.updateQueue,s===null&&(s=Hm(),qe.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=a.next=a:(g=u.next,u.next=a,a.next=g,s.lastEffect=a),a}function vc(){return{destroy:void 0,resource:void 0}}function hb(){return Dt().memoizedState}function xc(a,s,u,g){var b=Cn();g=g===void 0?null:g,qe.flags|=a,b.memoizedState=Bo(1|s,vc(),u,g)}function ml(a,s,u,g){var b=Dt();g=g===void 0?null:g;var C=b.memoizedState.inst;ot!==null&&g!==null&&Bm(g,ot.memoizedState.deps)?b.memoizedState=Bo(s,C,u,g):(qe.flags|=a,b.memoizedState=Bo(1|s,C,u,g))}function pb(a,s){xc(8390656,8,a,s)}function gb(a,s){ml(2048,8,a,s)}function yb(a,s){return ml(4,2,a,s)}function vb(a,s){return ml(4,4,a,s)}function xb(a,s){if(typeof s=="function"){a=a();var u=s(a);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function bb(a,s,u){u=u!=null?u.concat([a]):null,ml(4,4,xb.bind(null,s,a),u)}function Xm(){}function Sb(a,s){var u=Dt();s=s===void 0?null:s;var g=u.memoizedState;return s!==null&&Bm(s,g[1])?g[0]:(u.memoizedState=[a,s],a)}function Cb(a,s){var u=Dt();s=s===void 0?null:s;var g=u.memoizedState;if(s!==null&&Bm(s,g[1]))return g[0];if(g=a(),Oa){yr(!0);try{a()}finally{yr(!1)}}return u.memoizedState=[g,s],g}function Qm(a,s,u){return u===void 0||(Vi&1073741824)!==0?a.memoizedState=s:(a.memoizedState=u,a=AS(),qe.lanes|=a,Wi|=a,u)}function Tb(a,s,u,g){return On(u,s)?u:jo.current!==null?(a=Qm(a,u,g),On(a,s)||(zt=!0),a):(Vi&42)===0?(zt=!0,a.memoizedState=u):(a=AS(),qe.lanes|=a,Wi|=a,s)}function wb(a,s,u,g,b){var C=H.p;H.p=C!==0&&8>C?C:8;var R=q.T,I={};q.T=I,th(a,!1,s,u);try{var L=b(),X=q.S;if(X!==null&&X(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var oe=wD(L,g);hl(a,s,oe,Bn(a))}else hl(a,s,g,Bn(a))}catch(ce){hl(a,s,{then:function(){},status:"rejected",reason:ce},Bn())}finally{H.p=C,q.T=R}}function ND(){}function Zm(a,s,u,g){if(a.tag!==5)throw Error(r(476));var b=Ab(a).queue;wb(a,b,s,ae,u===null?ND:function(){return Eb(a),u(g)})}function Ab(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:ae},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:u},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function Eb(a){var s=Ab(a).next.queue;hl(a,s,{},Bn())}function eh(){return ln(Dl)}function Mb(){return Dt().memoizedState}function _b(){return Dt().memoizedState}function RD(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var u=Bn();a=Bi(u);var g=qi(s,a,u);g!==null&&(qn(g,s,u),ll(g,s,u)),s={cache:Rm()},a.payload=s;return}s=s.return}}function PD(a,s,u){var g=Bn();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},bc(a)?Rb(s,u):(u=bm(a,s,u,g),u!==null&&(qn(u,a,g),Pb(u,s,g)))}function Nb(a,s,u){var g=Bn();hl(a,s,u,g)}function hl(a,s,u,g){var b={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(bc(a))Rb(s,b);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=s.lastRenderedReducer,C!==null))try{var R=s.lastRenderedState,I=C(R,u);if(b.hasEagerState=!0,b.eagerState=I,On(I,R))return rc(a,s,b,0),mt===null&&nc(),!1}catch{}finally{}if(u=bm(a,s,b,g),u!==null)return qn(u,a,g),Pb(u,s,g),!0}return!1}function th(a,s,u,g){if(g={lane:2,revertLane:kh(),action:g,hasEagerState:!1,eagerState:null,next:null},bc(a)){if(s)throw Error(r(479))}else s=bm(a,u,g,2),s!==null&&qn(s,a,2)}function bc(a){var s=a.alternate;return a===qe||s!==null&&s===qe}function Rb(a,s){Uo=hc=!0;var u=a.pending;u===null?s.next=s:(s.next=u.next,u.next=s),a.pending=s}function Pb(a,s,u){if((u&4194048)!==0){var g=s.lanes;g&=a.pendingLanes,u|=g,s.lanes=u,Uu(a,u)}}var Sc={readContext:ln,use:gc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},Db={readContext:ln,use:gc,useCallback:function(a,s){return Cn().memoizedState=[a,s===void 0?null:s],a},useContext:ln,useEffect:pb,useImperativeHandle:function(a,s,u){u=u!=null?u.concat([a]):null,xc(4194308,4,xb.bind(null,s,a),u)},useLayoutEffect:function(a,s){return xc(4194308,4,a,s)},useInsertionEffect:function(a,s){xc(4,2,a,s)},useMemo:function(a,s){var u=Cn();s=s===void 0?null:s;var g=a();if(Oa){yr(!0);try{a()}finally{yr(!1)}}return u.memoizedState=[g,s],g},useReducer:function(a,s,u){var g=Cn();if(u!==void 0){var b=u(s);if(Oa){yr(!0);try{u(s)}finally{yr(!1)}}}else b=s;return g.memoizedState=g.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},g.queue=a,a=a.dispatch=PD.bind(null,qe,a),[g.memoizedState,a]},useRef:function(a){var s=Cn();return a={current:a},s.memoizedState=a},useState:function(a){a=Wm(a);var s=a.queue,u=Nb.bind(null,qe,s);return s.dispatch=u,[a.memoizedState,u]},useDebugValue:Xm,useDeferredValue:function(a,s){var u=Cn();return Qm(u,a,s)},useTransition:function(){var a=Wm(!1);return a=wb.bind(null,qe,a.queue,!0,!1),Cn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,u){var g=qe,b=Cn();if(Qe){if(u===void 0)throw Error(r(407));u=u()}else{if(u=s(),mt===null)throw Error(r(349));(He&124)!==0||Zx(g,s,u)}b.memoizedState=u;var C={value:u,getSnapshot:s};return b.queue=C,pb(tb.bind(null,g,C,a),[a]),g.flags|=2048,Bo(9,vc(),eb.bind(null,g,C,u,s),null),u},useId:function(){var a=Cn(),s=mt.identifierPrefix;if(Qe){var u=Zr,g=Qr;u=(g&~(1<<32-gn(g)-1)).toString(32)+u,s=""+s+"R"+u,u=pc++,0<u&&(s+="H"+u.toString(32)),s+=""}else u=AD++,s=""+s+"r"+u.toString(32)+"";return a.memoizedState=s},useHostTransitionStatus:eh,useFormState:cb,useActionState:cb,useOptimistic:function(a){var s=Cn();s.memoizedState=s.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=th.bind(null,qe,!0,u),u.dispatch=s,[a,s]},useMemoCache:Gm,useCacheRefresh:function(){return Cn().memoizedState=RD.bind(null,qe)}},kb={readContext:ln,use:gc,useCallback:Sb,useContext:ln,useEffect:gb,useImperativeHandle:bb,useInsertionEffect:yb,useLayoutEffect:vb,useMemo:Cb,useReducer:yc,useRef:hb,useState:function(){return yc(ni)},useDebugValue:Xm,useDeferredValue:function(a,s){var u=Dt();return Tb(u,ot.memoizedState,a,s)},useTransition:function(){var a=yc(ni)[0],s=Dt().memoizedState;return[typeof a=="boolean"?a:dl(a),s]},useSyncExternalStore:Qx,useId:Mb,useHostTransitionStatus:eh,useFormState:fb,useActionState:fb,useOptimistic:function(a,s){var u=Dt();return ib(u,ot,a,s)},useMemoCache:Gm,useCacheRefresh:_b},DD={readContext:ln,use:gc,useCallback:Sb,useContext:ln,useEffect:gb,useImperativeHandle:bb,useInsertionEffect:yb,useLayoutEffect:vb,useMemo:Cb,useReducer:Ym,useRef:hb,useState:function(){return Ym(ni)},useDebugValue:Xm,useDeferredValue:function(a,s){var u=Dt();return ot===null?Qm(u,a,s):Tb(u,ot.memoizedState,a,s)},useTransition:function(){var a=Ym(ni)[0],s=Dt().memoizedState;return[typeof a=="boolean"?a:dl(a),s]},useSyncExternalStore:Qx,useId:Mb,useHostTransitionStatus:eh,useFormState:mb,useActionState:mb,useOptimistic:function(a,s){var u=Dt();return ot!==null?ib(u,ot,a,s):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Gm,useCacheRefresh:_b},qo=null,pl=0;function Cc(a){var s=pl;return pl+=1,qo===null&&(qo=[]),Fx(qo,a,s)}function gl(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function Tc(a,s){throw s.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function Ib(a){var s=a._init;return s(a._payload)}function Ob(a){function s(F,z){if(a){var W=F.deletions;W===null?(F.deletions=[z],F.flags|=16):W.push(z)}}function u(F,z){if(!a)return null;for(;z!==null;)s(F,z),z=z.sibling;return null}function g(F){for(var z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function b(F,z){return F=Xr(F,z),F.index=0,F.sibling=null,F}function C(F,z,W){return F.index=W,a?(W=F.alternate,W!==null?(W=W.index,W<z?(F.flags|=67108866,z):W):(F.flags|=67108866,z)):(F.flags|=1048576,z)}function R(F){return a&&F.alternate===null&&(F.flags|=67108866),F}function I(F,z,W,le){return z===null||z.tag!==6?(z=Cm(W,F.mode,le),z.return=F,z):(z=b(z,W),z.return=F,z)}function L(F,z,W,le){var Te=W.type;return Te===T?oe(F,z,W.props.children,le,W.key):z!==null&&(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===B&&Ib(Te)===z.type)?(z=b(z,W.props),gl(z,W),z.return=F,z):(z=ac(W.type,W.key,W.props,null,F.mode,le),gl(z,W),z.return=F,z)}function X(F,z,W,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=Tm(W,F.mode,le),z.return=F,z):(z=b(z,W.children||[]),z.return=F,z)}function oe(F,z,W,le,Te){return z===null||z.tag!==7?(z=Ma(W,F.mode,le,Te),z.return=F,z):(z=b(z,W),z.return=F,z)}function ce(F,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Cm(""+z,F.mode,W),z.return=F,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case v:return W=ac(z.type,z.key,z.props,null,F.mode,W),gl(W,z),W.return=F,W;case S:return z=Tm(z,F.mode,W),z.return=F,z;case B:var le=z._init;return z=le(z._payload),ce(F,z,W)}if(ue(z)||V(z))return z=Ma(z,F.mode,W,null),z.return=F,z;if(typeof z.then=="function")return ce(F,Cc(z),W);if(z.$$typeof===N)return ce(F,uc(F,z),W);Tc(F,z)}return null}function Q(F,z,W,le){var Te=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Te!==null?null:I(F,z,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return W.key===Te?L(F,z,W,le):null;case S:return W.key===Te?X(F,z,W,le):null;case B:return Te=W._init,W=Te(W._payload),Q(F,z,W,le)}if(ue(W)||V(W))return Te!==null?null:oe(F,z,W,le,null);if(typeof W.then=="function")return Q(F,z,Cc(W),le);if(W.$$typeof===N)return Q(F,z,uc(F,W),le);Tc(F,W)}return null}function Z(F,z,W,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return F=F.get(W)||null,I(z,F,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case v:return F=F.get(le.key===null?W:le.key)||null,L(z,F,le,Te);case S:return F=F.get(le.key===null?W:le.key)||null,X(z,F,le,Te);case B:var Ve=le._init;return le=Ve(le._payload),Z(F,z,W,le,Te)}if(ue(le)||V(le))return F=F.get(W)||null,oe(z,F,le,Te,null);if(typeof le.then=="function")return Z(F,z,W,Cc(le),Te);if(le.$$typeof===N)return Z(F,z,W,uc(z,le),Te);Tc(z,le)}return null}function je(F,z,W,le){for(var Te=null,Ve=null,Ne=z,Ie=z=0,Ht=null;Ne!==null&&Ie<W.length;Ie++){Ne.index>Ie?(Ht=Ne,Ne=null):Ht=Ne.sibling;var Je=Q(F,Ne,W[Ie],le);if(Je===null){Ne===null&&(Ne=Ht);break}a&&Ne&&Je.alternate===null&&s(F,Ne),z=C(Je,z,Ie),Ve===null?Te=Je:Ve.sibling=Je,Ve=Je,Ne=Ht}if(Ie===W.length)return u(F,Ne),Qe&&Na(F,Ie),Te;if(Ne===null){for(;Ie<W.length;Ie++)Ne=ce(F,W[Ie],le),Ne!==null&&(z=C(Ne,z,Ie),Ve===null?Te=Ne:Ve.sibling=Ne,Ve=Ne);return Qe&&Na(F,Ie),Te}for(Ne=g(Ne);Ie<W.length;Ie++)Ht=Z(Ne,F,Ie,W[Ie],le),Ht!==null&&(a&&Ht.alternate!==null&&Ne.delete(Ht.key===null?Ie:Ht.key),z=C(Ht,z,Ie),Ve===null?Te=Ht:Ve.sibling=Ht,Ve=Ht);return a&&Ne.forEach(function(ia){return s(F,ia)}),Qe&&Na(F,Ie),Te}function ke(F,z,W,le){if(W==null)throw Error(r(151));for(var Te=null,Ve=null,Ne=z,Ie=z=0,Ht=null,Je=W.next();Ne!==null&&!Je.done;Ie++,Je=W.next()){Ne.index>Ie?(Ht=Ne,Ne=null):Ht=Ne.sibling;var ia=Q(F,Ne,Je.value,le);if(ia===null){Ne===null&&(Ne=Ht);break}a&&Ne&&ia.alternate===null&&s(F,Ne),z=C(ia,z,Ie),Ve===null?Te=ia:Ve.sibling=ia,Ve=ia,Ne=Ht}if(Je.done)return u(F,Ne),Qe&&Na(F,Ie),Te;if(Ne===null){for(;!Je.done;Ie++,Je=W.next())Je=ce(F,Je.value,le),Je!==null&&(z=C(Je,z,Ie),Ve===null?Te=Je:Ve.sibling=Je,Ve=Je);return Qe&&Na(F,Ie),Te}for(Ne=g(Ne);!Je.done;Ie++,Je=W.next())Je=Z(Ne,F,Ie,Je.value,le),Je!==null&&(a&&Je.alternate!==null&&Ne.delete(Je.key===null?Ie:Je.key),z=C(Je,z,Ie),Ve===null?Te=Je:Ve.sibling=Je,Ve=Je);return a&&Ne.forEach(function(kk){return s(F,kk)}),Qe&&Na(F,Ie),Te}function lt(F,z,W,le){if(typeof W=="object"&&W!==null&&W.type===T&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case v:e:{for(var Te=W.key;z!==null;){if(z.key===Te){if(Te=W.type,Te===T){if(z.tag===7){u(F,z.sibling),le=b(z,W.props.children),le.return=F,F=le;break e}}else if(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===B&&Ib(Te)===z.type){u(F,z.sibling),le=b(z,W.props),gl(le,W),le.return=F,F=le;break e}u(F,z);break}else s(F,z);z=z.sibling}W.type===T?(le=Ma(W.props.children,F.mode,le,W.key),le.return=F,F=le):(le=ac(W.type,W.key,W.props,null,F.mode,le),gl(le,W),le.return=F,F=le)}return R(F);case S:e:{for(Te=W.key;z!==null;){if(z.key===Te)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){u(F,z.sibling),le=b(z,W.children||[]),le.return=F,F=le;break e}else{u(F,z);break}else s(F,z);z=z.sibling}le=Tm(W,F.mode,le),le.return=F,F=le}return R(F);case B:return Te=W._init,W=Te(W._payload),lt(F,z,W,le)}if(ue(W))return je(F,z,W,le);if(V(W)){if(Te=V(W),typeof Te!="function")throw Error(r(150));return W=Te.call(W),ke(F,z,W,le)}if(typeof W.then=="function")return lt(F,z,Cc(W),le);if(W.$$typeof===N)return lt(F,z,uc(F,W),le);Tc(F,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(u(F,z.sibling),le=b(z,W),le.return=F,F=le):(u(F,z),le=Cm(W,F.mode,le),le.return=F,F=le),R(F)):u(F,z)}return function(F,z,W,le){try{pl=0;var Te=lt(F,z,W,le);return qo=null,Te}catch(Ne){if(Ne===ol||Ne===fc)throw Ne;var Ve=Ln(29,Ne,null,F.mode);return Ve.lanes=le,Ve.return=F,Ve}finally{}}}var Vo=Ob(!0),Lb=Ob(!1),rr=Y(null),Or=null;function zi(a){var s=a.alternate;he(Ut,Ut.current&1),he(rr,a),Or===null&&(s===null||jo.current!==null||s.memoizedState!==null)&&(Or=a)}function jb(a){if(a.tag===22){if(he(Ut,Ut.current),he(rr,a),Or===null){var s=a.alternate;s!==null&&s.memoizedState!==null&&(Or=a)}}else Fi()}function Fi(){he(Ut,Ut.current),he(rr,rr.current)}function ri(a){te(rr),Or===a&&(Or=null),te(Ut)}var Ut=Y(0);function wc(a){for(var s=a;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Hh(u)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function nh(a,s,u,g){s=a.memoizedState,u=u(g,s),u=u==null?s:m({},s,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var rh={enqueueSetState:function(a,s,u){a=a._reactInternals;var g=Bn(),b=Bi(g);b.payload=s,u!=null&&(b.callback=u),s=qi(a,b,g),s!==null&&(qn(s,a,g),ll(s,a,g))},enqueueReplaceState:function(a,s,u){a=a._reactInternals;var g=Bn(),b=Bi(g);b.tag=1,b.payload=s,u!=null&&(b.callback=u),s=qi(a,b,g),s!==null&&(qn(s,a,g),ll(s,a,g))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var u=Bn(),g=Bi(u);g.tag=2,s!=null&&(g.callback=s),s=qi(a,g,u),s!==null&&(qn(s,a,u),ll(s,a,u))}};function Ub(a,s,u,g,b,C,R){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,C,R):s.prototype&&s.prototype.isPureReactComponent?!Qs(u,g)||!Qs(b,C):!0}function $b(a,s,u,g){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==a&&rh.enqueueReplaceState(s,s.state,null)}function La(a,s){var u=s;if("ref"in s){u={};for(var g in s)g!=="ref"&&(u[g]=s[g])}if(a=a.defaultProps){u===s&&(u=m({},u));for(var b in a)u[b]===void 0&&(u[b]=a[b])}return u}var Ac=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Bb(a){Ac(a)}function qb(a){console.error(a)}function Vb(a){Ac(a)}function Ec(a,s){try{var u=a.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function zb(a,s,u){try{var g=a.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function ih(a,s,u){return u=Bi(u),u.tag=3,u.payload={element:null},u.callback=function(){Ec(a,s)},u}function Fb(a){return a=Bi(a),a.tag=3,a}function Hb(a,s,u,g){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var C=g.value;a.payload=function(){return b(C)},a.callback=function(){zb(s,u,g)}}var R=u.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(a.callback=function(){zb(s,u,g),typeof b!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var I=g.stack;this.componentDidCatch(g.value,{componentStack:I!==null?I:""})})}function kD(a,s,u,g,b){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=u.alternate,s!==null&&rl(s,u,b,!0),u=rr.current,u!==null){switch(u.tag){case 13:return Or===null?_h():u.alternate===null&&At===0&&(At=3),u.flags&=-257,u.flags|=65536,u.lanes=b,g===km?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([g]):s.add(g),Rh(a,g,b)),!1;case 22:return u.flags|=65536,g===km?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([g]):u.add(g)),Rh(a,g,b)),!1}throw Error(r(435,u.tag))}return Rh(a,g,b),_h(),!1}if(Qe)return s=rr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,g!==Em&&(a=Error(r(422),{cause:g}),nl(Zn(a,u)))):(g!==Em&&(s=Error(r(423),{cause:g}),nl(Zn(s,u))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,g=Zn(g,u),b=ih(a.stateNode,g,b),Lm(a,b),At!==4&&(At=2)),!1;var C=Error(r(520),{cause:g});if(C=Zn(C,u),Tl===null?Tl=[C]:Tl.push(C),At!==4&&(At=2),s===null)return!0;g=Zn(g,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,a=b&-b,u.lanes|=a,a=ih(u.stateNode,g,a),Lm(u,a),!1;case 1:if(s=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ji===null||!Ji.has(C))))return u.flags|=65536,b&=-b,u.lanes|=b,b=Fb(b),Hb(b,a,u,g),Lm(u,b),!1}u=u.return}while(u!==null);return!1}var Gb=Error(r(461)),zt=!1;function Xt(a,s,u,g){s.child=a===null?Lb(s,null,u,g):Vo(s,a.child,u,g)}function Kb(a,s,u,g,b){u=u.render;var C=s.ref;if("ref"in g){var R={};for(var I in g)I!=="ref"&&(R[I]=g[I])}else R=g;return ka(s),g=qm(a,s,u,R,C,b),I=Vm(),a!==null&&!zt?(zm(a,s,b),ii(a,s,b)):(Qe&&I&&wm(s),s.flags|=1,Xt(a,s,g,b),s.child)}function Yb(a,s,u,g,b){if(a===null){var C=u.type;return typeof C=="function"&&!Sm(C)&&C.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=C,Wb(a,s,C,g,b)):(a=ac(u.type,null,g,s,s.mode,b),a.ref=s.ref,a.return=s,s.child=a)}if(C=a.child,!dh(a,b)){var R=C.memoizedProps;if(u=u.compare,u=u!==null?u:Qs,u(R,g)&&a.ref===s.ref)return ii(a,s,b)}return s.flags|=1,a=Xr(C,g),a.ref=s.ref,a.return=s,s.child=a}function Wb(a,s,u,g,b){if(a!==null){var C=a.memoizedProps;if(Qs(C,g)&&a.ref===s.ref)if(zt=!1,s.pendingProps=g=C,dh(a,b))(a.flags&131072)!==0&&(zt=!0);else return s.lanes=a.lanes,ii(a,s,b)}return ah(a,s,u,g,b)}function Jb(a,s,u){var g=s.pendingProps,b=g.children,C=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((s.flags&128)!==0){if(g=C!==null?C.baseLanes|u:u,a!==null){for(b=s.child=a.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;s.childLanes=C&~g}else s.childLanes=0,s.child=null;return Xb(a,s,g,u)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&cc(s,C!==null?C.cachePool:null),C!==null?Wx(s,C):Um(),jb(s);else return s.lanes=s.childLanes=536870912,Xb(a,s,C!==null?C.baseLanes|u:u,u)}else C!==null?(cc(s,C.cachePool),Wx(s,C),Fi(),s.memoizedState=null):(a!==null&&cc(s,null),Um(),Fi());return Xt(a,s,b,u),s.child}function Xb(a,s,u,g){var b=Dm();return b=b===null?null:{parent:jt._currentValue,pool:b},s.memoizedState={baseLanes:u,cachePool:b},a!==null&&cc(s,null),Um(),jb(s),a!==null&&rl(a,s,g,!0),null}function Mc(a,s){var u=s.ref;if(u===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(s.flags|=4194816)}}function ah(a,s,u,g,b){return ka(s),u=qm(a,s,u,g,void 0,b),g=Vm(),a!==null&&!zt?(zm(a,s,b),ii(a,s,b)):(Qe&&g&&wm(s),s.flags|=1,Xt(a,s,u,b),s.child)}function Qb(a,s,u,g,b,C){return ka(s),s.updateQueue=null,u=Xx(s,g,u,b),Jx(a),g=Vm(),a!==null&&!zt?(zm(a,s,C),ii(a,s,C)):(Qe&&g&&wm(s),s.flags|=1,Xt(a,s,u,C),s.child)}function Zb(a,s,u,g,b){if(ka(s),s.stateNode===null){var C=Do,R=u.contextType;typeof R=="object"&&R!==null&&(C=ln(R)),C=new u(g,C),s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=rh,s.stateNode=C,C._reactInternals=s,C=s.stateNode,C.props=g,C.state=s.memoizedState,C.refs={},Im(s),R=u.contextType,C.context=typeof R=="object"&&R!==null?ln(R):Do,C.state=s.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(nh(s,u,R,g),C.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(R=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),R!==C.state&&rh.enqueueReplaceState(C,C.state,null),cl(s,g,C,b),ul(),C.state=s.memoizedState),typeof C.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(a===null){C=s.stateNode;var I=s.memoizedProps,L=La(u,I);C.props=L;var X=C.context,oe=u.contextType;R=Do,typeof oe=="object"&&oe!==null&&(R=ln(oe));var ce=u.getDerivedStateFromProps;oe=typeof ce=="function"||typeof C.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,oe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I||X!==R)&&$b(s,C,g,R),$i=!1;var Q=s.memoizedState;C.state=Q,cl(s,g,C,b),ul(),X=s.memoizedState,I||Q!==X||$i?(typeof ce=="function"&&(nh(s,u,ce,g),X=s.memoizedState),(L=$i||Ub(s,u,L,g,Q,X,R))?(oe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=X),C.props=g,C.state=X,C.context=R,g=L):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{C=s.stateNode,Om(a,s),R=s.memoizedProps,oe=La(u,R),C.props=oe,ce=s.pendingProps,Q=C.context,X=u.contextType,L=Do,typeof X=="object"&&X!==null&&(L=ln(X)),I=u.getDerivedStateFromProps,(X=typeof I=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(R!==ce||Q!==L)&&$b(s,C,g,L),$i=!1,Q=s.memoizedState,C.state=Q,cl(s,g,C,b),ul();var Z=s.memoizedState;R!==ce||Q!==Z||$i||a!==null&&a.dependencies!==null&&lc(a.dependencies)?(typeof I=="function"&&(nh(s,u,I,g),Z=s.memoizedState),(oe=$i||Ub(s,u,oe,g,Q,Z,L)||a!==null&&a.dependencies!==null&&lc(a.dependencies))?(X||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,Z,L),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,Z,L)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||R===a.memoizedProps&&Q===a.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&Q===a.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Z),C.props=g,C.state=Z,C.context=L,g=oe):(typeof C.componentDidUpdate!="function"||R===a.memoizedProps&&Q===a.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&Q===a.memoizedState||(s.flags|=1024),g=!1)}return C=g,Mc(a,s),g=(s.flags&128)!==0,C||g?(C=s.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:C.render(),s.flags|=1,a!==null&&g?(s.child=Vo(s,a.child,null,b),s.child=Vo(s,null,u,b)):Xt(a,s,u,b),s.memoizedState=C.state,a=s.child):a=ii(a,s,b),a}function eS(a,s,u,g){return tl(),s.flags|=256,Xt(a,s,u,g),s.child}var oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sh(a){return{baseLanes:a,cachePool:qx()}}function lh(a,s,u){return a=a!==null?a.childLanes&~u:0,s&&(a|=ir),a}function tS(a,s,u){var g=s.pendingProps,b=!1,C=(s.flags&128)!==0,R;if((R=C)||(R=a!==null&&a.memoizedState===null?!1:(Ut.current&2)!==0),R&&(b=!0,s.flags&=-129),R=(s.flags&32)!==0,s.flags&=-33,a===null){if(Qe){if(b?zi(s):Fi(),Qe){var I=wt,L;if(L=I){e:{for(L=I,I=Ir;L.nodeType!==8;){if(!I){I=null;break e}if(L=wr(L.nextSibling),L===null){I=null;break e}}I=L}I!==null?(s.memoizedState={dehydrated:I,treeContext:_a!==null?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},L=Ln(18,null,null,0),L.stateNode=I,L.return=s,s.child=L,yn=s,wt=null,L=!0):L=!1}L||Pa(s)}if(I=s.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Hh(I)?s.lanes=32:s.lanes=536870912,null;ri(s)}return I=g.children,g=g.fallback,b?(Fi(),b=s.mode,I=_c({mode:"hidden",children:I},b),g=Ma(g,b,u,null),I.return=s,g.return=s,I.sibling=g,s.child=I,b=s.child,b.memoizedState=sh(u),b.childLanes=lh(a,R,u),s.memoizedState=oh,g):(zi(s),uh(s,I))}if(L=a.memoizedState,L!==null&&(I=L.dehydrated,I!==null)){if(C)s.flags&256?(zi(s),s.flags&=-257,s=ch(a,s,u)):s.memoizedState!==null?(Fi(),s.child=a.child,s.flags|=128,s=null):(Fi(),b=g.fallback,I=s.mode,g=_c({mode:"visible",children:g.children},I),b=Ma(b,I,u,null),b.flags|=2,g.return=s,b.return=s,g.sibling=b,s.child=g,Vo(s,a.child,null,u),g=s.child,g.memoizedState=sh(u),g.childLanes=lh(a,R,u),s.memoizedState=oh,s=b);else if(zi(s),Hh(I)){if(R=I.nextSibling&&I.nextSibling.dataset,R)var X=R.dgst;R=X,g=Error(r(419)),g.stack="",g.digest=R,nl({value:g,source:null,stack:null}),s=ch(a,s,u)}else if(zt||rl(a,s,u,!1),R=(u&a.childLanes)!==0,zt||R){if(R=mt,R!==null&&(g=u&-u,g=(g&42)!==0?1:$s(g),g=(g&(R.suspendedLanes|u))!==0?0:g,g!==0&&g!==L.retryLane))throw L.retryLane=g,Po(a,g),qn(R,a,g),Gb;I.data==="$?"||_h(),s=ch(a,s,u)}else I.data==="$?"?(s.flags|=192,s.child=a.child,s=null):(a=L.treeContext,wt=wr(I.nextSibling),yn=s,Qe=!0,Ra=null,Ir=!1,a!==null&&(tr[nr++]=Qr,tr[nr++]=Zr,tr[nr++]=_a,Qr=a.id,Zr=a.overflow,_a=s),s=uh(s,g.children),s.flags|=4096);return s}return b?(Fi(),b=g.fallback,I=s.mode,L=a.child,X=L.sibling,g=Xr(L,{mode:"hidden",children:g.children}),g.subtreeFlags=L.subtreeFlags&65011712,X!==null?b=Xr(X,b):(b=Ma(b,I,u,null),b.flags|=2),b.return=s,g.return=s,g.sibling=b,s.child=g,g=b,b=s.child,I=a.child.memoizedState,I===null?I=sh(u):(L=I.cachePool,L!==null?(X=jt._currentValue,L=L.parent!==X?{parent:X,pool:X}:L):L=qx(),I={baseLanes:I.baseLanes|u,cachePool:L}),b.memoizedState=I,b.childLanes=lh(a,R,u),s.memoizedState=oh,g):(zi(s),u=a.child,a=u.sibling,u=Xr(u,{mode:"visible",children:g.children}),u.return=s,u.sibling=null,a!==null&&(R=s.deletions,R===null?(s.deletions=[a],s.flags|=16):R.push(a)),s.child=u,s.memoizedState=null,u)}function uh(a,s){return s=_c({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function _c(a,s){return a=Ln(22,a,null,s),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ch(a,s,u){return Vo(s,a.child,null,u),a=uh(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function nS(a,s,u){a.lanes|=s;var g=a.alternate;g!==null&&(g.lanes|=s),_m(a.return,s,u)}function fh(a,s,u,g,b){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:b}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=u,C.tailMode=b)}function rS(a,s,u){var g=s.pendingProps,b=g.revealOrder,C=g.tail;if(Xt(a,s,g.children,u),g=Ut.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&nS(a,u,s);else if(a.tag===19)nS(a,u,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(he(Ut,g),b){case"forwards":for(u=s.child,b=null;u!==null;)a=u.alternate,a!==null&&wc(a)===null&&(b=u),u=u.sibling;u=b,u===null?(b=s.child,s.child=null):(b=u.sibling,u.sibling=null),fh(s,!1,b,u,C);break;case"backwards":for(u=null,b=s.child,s.child=null;b!==null;){if(a=b.alternate,a!==null&&wc(a)===null){s.child=b;break}a=b.sibling,b.sibling=u,u=b,b=a}fh(s,!0,u,null,C);break;case"together":fh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ii(a,s,u){if(a!==null&&(s.dependencies=a.dependencies),Wi|=s.lanes,(u&s.childLanes)===0)if(a!==null){if(rl(a,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,u=Xr(a,a.pendingProps),s.child=u,u.return=s;a.sibling!==null;)a=a.sibling,u=u.sibling=Xr(a,a.pendingProps),u.return=s;u.sibling=null}return s.child}function dh(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&lc(a)))}function ID(a,s,u){switch(s.tag){case 3:$e(s,s.stateNode.containerInfo),Ui(s,jt,a.memoizedState.cache),tl();break;case 27:case 5:Le(s);break;case 4:$e(s,s.stateNode.containerInfo);break;case 10:Ui(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(zi(s),s.flags|=128,null):(u&s.child.childLanes)!==0?tS(a,s,u):(zi(s),a=ii(a,s,u),a!==null?a.sibling:null);zi(s);break;case 19:var b=(a.flags&128)!==0;if(g=(u&s.childLanes)!==0,g||(rl(a,s,u,!1),g=(u&s.childLanes)!==0),b){if(g)return rS(a,s,u);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),he(Ut,Ut.current),g)break;return null;case 22:case 23:return s.lanes=0,Jb(a,s,u);case 24:Ui(s,jt,a.memoizedState.cache)}return ii(a,s,u)}function iS(a,s,u){if(a!==null)if(a.memoizedProps!==s.pendingProps)zt=!0;else{if(!dh(a,u)&&(s.flags&128)===0)return zt=!1,ID(a,s,u);zt=(a.flags&131072)!==0}else zt=!1,Qe&&(s.flags&1048576)!==0&&Ix(s,sc,s.index);switch(s.lanes=0,s.tag){case 16:e:{a=s.pendingProps;var g=s.elementType,b=g._init;if(g=b(g._payload),s.type=g,typeof g=="function")Sm(g)?(a=La(g,a),s.tag=1,s=Zb(null,s,g,a,u)):(s.tag=0,s=ah(null,s,g,a,u));else{if(g!=null){if(b=g.$$typeof,b===O){s.tag=11,s=Kb(null,s,g,a,u);break e}else if(b===k){s.tag=14,s=Yb(null,s,g,a,u);break e}}throw s=ee(g)||g,Error(r(306,s,""))}}return s;case 0:return ah(a,s,s.type,s.pendingProps,u);case 1:return g=s.type,b=La(g,s.pendingProps),Zb(a,s,g,b,u);case 3:e:{if($e(s,s.stateNode.containerInfo),a===null)throw Error(r(387));g=s.pendingProps;var C=s.memoizedState;b=C.element,Om(a,s),cl(s,g,null,u);var R=s.memoizedState;if(g=R.cache,Ui(s,jt,g),g!==C.cache&&Nm(s,[jt],u,!0),ul(),g=R.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:R.cache},s.updateQueue.baseState=C,s.memoizedState=C,s.flags&256){s=eS(a,s,g,u);break e}else if(g!==b){b=Zn(Error(r(424)),s),nl(b),s=eS(a,s,g,u);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(wt=wr(a.firstChild),yn=s,Qe=!0,Ra=null,Ir=!0,u=Lb(s,null,g,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(tl(),g===b){s=ii(a,s,u);break e}Xt(a,s,g,u)}s=s.child}return s;case 26:return Mc(a,s),a===null?(u=lC(s.type,null,s.pendingProps,null))?s.memoizedState=u:Qe||(u=s.type,a=s.pendingProps,g=Vc(Ae.current).createElement(u),g[Mt]=s,g[on]=a,Zt(g,u,a),Rt(g),s.stateNode=g):s.memoizedState=lC(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return Le(s),a===null&&Qe&&(g=s.stateNode=aC(s.type,s.pendingProps,Ae.current),yn=s,Ir=!0,b=wt,Zi(s.type)?(Gh=b,wt=wr(g.firstChild)):wt=b),Xt(a,s,s.pendingProps.children,u),Mc(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Qe&&((b=g=wt)&&(g=lk(g,s.type,s.pendingProps,Ir),g!==null?(s.stateNode=g,yn=s,wt=wr(g.firstChild),Ir=!1,b=!0):b=!1),b||Pa(s)),Le(s),b=s.type,C=s.pendingProps,R=a!==null?a.memoizedProps:null,g=C.children,Vh(b,C)?g=null:R!==null&&Vh(b,R)&&(s.flags|=32),s.memoizedState!==null&&(b=qm(a,s,ED,null,null,u),Dl._currentValue=b),Mc(a,s),Xt(a,s,g,u),s.child;case 6:return a===null&&Qe&&((a=u=wt)&&(u=uk(u,s.pendingProps,Ir),u!==null?(s.stateNode=u,yn=s,wt=null,a=!0):a=!1),a||Pa(s)),null;case 13:return tS(a,s,u);case 4:return $e(s,s.stateNode.containerInfo),g=s.pendingProps,a===null?s.child=Vo(s,null,g,u):Xt(a,s,g,u),s.child;case 11:return Kb(a,s,s.type,s.pendingProps,u);case 7:return Xt(a,s,s.pendingProps,u),s.child;case 8:return Xt(a,s,s.pendingProps.children,u),s.child;case 12:return Xt(a,s,s.pendingProps.children,u),s.child;case 10:return g=s.pendingProps,Ui(s,s.type,g.value),Xt(a,s,g.children,u),s.child;case 9:return b=s.type._context,g=s.pendingProps.children,ka(s),b=ln(b),g=g(b),s.flags|=1,Xt(a,s,g,u),s.child;case 14:return Yb(a,s,s.type,s.pendingProps,u);case 15:return Wb(a,s,s.type,s.pendingProps,u);case 19:return rS(a,s,u);case 31:return g=s.pendingProps,u=s.mode,g={mode:g.mode,children:g.children},a===null?(u=_c(g,u),u.ref=s.ref,s.child=u,u.return=s,s=u):(u=Xr(a.child,g),u.ref=s.ref,s.child=u,u.return=s,s=u),s;case 22:return Jb(a,s,u);case 24:return ka(s),g=ln(jt),a===null?(b=Dm(),b===null&&(b=mt,C=Rm(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=u),b=C),s.memoizedState={parent:g,cache:b},Im(s),Ui(s,jt,b)):((a.lanes&u)!==0&&(Om(a,s),cl(s,null,null,u),ul()),b=a.memoizedState,C=s.memoizedState,b.parent!==g?(b={parent:g,cache:g},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),Ui(s,jt,g)):(g=C.cache,Ui(s,jt,g),g!==b.cache&&Nm(s,[jt],u,!0))),Xt(a,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ai(a){a.flags|=4}function aS(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!mC(s)){if(s=rr.current,s!==null&&((He&4194048)===He?Or!==null:(He&62914560)!==He&&(He&536870912)===0||s!==Or))throw sl=km,Vx;a.flags|=8192}}function Nc(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?Lu():536870912,a.lanes|=s,Go|=s)}function yl(a,s){if(!Qe)switch(a.tailMode){case"hidden":s=a.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Tt(a){var s=a.alternate!==null&&a.alternate.child===a.child,u=0,g=0;if(s)for(var b=a.child;b!==null;)u|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)u|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=g,a.childLanes=u,s}function OD(a,s,u){var g=s.pendingProps;switch(Am(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return u=s.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),ti(jt),ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(el(s)?ai(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jx())),Tt(s),null;case 26:return u=s.memoizedState,a===null?(ai(s),u!==null?(Tt(s),aS(s,u)):(Tt(s),s.flags&=-16777217)):u?u!==a.memoizedState?(ai(s),Tt(s),aS(s,u)):(Tt(s),s.flags&=-16777217):(a.memoizedProps!==g&&ai(s),Tt(s),s.flags&=-16777217),null;case 27:Ee(s),u=Ae.current;var b=s.type;if(a!==null&&s.stateNode!=null)a.memoizedProps!==g&&ai(s);else{if(!g){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}a=Ce.current,el(s)?Ox(s):(a=aC(b,g,u),s.stateNode=a,ai(s))}return Tt(s),null;case 5:if(Ee(s),u=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==g&&ai(s);else{if(!g){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}if(a=Ce.current,el(s))Ox(s);else{switch(b=Vc(Ae.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?b.createElement("select",{is:g.is}):b.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?b.createElement(u,{is:g.is}):b.createElement(u)}}a[Mt]=s,a[on]=g;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=a;e:switch(Zt(a,u,g),u){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ai(s)}}return Tt(s),s.flags&=-16777217,null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==g&&ai(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(r(166));if(a=Ae.current,el(s)){if(a=s.stateNode,u=s.memoizedProps,g=null,b=yn,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}a[Mt]=s,a=!!(a.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||QS(a.nodeValue,u)),a||Pa(s)}else a=Vc(a).createTextNode(g),a[Mt]=s,s.stateNode=a}return Tt(s),null;case 13:if(g=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=el(s),g!==null&&g.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Mt]=s}else tl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),b=!1}else b=jx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(ri(s),s):(ri(s),null)}if(ri(s),(s.flags&128)!==0)return s.lanes=u,s;if(u=g!==null,a=a!==null&&a.memoizedState!==null,u){g=s.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool);var C=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==b&&(g.flags|=2048)}return u!==a&&u&&(s.child.flags|=8192),Nc(s,s.updateQueue),Tt(s),null;case 4:return ve(),a===null&&jh(s.stateNode.containerInfo),Tt(s),null;case 10:return ti(s.type),Tt(s),null;case 19:if(te(Ut),b=s.memoizedState,b===null)return Tt(s),null;if(g=(s.flags&128)!==0,C=b.rendering,C===null)if(g)yl(b,!1);else{if(At!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(C=wc(a),C!==null){for(s.flags|=128,yl(b,!1),a=C.updateQueue,s.updateQueue=a,Nc(s,a),s.subtreeFlags=0,a=u,u=s.child;u!==null;)kx(u,a),u=u.sibling;return he(Ut,Ut.current&1|2),s.child}a=a.sibling}b.tail!==null&&et()>Dc&&(s.flags|=128,g=!0,yl(b,!1),s.lanes=4194304)}else{if(!g)if(a=wc(C),a!==null){if(s.flags|=128,g=!0,a=a.updateQueue,s.updateQueue=a,Nc(s,a),yl(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!Qe)return Tt(s),null}else 2*et()-b.renderingStartTime>Dc&&u!==536870912&&(s.flags|=128,g=!0,yl(b,!1),s.lanes=4194304);b.isBackwards?(C.sibling=s.child,s.child=C):(a=b.last,a!==null?a.sibling=C:s.child=C,b.last=C)}return b.tail!==null?(s=b.tail,b.rendering=s,b.tail=s.sibling,b.renderingStartTime=et(),s.sibling=null,a=Ut.current,he(Ut,g?a&1|2:a&1),s):(Tt(s),null);case 22:case 23:return ri(s),$m(),g=s.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(u&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),u=s.updateQueue,u!==null&&Nc(s,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==u&&(s.flags|=2048),a!==null&&te(Ia),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ti(jt),Tt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function LD(a,s){switch(Am(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return ti(jt),ve(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return Ee(s),null;case 13:if(ri(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));tl()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return te(Ut),null;case 4:return ve(),null;case 10:return ti(s.type),null;case 22:case 23:return ri(s),$m(),a!==null&&te(Ia),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return ti(jt),null;case 25:return null;default:return null}}function oS(a,s){switch(Am(s),s.tag){case 3:ti(jt),ve();break;case 26:case 27:case 5:Ee(s);break;case 4:ve();break;case 13:ri(s);break;case 19:te(Ut);break;case 10:ti(s.type);break;case 22:case 23:ri(s),$m(),a!==null&&te(Ia);break;case 24:ti(jt)}}function vl(a,s){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var b=g.next;u=b;do{if((u.tag&a)===a){g=void 0;var C=u.create,R=u.inst;g=C(),R.destroy=g}u=u.next}while(u!==b)}}catch(I){ft(s,s.return,I)}}function Hi(a,s,u){try{var g=s.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var C=b.next;g=C;do{if((g.tag&a)===a){var R=g.inst,I=R.destroy;if(I!==void 0){R.destroy=void 0,b=s;var L=u,X=I;try{X()}catch(oe){ft(b,L,oe)}}}g=g.next}while(g!==C)}}catch(oe){ft(s,s.return,oe)}}function sS(a){var s=a.updateQueue;if(s!==null){var u=a.stateNode;try{Yx(s,u)}catch(g){ft(a,a.return,g)}}}function lS(a,s,u){u.props=La(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(g){ft(a,s,g)}}function xl(a,s){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof u=="function"?a.refCleanup=u(g):u.current=g}}catch(b){ft(a,s,b)}}function Lr(a,s){var u=a.ref,g=a.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(b){ft(a,s,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){ft(a,s,b)}else u.current=null}function uS(a){var s=a.type,u=a.memoizedProps,g=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(b){ft(a,a.return,b)}}function mh(a,s,u){try{var g=a.stateNode;rk(g,a.type,u,s),g[on]=s}catch(b){ft(a,a.return,b)}}function cS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Zi(a.type)||a.tag===4}function hh(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||cS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Zi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ph(a,s,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(a),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=qc));else if(g!==4&&(g===27&&Zi(a.type)&&(u=a.stateNode,s=null),a=a.child,a!==null))for(ph(a,s,u),a=a.sibling;a!==null;)ph(a,s,u),a=a.sibling}function Rc(a,s,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,s?u.insertBefore(a,s):u.appendChild(a);else if(g!==4&&(g===27&&Zi(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Rc(a,s,u),a=a.sibling;a!==null;)Rc(a,s,u),a=a.sibling}function fS(a){var s=a.stateNode,u=a.memoizedProps;try{for(var g=a.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);Zt(s,g,u),s[Mt]=a,s[on]=u}catch(C){ft(a,a.return,C)}}var oi=!1,Nt=!1,gh=!1,dS=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function jD(a,s){if(a=a.containerInfo,Bh=Yc,a=Tx(a),hm(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var b=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break e}var R=0,I=-1,L=-1,X=0,oe=0,ce=a,Q=null;t:for(;;){for(var Z;ce!==u||b!==0&&ce.nodeType!==3||(I=R+b),ce!==C||g!==0&&ce.nodeType!==3||(L=R+g),ce.nodeType===3&&(R+=ce.nodeValue.length),(Z=ce.firstChild)!==null;)Q=ce,ce=Z;for(;;){if(ce===a)break t;if(Q===u&&++X===b&&(I=R),Q===C&&++oe===g&&(L=R),(Z=ce.nextSibling)!==null)break;ce=Q,Q=ce.parentNode}ce=Z}u=I===-1||L===-1?null:{start:I,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(qh={focusedElem:a,selectionRange:u},Yc=!1,Ft=s;Ft!==null;)if(s=Ft,a=s.child,(s.subtreeFlags&1024)!==0&&a!==null)a.return=s,Ft=a;else for(;Ft!==null;){switch(s=Ft,C=s.alternate,a=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,u=s,b=C.memoizedProps,C=C.memoizedState,g=u.stateNode;try{var je=La(u.type,b,u.elementType===u.type);a=g.getSnapshotBeforeUpdate(je,C),g.__reactInternalSnapshotBeforeUpdate=a}catch(ke){ft(u,u.return,ke)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,u=a.nodeType,u===9)Fh(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Fh(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,Ft=a;break}Ft=s.return}}function mS(a,s,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Gi(a,u),g&4&&vl(5,u);break;case 1:if(Gi(a,u),g&4)if(a=u.stateNode,s===null)try{a.componentDidMount()}catch(R){ft(u,u.return,R)}else{var b=La(u.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(b,s,a.__reactInternalSnapshotBeforeUpdate)}catch(R){ft(u,u.return,R)}}g&64&&sS(u),g&512&&xl(u,u.return);break;case 3:if(Gi(a,u),g&64&&(a=u.updateQueue,a!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{Yx(a,s)}catch(R){ft(u,u.return,R)}}break;case 27:s===null&&g&4&&fS(u);case 26:case 5:Gi(a,u),s===null&&g&4&&uS(u),g&512&&xl(u,u.return);break;case 12:Gi(a,u);break;case 13:Gi(a,u),g&4&&gS(a,u),g&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=GD.bind(null,u),ck(a,u))));break;case 22:if(g=u.memoizedState!==null||oi,!g){s=s!==null&&s.memoizedState!==null||Nt,b=oi;var C=Nt;oi=g,(Nt=s)&&!C?Ki(a,u,(u.subtreeFlags&8772)!==0):Gi(a,u),oi=b,Nt=C}break;case 30:break;default:Gi(a,u)}}function hS(a){var s=a.alternate;s!==null&&(a.alternate=null,hS(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&bo(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var xt=null,Tn=!1;function si(a,s,u){for(u=u.child;u!==null;)pS(a,s,u),u=u.sibling}function pS(a,s,u){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Pr,u)}catch{}switch(u.tag){case 26:Nt||Lr(u,s),si(a,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Nt||Lr(u,s);var g=xt,b=Tn;Zi(u.type)&&(xt=u.stateNode,Tn=!1),si(a,s,u),_l(u.stateNode),xt=g,Tn=b;break;case 5:Nt||Lr(u,s);case 6:if(g=xt,b=Tn,xt=null,si(a,s,u),xt=g,Tn=b,xt!==null)if(Tn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(u.stateNode)}catch(C){ft(u,s,C)}else try{xt.removeChild(u.stateNode)}catch(C){ft(u,s,C)}break;case 18:xt!==null&&(Tn?(a=xt,rC(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Ll(a)):rC(xt,u.stateNode));break;case 4:g=xt,b=Tn,xt=u.stateNode.containerInfo,Tn=!0,si(a,s,u),xt=g,Tn=b;break;case 0:case 11:case 14:case 15:Nt||Hi(2,u,s),Nt||Hi(4,u,s),si(a,s,u);break;case 1:Nt||(Lr(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"&&lS(u,s,g)),si(a,s,u);break;case 21:si(a,s,u);break;case 22:Nt=(g=Nt)||u.memoizedState!==null,si(a,s,u),Nt=g;break;default:si(a,s,u)}}function gS(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ll(a)}catch(u){ft(s,s.return,u)}}function UD(a){switch(a.tag){case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new dS),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new dS),s;default:throw Error(r(435,a.tag))}}function yh(a,s){var u=UD(a);s.forEach(function(g){var b=KD.bind(null,a,g);u.has(g)||(u.add(g),g.then(b,b))})}function jn(a,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var b=u[g],C=a,R=s,I=R;e:for(;I!==null;){switch(I.tag){case 27:if(Zi(I.type)){xt=I.stateNode,Tn=!1;break e}break;case 5:xt=I.stateNode,Tn=!1;break e;case 3:case 4:xt=I.stateNode.containerInfo,Tn=!0;break e}I=I.return}if(xt===null)throw Error(r(160));pS(C,R,b),xt=null,Tn=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)yS(s,a),s=s.sibling}var Tr=null;function yS(a,s){var u=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:jn(s,a),Un(a),g&4&&(Hi(3,a,a.return),vl(3,a),Hi(5,a,a.return));break;case 1:jn(s,a),Un(a),g&512&&(Nt||u===null||Lr(u,u.return)),g&64&&oi&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var b=Tr;if(jn(s,a),Un(a),g&512&&(Nt||u===null||Lr(u,u.return)),g&4){var C=u!==null?u.memoizedState:null;if(g=a.memoizedState,u===null)if(g===null)if(a.stateNode===null){e:{g=a.type,u=a.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":C=b.getElementsByTagName("title")[0],(!C||C[Sa]||C[Mt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(g),b.head.insertBefore(C,b.querySelector("head > title"))),Zt(C,g,u),C[Mt]=a,Rt(C),g=C;break e;case"link":var R=fC("link","href",b).get(g+(u.href||""));if(R){for(var I=0;I<R.length;I++)if(C=R[I],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){R.splice(I,1);break t}}C=b.createElement(g),Zt(C,g,u),b.head.appendChild(C);break;case"meta":if(R=fC("meta","content",b).get(g+(u.content||""))){for(I=0;I<R.length;I++)if(C=R[I],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){R.splice(I,1);break t}}C=b.createElement(g),Zt(C,g,u),b.head.appendChild(C);break;default:throw Error(r(468,g))}C[Mt]=a,Rt(C),g=C}a.stateNode=g}else dC(b,a.type,a.stateNode);else a.stateNode=cC(b,g,a.memoizedProps);else C!==g?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,g===null?dC(b,a.type,a.stateNode):cC(b,g,a.memoizedProps)):g===null&&a.stateNode!==null&&mh(a,a.memoizedProps,u.memoizedProps)}break;case 27:jn(s,a),Un(a),g&512&&(Nt||u===null||Lr(u,u.return)),u!==null&&g&4&&mh(a,a.memoizedProps,u.memoizedProps);break;case 5:if(jn(s,a),Un(a),g&512&&(Nt||u===null||Lr(u,u.return)),a.flags&32){b=a.stateNode;try{Oi(b,"")}catch(Z){ft(a,a.return,Z)}}g&4&&a.stateNode!=null&&(b=a.memoizedProps,mh(a,b,u!==null?u.memoizedProps:b)),g&1024&&(gh=!0);break;case 6:if(jn(s,a),Un(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,u=a.stateNode;try{u.nodeValue=g}catch(Z){ft(a,a.return,Z)}}break;case 3:if(Hc=null,b=Tr,Tr=zc(s.containerInfo),jn(s,a),Tr=b,Un(a),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Ll(s.containerInfo)}catch(Z){ft(a,a.return,Z)}gh&&(gh=!1,vS(a));break;case 4:g=Tr,Tr=zc(a.stateNode.containerInfo),jn(s,a),Un(a),Tr=g;break;case 12:jn(s,a),Un(a);break;case 13:jn(s,a),Un(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Th=et()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,yh(a,g)));break;case 22:b=a.memoizedState!==null;var L=u!==null&&u.memoizedState!==null,X=oi,oe=Nt;if(oi=X||b,Nt=oe||L,jn(s,a),Nt=oe,oi=X,Un(a),g&8192)e:for(s=a.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(u===null||L||oi||Nt||ja(a)),u=null,s=a;;){if(s.tag===5||s.tag===26){if(u===null){L=u=s;try{if(C=L.stateNode,b)R=C.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{I=L.stateNode;var ce=L.memoizedProps.style,Q=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){ft(L,L.return,Z)}}}else if(s.tag===6){if(u===null){L=s;try{L.stateNode.nodeValue=b?"":L.memoizedProps}catch(Z){ft(L,L.return,Z)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=a.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,yh(a,u))));break;case 19:jn(s,a),Un(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,yh(a,g)));break;case 30:break;case 21:break;default:jn(s,a),Un(a)}}function Un(a){var s=a.flags;if(s&2){try{for(var u,g=a.return;g!==null;){if(cS(g)){u=g;break}g=g.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var b=u.stateNode,C=hh(a);Rc(a,C,b);break;case 5:var R=u.stateNode;u.flags&32&&(Oi(R,""),u.flags&=-33);var I=hh(a);Rc(a,I,R);break;case 3:case 4:var L=u.stateNode.containerInfo,X=hh(a);ph(a,X,L);break;default:throw Error(r(161))}}catch(oe){ft(a,a.return,oe)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function vS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;vS(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function Gi(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)mS(a,s.alternate,s),s=s.sibling}function ja(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:Hi(4,s,s.return),ja(s);break;case 1:Lr(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&lS(s,s.return,u),ja(s);break;case 27:_l(s.stateNode);case 26:case 5:Lr(s,s.return),ja(s);break;case 22:s.memoizedState===null&&ja(s);break;case 30:ja(s);break;default:ja(s)}a=a.sibling}}function Ki(a,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,b=a,C=s,R=C.flags;switch(C.tag){case 0:case 11:case 15:Ki(b,C,u),vl(4,C);break;case 1:if(Ki(b,C,u),g=C,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(X){ft(g,g.return,X)}if(g=C,b=g.updateQueue,b!==null){var I=g.stateNode;try{var L=b.shared.hiddenCallbacks;if(L!==null)for(b.shared.hiddenCallbacks=null,b=0;b<L.length;b++)Kx(L[b],I)}catch(X){ft(g,g.return,X)}}u&&R&64&&sS(C),xl(C,C.return);break;case 27:fS(C);case 26:case 5:Ki(b,C,u),u&&g===null&&R&4&&uS(C),xl(C,C.return);break;case 12:Ki(b,C,u);break;case 13:Ki(b,C,u),u&&R&4&&gS(b,C);break;case 22:C.memoizedState===null&&Ki(b,C,u),xl(C,C.return);break;case 30:break;default:Ki(b,C,u)}s=s.sibling}}function vh(a,s){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&il(u))}function xh(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&il(a))}function jr(a,s,u,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xS(a,s,u,g),s=s.sibling}function xS(a,s,u,g){var b=s.flags;switch(s.tag){case 0:case 11:case 15:jr(a,s,u,g),b&2048&&vl(9,s);break;case 1:jr(a,s,u,g);break;case 3:jr(a,s,u,g),b&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&il(a)));break;case 12:if(b&2048){jr(a,s,u,g),a=s.stateNode;try{var C=s.memoizedProps,R=C.id,I=C.onPostCommit;typeof I=="function"&&I(R,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(L){ft(s,s.return,L)}}else jr(a,s,u,g);break;case 13:jr(a,s,u,g);break;case 23:break;case 22:C=s.stateNode,R=s.alternate,s.memoizedState!==null?C._visibility&2?jr(a,s,u,g):bl(a,s):C._visibility&2?jr(a,s,u,g):(C._visibility|=2,zo(a,s,u,g,(s.subtreeFlags&10256)!==0)),b&2048&&vh(R,s);break;case 24:jr(a,s,u,g),b&2048&&xh(s.alternate,s);break;default:jr(a,s,u,g)}}function zo(a,s,u,g,b){for(b=b&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var C=a,R=s,I=u,L=g,X=R.flags;switch(R.tag){case 0:case 11:case 15:zo(C,R,I,L,b),vl(8,R);break;case 23:break;case 22:var oe=R.stateNode;R.memoizedState!==null?oe._visibility&2?zo(C,R,I,L,b):bl(C,R):(oe._visibility|=2,zo(C,R,I,L,b)),b&&X&2048&&vh(R.alternate,R);break;case 24:zo(C,R,I,L,b),b&&X&2048&&xh(R.alternate,R);break;default:zo(C,R,I,L,b)}s=s.sibling}}function bl(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=a,g=s,b=g.flags;switch(g.tag){case 22:bl(u,g),b&2048&&vh(g.alternate,g);break;case 24:bl(u,g),b&2048&&xh(g.alternate,g);break;default:bl(u,g)}s=s.sibling}}var Sl=8192;function Fo(a){if(a.subtreeFlags&Sl)for(a=a.child;a!==null;)bS(a),a=a.sibling}function bS(a){switch(a.tag){case 26:Fo(a),a.flags&Sl&&a.memoizedState!==null&&Tk(Tr,a.memoizedState,a.memoizedProps);break;case 5:Fo(a);break;case 3:case 4:var s=Tr;Tr=zc(a.stateNode.containerInfo),Fo(a),Tr=s;break;case 22:a.memoizedState===null&&(s=a.alternate,s!==null&&s.memoizedState!==null?(s=Sl,Sl=16777216,Fo(a),Sl=s):Fo(a));break;default:Fo(a)}}function SS(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function Cl(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Ft=g,TS(g,a)}SS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)CS(a),a=a.sibling}function CS(a){switch(a.tag){case 0:case 11:case 15:Cl(a),a.flags&2048&&Hi(9,a,a.return);break;case 3:Cl(a);break;case 12:Cl(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,Pc(a)):Cl(a);break;default:Cl(a)}}function Pc(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Ft=g,TS(g,a)}SS(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:Hi(8,s,s.return),Pc(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Pc(s));break;default:Pc(s)}a=a.sibling}}function TS(a,s){for(;Ft!==null;){var u=Ft;switch(u.tag){case 0:case 11:case 15:Hi(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:il(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Ft=g;else e:for(u=a;Ft!==null;){g=Ft;var b=g.sibling,C=g.return;if(hS(g),g===u){Ft=null;break e}if(b!==null){b.return=C,Ft=b;break e}Ft=C}}}var $D={getCacheForType:function(a){var s=ln(jt),u=s.data.get(a);return u===void 0&&(u=a(),s.data.set(a,u)),u}},BD=typeof WeakMap=="function"?WeakMap:Map,rt=0,mt=null,ze=null,He=0,it=0,$n=null,Yi=!1,Ho=!1,bh=!1,li=0,At=0,Wi=0,Ua=0,Sh=0,ir=0,Go=0,Tl=null,wn=null,Ch=!1,Th=0,Dc=1/0,kc=null,Ji=null,Qt=0,Xi=null,Ko=null,Yo=0,wh=0,Ah=null,wS=null,wl=0,Eh=null;function Bn(){if((rt&2)!==0&&He!==0)return He&-He;if(q.T!==null){var a=Oo;return a!==0?a:kh()}return $u()}function AS(){ir===0&&(ir=(He&536870912)===0||Qe?xa():536870912);var a=rr.current;return a!==null&&(a.flags|=32),ir}function qn(a,s,u){(a===mt&&(it===2||it===9)||a.cancelPendingCommit!==null)&&(Wo(a,0),Qi(a,He,ir,!1)),ba(a,u),((rt&2)===0||a!==mt)&&(a===mt&&((rt&2)===0&&(Ua|=u),At===4&&Qi(a,He,ir,!1)),Ur(a))}function ES(a,s,u){if((rt&6)!==0)throw Error(r(327));var g=!u&&(s&124)===0&&(s&a.expiredLanes)===0||Pi(a,s),b=g?zD(a,s):Nh(a,s,!0),C=g;do{if(b===0){Ho&&!g&&Qi(a,s,0,!1);break}else{if(u=a.current.alternate,C&&!qD(u)){b=Nh(a,s,!1),C=!1;continue}if(b===2){if(C=s,a.errorRecoveryDisabledLanes&C)var R=0;else R=a.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){s=R;e:{var I=a;b=Tl;var L=I.current.memoizedState.isDehydrated;if(L&&(Wo(I,R).flags|=256),R=Nh(I,R,!1),R!==2){if(bh&&!L){I.errorRecoveryDisabledLanes|=C,Ua|=C,b=4;break e}C=wn,wn=b,C!==null&&(wn===null?wn=C:wn.push.apply(wn,C))}b=R}if(C=!1,b!==2)continue}}if(b===1){Wo(a,0),Qi(a,s,0,!0);break}e:{switch(g=a,C=b,C){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Qi(g,s,ir,!Yi);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(b=Th+300-et(),10<b)){if(Qi(g,s,ir,!Yi),de(g,0,!0)!==0)break e;g.timeoutHandle=tC(MS.bind(null,g,u,wn,kc,Ch,s,ir,Ua,Go,Yi,C,2,-0,0),b);break e}MS(g,u,wn,kc,Ch,s,ir,Ua,Go,Yi,C,0,-0,0)}}break}while(!0);Ur(a)}function MS(a,s,u,g,b,C,R,I,L,X,oe,ce,Q,Z){if(a.timeoutHandle=-1,ce=s.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:Ck},bS(s),ce=wk(),ce!==null)){a.cancelPendingCommit=ce(IS.bind(null,a,s,C,u,g,b,R,I,L,oe,1,Q,Z)),Qi(a,C,R,!X);return}IS(a,s,C,u,g,b,R,I,L)}function qD(a){for(var s=a;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var b=u[g],C=b.getSnapshot;b=b.value;try{if(!On(C(),b))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Qi(a,s,u,g){s&=~Sh,s&=~Ua,a.suspendedLanes|=s,a.pingedLanes&=~s,g&&(a.warmLanes|=s),g=a.expirationTimes;for(var b=s;0<b;){var C=31-gn(b),R=1<<C;g[C]=-1,b&=~R}u!==0&&ju(a,u,s)}function Ic(){return(rt&6)===0?(Al(0),!1):!0}function Mh(){if(ze!==null){if(it===0)var a=ze.return;else a=ze,ei=Da=null,Fm(a),qo=null,pl=0,a=ze;for(;a!==null;)oS(a.alternate,a),a=a.return;ze=null}}function Wo(a,s){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,ak(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Mh(),mt=a,ze=u=Xr(a.current,null),He=s,it=0,$n=null,Yi=!1,Ho=Pi(a,s),bh=!1,Go=ir=Sh=Ua=Wi=At=0,wn=Tl=null,Ch=!1,(s&8)!==0&&(s|=s&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=s;0<g;){var b=31-gn(g),C=1<<b;s|=a[b],g&=~C}return li=s,nc(),u}function _S(a,s){qe=null,q.H=Sc,s===ol||s===fc?(s=Hx(),it=3):s===Vx?(s=Hx(),it=4):it=s===Gb?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$n=s,ze===null&&(At=1,Ec(a,Zn(s,a.current)))}function NS(){var a=q.H;return q.H=Sc,a===null?Sc:a}function RS(){var a=q.A;return q.A=$D,a}function _h(){At=4,Yi||(He&4194048)!==He&&rr.current!==null||(Ho=!0),(Wi&134217727)===0&&(Ua&134217727)===0||mt===null||Qi(mt,He,ir,!1)}function Nh(a,s,u){var g=rt;rt|=2;var b=NS(),C=RS();(mt!==a||He!==s)&&(kc=null,Wo(a,s)),s=!1;var R=At;e:do try{if(it!==0&&ze!==null){var I=ze,L=$n;switch(it){case 8:Mh(),R=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(s=!0);var X=it;if(it=0,$n=null,Jo(a,I,L,X),u&&Ho){R=0;break e}break;default:X=it,it=0,$n=null,Jo(a,I,L,X)}}VD(),R=At;break}catch(oe){_S(a,oe)}while(!0);return s&&a.shellSuspendCounter++,ei=Da=null,rt=g,q.H=b,q.A=C,ze===null&&(mt=null,He=0,nc()),R}function VD(){for(;ze!==null;)PS(ze)}function zD(a,s){var u=rt;rt|=2;var g=NS(),b=RS();mt!==a||He!==s?(kc=null,Dc=et()+500,Wo(a,s)):Ho=Pi(a,s);e:do try{if(it!==0&&ze!==null){s=ze;var C=$n;t:switch(it){case 1:it=0,$n=null,Jo(a,s,C,1);break;case 2:case 9:if(zx(C)){it=0,$n=null,DS(s);break}s=function(){it!==2&&it!==9||mt!==a||(it=7),Ur(a)},C.then(s,s);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:zx(C)?(it=0,$n=null,DS(s)):(it=0,$n=null,Jo(a,s,C,7));break;case 5:var R=null;switch(ze.tag){case 26:R=ze.memoizedState;case 5:case 27:var I=ze;if(!R||mC(R)){it=0,$n=null;var L=I.sibling;if(L!==null)ze=L;else{var X=I.return;X!==null?(ze=X,Oc(X)):ze=null}break t}}it=0,$n=null,Jo(a,s,C,5);break;case 6:it=0,$n=null,Jo(a,s,C,6);break;case 8:Mh(),At=6;break e;default:throw Error(r(462))}}FD();break}catch(oe){_S(a,oe)}while(!0);return ei=Da=null,q.H=g,q.A=b,rt=u,ze!==null?0:(mt=null,He=0,nc(),At)}function FD(){for(;ze!==null&&!ct();)PS(ze)}function PS(a){var s=iS(a.alternate,a,li);a.memoizedProps=a.pendingProps,s===null?Oc(a):ze=s}function DS(a){var s=a,u=s.alternate;switch(s.tag){case 15:case 0:s=Qb(u,s,s.pendingProps,s.type,void 0,He);break;case 11:s=Qb(u,s,s.pendingProps,s.type.render,s.ref,He);break;case 5:Fm(s);default:oS(u,s),s=ze=kx(s,li),s=iS(u,s,li)}a.memoizedProps=a.pendingProps,s===null?Oc(a):ze=s}function Jo(a,s,u,g){ei=Da=null,Fm(s),qo=null,pl=0;var b=s.return;try{if(kD(a,b,s,u,He)){At=1,Ec(a,Zn(u,a.current)),ze=null;return}}catch(C){if(b!==null)throw ze=b,C;At=1,Ec(a,Zn(u,a.current)),ze=null;return}s.flags&32768?(Qe||g===1?a=!0:Ho||(He&536870912)!==0?a=!1:(Yi=a=!0,(g===2||g===9||g===3||g===6)&&(g=rr.current,g!==null&&g.tag===13&&(g.flags|=16384))),kS(s,a)):Oc(s)}function Oc(a){var s=a;do{if((s.flags&32768)!==0){kS(s,Yi);return}a=s.return;var u=OD(s.alternate,s,li);if(u!==null){ze=u;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=a}while(s!==null);At===0&&(At=5)}function kS(a,s){do{var u=LD(a.alternate,a);if(u!==null){u.flags&=32767,ze=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(a=a.sibling,a!==null)){ze=a;return}ze=a=u}while(a!==null);At=6,ze=null}function IS(a,s,u,g,b,C,R,I,L){a.cancelPendingCommit=null;do Lc();while(Qt!==0);if((rt&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(C=s.lanes|s.childLanes,C|=xm,nm(a,u,C,R,I,L),a===mt&&(ze=mt=null,He=0),Ko=s,Xi=a,Yo=u,wh=C,Ah=b,wS=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,YD(go,function(){return $S(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=q.T,q.T=null,b=H.p,H.p=2,R=rt,rt|=4;try{jD(a,s,u)}finally{rt=R,H.p=b,q.T=g}}Qt=1,OS(),LS(),jS()}}function OS(){if(Qt===1){Qt=0;var a=Xi,s=Ko,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=q.T,q.T=null;var g=H.p;H.p=2;var b=rt;rt|=4;try{yS(s,a);var C=qh,R=Tx(a.containerInfo),I=C.focusedElem,L=C.selectionRange;if(R!==I&&I&&I.ownerDocument&&Cx(I.ownerDocument.documentElement,I)){if(L!==null&&hm(I)){var X=L.start,oe=L.end;if(oe===void 0&&(oe=X),"selectionStart"in I)I.selectionStart=X,I.selectionEnd=Math.min(oe,I.value.length);else{var ce=I.ownerDocument||document,Q=ce&&ce.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),je=I.textContent.length,ke=Math.min(L.start,je),lt=L.end===void 0?ke:Math.min(L.end,je);!Z.extend&&ke>lt&&(R=lt,lt=ke,ke=R);var F=Sx(I,ke),z=Sx(I,lt);if(F&&z&&(Z.rangeCount!==1||Z.anchorNode!==F.node||Z.anchorOffset!==F.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var W=ce.createRange();W.setStart(F.node,F.offset),Z.removeAllRanges(),ke>lt?(Z.addRange(W),Z.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),Z.addRange(W))}}}}for(ce=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ce.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ce.length;I++){var le=ce[I];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Yc=!!Bh,qh=Bh=null}finally{rt=b,H.p=g,q.T=u}}a.current=s,Qt=2}}function LS(){if(Qt===2){Qt=0;var a=Xi,s=Ko,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=q.T,q.T=null;var g=H.p;H.p=2;var b=rt;rt|=4;try{mS(a,s.alternate,s)}finally{rt=b,H.p=g,q.T=u}}Qt=3}}function jS(){if(Qt===4||Qt===3){Qt=0,We();var a=Xi,s=Ko,u=Yo,g=wS;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qt=5:(Qt=0,Ko=Xi=null,US(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(Ji=null),Dr(u),s=s.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Pr,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=q.T,b=H.p,H.p=2,q.T=null;try{for(var C=a.onRecoverableError,R=0;R<g.length;R++){var I=g[R];C(I.value,{componentStack:I.stack})}}finally{q.T=s,H.p=b}}(Yo&3)!==0&&Lc(),Ur(a),b=a.pendingLanes,(u&4194090)!==0&&(b&42)!==0?a===Eh?wl++:(wl=0,Eh=a):wl=0,Al(0)}}function US(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,il(s)))}function Lc(a){return OS(),LS(),jS(),$S()}function $S(){if(Qt!==5)return!1;var a=Xi,s=wh;wh=0;var u=Dr(Yo),g=q.T,b=H.p;try{H.p=32>u?32:u,q.T=null,u=Ah,Ah=null;var C=Xi,R=Yo;if(Qt=0,Ko=Xi=null,Yo=0,(rt&6)!==0)throw Error(r(331));var I=rt;if(rt|=4,CS(C.current),xS(C,C.current,R,u),rt=I,Al(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Pr,C)}catch{}return!0}finally{H.p=b,q.T=g,US(a,s)}}function BS(a,s,u){s=Zn(u,s),s=ih(a.stateNode,s,2),a=qi(a,s,2),a!==null&&(ba(a,2),Ur(a))}function ft(a,s,u){if(a.tag===3)BS(a,a,u);else for(;s!==null;){if(s.tag===3){BS(s,a,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ji===null||!Ji.has(g))){a=Zn(u,a),u=Fb(2),g=qi(s,u,2),g!==null&&(Hb(u,g,s,a),ba(g,2),Ur(g));break}}s=s.return}}function Rh(a,s,u){var g=a.pingCache;if(g===null){g=a.pingCache=new BD;var b=new Set;g.set(s,b)}else b=g.get(s),b===void 0&&(b=new Set,g.set(s,b));b.has(u)||(bh=!0,b.add(u),a=HD.bind(null,a,s,u),s.then(a,a))}function HD(a,s,u){var g=a.pingCache;g!==null&&g.delete(s),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,mt===a&&(He&u)===u&&(At===4||At===3&&(He&62914560)===He&&300>et()-Th?(rt&2)===0&&Wo(a,0):Sh|=u,Go===He&&(Go=0)),Ur(a)}function qS(a,s){s===0&&(s=Lu()),a=Po(a,s),a!==null&&(ba(a,s),Ur(a))}function GD(a){var s=a.memoizedState,u=0;s!==null&&(u=s.retryLane),qS(a,u)}function KD(a,s){var u=0;switch(a.tag){case 13:var g=a.stateNode,b=a.memoizedState;b!==null&&(u=b.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(s),qS(a,u)}function YD(a,s){return Ze(a,s)}var jc=null,Xo=null,Ph=!1,Uc=!1,Dh=!1,$a=0;function Ur(a){a!==Xo&&a.next===null&&(Xo===null?jc=Xo=a:Xo=Xo.next=a),Uc=!0,Ph||(Ph=!0,JD())}function Al(a,s){if(!Dh&&Uc){Dh=!0;do for(var u=!1,g=jc;g!==null;){if(a!==0){var b=g.pendingLanes;if(b===0)var C=0;else{var R=g.suspendedLanes,I=g.pingedLanes;C=(1<<31-gn(42|a)+1)-1,C&=b&~(R&~I),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,HS(g,C))}else C=He,C=de(g,g===mt?C:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(C&3)===0||Pi(g,C)||(u=!0,HS(g,C));g=g.next}while(u);Dh=!1}}function WD(){VS()}function VS(){Uc=Ph=!1;var a=0;$a!==0&&(ik()&&(a=$a),$a=0);for(var s=et(),u=null,g=jc;g!==null;){var b=g.next,C=zS(g,s);C===0?(g.next=null,u===null?jc=b:u.next=b,b===null&&(Xo=u)):(u=g,(a!==0||(C&3)!==0)&&(Uc=!0)),g=b}Al(a)}function zS(a,s){for(var u=a.suspendedLanes,g=a.pingedLanes,b=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var R=31-gn(C),I=1<<R,L=b[R];L===-1?((I&u)===0||(I&g)!==0)&&(b[R]=xo(I,s)):L<=s&&(a.expiredLanes|=I),C&=~I}if(s=mt,u=He,u=de(a,a===s?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,u===0||a===s&&(it===2||it===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&Ue(g),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Pi(a,u)){if(s=u&-u,s===a.callbackPriority)return s;switch(g!==null&&Ue(g),Dr(u)){case 2:case 8:u=va;break;case 32:u=go;break;case 268435456:u=ku;break;default:u=go}return g=FS.bind(null,a),u=Ze(u,g),a.callbackPriority=s,a.callbackNode=u,s}return g!==null&&g!==null&&Ue(g),a.callbackPriority=2,a.callbackNode=null,2}function FS(a,s){if(Qt!==0&&Qt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Lc()&&a.callbackNode!==u)return null;var g=He;return g=de(a,a===mt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(ES(a,g,s),zS(a,et()),a.callbackNode!=null&&a.callbackNode===u?FS.bind(null,a):null)}function HS(a,s){if(Lc())return null;ES(a,s,!0)}function JD(){ok(function(){(rt&6)!==0?Ze(Os,WD):VS()})}function kh(){return $a===0&&($a=xa()),$a}function GS(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ta(""+a)}function KS(a,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,a.id&&u.setAttribute("form",a.id),s.parentNode.insertBefore(u,s),a=new FormData(a),u.parentNode.removeChild(u),a}function XD(a,s,u,g,b){if(s==="submit"&&u&&u.stateNode===b){var C=GS((b[on]||null).action),R=g.submitter;R&&(s=(s=R[on]||null)?GS(s.formAction):R.getAttribute("formAction"),s!==null&&(C=s,R=null));var I=new Zu("action","action",null,g,b);a.push({event:I,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if($a!==0){var L=R?KS(b,R):new FormData(b);Zm(u,{pending:!0,data:L,method:b.method,action:C},null,L)}}else typeof C=="function"&&(I.preventDefault(),L=R?KS(b,R):new FormData(b),Zm(u,{pending:!0,data:L,method:b.method,action:C},C,L))},currentTarget:b}]})}}for(var Ih=0;Ih<vm.length;Ih++){var Oh=vm[Ih],QD=Oh.toLowerCase(),ZD=Oh[0].toUpperCase()+Oh.slice(1);Cr(QD,"on"+ZD)}Cr(Ex,"onAnimationEnd"),Cr(Mx,"onAnimationIteration"),Cr(_x,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(gD,"onTransitionRun"),Cr(yD,"onTransitionStart"),Cr(vD,"onTransitionCancel"),Cr(Nx,"onTransitionEnd"),J("onMouseEnter",["mouseout","mouseover"]),J("onMouseLeave",["mouseout","mouseover"]),J("onPointerEnter",["pointerout","pointerover"]),J("onPointerLeave",["pointerout","pointerover"]),G("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),G("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),G("onBeforeInput",["compositionend","keypress","textInput","paste"]),G("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),G("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),G("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ek=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function YS(a,s){s=(s&4)!==0;for(var u=0;u<a.length;u++){var g=a[u],b=g.event;g=g.listeners;e:{var C=void 0;if(s)for(var R=g.length-1;0<=R;R--){var I=g[R],L=I.instance,X=I.currentTarget;if(I=I.listener,L!==C&&b.isPropagationStopped())break e;C=I,b.currentTarget=X;try{C(b)}catch(oe){Ac(oe)}b.currentTarget=null,C=L}else for(R=0;R<g.length;R++){if(I=g[R],L=I.instance,X=I.currentTarget,I=I.listener,L!==C&&b.isPropagationStopped())break e;C=I,b.currentTarget=X;try{C(b)}catch(oe){Ac(oe)}b.currentTarget=null,C=L}}}}function Fe(a,s){var u=s[Bs];u===void 0&&(u=s[Bs]=new Set);var g=a+"__bubble";u.has(g)||(WS(s,a,2,!1),u.add(g))}function Lh(a,s,u){var g=0;s&&(g|=4),WS(u,a,g,s)}var $c="_reactListening"+Math.random().toString(36).slice(2);function jh(a){if(!a[$c]){a[$c]=!0,Vu.forEach(function(u){u!=="selectionchange"&&(ek.has(u)||Lh(u,!1,a),Lh(u,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[$c]||(s[$c]=!0,Lh("selectionchange",!1,s))}}function WS(a,s,u,g){switch(xC(s)){case 2:var b=Mk;break;case 8:b=_k;break;default:b=Xh}u=b.bind(null,s,u,a),b=void 0,!Eo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),g?b!==void 0?a.addEventListener(s,u,{capture:!0,passive:b}):a.addEventListener(s,u,!0):b!==void 0?a.addEventListener(s,u,{passive:b}):a.addEventListener(s,u,!1)}function Uh(a,s,u,g,b){var C=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var R=g.tag;if(R===3||R===4){var I=g.stateNode.containerInfo;if(I===b)break;if(R===4)for(R=g.return;R!==null;){var L=R.tag;if((L===3||L===4)&&R.stateNode.containerInfo===b)return;R=R.return}for(;I!==null;){if(R=Di(I),R===null)return;if(L=R.tag,L===5||L===6||L===26||L===27){g=C=R;continue e}I=I.parentNode}}g=g.return}Jr(function(){var X=C,oe=Ao(u),ce=[];e:{var Q=Rx.get(a);if(Q!==void 0){var Z=Zu,je=a;switch(a){case"keypress":if(Xu(u)===0)break e;case"keydown":case"keyup":Z=YP;break;case"focusin":je="focus",Z=um;break;case"focusout":je="blur",Z=um;break;case"beforeblur":case"afterblur":Z=um;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ax;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=LP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=XP;break;case Ex:case Mx:case _x:Z=$P;break;case Nx:Z=ZP;break;case"scroll":case"scrollend":Z=IP;break;case"wheel":Z=tD;break;case"copy":case"cut":case"paste":Z=qP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=sx;break;case"toggle":case"beforetoggle":Z=rD}var ke=(s&4)!==0,lt=!ke&&(a==="scroll"||a==="scrollend"),F=ke?Q!==null?Q+"Capture":null:Q;ke=[];for(var z=X,W;z!==null;){var le=z;if(W=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||W===null||F===null||(le=Qn(z,F),le!=null&&ke.push(Ml(z,le,W))),lt)break;z=z.return}0<ke.length&&(Q=new Z(Q,je,null,u,oe),ce.push({event:Q,listeners:ke}))}}if((s&7)===0){e:{if(Q=a==="mouseover"||a==="pointerover",Z=a==="mouseout"||a==="pointerout",Q&&u!==wo&&(je=u.relatedTarget||u.fromElement)&&(Di(je)||je[Pn]))break e;if((Z||Q)&&(Q=oe.window===oe?oe:(Q=oe.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(je=u.relatedTarget||u.toElement,Z=X,je=je?Di(je):null,je!==null&&(lt=o(je),ke=je.tag,je!==lt||ke!==5&&ke!==27&&ke!==6)&&(je=null)):(Z=null,je=X),Z!==je)){if(ke=ax,le="onMouseLeave",F="onMouseEnter",z="mouse",(a==="pointerout"||a==="pointerover")&&(ke=sx,le="onPointerLeave",F="onPointerEnter",z="pointer"),lt=Z==null?Q:kr(Z),W=je==null?Q:kr(je),Q=new ke(le,z+"leave",Z,u,oe),Q.target=lt,Q.relatedTarget=W,le=null,Di(oe)===X&&(ke=new ke(F,z+"enter",je,u,oe),ke.target=W,ke.relatedTarget=lt,le=ke),lt=le,Z&&je)t:{for(ke=Z,F=je,z=0,W=ke;W;W=Qo(W))z++;for(W=0,le=F;le;le=Qo(le))W++;for(;0<z-W;)ke=Qo(ke),z--;for(;0<W-z;)F=Qo(F),W--;for(;z--;){if(ke===F||F!==null&&ke===F.alternate)break t;ke=Qo(ke),F=Qo(F)}ke=null}else ke=null;Z!==null&&JS(ce,Q,Z,ke,!1),je!==null&&lt!==null&&JS(ce,lt,je,ke,!0)}}e:{if(Q=X?kr(X):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Te=px;else if(mx(Q))if(gx)Te=mD;else{Te=fD;var Ve=cD}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?X&&To(X.elementType)&&(Te=px):Te=dD;if(Te&&(Te=Te(a,X))){hx(ce,Te,u,oe);break e}Ve&&Ve(a,Q,X),a==="focusout"&&X&&Q.type==="number"&&X.memoizedProps.value!=null&&Co(Q,"number",Q.value)}switch(Ve=X?kr(X):window,a){case"focusin":(mx(Ve)||Ve.contentEditable==="true")&&(_o=Ve,pm=X,Zs=null);break;case"focusout":Zs=pm=_o=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,wx(ce,u,oe);break;case"selectionchange":if(pD)break;case"keydown":case"keyup":wx(ce,u,oe)}var Ne;if(fm)e:{switch(a){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Mo?fx(a,u)&&(Ie="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(lx&&u.locale!=="ko"&&(Mo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Mo&&(Ne=rx()):(ji=oe,om="value"in ji?ji.value:ji.textContent,Mo=!0)),Ve=Bc(X,Ie),0<Ve.length&&(Ie=new ox(Ie,a,null,u,oe),ce.push({event:Ie,listeners:Ve}),Ne?Ie.data=Ne:(Ne=dx(u),Ne!==null&&(Ie.data=Ne)))),(Ne=aD?oD(a,u):sD(a,u))&&(Ie=Bc(X,"onBeforeInput"),0<Ie.length&&(Ve=new ox("onBeforeInput","beforeinput",null,u,oe),ce.push({event:Ve,listeners:Ie}),Ve.data=Ne)),XD(ce,a,X,u,oe)}YS(ce,s)})}function Ml(a,s,u){return{instance:a,listener:s,currentTarget:u}}function Bc(a,s){for(var u=s+"Capture",g=[];a!==null;){var b=a,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=Qn(a,u),b!=null&&g.unshift(Ml(a,b,C)),b=Qn(a,s),b!=null&&g.push(Ml(a,b,C))),a.tag===3)return g;a=a.return}return[]}function Qo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function JS(a,s,u,g,b){for(var C=s._reactName,R=[];u!==null&&u!==g;){var I=u,L=I.alternate,X=I.stateNode;if(I=I.tag,L!==null&&L===g)break;I!==5&&I!==26&&I!==27||X===null||(L=X,b?(X=Qn(u,C),X!=null&&R.unshift(Ml(u,X,L))):b||(X=Qn(u,C),X!=null&&R.push(Ml(u,X,L)))),u=u.return}R.length!==0&&a.push({event:s,listeners:R})}var tk=/\r\n?/g,nk=/\u0000|\uFFFD/g;function XS(a){return(typeof a=="string"?a:""+a).replace(tk,`
`).replace(nk,"")}function QS(a,s){return s=XS(s),XS(a)===s}function qc(){}function st(a,s,u,g,b,C){switch(u){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Oi(a,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Oi(a,""+g);break;case"className":Ke(a,"class",g);break;case"tabIndex":Ke(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ke(a,u,g);break;case"style":Hs(a,g,C);break;case"data":if(s!=="object"){Ke(a,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||u!=="href")){a.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=Ta(""+g),a.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(s!=="input"&&st(a,s,"name",b.name,b,null),st(a,s,"formEncType",b.formEncType,b,null),st(a,s,"formMethod",b.formMethod,b,null),st(a,s,"formTarget",b.formTarget,b,null)):(st(a,s,"encType",b.encType,b,null),st(a,s,"method",b.method,b,null),st(a,s,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=Ta(""+g),a.setAttribute(u,g);break;case"onClick":g!=null&&(a.onclick=qc);break;case"onScroll":g!=null&&Fe("scroll",a);break;case"onScrollEnd":g!=null&&Fe("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(u=g.__html,u!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}u=Ta(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""+g):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":g===!0?a.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,g):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(u,g):a.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(u):a.setAttribute(u,g);break;case"popover":Fe("beforetoggle",a),Fe("toggle",a),Me(a,"popover",g);break;case"xlinkActuate":Pe(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Pe(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Pe(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Pe(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Pe(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Pe(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Pe(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Pe(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Pe(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Me(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Wu.get(u)||u,Me(a,u,g))}}function $h(a,s,u,g,b,C){switch(u){case"style":Hs(a,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(u=g.__html,u!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof g=="string"?Oi(a,g):(typeof g=="number"||typeof g=="bigint")&&Oi(a,""+g);break;case"onScroll":g!=null&&Fe("scroll",a);break;case"onScrollEnd":g!=null&&Fe("scrollend",a);break;case"onClick":g!=null&&(a.onclick=qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zu.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),s=u.slice(2,b?u.length-7:void 0),C=a[on]||null,C=C!=null?C[u]:null,typeof C=="function"&&a.removeEventListener(s,C,b),typeof g=="function")){typeof C!="function"&&C!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(s,g,b);break e}u in a?a[u]=g:g===!0?a.setAttribute(u,""):Me(a,u,g)}}}function Zt(a,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",a),Fe("load",a);var g=!1,b=!1,C;for(C in u)if(u.hasOwnProperty(C)){var R=u[C];if(R!=null)switch(C){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(a,s,C,R,u,null)}}b&&st(a,s,"srcSet",u.srcSet,u,null),g&&st(a,s,"src",u.src,u,null);return;case"input":Fe("invalid",a);var I=C=R=b=null,L=null,X=null;for(g in u)if(u.hasOwnProperty(g)){var oe=u[g];if(oe!=null)switch(g){case"name":b=oe;break;case"type":R=oe;break;case"checked":L=oe;break;case"defaultChecked":X=oe;break;case"value":C=oe;break;case"defaultValue":I=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,s));break;default:st(a,s,g,oe,u,null)}}Ku(a,C,I,L,X,R,b,!1),Yr(a);return;case"select":Fe("invalid",a),g=R=C=null;for(b in u)if(u.hasOwnProperty(b)&&(I=u[b],I!=null))switch(b){case"value":C=I;break;case"defaultValue":R=I;break;case"multiple":g=I;default:st(a,s,b,I,u,null)}s=C,u=R,a.multiple=!!g,s!=null?Wr(a,!!g,s,!1):u!=null&&Wr(a,!!g,u,!0);return;case"textarea":Fe("invalid",a),C=b=g=null;for(R in u)if(u.hasOwnProperty(R)&&(I=u[R],I!=null))switch(R){case"value":g=I;break;case"defaultValue":b=I;break;case"children":C=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:st(a,s,R,I,u,null)}Yu(a,g,b,C),Yr(a);return;case"option":for(L in u)if(u.hasOwnProperty(L)&&(g=u[L],g!=null))switch(L){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:st(a,s,L,g,u,null)}return;case"dialog":Fe("beforetoggle",a),Fe("toggle",a),Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":Fe("load",a);break;case"video":case"audio":for(g=0;g<El.length;g++)Fe(El[g],a);break;case"image":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"embed":case"source":case"link":Fe("error",a),Fe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(g=u[X],g!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(a,s,X,g,u,null)}return;default:if(To(s)){for(oe in u)u.hasOwnProperty(oe)&&(g=u[oe],g!==void 0&&$h(a,s,oe,g,u,void 0));return}}for(I in u)u.hasOwnProperty(I)&&(g=u[I],g!=null&&st(a,s,I,g,u,null))}function rk(a,s,u,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,R=null,I=null,L=null,X=null,oe=null;for(Z in u){var ce=u[Z];if(u.hasOwnProperty(Z)&&ce!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ce;default:g.hasOwnProperty(Z)||st(a,s,Z,null,g,ce)}}for(var Q in g){var Z=g[Q];if(ce=u[Q],g.hasOwnProperty(Q)&&(Z!=null||ce!=null))switch(Q){case"type":C=Z;break;case"name":b=Z;break;case"checked":X=Z;break;case"defaultChecked":oe=Z;break;case"value":R=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Z!==ce&&st(a,s,Q,Z,g,ce)}}zs(a,R,I,L,X,oe,C,b);return;case"select":Z=R=I=Q=null;for(C in u)if(L=u[C],u.hasOwnProperty(C)&&L!=null)switch(C){case"value":break;case"multiple":Z=L;default:g.hasOwnProperty(C)||st(a,s,C,null,g,L)}for(b in g)if(C=g[b],L=u[b],g.hasOwnProperty(b)&&(C!=null||L!=null))switch(b){case"value":Q=C;break;case"defaultValue":I=C;break;case"multiple":R=C;default:C!==L&&st(a,s,b,C,g,L)}s=I,u=R,g=Z,Q!=null?Wr(a,!!u,Q,!1):!!g!=!!u&&(s!=null?Wr(a,!!u,s,!0):Wr(a,!!u,u?[]:"",!1));return;case"textarea":Z=Q=null;for(I in u)if(b=u[I],u.hasOwnProperty(I)&&b!=null&&!g.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:st(a,s,I,null,g,b)}for(R in g)if(b=g[R],C=u[R],g.hasOwnProperty(R)&&(b!=null||C!=null))switch(R){case"value":Q=b;break;case"defaultValue":Z=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==C&&st(a,s,R,b,g,C)}Fs(a,Q,Z);return;case"option":for(var je in u)if(Q=u[je],u.hasOwnProperty(je)&&Q!=null&&!g.hasOwnProperty(je))switch(je){case"selected":a.selected=!1;break;default:st(a,s,je,null,g,Q)}for(L in g)if(Q=g[L],Z=u[L],g.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":a.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:st(a,s,L,Q,g,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in u)Q=u[ke],u.hasOwnProperty(ke)&&Q!=null&&!g.hasOwnProperty(ke)&&st(a,s,ke,null,g,Q);for(X in g)if(Q=g[X],Z=u[X],g.hasOwnProperty(X)&&Q!==Z&&(Q!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:st(a,s,X,Q,g,Z)}return;default:if(To(s)){for(var lt in u)Q=u[lt],u.hasOwnProperty(lt)&&Q!==void 0&&!g.hasOwnProperty(lt)&&$h(a,s,lt,void 0,g,Q);for(oe in g)Q=g[oe],Z=u[oe],!g.hasOwnProperty(oe)||Q===Z||Q===void 0&&Z===void 0||$h(a,s,oe,Q,g,Z);return}}for(var F in u)Q=u[F],u.hasOwnProperty(F)&&Q!=null&&!g.hasOwnProperty(F)&&st(a,s,F,null,g,Q);for(ce in g)Q=g[ce],Z=u[ce],!g.hasOwnProperty(ce)||Q===Z||Q==null&&Z==null||st(a,s,ce,Q,g,Z)}var Bh=null,qh=null;function Vc(a){return a.nodeType===9?a:a.ownerDocument}function ZS(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eC(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function Vh(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zh=null;function ik(){var a=window.event;return a&&a.type==="popstate"?a===zh?!1:(zh=a,!0):(zh=null,!1)}var tC=typeof setTimeout=="function"?setTimeout:void 0,ak=typeof clearTimeout=="function"?clearTimeout:void 0,nC=typeof Promise=="function"?Promise:void 0,ok=typeof queueMicrotask=="function"?queueMicrotask:typeof nC<"u"?function(a){return nC.resolve(null).then(a).catch(sk)}:tC;function sk(a){setTimeout(function(){throw a})}function Zi(a){return a==="head"}function rC(a,s){var u=s,g=0,b=0;do{var C=u.nextSibling;if(a.removeChild(u),C&&C.nodeType===8)if(u=C.data,u==="/$"){if(0<g&&8>g){u=g;var R=a.ownerDocument;if(u&1&&_l(R.documentElement),u&2&&_l(R.body),u&4)for(u=R.head,_l(u),R=u.firstChild;R;){var I=R.nextSibling,L=R.nodeName;R[Sa]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&R.rel.toLowerCase()==="stylesheet"||u.removeChild(R),R=I}}if(b===0){a.removeChild(C),Ll(s);return}b--}else u==="$"||u==="$?"||u==="$!"?b++:g=u.charCodeAt(0)-48;else g=0;u=C}while(u);Ll(s)}function Fh(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Fh(u),bo(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function lk(a,s,u,g){for(;a.nodeType===1;){var b=u;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Sa])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=wr(a.nextSibling),a===null)break}return null}function uk(a,s,u){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=wr(a.nextSibling),a===null))return null;return a}function Hh(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function ck(a,s){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")s();else{var g=function(){s(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function wr(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return a}var Gh=null;function iC(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return a;s--}else u==="/$"&&s++}a=a.previousSibling}return null}function aC(a,s,u){switch(s=Vc(u),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function _l(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);bo(a)}var ar=new Map,oC=new Set;function zc(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ui=H.d;H.d={f:fk,r:dk,D:mk,C:hk,L:pk,m:gk,X:vk,S:yk,M:xk};function fk(){var a=ui.f(),s=Ic();return a||s}function dk(a){var s=ki(a);s!==null&&s.tag===5&&s.type==="form"?Eb(s):ui.r(a)}var Zo=typeof document>"u"?null:document;function sC(a,s,u){var g=Zo;if(g&&typeof s=="string"&&s){var b=Ct(s);b='link[rel="'+a+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),oC.has(b)||(oC.add(b),a={rel:a,crossOrigin:u,href:s},g.querySelector(b)===null&&(s=g.createElement("link"),Zt(s,"link",a),Rt(s),g.head.appendChild(s)))}}function mk(a){ui.D(a),sC("dns-prefetch",a,null)}function hk(a,s){ui.C(a,s),sC("preconnect",a,s)}function pk(a,s,u){ui.L(a,s,u);var g=Zo;if(g&&a&&s){var b='link[rel="preload"][as="'+Ct(s)+'"]';s==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+Ct(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+Ct(u.imageSizes)+'"]')):b+='[href="'+Ct(a)+'"]';var C=b;switch(s){case"style":C=es(a);break;case"script":C=ts(a)}ar.has(C)||(a=m({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:a,as:s},u),ar.set(C,a),g.querySelector(b)!==null||s==="style"&&g.querySelector(Nl(C))||s==="script"&&g.querySelector(Rl(C))||(s=g.createElement("link"),Zt(s,"link",a),Rt(s),g.head.appendChild(s)))}}function gk(a,s){ui.m(a,s);var u=Zo;if(u&&a){var g=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+Ct(g)+'"][href="'+Ct(a)+'"]',C=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=ts(a)}if(!ar.has(C)&&(a=m({rel:"modulepreload",href:a},s),ar.set(C,a),u.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Rl(C)))return}g=u.createElement("link"),Zt(g,"link",a),Rt(g),u.head.appendChild(g)}}}function yk(a,s,u){ui.S(a,s,u);var g=Zo;if(g&&a){var b=Ii(g).hoistableStyles,C=es(a);s=s||"default";var R=b.get(C);if(!R){var I={loading:0,preload:null};if(R=g.querySelector(Nl(C)))I.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":s},u),(u=ar.get(C))&&Kh(a,u);var L=R=g.createElement("link");Rt(L),Zt(L,"link",a),L._p=new Promise(function(X,oe){L.onload=X,L.onerror=oe}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Fc(R,s,g)}R={type:"stylesheet",instance:R,count:1,state:I},b.set(C,R)}}}function vk(a,s){ui.X(a,s);var u=Zo;if(u&&a){var g=Ii(u).hoistableScripts,b=ts(a),C=g.get(b);C||(C=u.querySelector(Rl(b)),C||(a=m({src:a,async:!0},s),(s=ar.get(b))&&Yh(a,s),C=u.createElement("script"),Rt(C),Zt(C,"link",a),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(b,C))}}function xk(a,s){ui.M(a,s);var u=Zo;if(u&&a){var g=Ii(u).hoistableScripts,b=ts(a),C=g.get(b);C||(C=u.querySelector(Rl(b)),C||(a=m({src:a,async:!0,type:"module"},s),(s=ar.get(b))&&Yh(a,s),C=u.createElement("script"),Rt(C),Zt(C,"link",a),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(b,C))}}function lC(a,s,u,g){var b=(b=Ae.current)?zc(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=es(u.href),u=Ii(b).hoistableStyles,g=u.get(s),g||(g={type:"style",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=es(u.href);var C=Ii(b).hoistableStyles,R=C.get(a);if(R||(b=b.ownerDocument||b,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,R),(C=b.querySelector(Nl(a)))&&!C._p&&(R.instance=C,R.state.loading=5),ar.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ar.set(a,u),C||bk(b,a,u,R.state))),s&&g===null)throw Error(r(528,""));return R}if(s&&g!==null)throw Error(r(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ts(u),u=Ii(b).hoistableScripts,g=u.get(s),g||(g={type:"script",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function es(a){return'href="'+Ct(a)+'"'}function Nl(a){return'link[rel="stylesheet"]['+a+"]"}function uC(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function bk(a,s,u,g){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=a.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Zt(s,"link",u),Rt(s),a.head.appendChild(s))}function ts(a){return'[src="'+Ct(a)+'"]'}function Rl(a){return"script[async]"+a}function cC(a,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var g=a.querySelector('style[data-href~="'+Ct(u.href)+'"]');if(g)return s.instance=g,Rt(g),g;var b=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Rt(g),Zt(g,"style",b),Fc(g,u.precedence,a),s.instance=g;case"stylesheet":b=es(u.href);var C=a.querySelector(Nl(b));if(C)return s.state.loading|=4,s.instance=C,Rt(C),C;g=uC(u),(b=ar.get(b))&&Kh(g,b),C=(a.ownerDocument||a).createElement("link"),Rt(C);var R=C;return R._p=new Promise(function(I,L){R.onload=I,R.onerror=L}),Zt(C,"link",g),s.state.loading|=4,Fc(C,u.precedence,a),s.instance=C;case"script":return C=ts(u.src),(b=a.querySelector(Rl(C)))?(s.instance=b,Rt(b),b):(g=u,(b=ar.get(C))&&(g=m({},u),Yh(g,b)),a=a.ownerDocument||a,b=a.createElement("script"),Rt(b),Zt(b,"link",g),a.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,Fc(g,u.precedence,a));return s.instance}function Fc(a,s,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,C=b,R=0;R<g.length;R++){var I=g[R];if(I.dataset.precedence===s)C=I;else if(C!==b)break}C?C.parentNode.insertBefore(a,C.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(a,s.firstChild))}function Kh(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function Yh(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var Hc=null;function fC(a,s,u){if(Hc===null){var g=new Map,b=Hc=new Map;b.set(u,g)}else b=Hc,g=b.get(u),g||(g=new Map,b.set(u,g));if(g.has(a))return g;for(g.set(a,null),u=u.getElementsByTagName(a),b=0;b<u.length;b++){var C=u[b];if(!(C[Sa]||C[Mt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var R=C.getAttribute(s)||"";R=a+R;var I=g.get(R);I?I.push(C):g.set(R,[C])}}return g}function dC(a,s,u){a=a.ownerDocument||a,a.head.insertBefore(u,s==="title"?a.querySelector("head > title"):null)}function Sk(a,s,u){if(u===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function mC(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Pl=null;function Ck(){}function Tk(a,s,u){if(Pl===null)throw Error(r(475));var g=Pl;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var b=es(u.href),C=a.querySelector(Nl(b));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=Gc.bind(g),a.then(g,g)),s.state.loading|=4,s.instance=C,Rt(C);return}C=a.ownerDocument||a,u=uC(u),(b=ar.get(b))&&Kh(u,b),C=C.createElement("link"),Rt(C);var R=C;R._p=new Promise(function(I,L){R.onload=I,R.onerror=L}),Zt(C,"link",u),s.instance=C}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(g.count++,s=Gc.bind(g),a.addEventListener("load",s),a.addEventListener("error",s))}}function wk(){if(Pl===null)throw Error(r(475));var a=Pl;return a.stylesheets&&a.count===0&&Wh(a,a.stylesheets),0<a.count?function(s){var u=setTimeout(function(){if(a.stylesheets&&Wh(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=s,function(){a.unsuspend=null,clearTimeout(u)}}:null}function Gc(){if(this.count--,this.count===0){if(this.stylesheets)Wh(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Kc=null;function Wh(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Kc=new Map,s.forEach(Ak,a),Kc=null,Gc.call(a))}function Ak(a,s){if(!(s.state.loading&4)){var u=Kc.get(a);if(u)var g=u.get(null);else{u=new Map,Kc.set(a,u);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var R=b[C];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(u.set(R.dataset.precedence,R),g=R)}g&&u.set(null,g)}b=s.instance,R=b.getAttribute("data-precedence"),C=u.get(R)||g,C===g&&u.set(null,b),u.set(R,b),this.count++,g=Gc.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),C?C.parentNode.insertBefore(b,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),s.state.loading|=4}}var Dl={$$typeof:N,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Ek(a,s,u,g,b,C,R,I){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function hC(a,s,u,g,b,C,R,I,L,X,oe,ce){return a=new Ek(a,s,u,R,I,L,X,ce),s=1,C===!0&&(s|=24),C=Ln(3,null,null,s),a.current=C,C.stateNode=a,s=Rm(),s.refCount++,a.pooledCache=s,s.refCount++,C.memoizedState={element:g,isDehydrated:u,cache:s},Im(C),a}function pC(a){return a?(a=Do,a):Do}function gC(a,s,u,g,b,C){b=pC(b),g.context===null?g.context=b:g.pendingContext=b,g=Bi(s),g.payload={element:u},C=C===void 0?null:C,C!==null&&(g.callback=C),u=qi(a,g,s),u!==null&&(qn(u,a,s),ll(u,a,s))}function yC(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<s?u:s}}function Jh(a,s){yC(a,s),(a=a.alternate)&&yC(a,s)}function vC(a){if(a.tag===13){var s=Po(a,67108864);s!==null&&qn(s,a,67108864),Jh(a,67108864)}}var Yc=!0;function Mk(a,s,u,g){var b=q.T;q.T=null;var C=H.p;try{H.p=2,Xh(a,s,u,g)}finally{H.p=C,q.T=b}}function _k(a,s,u,g){var b=q.T;q.T=null;var C=H.p;try{H.p=8,Xh(a,s,u,g)}finally{H.p=C,q.T=b}}function Xh(a,s,u,g){if(Yc){var b=Qh(g);if(b===null)Uh(a,s,g,Wc,u),bC(a,g);else if(Rk(b,a,s,u,g))g.stopPropagation();else if(bC(a,g),s&4&&-1<Nk.indexOf(a)){for(;b!==null;){var C=ki(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var R=Kr(C.pendingLanes);if(R!==0){var I=C;for(I.pendingLanes|=2,I.entangledLanes|=2;R;){var L=1<<31-gn(R);I.entanglements[1]|=L,R&=~L}Ur(C),(rt&6)===0&&(Dc=et()+500,Al(0))}}break;case 13:I=Po(C,2),I!==null&&qn(I,C,2),Ic(),Jh(C,2)}if(C=Qh(g),C===null&&Uh(a,s,g,Wc,u),C===b)break;b=C}b!==null&&g.stopPropagation()}else Uh(a,s,g,null,u)}}function Qh(a){return a=Ao(a),Zh(a)}var Wc=null;function Zh(a){if(Wc=null,a=Di(a),a!==null){var s=o(a);if(s===null)a=null;else{var u=s.tag;if(u===13){if(a=l(s),a!==null)return a;a=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return Wc=a,null}function xC(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rr()){case Os:return 2;case va:return 8;case go:case yo:return 32;case ku:return 268435456;default:return 32}default:return 32}}var ep=!1,ea=null,ta=null,na=null,kl=new Map,Il=new Map,ra=[],Nk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bC(a,s){switch(a){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":kl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(s.pointerId)}}function Ol(a,s,u,g,b,C){return a===null||a.nativeEvent!==C?(a={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:C,targetContainers:[b]},s!==null&&(s=ki(s),s!==null&&vC(s)),a):(a.eventSystemFlags|=g,s=a.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),a)}function Rk(a,s,u,g,b){switch(s){case"focusin":return ea=Ol(ea,a,s,u,g,b),!0;case"dragenter":return ta=Ol(ta,a,s,u,g,b),!0;case"mouseover":return na=Ol(na,a,s,u,g,b),!0;case"pointerover":var C=b.pointerId;return kl.set(C,Ol(kl.get(C)||null,a,s,u,g,b)),!0;case"gotpointercapture":return C=b.pointerId,Il.set(C,Ol(Il.get(C)||null,a,s,u,g,b)),!0}return!1}function SC(a){var s=Di(a.target);if(s!==null){var u=o(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){a.blockedOn=s,rm(a.priority,function(){if(u.tag===13){var g=Bn();g=$s(g);var b=Po(u,g);b!==null&&qn(b,u,g),Jh(u,g)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Jc(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var u=Qh(a.nativeEvent);if(u===null){u=a.nativeEvent;var g=new u.constructor(u.type,u);wo=g,u.target.dispatchEvent(g),wo=null}else return s=ki(u),s!==null&&vC(s),a.blockedOn=u,!1;s.shift()}return!0}function CC(a,s,u){Jc(a)&&u.delete(s)}function Pk(){ep=!1,ea!==null&&Jc(ea)&&(ea=null),ta!==null&&Jc(ta)&&(ta=null),na!==null&&Jc(na)&&(na=null),kl.forEach(CC),Il.forEach(CC)}function Xc(a,s){a.blockedOn===s&&(a.blockedOn=null,ep||(ep=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pk)))}var Qc=null;function TC(a){Qc!==a&&(Qc=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Qc===a&&(Qc=null);for(var s=0;s<a.length;s+=3){var u=a[s],g=a[s+1],b=a[s+2];if(typeof g!="function"){if(Zh(g||u)===null)continue;break}var C=ki(u);C!==null&&(a.splice(s,3),s-=3,Zm(C,{pending:!0,data:b,method:u.method,action:g},g,b))}}))}function Ll(a){function s(L){return Xc(L,a)}ea!==null&&Xc(ea,a),ta!==null&&Xc(ta,a),na!==null&&Xc(na,a),kl.forEach(s),Il.forEach(s);for(var u=0;u<ra.length;u++){var g=ra[u];g.blockedOn===a&&(g.blockedOn=null)}for(;0<ra.length&&(u=ra[0],u.blockedOn===null);)SC(u),u.blockedOn===null&&ra.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var b=u[g],C=u[g+1],R=b[on]||null;if(typeof C=="function")R||TC(u);else if(R){var I=null;if(C&&C.hasAttribute("formAction")){if(b=C,R=C[on]||null)I=R.formAction;else if(Zh(b)!==null)continue}else I=R.action;typeof I=="function"?u[g+1]=I:(u.splice(g,3),g-=3),TC(u)}}}function tp(a){this._internalRoot=a}Zc.prototype.render=tp.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var u=s.current,g=Bn();gC(u,g,a,s,null,null)},Zc.prototype.unmount=tp.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;gC(a.current,2,null,a,null,null),Ic(),s[Pn]=null}};function Zc(a){this._internalRoot=a}Zc.prototype.unstable_scheduleHydration=function(a){if(a){var s=$u();a={blockedOn:null,target:a,priority:s};for(var u=0;u<ra.length&&s!==0&&s<ra[u].priority;u++);ra.splice(u,0,a),u===0&&SC(a)}};var wC=t.version;if(wC!=="19.1.1")throw Error(r(527,wC,"19.1.1"));H.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(s),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Dk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{Pr=ef.inject(Dk),Lt=ef}catch{}}return Ul.createRoot=function(a,s){if(!i(a))throw Error(r(299));var u=!1,g="",b=Bb,C=qb,R=Vb,I=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(C=s.onCaughtError),s.onRecoverableError!==void 0&&(R=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(I=s.unstable_transitionCallbacks)),s=hC(a,1,!1,null,null,u,g,b,C,R,I,null),a[Pn]=s.current,jh(a),new tp(s)},Ul.hydrateRoot=function(a,s,u){if(!i(a))throw Error(r(299));var g=!1,b="",C=Bb,R=qb,I=Vb,L=null,X=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(I=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(L=u.unstable_transitionCallbacks),u.formState!==void 0&&(X=u.formState)),s=hC(a,1,!0,s,u??null,g,b,C,R,I,L,X),s.context=pC(null),u=s.current,g=Bn(),g=$s(g),b=Bi(g),b.callback=null,qi(u,b,g),u=g,s.current.lanes=u,ba(s,u),Ur(s),a[Pn]=s.current,jh(a),new Zc(s)},Ul.version="19.1.1",Ul}var IC;function Hk(){if(IC)return ap.exports;IC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ap.exports=Fk(),ap.exports}var Gk=Hk();const Kk="modulepreload",Yk=function(e){return"/"+e},OC={},Wk=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=l(n.map(f=>{if(f=Yk(f),f in OC)return;OC[f]=!0;const m=f.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":Kk,m||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((S,T)=>{v.addEventListener("load",S),v.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Jk,Xk;function Qk(){return{geminiUrl:Jk,vertexUrl:Xk}}function Zk(e,t,n,r){var i,o;if(!(e!=null&&e.baseUrl)){const l=Qk();return t?(i=l.vertexUrl)!==null&&i!==void 0?i:n:(o=l.geminiUrl)!==null&&o!==void 0?o:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uo{}function _e(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function p(e,t,n){for(let o=0;o<t.length-1;o++){const l=t[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in e))if(Array.isArray(n))e[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[c])){const d=e[c];if(Array.isArray(n))for(let f=0;f<d.length;f++){const m=d[f];p(m,t.slice(o+1),n[f])}else for(const f of d)p(f,t.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in e||(e[c]=[{}]);const d=e[c];p(d[0],t.slice(o+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const r=t[t.length-1],i=e[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else e[r]=n}function h(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const r=t[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const o=e[i];return Array.isArray(o)?o.map(l=>h(l,t.slice(n+1))):void 0}else return}else e=e[r]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iy(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var LC;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(LC||(LC={}));var jC;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(jC||(jC={}));var we;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(we||(we={}));var UC;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(UC||(UC={}));var $C;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})($C||($C={}));var BC;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(BC||(BC={}));var qC;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(qC||(qC={}));var VC;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(VC||(VC={}));var zC;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zC||(zC={}));var FC;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(FC||(FC={}));var HC;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(HC||(HC={}));var GC;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(GC||(GC={}));var KC;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(KC||(KC={}));var YC;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(YC||(YC={}));var WC;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(WC||(WC={}));var JC;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(JC||(JC={}));var wf;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(wf||(wf={}));var XC;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(XC||(XC={}));var ay;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ay||(ay={}));var QC;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(QC||(QC={}));var ZC;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(ZC||(ZC={}));var eT;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(eT||(eT={}));var tT;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(tT||(tT={}));var nT;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(nT||(nT={}));var rT;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(rT||(rT={}));var iT;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(iT||(iT={}));var aT;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(aT||(aT={}));var oT;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(oT||(oT={}));var sT;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sT||(sT={}));var lT;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lT||(lT={}));var uT;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uT||(uT={}));var cT;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(cT||(cT={}));var fT;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(fT||(fT={}));var dT;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(dT||(dT={}));var mT;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(mT||(mT={}));var hT;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(hT||(hT={}));var pT;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(pT||(pT={}));var gT;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(gT||(gT={}));var yT;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yT||(yT={}));var vT;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(vT||(vT={}));var xT;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xT||(xT={}));var bT;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(bT||(bT={}));var rs;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(rs||(rs={}));class oy{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class $l{get text(){var t,n,r,i,o,l,c,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",m=!1;const y=[];for(const v of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[S,T]of Object.entries(v))S!=="text"&&S!=="thought"&&(T!==null||T!==void 0)&&y.push(S);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;m=!0,f+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?f:void 0}get data(){var t,n,r,i,o,l,c,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const m=[];for(const y of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[v,S]of Object.entries(y))v!=="inlineData"&&(S!==null||S!==void 0)&&m.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,r,i,o,l,c,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,r,i,o,l,c,d,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,r,i,o,l,c,d,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.output}}class ST{}class CT{}class eI{}class tI{}class nI{}class TT{}class wT{}class AT{}class rI{}class ET{}class MT{}class _T{}class NT{}class iI{}class aI{}class oI{}class RT{}class sI{get text(){var t,n,r;let i="",o=!1;const l=[];for(const c of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,f]of Object.entries(c))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,i+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var t,n,r;let i="";const o=[];for(const l of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Af{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const r=new Af;if(r.name=t.name,r.metadata=t.metadata,r.done=t.done,r.error=t.error,n){const i=t.response;if(i){const o=new ET,l=i.videos;o.generatedVideos=l==null?void 0:l.map(c=>({video:{uri:c.gcsUri,videoBytes:c.bytesBase64Encoded?iy(c.bytesBase64Encoded):void 0,mimeType:c.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=t.response;if(i){const o=new ET,l=i.generateVideoResponse,c=l==null?void 0:l.generatedSamples;o.generatedVideos=c==null?void 0:c.map(d=>{const f=d.video;return{video:{uri:f==null?void 0:f.uri,videoBytes:f!=null&&f.encodedVideo?iy(f==null?void 0:f.encodedVideo):void 0,mimeType:d.encoding}}}),o.raiMediaFilteredCount=l==null?void 0:l.raiMediaFilteredCount,o.raiMediaFilteredReasons=l==null?void 0:l.raiMediaFilteredReasons,r.response=o}}return r}}class lI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nt(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function uM(e,t){const n=nt(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function cM(e){return Array.isArray(e)?e.map(t=>Ef(t)):[Ef(e)]}function Ef(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function fM(e){const t=Ef(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function dM(e){const t=Ef(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function PT(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function mM(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>PT(t)):[PT(e)]}function sy(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function DT(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function kT(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function mn(e){if(e==null)throw new Error("ContentUnion is required");return sy(e)?e:{role:"user",parts:mM(e)}}function hM(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=mn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=mn(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>mn(n)):[mn(t)]}function dr(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(DT(e)||kT(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mn(e)]}const t=[],n=[],r=sy(e[0]);for(const i of e){const o=sy(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(i);else{if(DT(i)||kT(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:mM(n)}),t}function uI(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(we).includes(n[0].toUpperCase())?n[0].toUpperCase():we.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(we).includes(r.toUpperCase())?r.toUpperCase():we.TYPE_UNSPECIFIED})}}function os(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&uI(e.type,t);for(const[l,c]of Object.entries(e))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;t.type=Object.values(we).includes(c.toUpperCase())?c.toUpperCase():we.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=os(c);else if(r.includes(l)){const d=[];for(const f of c){if(f.type=="null"){t.nullable=!0;continue}d.push(os(f))}t[l]=d}else if(i.includes(l)){const d={};for(const[f,m]of Object.entries(c))d[f]=os(m);t[l]=d}else{if(l==="additionalProperties")continue;t[l]=c}return t}function mv(e){return os(e)}function hv(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function pv(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function bs(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=os(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=os(t.response));return e}function Ss(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function cI(e,t,n,r=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function Ci(e,t){if(typeof t!="string")throw new Error("name must be a string");return cI(e,t,"cachedContents")}function pM(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function co(e){return iy(e)}function fI(e){return e!=null&&typeof e=="object"&&"name"in e}function dI(e){return e!=null&&typeof e=="object"&&"video"in e}function mI(e){return e!=null&&typeof e=="object"&&"uri"in e}function gM(e){var t;let n;if(fI(e)&&(n=e.name),!(mI(e)&&(n=e.uri,n===void 0))&&!(dI(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function yM(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function vM(e){for(const t of["models","tunedModels","publisherModels"])if(hI(e,t))return e[t];return[]}function hI(e,t){return e!==null&&typeof e=="object"&&t in e}function pI(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function gI(e,t={}){const n=[],r=new Set;for(const i of e){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const l=pI(i,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function xM(e,t){if(typeof t!="string"&&!Array.isArray(t)){if(e&&e.isVertexAI()){if(t.gcsUri&&t.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!t.gcsUri&&!t.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(t.inlinedRequests&&t.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!t.inlinedRequests&&!t.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return t}else{if(Array.isArray(t))return{inlinedRequests:t};if(typeof t=="string"){if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:[t]};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};if(t.startsWith("files/"))return{fileName:t}}}throw new Error(`Unsupported source: ${t}`)}function yI(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Cs(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function bM(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vI(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function xI(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function bI(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function SI(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],vI(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],xI(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],bI(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function SM(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>SI(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function CI(e){const t={},n=h(e,["anyOf"]);n!=null&&p(t,["anyOf"],n);const r=h(e,["default"]);r!=null&&p(t,["default"],r);const i=h(e,["description"]);i!=null&&p(t,["description"],i);const o=h(e,["enum"]);o!=null&&p(t,["enum"],o);const l=h(e,["example"]);l!=null&&p(t,["example"],l);const c=h(e,["format"]);c!=null&&p(t,["format"],c);const d=h(e,["items"]);d!=null&&p(t,["items"],d);const f=h(e,["maxItems"]);f!=null&&p(t,["maxItems"],f);const m=h(e,["maxLength"]);m!=null&&p(t,["maxLength"],m);const y=h(e,["maxProperties"]);y!=null&&p(t,["maxProperties"],y);const v=h(e,["maximum"]);v!=null&&p(t,["maximum"],v);const S=h(e,["minItems"]);S!=null&&p(t,["minItems"],S);const T=h(e,["minLength"]);T!=null&&p(t,["minLength"],T);const w=h(e,["minProperties"]);w!=null&&p(t,["minProperties"],w);const A=h(e,["minimum"]);A!=null&&p(t,["minimum"],A);const M=h(e,["nullable"]);M!=null&&p(t,["nullable"],M);const P=h(e,["pattern"]);P!=null&&p(t,["pattern"],P);const N=h(e,["properties"]);N!=null&&p(t,["properties"],N);const O=h(e,["propertyOrdering"]);O!=null&&p(t,["propertyOrdering"],O);const _=h(e,["required"]);_!=null&&p(t,["required"],_);const D=h(e,["title"]);D!=null&&p(t,["title"],D);const k=h(e,["type"]);return k!=null&&p(t,["type"],k),t}function TI(e){const t={};if(h(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=h(e,["category"]);n!=null&&p(t,["category"],n);const r=h(e,["threshold"]);return r!=null&&p(t,["threshold"],r),t}function wI(e){const t={},n=h(e,["behavior"]);n!=null&&p(t,["behavior"],n);const r=h(e,["description"]);r!=null&&p(t,["description"],r);const i=h(e,["name"]);i!=null&&p(t,["name"],i);const o=h(e,["parameters"]);o!=null&&p(t,["parameters"],o);const l=h(e,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=h(e,["response"]);c!=null&&p(t,["response"],c);const d=h(e,["responseJsonSchema"]);return d!=null&&p(t,["responseJsonSchema"],d),t}function AI(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function EI(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],AI(n)),t}function MI(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function _I(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],MI(n)),t}function NI(){return{}}function RI(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>wI(f))),p(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearch"]);r!=null&&p(t,["googleSearch"],EI(r));const i=h(e,["googleSearchRetrieval"]);if(i!=null&&p(t,["googleSearchRetrieval"],_I(i)),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(e,["urlContext"])!=null&&p(t,["urlContext"],NI());const l=h(e,["codeExecution"]);l!=null&&p(t,["codeExecution"],l);const c=h(e,["computerUse"]);return c!=null&&p(t,["computerUse"],c),t}function PI(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);return r!=null&&p(t,["allowedFunctionNames"],r),t}function DI(e){const t={},n=h(e,["latitude"]);n!=null&&p(t,["latitude"],n);const r=h(e,["longitude"]);return r!=null&&p(t,["longitude"],r),t}function kI(e){const t={},n=h(e,["latLng"]);n!=null&&p(t,["latLng"],DI(n));const r=h(e,["languageCode"]);return r!=null&&p(t,["languageCode"],r),t}function II(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&p(t,["functionCallingConfig"],PI(n));const r=h(e,["retrievalConfig"]);return r!=null&&p(t,["retrievalConfig"],kI(r)),t}function OI(e){const t={},n=h(e,["voiceName"]);return n!=null&&p(t,["voiceName"],n),t}function CM(e){const t={},n=h(e,["prebuiltVoiceConfig"]);return n!=null&&p(t,["prebuiltVoiceConfig"],OI(n)),t}function LI(e){const t={},n=h(e,["speaker"]);n!=null&&p(t,["speaker"],n);const r=h(e,["voiceConfig"]);return r!=null&&p(t,["voiceConfig"],CM(r)),t}function jI(e){const t={},n=h(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>LI(i))),p(t,["speakerVoiceConfigs"],r)}return t}function UI(e){const t={},n=h(e,["voiceConfig"]);n!=null&&p(t,["voiceConfig"],CM(n));const r=h(e,["multiSpeakerVoiceConfig"]);r!=null&&p(t,["multiSpeakerVoiceConfig"],jI(r));const i=h(e,["languageCode"]);return i!=null&&p(t,["languageCode"],i),t}function $I(e){const t={},n=h(e,["includeThoughts"]);n!=null&&p(t,["includeThoughts"],n);const r=h(e,["thinkingBudget"]);return r!=null&&p(t,["thinkingBudget"],r),t}function BI(e,t,n){const r={},i=h(t,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],SM(mn(i)));const o=h(t,["temperature"]);o!=null&&p(r,["temperature"],o);const l=h(t,["topP"]);l!=null&&p(r,["topP"],l);const c=h(t,["topK"]);c!=null&&p(r,["topK"],c);const d=h(t,["candidateCount"]);d!=null&&p(r,["candidateCount"],d);const f=h(t,["maxOutputTokens"]);f!=null&&p(r,["maxOutputTokens"],f);const m=h(t,["stopSequences"]);m!=null&&p(r,["stopSequences"],m);const y=h(t,["responseLogprobs"]);y!=null&&p(r,["responseLogprobs"],y);const v=h(t,["logprobs"]);v!=null&&p(r,["logprobs"],v);const S=h(t,["presencePenalty"]);S!=null&&p(r,["presencePenalty"],S);const T=h(t,["frequencyPenalty"]);T!=null&&p(r,["frequencyPenalty"],T);const w=h(t,["seed"]);w!=null&&p(r,["seed"],w);const A=h(t,["responseMimeType"]);A!=null&&p(r,["responseMimeType"],A);const M=h(t,["responseSchema"]);M!=null&&p(r,["responseSchema"],CI(mv(M)));const P=h(t,["responseJsonSchema"]);if(P!=null&&p(r,["responseJsonSchema"],P),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=h(t,["safetySettings"]);if(n!==void 0&&N!=null){let K=N;Array.isArray(K)&&(K=K.map(V=>TI(V))),p(n,["safetySettings"],K)}const O=h(t,["tools"]);if(n!==void 0&&O!=null){let K=Ss(O);Array.isArray(K)&&(K=K.map(V=>RI(bs(V)))),p(n,["tools"],K)}const _=h(t,["toolConfig"]);if(n!==void 0&&_!=null&&p(n,["toolConfig"],II(_)),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=h(t,["cachedContent"]);n!==void 0&&D!=null&&p(n,["cachedContent"],Ci(e,D));const k=h(t,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const B=h(t,["mediaResolution"]);B!=null&&p(r,["mediaResolution"],B);const j=h(t,["speechConfig"]);if(j!=null&&p(r,["speechConfig"],UI(hv(j))),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const re=h(t,["thinkingConfig"]);return re!=null&&p(r,["thinkingConfig"],$I(re)),r}function qI(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["request","model"],nt(e,r));const i=h(t,["contents"]);if(i!=null){let l=dr(i);Array.isArray(l)&&(l=l.map(c=>SM(c))),p(n,["request","contents"],l)}const o=h(t,["config"]);return o!=null&&p(n,["request","generationConfig"],BI(e,o,n)),n}function VI(e,t){const n={};if(h(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(t,["fileName"]);r!=null&&p(n,["fileName"],r);const i=h(t,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>qI(e,l))),p(n,["requests","requests"],o)}return n}function zI(e,t){const n={},r=h(e,["displayName"]);if(t!==void 0&&r!=null&&p(t,["batch","displayName"],r),h(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function FI(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["src"]);i!=null&&p(n,["batch","inputConfig"],VI(e,xM(e,i)));const o=h(t,["config"]);return o!=null&&p(n,["config"],zI(o,n)),n}function HI(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Cs(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function GI(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Cs(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function KI(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);if(t!==void 0&&i!=null&&p(t,["_query","pageToken"],i),h(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function YI(e){const t={},n=h(e,["config"]);return n!=null&&p(t,["config"],KI(n,t)),t}function WI(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Cs(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function JI(e){const t={},n=h(e,["format"]);n!=null&&p(t,["instancesFormat"],n);const r=h(e,["gcsUri"]);r!=null&&p(t,["gcsSource","uris"],r);const i=h(e,["bigqueryUri"]);if(i!=null&&p(t,["bigquerySource","inputUri"],i),h(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function XI(e){const t={},n=h(e,["format"]);n!=null&&p(t,["predictionsFormat"],n);const r=h(e,["gcsUri"]);r!=null&&p(t,["gcsDestination","outputUriPrefix"],r);const i=h(e,["bigqueryUri"]);if(i!=null&&p(t,["bigqueryDestination","outputUri"],i),h(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return t}function QI(e,t){const n={},r=h(e,["displayName"]);t!==void 0&&r!=null&&p(t,["displayName"],r);const i=h(e,["dest"]);return t!==void 0&&i!=null&&p(t,["outputConfig"],XI(yI(i))),n}function ZI(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["model"],nt(e,r));const i=h(t,["src"]);i!=null&&p(n,["inputConfig"],JI(xM(e,i)));const o=h(t,["config"]);return o!=null&&p(n,["config"],QI(o,n)),n}function eO(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Cs(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function tO(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Cs(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function nO(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);t!==void 0&&i!=null&&p(t,["_query","pageToken"],i);const o=h(e,["filter"]);return t!==void 0&&o!=null&&p(t,["_query","filter"],o),n}function rO(e){const t={},n=h(e,["config"]);return n!=null&&p(t,["config"],nO(n,t)),t}function iO(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Cs(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function aO(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function oO(e){const t={},n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function sO(e){const t={},n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function lO(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],aO(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],oO(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],sO(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function uO(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lO(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function cO(e){const t={},n=h(e,["citationSources"]);return n!=null&&p(t,["citations"],n),t}function fO(e){const t={},n=h(e,["retrievedUrl"]);n!=null&&p(t,["retrievedUrl"],n);const r=h(e,["urlRetrievalStatus"]);return r!=null&&p(t,["urlRetrievalStatus"],r),t}function dO(e){const t={},n=h(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fO(i))),p(t,["urlMetadata"],r)}return t}function mO(e){const t={},n=h(e,["content"]);n!=null&&p(t,["content"],uO(n));const r=h(e,["citationMetadata"]);r!=null&&p(t,["citationMetadata"],cO(r));const i=h(e,["tokenCount"]);i!=null&&p(t,["tokenCount"],i);const o=h(e,["finishReason"]);o!=null&&p(t,["finishReason"],o);const l=h(e,["urlContextMetadata"]);l!=null&&p(t,["urlContextMetadata"],dO(l));const c=h(e,["avgLogprobs"]);c!=null&&p(t,["avgLogprobs"],c);const d=h(e,["groundingMetadata"]);d!=null&&p(t,["groundingMetadata"],d);const f=h(e,["index"]);f!=null&&p(t,["index"],f);const m=h(e,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const y=h(e,["safetyRatings"]);return y!=null&&p(t,["safetyRatings"],y),t}function hO(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>mO(f))),p(t,["candidates"],d)}const i=h(e,["modelVersion"]);i!=null&&p(t,["modelVersion"],i);const o=h(e,["promptFeedback"]);o!=null&&p(t,["promptFeedback"],o);const l=h(e,["responseId"]);l!=null&&p(t,["responseId"],l);const c=h(e,["usageMetadata"]);return c!=null&&p(t,["usageMetadata"],c),t}function TM(e){const t={},n=h(e,["details"]);n!=null&&p(t,["details"],n);const r=h(e,["code"]);r!=null&&p(t,["code"],r);const i=h(e,["message"]);return i!=null&&p(t,["message"],i),t}function pO(e){const t={},n=h(e,["response"]);n!=null&&p(t,["response"],hO(n));const r=h(e,["error"]);return r!=null&&p(t,["error"],TM(r)),t}function gO(e){const t={},n=h(e,["responsesFile"]);n!=null&&p(t,["fileName"],n);const r=h(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>pO(o))),p(t,["inlinedResponses"],i)}return t}function ly(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["metadata","displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["metadata","state"]);i!=null&&p(t,["state"],bM(i));const o=h(e,["metadata","createTime"]);o!=null&&p(t,["createTime"],o);const l=h(e,["metadata","endTime"]);l!=null&&p(t,["endTime"],l);const c=h(e,["metadata","updateTime"]);c!=null&&p(t,["updateTime"],c);const d=h(e,["metadata","model"]);d!=null&&p(t,["model"],d);const f=h(e,["metadata","output"]);return f!=null&&p(t,["dest"],gO(f)),t}function yO(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>ly(l))),p(t,["batchJobs"],o)}return t}function vO(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["done"]);i!=null&&p(t,["done"],i);const o=h(e,["error"]);return o!=null&&p(t,["error"],TM(o)),t}function wM(e){const t={},n=h(e,["details"]);n!=null&&p(t,["details"],n);const r=h(e,["code"]);r!=null&&p(t,["code"],r);const i=h(e,["message"]);return i!=null&&p(t,["message"],i),t}function xO(e){const t={},n=h(e,["instancesFormat"]);n!=null&&p(t,["format"],n);const r=h(e,["gcsSource","uris"]);r!=null&&p(t,["gcsUri"],r);const i=h(e,["bigquerySource","inputUri"]);return i!=null&&p(t,["bigqueryUri"],i),t}function bO(e){const t={},n=h(e,["predictionsFormat"]);n!=null&&p(t,["format"],n);const r=h(e,["gcsDestination","outputUriPrefix"]);r!=null&&p(t,["gcsUri"],r);const i=h(e,["bigqueryDestination","outputUri"]);return i!=null&&p(t,["bigqueryUri"],i),t}function uy(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["state"]);i!=null&&p(t,["state"],bM(i));const o=h(e,["error"]);o!=null&&p(t,["error"],wM(o));const l=h(e,["createTime"]);l!=null&&p(t,["createTime"],l);const c=h(e,["startTime"]);c!=null&&p(t,["startTime"],c);const d=h(e,["endTime"]);d!=null&&p(t,["endTime"],d);const f=h(e,["updateTime"]);f!=null&&p(t,["updateTime"],f);const m=h(e,["model"]);m!=null&&p(t,["model"],m);const y=h(e,["inputConfig"]);y!=null&&p(t,["src"],xO(y));const v=h(e,["outputConfig"]);return v!=null&&p(t,["dest"],bO(v)),t}function SO(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>uy(l))),p(t,["batchJobs"],o)}return t}function CO(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["done"]);i!=null&&p(t,["done"],i);const o=h(e,["error"]);return o!=null&&p(t,["error"],wM(o)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Za;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Za||(Za={}));class pu{constructor(t,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,i)}init(t,n,r){var i,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TO extends uo{constructor(t){super(),this.apiClient=t,this.create=async n=>{if(this.apiClient.isVertexAI()){const i=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${i}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new pu(Za.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=ZI(this.apiClient,t);return c=_e("batchPredictionJobs",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>uy(m))}else{const f=FI(this.apiClient,t);return c=_e("{model}:batchGenerateContent",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>ly(m))}}async get(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=eO(this.apiClient,t);return c=_e("batchPredictionJobs/{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>uy(m))}else{const f=HI(this.apiClient,t);return c=_e("batches/{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>ly(m))}}async cancel(t){var n,r,i,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=tO(this.apiClient,t);l=_e("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const d=GI(this.apiClient,t);l=_e("batches/{name}:cancel",d._url),c=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=rO(t);return c=_e("batchPredictionJobs",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=SO(m),v=new RT;return Object.assign(v,y),v})}else{const f=YI(t);return c=_e("batches",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=yO(m),v=new RT;return Object.assign(v,y),v})}}async delete(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=iO(this.apiClient,t);return c=_e("batchPredictionJobs/{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>CO(m))}else{const f=WI(this.apiClient,t);return c=_e("batches/{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>vO(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wO(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function AO(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function EO(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function MO(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],wO(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],AO(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],EO(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function IT(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>MO(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function _O(e){const t={},n=h(e,["behavior"]);n!=null&&p(t,["behavior"],n);const r=h(e,["description"]);r!=null&&p(t,["description"],r);const i=h(e,["name"]);i!=null&&p(t,["name"],i);const o=h(e,["parameters"]);o!=null&&p(t,["parameters"],o);const l=h(e,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=h(e,["response"]);c!=null&&p(t,["response"],c);const d=h(e,["responseJsonSchema"]);return d!=null&&p(t,["responseJsonSchema"],d),t}function NO(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function RO(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],NO(n)),t}function PO(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function DO(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],PO(n)),t}function kO(){return{}}function IO(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>_O(f))),p(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearch"]);r!=null&&p(t,["googleSearch"],RO(r));const i=h(e,["googleSearchRetrieval"]);if(i!=null&&p(t,["googleSearchRetrieval"],DO(i)),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(e,["urlContext"])!=null&&p(t,["urlContext"],kO());const l=h(e,["codeExecution"]);l!=null&&p(t,["codeExecution"],l);const c=h(e,["computerUse"]);return c!=null&&p(t,["computerUse"],c),t}function OO(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);return r!=null&&p(t,["allowedFunctionNames"],r),t}function LO(e){const t={},n=h(e,["latitude"]);n!=null&&p(t,["latitude"],n);const r=h(e,["longitude"]);return r!=null&&p(t,["longitude"],r),t}function jO(e){const t={},n=h(e,["latLng"]);n!=null&&p(t,["latLng"],LO(n));const r=h(e,["languageCode"]);return r!=null&&p(t,["languageCode"],r),t}function UO(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&p(t,["functionCallingConfig"],OO(n));const r=h(e,["retrievalConfig"]);return r!=null&&p(t,["retrievalConfig"],jO(r)),t}function $O(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&p(t,["ttl"],r);const i=h(e,["expireTime"]);t!==void 0&&i!=null&&p(t,["expireTime"],i);const o=h(e,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const l=h(e,["contents"]);if(t!==void 0&&l!=null){let m=dr(l);Array.isArray(m)&&(m=m.map(y=>IT(y))),p(t,["contents"],m)}const c=h(e,["systemInstruction"]);t!==void 0&&c!=null&&p(t,["systemInstruction"],IT(mn(c)));const d=h(e,["tools"]);if(t!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>IO(y))),p(t,["tools"],m)}const f=h(e,["toolConfig"]);if(t!==void 0&&f!=null&&p(t,["toolConfig"],UO(f)),h(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function BO(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["model"],uM(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],$O(i,n)),n}function qO(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Ci(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function VO(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Ci(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function zO(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&p(t,["ttl"],r);const i=h(e,["expireTime"]);return t!==void 0&&i!=null&&p(t,["expireTime"],i),n}function FO(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Ci(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],zO(i,n)),n}function HO(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);return t!==void 0&&i!=null&&p(t,["_query","pageToken"],i),n}function GO(e){const t={},n=h(e,["config"]);return n!=null&&p(t,["config"],HO(n,t)),t}function KO(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function YO(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["data"]);r!=null&&p(t,["data"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function WO(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["fileUri"]);r!=null&&p(t,["fileUri"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function JO(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],KO(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],YO(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],WO(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function OT(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>JO(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function XO(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&p(t,["description"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["parameters"]);i!=null&&p(t,["parameters"],i);const o=h(e,["parametersJsonSchema"]);o!=null&&p(t,["parametersJsonSchema"],o);const l=h(e,["response"]);l!=null&&p(t,["response"],l);const c=h(e,["responseJsonSchema"]);return c!=null&&p(t,["responseJsonSchema"],c),t}function QO(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function ZO(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],QO(n)),t}function eL(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function tL(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],eL(n)),t}function nL(){return{}}function rL(e){const t={},n=h(e,["apiKeyString"]);return n!=null&&p(t,["apiKeyString"],n),t}function iL(e){const t={},n=h(e,["apiKeyConfig"]);n!=null&&p(t,["apiKeyConfig"],rL(n));const r=h(e,["authType"]);r!=null&&p(t,["authType"],r);const i=h(e,["googleServiceAccountConfig"]);i!=null&&p(t,["googleServiceAccountConfig"],i);const o=h(e,["httpBasicAuthConfig"]);o!=null&&p(t,["httpBasicAuthConfig"],o);const l=h(e,["oauthConfig"]);l!=null&&p(t,["oauthConfig"],l);const c=h(e,["oidcConfig"]);return c!=null&&p(t,["oidcConfig"],c),t}function aL(e){const t={},n=h(e,["authConfig"]);return n!=null&&p(t,["authConfig"],iL(n)),t}function oL(){return{}}function sL(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>XO(v))),p(t,["functionDeclarations"],y)}const r=h(e,["retrieval"]);r!=null&&p(t,["retrieval"],r);const i=h(e,["googleSearch"]);i!=null&&p(t,["googleSearch"],ZO(i));const o=h(e,["googleSearchRetrieval"]);o!=null&&p(t,["googleSearchRetrieval"],tL(o)),h(e,["enterpriseWebSearch"])!=null&&p(t,["enterpriseWebSearch"],nL());const c=h(e,["googleMaps"]);c!=null&&p(t,["googleMaps"],aL(c)),h(e,["urlContext"])!=null&&p(t,["urlContext"],oL());const f=h(e,["codeExecution"]);f!=null&&p(t,["codeExecution"],f);const m=h(e,["computerUse"]);return m!=null&&p(t,["computerUse"],m),t}function lL(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);return r!=null&&p(t,["allowedFunctionNames"],r),t}function uL(e){const t={},n=h(e,["latitude"]);n!=null&&p(t,["latitude"],n);const r=h(e,["longitude"]);return r!=null&&p(t,["longitude"],r),t}function cL(e){const t={},n=h(e,["latLng"]);n!=null&&p(t,["latLng"],uL(n));const r=h(e,["languageCode"]);return r!=null&&p(t,["languageCode"],r),t}function fL(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&p(t,["functionCallingConfig"],lL(n));const r=h(e,["retrievalConfig"]);return r!=null&&p(t,["retrievalConfig"],cL(r)),t}function dL(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&p(t,["ttl"],r);const i=h(e,["expireTime"]);t!==void 0&&i!=null&&p(t,["expireTime"],i);const o=h(e,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const l=h(e,["contents"]);if(t!==void 0&&l!=null){let y=dr(l);Array.isArray(y)&&(y=y.map(v=>OT(v))),p(t,["contents"],y)}const c=h(e,["systemInstruction"]);t!==void 0&&c!=null&&p(t,["systemInstruction"],OT(mn(c)));const d=h(e,["tools"]);if(t!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>sL(v))),p(t,["tools"],y)}const f=h(e,["toolConfig"]);t!==void 0&&f!=null&&p(t,["toolConfig"],fL(f));const m=h(e,["kmsKeyName"]);return t!==void 0&&m!=null&&p(t,["encryption_spec","kmsKeyName"],m),n}function mL(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["model"],uM(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],dL(i,n)),n}function hL(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Ci(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function pL(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Ci(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function gL(e,t){const n={},r=h(e,["ttl"]);t!==void 0&&r!=null&&p(t,["ttl"],r);const i=h(e,["expireTime"]);return t!==void 0&&i!=null&&p(t,["expireTime"],i),n}function yL(e,t){const n={},r=h(t,["name"]);r!=null&&p(n,["_url","name"],Ci(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],gL(i,n)),n}function vL(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);return t!==void 0&&i!=null&&p(t,["_query","pageToken"],i),n}function xL(e){const t={},n=h(e,["config"]);return n!=null&&p(t,["config"],vL(n,t)),t}function Sf(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["model"]);i!=null&&p(t,["model"],i);const o=h(e,["createTime"]);o!=null&&p(t,["createTime"],o);const l=h(e,["updateTime"]);l!=null&&p(t,["updateTime"],l);const c=h(e,["expireTime"]);c!=null&&p(t,["expireTime"],c);const d=h(e,["usageMetadata"]);return d!=null&&p(t,["usageMetadata"],d),t}function bL(){return{}}function SL(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Sf(l))),p(t,["cachedContents"],o)}return t}function Cf(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["model"]);i!=null&&p(t,["model"],i);const o=h(e,["createTime"]);o!=null&&p(t,["createTime"],o);const l=h(e,["updateTime"]);l!=null&&p(t,["updateTime"],l);const c=h(e,["expireTime"]);c!=null&&p(t,["expireTime"],c);const d=h(e,["usageMetadata"]);return d!=null&&p(t,["usageMetadata"],d),t}function CL(){return{}}function TL(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Cf(l))),p(t,["cachedContents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wL extends uo{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new pu(Za.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=mL(this.apiClient,t);return c=_e("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>Cf(m))}else{const f=BO(this.apiClient,t);return c=_e("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>Sf(m))}}async get(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=hL(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>Cf(m))}else{const f=qO(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>Sf(m))}}async delete(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=pL(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(()=>{const m=CL(),y=new _T;return Object.assign(y,m),y})}else{const f=VO(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(()=>{const m=bL(),y=new _T;return Object.assign(y,m),y})}}async update(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=yL(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>Cf(m))}else{const f=FO(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>Sf(m))}}async listInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=xL(t);return c=_e("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=TL(m),v=new NT;return Object.assign(v,y),v})}else{const f=GO(t);return c=_e("cachedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=SL(m),v=new NT;return Object.assign(v,y),v})}}}function LT(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(e){return this instanceof yt?(this.v=e,this):new yt(e)}function ss(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(S){return function(T){return Promise.resolve(T).then(S,y)}}function c(S,T){r[S]&&(i[S]=function(w){return new Promise(function(A,M){o.push([S,w,A,M])>1||d(S,w)})},T&&(i[S]=T(i[S])))}function d(S,T){try{f(r[S](T))}catch(w){v(o[0][3],w)}}function f(S){S.value instanceof yt?Promise.resolve(S.value.v).then(m,y):v(o[0][2],S)}function m(S){d("next",S)}function y(S){d("throw",S)}function v(S,T){S(T),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Ql(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof LT=="function"?LT(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(l){return new Promise(function(c,d){l=e[o](l),i(c,d,l.done,l.value)})}}function i(o,l,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AL(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:AM(n)}function AM(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function EL(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function jT(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const i=[];let o=!0;for(;r<n&&e[r].role==="model";)i.push(e[r]),o&&!AM(e[r])&&(o=!1),r++;o?t.push(...i):t.pop()}return t}class ML{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new _L(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class _L{constructor(t,n,r,i={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),EL(o)}async sendMessage(t){var n;await this.sendPromise;const r=mn(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await i,f=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,m=d.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];m!=null&&(v=(c=m.slice(y))!==null&&c!==void 0?c:[]);const S=f?[f]:[];this.recordHistory(r,S,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const r=mn(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(t=!1){const n=t?jT(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var r,i;return ss(this,arguments,function*(){var l,c,d,f;const m=[];try{for(var y=!0,v=Ql(t),S;S=yield yt(v.next()),l=S.done,!l;y=!0){f=S.value,y=!1;const T=f;if(AL(T)){const w=(i=(r=T.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;w!==void 0&&m.push(w)}yield yield yt(T)}}catch(T){c={error:T}}finally{try{!y&&!l&&(d=v.return)&&(yield yt(d.call(v)))}finally{if(c)throw c.error}}this.recordHistory(n,m)})}recordHistory(t,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...jT(r)):this.history.push(t),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vd extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,vd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NL(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);return t!==void 0&&i!=null&&p(t,["_query","pageToken"],i),n}function RL(e){const t={},n=h(e,["config"]);return n!=null&&p(t,["config"],NL(n,t)),t}function PL(e){const t={},n=h(e,["details"]);n!=null&&p(t,["details"],n);const r=h(e,["message"]);r!=null&&p(t,["message"],r);const i=h(e,["code"]);return i!=null&&p(t,["code"],i),t}function DL(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["mimeType"]);i!=null&&p(t,["mimeType"],i);const o=h(e,["sizeBytes"]);o!=null&&p(t,["sizeBytes"],o);const l=h(e,["createTime"]);l!=null&&p(t,["createTime"],l);const c=h(e,["expirationTime"]);c!=null&&p(t,["expirationTime"],c);const d=h(e,["updateTime"]);d!=null&&p(t,["updateTime"],d);const f=h(e,["sha256Hash"]);f!=null&&p(t,["sha256Hash"],f);const m=h(e,["uri"]);m!=null&&p(t,["uri"],m);const y=h(e,["downloadUri"]);y!=null&&p(t,["downloadUri"],y);const v=h(e,["state"]);v!=null&&p(t,["state"],v);const S=h(e,["source"]);S!=null&&p(t,["source"],S);const T=h(e,["videoMetadata"]);T!=null&&p(t,["videoMetadata"],T);const w=h(e,["error"]);return w!=null&&p(t,["error"],PL(w)),t}function kL(e){const t={},n=h(e,["file"]);n!=null&&p(t,["file"],DL(n));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function IL(e){const t={},n=h(e,["name"]);n!=null&&p(t,["_url","file"],gM(n));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function OL(e){const t={},n=h(e,["name"]);n!=null&&p(t,["_url","file"],gM(n));const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function LL(e){const t={},n=h(e,["details"]);n!=null&&p(t,["details"],n);const r=h(e,["message"]);r!=null&&p(t,["message"],r);const i=h(e,["code"]);return i!=null&&p(t,["code"],i),t}function cy(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["mimeType"]);i!=null&&p(t,["mimeType"],i);const o=h(e,["sizeBytes"]);o!=null&&p(t,["sizeBytes"],o);const l=h(e,["createTime"]);l!=null&&p(t,["createTime"],l);const c=h(e,["expirationTime"]);c!=null&&p(t,["expirationTime"],c);const d=h(e,["updateTime"]);d!=null&&p(t,["updateTime"],d);const f=h(e,["sha256Hash"]);f!=null&&p(t,["sha256Hash"],f);const m=h(e,["uri"]);m!=null&&p(t,["uri"],m);const y=h(e,["downloadUri"]);y!=null&&p(t,["downloadUri"],y);const v=h(e,["state"]);v!=null&&p(t,["state"],v);const S=h(e,["source"]);S!=null&&p(t,["source"],S);const T=h(e,["videoMetadata"]);T!=null&&p(t,["videoMetadata"],T);const w=h(e,["error"]);return w!=null&&p(t,["error"],LL(w)),t}function jL(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>cy(l))),p(t,["files"],o)}return t}function UL(e){const t={},n=h(e,["sdkHttpResponse"]);return n!=null&&p(t,["sdkHttpResponse"],n),t}function $L(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BL extends uo{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new pu(Za.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>cy(n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=RL(t);return o=_e("files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const f=jL(d),m=new iI;return Object.assign(m,f),m})}}async createInternal(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=kL(t);return o=_e("upload/v1beta/files",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>{const f=UL(d),m=new aI;return Object.assign(m,f),m})}}async get(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=IL(t);return o=_e("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>cy(d))}}async delete(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=OL(t);return o=_e("files/{file}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=$L(),f=new oI;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qL(e){const t={},n=h(e,["voiceName"]);return n!=null&&p(t,["voiceName"],n),t}function EM(e){const t={},n=h(e,["prebuiltVoiceConfig"]);return n!=null&&p(t,["prebuiltVoiceConfig"],qL(n)),t}function VL(e){const t={},n=h(e,["speaker"]);n!=null&&p(t,["speaker"],n);const r=h(e,["voiceConfig"]);return r!=null&&p(t,["voiceConfig"],EM(r)),t}function zL(e){const t={},n=h(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>VL(i))),p(t,["speakerVoiceConfigs"],r)}return t}function FL(e){const t={},n=h(e,["voiceConfig"]);n!=null&&p(t,["voiceConfig"],EM(n));const r=h(e,["multiSpeakerVoiceConfig"]);r!=null&&p(t,["multiSpeakerVoiceConfig"],zL(r));const i=h(e,["languageCode"]);return i!=null&&p(t,["languageCode"],i),t}function HL(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function GL(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function KL(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function YL(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],HL(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],GL(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],KL(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function WL(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>YL(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function JL(e){const t={},n=h(e,["behavior"]);n!=null&&p(t,["behavior"],n);const r=h(e,["description"]);r!=null&&p(t,["description"],r);const i=h(e,["name"]);i!=null&&p(t,["name"],i);const o=h(e,["parameters"]);o!=null&&p(t,["parameters"],o);const l=h(e,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=h(e,["response"]);c!=null&&p(t,["response"],c);const d=h(e,["responseJsonSchema"]);return d!=null&&p(t,["responseJsonSchema"],d),t}function XL(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function QL(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],XL(n)),t}function ZL(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function ej(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],ZL(n)),t}function tj(){return{}}function nj(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>JL(f))),p(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearch"]);r!=null&&p(t,["googleSearch"],QL(r));const i=h(e,["googleSearchRetrieval"]);if(i!=null&&p(t,["googleSearchRetrieval"],ej(i)),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(e,["urlContext"])!=null&&p(t,["urlContext"],tj());const l=h(e,["codeExecution"]);l!=null&&p(t,["codeExecution"],l);const c=h(e,["computerUse"]);return c!=null&&p(t,["computerUse"],c),t}function rj(e){const t={},n=h(e,["handle"]);if(n!=null&&p(t,["handle"],n),h(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function UT(){return{}}function ij(e){const t={},n=h(e,["disabled"]);n!=null&&p(t,["disabled"],n);const r=h(e,["startOfSpeechSensitivity"]);r!=null&&p(t,["startOfSpeechSensitivity"],r);const i=h(e,["endOfSpeechSensitivity"]);i!=null&&p(t,["endOfSpeechSensitivity"],i);const o=h(e,["prefixPaddingMs"]);o!=null&&p(t,["prefixPaddingMs"],o);const l=h(e,["silenceDurationMs"]);return l!=null&&p(t,["silenceDurationMs"],l),t}function aj(e){const t={},n=h(e,["automaticActivityDetection"]);n!=null&&p(t,["automaticActivityDetection"],ij(n));const r=h(e,["activityHandling"]);r!=null&&p(t,["activityHandling"],r);const i=h(e,["turnCoverage"]);return i!=null&&p(t,["turnCoverage"],i),t}function oj(e){const t={},n=h(e,["targetTokens"]);return n!=null&&p(t,["targetTokens"],n),t}function sj(e){const t={},n=h(e,["triggerTokens"]);n!=null&&p(t,["triggerTokens"],n);const r=h(e,["slidingWindow"]);return r!=null&&p(t,["slidingWindow"],oj(r)),t}function lj(e){const t={},n=h(e,["proactiveAudio"]);return n!=null&&p(t,["proactiveAudio"],n),t}function uj(e,t){const n={},r=h(e,["generationConfig"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig"],r);const i=h(e,["responseModalities"]);t!==void 0&&i!=null&&p(t,["setup","generationConfig","responseModalities"],i);const o=h(e,["temperature"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig","temperature"],o);const l=h(e,["topP"]);t!==void 0&&l!=null&&p(t,["setup","generationConfig","topP"],l);const c=h(e,["topK"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topK"],c);const d=h(e,["maxOutputTokens"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","maxOutputTokens"],d);const f=h(e,["mediaResolution"]);t!==void 0&&f!=null&&p(t,["setup","generationConfig","mediaResolution"],f);const m=h(e,["seed"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","seed"],m);const y=h(e,["speechConfig"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","speechConfig"],FL(pv(y)));const v=h(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],v);const S=h(e,["systemInstruction"]);t!==void 0&&S!=null&&p(t,["setup","systemInstruction"],WL(mn(S)));const T=h(e,["tools"]);if(t!==void 0&&T!=null){let _=Ss(T);Array.isArray(_)&&(_=_.map(D=>nj(bs(D)))),p(t,["setup","tools"],_)}const w=h(e,["sessionResumption"]);t!==void 0&&w!=null&&p(t,["setup","sessionResumption"],rj(w));const A=h(e,["inputAudioTranscription"]);t!==void 0&&A!=null&&p(t,["setup","inputAudioTranscription"],UT());const M=h(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&p(t,["setup","outputAudioTranscription"],UT());const P=h(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&p(t,["setup","realtimeInputConfig"],aj(P));const N=h(e,["contextWindowCompression"]);t!==void 0&&N!=null&&p(t,["setup","contextWindowCompression"],sj(N));const O=h(e,["proactivity"]);return t!==void 0&&O!=null&&p(t,["setup","proactivity"],lj(O)),n}function cj(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["setup","model"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],uj(i,n)),n}function fj(){return{}}function dj(){return{}}function mj(e){const t={},n=h(e,["media"]);n!=null&&p(t,["mediaChunks"],cM(n));const r=h(e,["audio"]);r!=null&&p(t,["audio"],dM(r));const i=h(e,["audioStreamEnd"]);i!=null&&p(t,["audioStreamEnd"],i);const o=h(e,["video"]);o!=null&&p(t,["video"],fM(o));const l=h(e,["text"]);return l!=null&&p(t,["text"],l),h(e,["activityStart"])!=null&&p(t,["activityStart"],fj()),h(e,["activityEnd"])!=null&&p(t,["activityEnd"],dj()),t}function MM(e){const t={},n=h(e,["text"]);n!=null&&p(t,["text"],n);const r=h(e,["weight"]);return r!=null&&p(t,["weight"],r),t}function hj(e){const t={},n=h(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>MM(i))),p(t,["weightedPrompts"],r)}return t}function _M(e){const t={},n=h(e,["temperature"]);n!=null&&p(t,["temperature"],n);const r=h(e,["topK"]);r!=null&&p(t,["topK"],r);const i=h(e,["seed"]);i!=null&&p(t,["seed"],i);const o=h(e,["guidance"]);o!=null&&p(t,["guidance"],o);const l=h(e,["bpm"]);l!=null&&p(t,["bpm"],l);const c=h(e,["density"]);c!=null&&p(t,["density"],c);const d=h(e,["brightness"]);d!=null&&p(t,["brightness"],d);const f=h(e,["scale"]);f!=null&&p(t,["scale"],f);const m=h(e,["muteBass"]);m!=null&&p(t,["muteBass"],m);const y=h(e,["muteDrums"]);y!=null&&p(t,["muteDrums"],y);const v=h(e,["onlyBassAndDrums"]);v!=null&&p(t,["onlyBassAndDrums"],v);const S=h(e,["musicGenerationMode"]);return S!=null&&p(t,["musicGenerationMode"],S),t}function pj(e){const t={},n=h(e,["musicGenerationConfig"]);return n!=null&&p(t,["musicGenerationConfig"],_M(n)),t}function NM(e){const t={},n=h(e,["model"]);return n!=null&&p(t,["model"],n),t}function RM(e){const t={},n=h(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>MM(i))),p(t,["weightedPrompts"],r)}return t}function fy(e){const t={},n=h(e,["setup"]);n!=null&&p(t,["setup"],NM(n));const r=h(e,["clientContent"]);r!=null&&p(t,["clientContent"],RM(r));const i=h(e,["musicGenerationConfig"]);i!=null&&p(t,["musicGenerationConfig"],_M(i));const o=h(e,["playbackControl"]);return o!=null&&p(t,["playbackControl"],o),t}function gj(e){const t={},n=h(e,["voiceName"]);return n!=null&&p(t,["voiceName"],n),t}function yj(e){const t={},n=h(e,["prebuiltVoiceConfig"]);return n!=null&&p(t,["prebuiltVoiceConfig"],gj(n)),t}function vj(e){const t={},n=h(e,["voiceConfig"]);if(n!=null&&p(t,["voiceConfig"],yj(n)),h(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=h(e,["languageCode"]);return r!=null&&p(t,["languageCode"],r),t}function xj(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function bj(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["data"]);r!=null&&p(t,["data"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function Sj(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["fileUri"]);r!=null&&p(t,["fileUri"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function Cj(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],xj(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],bj(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],Sj(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function Tj(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Cj(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function wj(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&p(t,["description"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["parameters"]);i!=null&&p(t,["parameters"],i);const o=h(e,["parametersJsonSchema"]);o!=null&&p(t,["parametersJsonSchema"],o);const l=h(e,["response"]);l!=null&&p(t,["response"],l);const c=h(e,["responseJsonSchema"]);return c!=null&&p(t,["responseJsonSchema"],c),t}function Aj(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function Ej(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],Aj(n)),t}function Mj(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function _j(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],Mj(n)),t}function Nj(){return{}}function Rj(e){const t={},n=h(e,["apiKeyString"]);return n!=null&&p(t,["apiKeyString"],n),t}function Pj(e){const t={},n=h(e,["apiKeyConfig"]);n!=null&&p(t,["apiKeyConfig"],Rj(n));const r=h(e,["authType"]);r!=null&&p(t,["authType"],r);const i=h(e,["googleServiceAccountConfig"]);i!=null&&p(t,["googleServiceAccountConfig"],i);const o=h(e,["httpBasicAuthConfig"]);o!=null&&p(t,["httpBasicAuthConfig"],o);const l=h(e,["oauthConfig"]);l!=null&&p(t,["oauthConfig"],l);const c=h(e,["oidcConfig"]);return c!=null&&p(t,["oidcConfig"],c),t}function Dj(e){const t={},n=h(e,["authConfig"]);return n!=null&&p(t,["authConfig"],Pj(n)),t}function kj(){return{}}function Ij(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>wj(v))),p(t,["functionDeclarations"],y)}const r=h(e,["retrieval"]);r!=null&&p(t,["retrieval"],r);const i=h(e,["googleSearch"]);i!=null&&p(t,["googleSearch"],Ej(i));const o=h(e,["googleSearchRetrieval"]);o!=null&&p(t,["googleSearchRetrieval"],_j(o)),h(e,["enterpriseWebSearch"])!=null&&p(t,["enterpriseWebSearch"],Nj());const c=h(e,["googleMaps"]);c!=null&&p(t,["googleMaps"],Dj(c)),h(e,["urlContext"])!=null&&p(t,["urlContext"],kj());const f=h(e,["codeExecution"]);f!=null&&p(t,["codeExecution"],f);const m=h(e,["computerUse"]);return m!=null&&p(t,["computerUse"],m),t}function Oj(e){const t={},n=h(e,["handle"]);n!=null&&p(t,["handle"],n);const r=h(e,["transparent"]);return r!=null&&p(t,["transparent"],r),t}function $T(){return{}}function Lj(e){const t={},n=h(e,["disabled"]);n!=null&&p(t,["disabled"],n);const r=h(e,["startOfSpeechSensitivity"]);r!=null&&p(t,["startOfSpeechSensitivity"],r);const i=h(e,["endOfSpeechSensitivity"]);i!=null&&p(t,["endOfSpeechSensitivity"],i);const o=h(e,["prefixPaddingMs"]);o!=null&&p(t,["prefixPaddingMs"],o);const l=h(e,["silenceDurationMs"]);return l!=null&&p(t,["silenceDurationMs"],l),t}function jj(e){const t={},n=h(e,["automaticActivityDetection"]);n!=null&&p(t,["automaticActivityDetection"],Lj(n));const r=h(e,["activityHandling"]);r!=null&&p(t,["activityHandling"],r);const i=h(e,["turnCoverage"]);return i!=null&&p(t,["turnCoverage"],i),t}function Uj(e){const t={},n=h(e,["targetTokens"]);return n!=null&&p(t,["targetTokens"],n),t}function $j(e){const t={},n=h(e,["triggerTokens"]);n!=null&&p(t,["triggerTokens"],n);const r=h(e,["slidingWindow"]);return r!=null&&p(t,["slidingWindow"],Uj(r)),t}function Bj(e){const t={},n=h(e,["proactiveAudio"]);return n!=null&&p(t,["proactiveAudio"],n),t}function qj(e,t){const n={},r=h(e,["generationConfig"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig"],r);const i=h(e,["responseModalities"]);t!==void 0&&i!=null&&p(t,["setup","generationConfig","responseModalities"],i);const o=h(e,["temperature"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig","temperature"],o);const l=h(e,["topP"]);t!==void 0&&l!=null&&p(t,["setup","generationConfig","topP"],l);const c=h(e,["topK"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topK"],c);const d=h(e,["maxOutputTokens"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","maxOutputTokens"],d);const f=h(e,["mediaResolution"]);t!==void 0&&f!=null&&p(t,["setup","generationConfig","mediaResolution"],f);const m=h(e,["seed"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","seed"],m);const y=h(e,["speechConfig"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","speechConfig"],vj(pv(y)));const v=h(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],v);const S=h(e,["systemInstruction"]);t!==void 0&&S!=null&&p(t,["setup","systemInstruction"],Tj(mn(S)));const T=h(e,["tools"]);if(t!==void 0&&T!=null){let _=Ss(T);Array.isArray(_)&&(_=_.map(D=>Ij(bs(D)))),p(t,["setup","tools"],_)}const w=h(e,["sessionResumption"]);t!==void 0&&w!=null&&p(t,["setup","sessionResumption"],Oj(w));const A=h(e,["inputAudioTranscription"]);t!==void 0&&A!=null&&p(t,["setup","inputAudioTranscription"],$T());const M=h(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&p(t,["setup","outputAudioTranscription"],$T());const P=h(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&p(t,["setup","realtimeInputConfig"],jj(P));const N=h(e,["contextWindowCompression"]);t!==void 0&&N!=null&&p(t,["setup","contextWindowCompression"],$j(N));const O=h(e,["proactivity"]);return t!==void 0&&O!=null&&p(t,["setup","proactivity"],Bj(O)),n}function Vj(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["setup","model"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],qj(i,n)),n}function zj(){return{}}function Fj(){return{}}function Hj(e){const t={},n=h(e,["media"]);n!=null&&p(t,["mediaChunks"],cM(n));const r=h(e,["audio"]);r!=null&&p(t,["audio"],dM(r));const i=h(e,["audioStreamEnd"]);i!=null&&p(t,["audioStreamEnd"],i);const o=h(e,["video"]);o!=null&&p(t,["video"],fM(o));const l=h(e,["text"]);return l!=null&&p(t,["text"],l),h(e,["activityStart"])!=null&&p(t,["activityStart"],zj()),h(e,["activityEnd"])!=null&&p(t,["activityEnd"],Fj()),t}function Gj(){return{}}function Kj(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function Yj(e){const t={},n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function Wj(e){const t={},n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function Jj(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],Kj(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],Yj(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],Wj(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function Xj(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Jj(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function BT(e){const t={},n=h(e,["text"]);n!=null&&p(t,["text"],n);const r=h(e,["finished"]);return r!=null&&p(t,["finished"],r),t}function Qj(e){const t={},n=h(e,["retrievedUrl"]);n!=null&&p(t,["retrievedUrl"],n);const r=h(e,["urlRetrievalStatus"]);return r!=null&&p(t,["urlRetrievalStatus"],r),t}function Zj(e){const t={},n=h(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Qj(i))),p(t,["urlMetadata"],r)}return t}function eU(e){const t={},n=h(e,["modelTurn"]);n!=null&&p(t,["modelTurn"],Xj(n));const r=h(e,["turnComplete"]);r!=null&&p(t,["turnComplete"],r);const i=h(e,["interrupted"]);i!=null&&p(t,["interrupted"],i);const o=h(e,["groundingMetadata"]);o!=null&&p(t,["groundingMetadata"],o);const l=h(e,["generationComplete"]);l!=null&&p(t,["generationComplete"],l);const c=h(e,["inputTranscription"]);c!=null&&p(t,["inputTranscription"],BT(c));const d=h(e,["outputTranscription"]);d!=null&&p(t,["outputTranscription"],BT(d));const f=h(e,["urlContextMetadata"]);return f!=null&&p(t,["urlContextMetadata"],Zj(f)),t}function tU(e){const t={},n=h(e,["id"]);n!=null&&p(t,["id"],n);const r=h(e,["args"]);r!=null&&p(t,["args"],r);const i=h(e,["name"]);return i!=null&&p(t,["name"],i),t}function nU(e){const t={},n=h(e,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>tU(i))),p(t,["functionCalls"],r)}return t}function rU(e){const t={},n=h(e,["ids"]);return n!=null&&p(t,["ids"],n),t}function tf(e){const t={},n=h(e,["modality"]);n!=null&&p(t,["modality"],n);const r=h(e,["tokenCount"]);return r!=null&&p(t,["tokenCount"],r),t}function iU(e){const t={},n=h(e,["promptTokenCount"]);n!=null&&p(t,["promptTokenCount"],n);const r=h(e,["cachedContentTokenCount"]);r!=null&&p(t,["cachedContentTokenCount"],r);const i=h(e,["responseTokenCount"]);i!=null&&p(t,["responseTokenCount"],i);const o=h(e,["toolUsePromptTokenCount"]);o!=null&&p(t,["toolUsePromptTokenCount"],o);const l=h(e,["thoughtsTokenCount"]);l!=null&&p(t,["thoughtsTokenCount"],l);const c=h(e,["totalTokenCount"]);c!=null&&p(t,["totalTokenCount"],c);const d=h(e,["promptTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(S=>tf(S))),p(t,["promptTokensDetails"],v)}const f=h(e,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(S=>tf(S))),p(t,["cacheTokensDetails"],v)}const m=h(e,["responseTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(S=>tf(S))),p(t,["responseTokensDetails"],v)}const y=h(e,["toolUsePromptTokensDetails"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>tf(S))),p(t,["toolUsePromptTokensDetails"],v)}return t}function aU(e){const t={},n=h(e,["timeLeft"]);return n!=null&&p(t,["timeLeft"],n),t}function oU(e){const t={},n=h(e,["newHandle"]);n!=null&&p(t,["newHandle"],n);const r=h(e,["resumable"]);r!=null&&p(t,["resumable"],r);const i=h(e,["lastConsumedClientMessageIndex"]);return i!=null&&p(t,["lastConsumedClientMessageIndex"],i),t}function sU(e){const t={};h(e,["setupComplete"])!=null&&p(t,["setupComplete"],Gj());const r=h(e,["serverContent"]);r!=null&&p(t,["serverContent"],eU(r));const i=h(e,["toolCall"]);i!=null&&p(t,["toolCall"],nU(i));const o=h(e,["toolCallCancellation"]);o!=null&&p(t,["toolCallCancellation"],rU(o));const l=h(e,["usageMetadata"]);l!=null&&p(t,["usageMetadata"],iU(l));const c=h(e,["goAway"]);c!=null&&p(t,["goAway"],aU(c));const d=h(e,["sessionResumptionUpdate"]);return d!=null&&p(t,["sessionResumptionUpdate"],oU(d)),t}function lU(){return{}}function uU(e){const t={},n=h(e,["text"]);n!=null&&p(t,["text"],n);const r=h(e,["weight"]);return r!=null&&p(t,["weight"],r),t}function cU(e){const t={},n=h(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>uU(i))),p(t,["weightedPrompts"],r)}return t}function fU(e){const t={},n=h(e,["temperature"]);n!=null&&p(t,["temperature"],n);const r=h(e,["topK"]);r!=null&&p(t,["topK"],r);const i=h(e,["seed"]);i!=null&&p(t,["seed"],i);const o=h(e,["guidance"]);o!=null&&p(t,["guidance"],o);const l=h(e,["bpm"]);l!=null&&p(t,["bpm"],l);const c=h(e,["density"]);c!=null&&p(t,["density"],c);const d=h(e,["brightness"]);d!=null&&p(t,["brightness"],d);const f=h(e,["scale"]);f!=null&&p(t,["scale"],f);const m=h(e,["muteBass"]);m!=null&&p(t,["muteBass"],m);const y=h(e,["muteDrums"]);y!=null&&p(t,["muteDrums"],y);const v=h(e,["onlyBassAndDrums"]);v!=null&&p(t,["onlyBassAndDrums"],v);const S=h(e,["musicGenerationMode"]);return S!=null&&p(t,["musicGenerationMode"],S),t}function dU(e){const t={},n=h(e,["clientContent"]);n!=null&&p(t,["clientContent"],cU(n));const r=h(e,["musicGenerationConfig"]);return r!=null&&p(t,["musicGenerationConfig"],fU(r)),t}function mU(e){const t={},n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);r!=null&&p(t,["mimeType"],r);const i=h(e,["sourceMetadata"]);return i!=null&&p(t,["sourceMetadata"],dU(i)),t}function hU(e){const t={},n=h(e,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>mU(i))),p(t,["audioChunks"],r)}return t}function pU(e){const t={},n=h(e,["text"]);n!=null&&p(t,["text"],n);const r=h(e,["filteredReason"]);return r!=null&&p(t,["filteredReason"],r),t}function gU(e){const t={};h(e,["setupComplete"])!=null&&p(t,["setupComplete"],lU());const r=h(e,["serverContent"]);r!=null&&p(t,["serverContent"],hU(r));const i=h(e,["filteredPrompt"]);return i!=null&&p(t,["filteredPrompt"],pU(i)),t}function yU(e){const t={},n=h(e,["sessionId"]);return n!=null&&p(t,["sessionId"],n),t}function vU(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function xU(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["data"]);r!=null&&p(t,["data"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function bU(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["fileUri"]);r!=null&&p(t,["fileUri"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function SU(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],vU(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],xU(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],bU(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function CU(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>SU(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function qT(e){const t={},n=h(e,["text"]);n!=null&&p(t,["text"],n);const r=h(e,["finished"]);return r!=null&&p(t,["finished"],r),t}function TU(e){const t={},n=h(e,["modelTurn"]);n!=null&&p(t,["modelTurn"],CU(n));const r=h(e,["turnComplete"]);r!=null&&p(t,["turnComplete"],r);const i=h(e,["interrupted"]);i!=null&&p(t,["interrupted"],i);const o=h(e,["groundingMetadata"]);o!=null&&p(t,["groundingMetadata"],o);const l=h(e,["generationComplete"]);l!=null&&p(t,["generationComplete"],l);const c=h(e,["inputTranscription"]);c!=null&&p(t,["inputTranscription"],qT(c));const d=h(e,["outputTranscription"]);return d!=null&&p(t,["outputTranscription"],qT(d)),t}function wU(e){const t={},n=h(e,["args"]);n!=null&&p(t,["args"],n);const r=h(e,["name"]);return r!=null&&p(t,["name"],r),t}function AU(e){const t={},n=h(e,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wU(i))),p(t,["functionCalls"],r)}return t}function EU(e){const t={},n=h(e,["ids"]);return n!=null&&p(t,["ids"],n),t}function nf(e){const t={},n=h(e,["modality"]);n!=null&&p(t,["modality"],n);const r=h(e,["tokenCount"]);return r!=null&&p(t,["tokenCount"],r),t}function MU(e){const t={},n=h(e,["promptTokenCount"]);n!=null&&p(t,["promptTokenCount"],n);const r=h(e,["cachedContentTokenCount"]);r!=null&&p(t,["cachedContentTokenCount"],r);const i=h(e,["candidatesTokenCount"]);i!=null&&p(t,["responseTokenCount"],i);const o=h(e,["toolUsePromptTokenCount"]);o!=null&&p(t,["toolUsePromptTokenCount"],o);const l=h(e,["thoughtsTokenCount"]);l!=null&&p(t,["thoughtsTokenCount"],l);const c=h(e,["totalTokenCount"]);c!=null&&p(t,["totalTokenCount"],c);const d=h(e,["promptTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(T=>nf(T))),p(t,["promptTokensDetails"],S)}const f=h(e,["cacheTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(T=>nf(T))),p(t,["cacheTokensDetails"],S)}const m=h(e,["candidatesTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(T=>nf(T))),p(t,["responseTokensDetails"],S)}const y=h(e,["toolUsePromptTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(T=>nf(T))),p(t,["toolUsePromptTokensDetails"],S)}const v=h(e,["trafficType"]);return v!=null&&p(t,["trafficType"],v),t}function _U(e){const t={},n=h(e,["timeLeft"]);return n!=null&&p(t,["timeLeft"],n),t}function NU(e){const t={},n=h(e,["newHandle"]);n!=null&&p(t,["newHandle"],n);const r=h(e,["resumable"]);r!=null&&p(t,["resumable"],r);const i=h(e,["lastConsumedClientMessageIndex"]);return i!=null&&p(t,["lastConsumedClientMessageIndex"],i),t}function RU(e){const t={},n=h(e,["setupComplete"]);n!=null&&p(t,["setupComplete"],yU(n));const r=h(e,["serverContent"]);r!=null&&p(t,["serverContent"],TU(r));const i=h(e,["toolCall"]);i!=null&&p(t,["toolCall"],AU(i));const o=h(e,["toolCallCancellation"]);o!=null&&p(t,["toolCallCancellation"],EU(o));const l=h(e,["usageMetadata"]);l!=null&&p(t,["usageMetadata"],MU(l));const c=h(e,["goAway"]);c!=null&&p(t,["goAway"],_U(c));const d=h(e,["sessionResumptionUpdate"]);return d!=null&&p(t,["sessionResumptionUpdate"],NU(d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PU(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function DU(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function kU(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function IU(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],PU(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],DU(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],kU(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function xd(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>IU(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function OU(e){const t={},n=h(e,["anyOf"]);n!=null&&p(t,["anyOf"],n);const r=h(e,["default"]);r!=null&&p(t,["default"],r);const i=h(e,["description"]);i!=null&&p(t,["description"],i);const o=h(e,["enum"]);o!=null&&p(t,["enum"],o);const l=h(e,["example"]);l!=null&&p(t,["example"],l);const c=h(e,["format"]);c!=null&&p(t,["format"],c);const d=h(e,["items"]);d!=null&&p(t,["items"],d);const f=h(e,["maxItems"]);f!=null&&p(t,["maxItems"],f);const m=h(e,["maxLength"]);m!=null&&p(t,["maxLength"],m);const y=h(e,["maxProperties"]);y!=null&&p(t,["maxProperties"],y);const v=h(e,["maximum"]);v!=null&&p(t,["maximum"],v);const S=h(e,["minItems"]);S!=null&&p(t,["minItems"],S);const T=h(e,["minLength"]);T!=null&&p(t,["minLength"],T);const w=h(e,["minProperties"]);w!=null&&p(t,["minProperties"],w);const A=h(e,["minimum"]);A!=null&&p(t,["minimum"],A);const M=h(e,["nullable"]);M!=null&&p(t,["nullable"],M);const P=h(e,["pattern"]);P!=null&&p(t,["pattern"],P);const N=h(e,["properties"]);N!=null&&p(t,["properties"],N);const O=h(e,["propertyOrdering"]);O!=null&&p(t,["propertyOrdering"],O);const _=h(e,["required"]);_!=null&&p(t,["required"],_);const D=h(e,["title"]);D!=null&&p(t,["title"],D);const k=h(e,["type"]);return k!=null&&p(t,["type"],k),t}function LU(e){const t={};if(h(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=h(e,["category"]);n!=null&&p(t,["category"],n);const r=h(e,["threshold"]);return r!=null&&p(t,["threshold"],r),t}function jU(e){const t={},n=h(e,["behavior"]);n!=null&&p(t,["behavior"],n);const r=h(e,["description"]);r!=null&&p(t,["description"],r);const i=h(e,["name"]);i!=null&&p(t,["name"],i);const o=h(e,["parameters"]);o!=null&&p(t,["parameters"],o);const l=h(e,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=h(e,["response"]);c!=null&&p(t,["response"],c);const d=h(e,["responseJsonSchema"]);return d!=null&&p(t,["responseJsonSchema"],d),t}function UU(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function $U(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],UU(n)),t}function BU(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function qU(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],BU(n)),t}function VU(){return{}}function zU(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>jU(f))),p(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearch"]);r!=null&&p(t,["googleSearch"],$U(r));const i=h(e,["googleSearchRetrieval"]);if(i!=null&&p(t,["googleSearchRetrieval"],qU(i)),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(e,["urlContext"])!=null&&p(t,["urlContext"],VU());const l=h(e,["codeExecution"]);l!=null&&p(t,["codeExecution"],l);const c=h(e,["computerUse"]);return c!=null&&p(t,["computerUse"],c),t}function FU(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);return r!=null&&p(t,["allowedFunctionNames"],r),t}function HU(e){const t={},n=h(e,["latitude"]);n!=null&&p(t,["latitude"],n);const r=h(e,["longitude"]);return r!=null&&p(t,["longitude"],r),t}function GU(e){const t={},n=h(e,["latLng"]);n!=null&&p(t,["latLng"],HU(n));const r=h(e,["languageCode"]);return r!=null&&p(t,["languageCode"],r),t}function KU(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&p(t,["functionCallingConfig"],FU(n));const r=h(e,["retrievalConfig"]);return r!=null&&p(t,["retrievalConfig"],GU(r)),t}function YU(e){const t={},n=h(e,["voiceName"]);return n!=null&&p(t,["voiceName"],n),t}function PM(e){const t={},n=h(e,["prebuiltVoiceConfig"]);return n!=null&&p(t,["prebuiltVoiceConfig"],YU(n)),t}function WU(e){const t={},n=h(e,["speaker"]);n!=null&&p(t,["speaker"],n);const r=h(e,["voiceConfig"]);return r!=null&&p(t,["voiceConfig"],PM(r)),t}function JU(e){const t={},n=h(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>WU(i))),p(t,["speakerVoiceConfigs"],r)}return t}function XU(e){const t={},n=h(e,["voiceConfig"]);n!=null&&p(t,["voiceConfig"],PM(n));const r=h(e,["multiSpeakerVoiceConfig"]);r!=null&&p(t,["multiSpeakerVoiceConfig"],JU(r));const i=h(e,["languageCode"]);return i!=null&&p(t,["languageCode"],i),t}function QU(e){const t={},n=h(e,["includeThoughts"]);n!=null&&p(t,["includeThoughts"],n);const r=h(e,["thinkingBudget"]);return r!=null&&p(t,["thinkingBudget"],r),t}function ZU(e,t,n){const r={},i=h(t,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],xd(mn(i)));const o=h(t,["temperature"]);o!=null&&p(r,["temperature"],o);const l=h(t,["topP"]);l!=null&&p(r,["topP"],l);const c=h(t,["topK"]);c!=null&&p(r,["topK"],c);const d=h(t,["candidateCount"]);d!=null&&p(r,["candidateCount"],d);const f=h(t,["maxOutputTokens"]);f!=null&&p(r,["maxOutputTokens"],f);const m=h(t,["stopSequences"]);m!=null&&p(r,["stopSequences"],m);const y=h(t,["responseLogprobs"]);y!=null&&p(r,["responseLogprobs"],y);const v=h(t,["logprobs"]);v!=null&&p(r,["logprobs"],v);const S=h(t,["presencePenalty"]);S!=null&&p(r,["presencePenalty"],S);const T=h(t,["frequencyPenalty"]);T!=null&&p(r,["frequencyPenalty"],T);const w=h(t,["seed"]);w!=null&&p(r,["seed"],w);const A=h(t,["responseMimeType"]);A!=null&&p(r,["responseMimeType"],A);const M=h(t,["responseSchema"]);M!=null&&p(r,["responseSchema"],OU(mv(M)));const P=h(t,["responseJsonSchema"]);if(P!=null&&p(r,["responseJsonSchema"],P),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=h(t,["safetySettings"]);if(n!==void 0&&N!=null){let K=N;Array.isArray(K)&&(K=K.map(V=>LU(V))),p(n,["safetySettings"],K)}const O=h(t,["tools"]);if(n!==void 0&&O!=null){let K=Ss(O);Array.isArray(K)&&(K=K.map(V=>zU(bs(V)))),p(n,["tools"],K)}const _=h(t,["toolConfig"]);if(n!==void 0&&_!=null&&p(n,["toolConfig"],KU(_)),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=h(t,["cachedContent"]);n!==void 0&&D!=null&&p(n,["cachedContent"],Ci(e,D));const k=h(t,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const B=h(t,["mediaResolution"]);B!=null&&p(r,["mediaResolution"],B);const j=h(t,["speechConfig"]);if(j!=null&&p(r,["speechConfig"],XU(hv(j))),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const re=h(t,["thinkingConfig"]);return re!=null&&p(r,["thinkingConfig"],QU(re)),r}function VT(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["contents"]);if(i!=null){let l=dr(i);Array.isArray(l)&&(l=l.map(c=>xd(c))),p(n,["contents"],l)}const o=h(t,["config"]);return o!=null&&p(n,["generationConfig"],ZU(e,o,n)),n}function e$(e,t){const n={},r=h(e,["taskType"]);t!==void 0&&r!=null&&p(t,["requests[]","taskType"],r);const i=h(e,["title"]);t!==void 0&&i!=null&&p(t,["requests[]","title"],i);const o=h(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&p(t,["requests[]","outputDimensionality"],o),h(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function t$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["contents"]);i!=null&&p(n,["requests[]","content"],hM(e,i));const o=h(t,["config"]);o!=null&&p(n,["config"],e$(o,n));const l=h(t,["model"]);return l!==void 0&&p(n,["requests[]","model"],nt(e,l)),n}function n$(e,t){const n={};if(h(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(e,["numberOfImages"]);t!==void 0&&r!=null&&p(t,["parameters","sampleCount"],r);const i=h(e,["aspectRatio"]);t!==void 0&&i!=null&&p(t,["parameters","aspectRatio"],i);const o=h(e,["guidanceScale"]);if(t!==void 0&&o!=null&&p(t,["parameters","guidanceScale"],o),h(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=h(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&p(t,["parameters","safetySetting"],l);const c=h(e,["personGeneration"]);t!==void 0&&c!=null&&p(t,["parameters","personGeneration"],c);const d=h(e,["includeSafetyAttributes"]);t!==void 0&&d!=null&&p(t,["parameters","includeSafetyAttributes"],d);const f=h(e,["includeRaiReason"]);t!==void 0&&f!=null&&p(t,["parameters","includeRaiReason"],f);const m=h(e,["language"]);t!==void 0&&m!=null&&p(t,["parameters","language"],m);const y=h(e,["outputMimeType"]);t!==void 0&&y!=null&&p(t,["parameters","outputOptions","mimeType"],y);const v=h(e,["outputCompressionQuality"]);if(t!==void 0&&v!=null&&p(t,["parameters","outputOptions","compressionQuality"],v),h(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const S=h(e,["imageSize"]);if(t!==void 0&&S!=null&&p(t,["parameters","sampleImageSize"],S),h(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function r$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=h(t,["config"]);return o!=null&&p(n,["config"],n$(o,n)),n}function i$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","name"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function a$(e,t,n){const r={},i=h(t,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const o=h(t,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const l=h(t,["filter"]);n!==void 0&&l!=null&&p(n,["_query","filter"],l);const c=h(t,["queryBase"]);return n!==void 0&&c!=null&&p(n,["_url","models_url"],yM(e,c)),r}function o$(e,t){const n={},r=h(t,["config"]);return r!=null&&p(n,["config"],a$(e,r,n)),n}function s$(e,t){const n={},r=h(e,["displayName"]);t!==void 0&&r!=null&&p(t,["displayName"],r);const i=h(e,["description"]);t!==void 0&&i!=null&&p(t,["description"],i);const o=h(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&p(t,["defaultCheckpointId"],o),n}function l$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","name"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],s$(i,n)),n}function u$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","name"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function c$(e){const t={};if(h(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function f$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["contents"]);if(i!=null){let l=dr(i);Array.isArray(l)&&(l=l.map(c=>xd(c))),p(n,["contents"],l)}const o=h(t,["config"]);return o!=null&&p(n,["config"],c$(o)),n}function d$(e){const t={};if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(e,["imageBytes"]);n!=null&&p(t,["bytesBase64Encoded"],co(n));const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function m$(e,t){const n={},r=h(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&p(t,["parameters","sampleCount"],r),h(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=h(e,["durationSeconds"]);if(t!==void 0&&i!=null&&p(t,["parameters","durationSeconds"],i),h(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(e,["aspectRatio"]);if(t!==void 0&&o!=null&&p(t,["parameters","aspectRatio"],o),h(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=h(e,["personGeneration"]);if(t!==void 0&&l!=null&&p(t,["parameters","personGeneration"],l),h(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=h(e,["negativePrompt"]);t!==void 0&&c!=null&&p(t,["parameters","negativePrompt"],c);const d=h(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&p(t,["parameters","enhancePrompt"],d),h(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(h(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(h(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function h$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=h(t,["image"]);if(o!=null&&p(n,["instances[0]","image"],d$(o)),h(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const l=h(t,["config"]);return l!=null&&p(n,["config"],m$(l,n)),n}function p$(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function g$(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["data"]);r!=null&&p(t,["data"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function y$(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["fileUri"]);r!=null&&p(t,["fileUri"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function v$(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],p$(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],g$(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],y$(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function Ts(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>v$(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function x$(e){const t={},n=h(e,["anyOf"]);n!=null&&p(t,["anyOf"],n);const r=h(e,["default"]);r!=null&&p(t,["default"],r);const i=h(e,["description"]);i!=null&&p(t,["description"],i);const o=h(e,["enum"]);o!=null&&p(t,["enum"],o);const l=h(e,["example"]);l!=null&&p(t,["example"],l);const c=h(e,["format"]);c!=null&&p(t,["format"],c);const d=h(e,["items"]);d!=null&&p(t,["items"],d);const f=h(e,["maxItems"]);f!=null&&p(t,["maxItems"],f);const m=h(e,["maxLength"]);m!=null&&p(t,["maxLength"],m);const y=h(e,["maxProperties"]);y!=null&&p(t,["maxProperties"],y);const v=h(e,["maximum"]);v!=null&&p(t,["maximum"],v);const S=h(e,["minItems"]);S!=null&&p(t,["minItems"],S);const T=h(e,["minLength"]);T!=null&&p(t,["minLength"],T);const w=h(e,["minProperties"]);w!=null&&p(t,["minProperties"],w);const A=h(e,["minimum"]);A!=null&&p(t,["minimum"],A);const M=h(e,["nullable"]);M!=null&&p(t,["nullable"],M);const P=h(e,["pattern"]);P!=null&&p(t,["pattern"],P);const N=h(e,["properties"]);N!=null&&p(t,["properties"],N);const O=h(e,["propertyOrdering"]);O!=null&&p(t,["propertyOrdering"],O);const _=h(e,["required"]);_!=null&&p(t,["required"],_);const D=h(e,["title"]);D!=null&&p(t,["title"],D);const k=h(e,["type"]);return k!=null&&p(t,["type"],k),t}function b$(e){const t={},n=h(e,["featureSelectionPreference"]);return n!=null&&p(t,["featureSelectionPreference"],n),t}function S$(e){const t={},n=h(e,["method"]);n!=null&&p(t,["method"],n);const r=h(e,["category"]);r!=null&&p(t,["category"],r);const i=h(e,["threshold"]);return i!=null&&p(t,["threshold"],i),t}function C$(e){const t={};if(h(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(e,["description"]);n!=null&&p(t,["description"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["parameters"]);i!=null&&p(t,["parameters"],i);const o=h(e,["parametersJsonSchema"]);o!=null&&p(t,["parametersJsonSchema"],o);const l=h(e,["response"]);l!=null&&p(t,["response"],l);const c=h(e,["responseJsonSchema"]);return c!=null&&p(t,["responseJsonSchema"],c),t}function T$(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function w$(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],T$(n)),t}function A$(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function E$(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],A$(n)),t}function M$(){return{}}function _$(e){const t={},n=h(e,["apiKeyString"]);return n!=null&&p(t,["apiKeyString"],n),t}function N$(e){const t={},n=h(e,["apiKeyConfig"]);n!=null&&p(t,["apiKeyConfig"],_$(n));const r=h(e,["authType"]);r!=null&&p(t,["authType"],r);const i=h(e,["googleServiceAccountConfig"]);i!=null&&p(t,["googleServiceAccountConfig"],i);const o=h(e,["httpBasicAuthConfig"]);o!=null&&p(t,["httpBasicAuthConfig"],o);const l=h(e,["oauthConfig"]);l!=null&&p(t,["oauthConfig"],l);const c=h(e,["oidcConfig"]);return c!=null&&p(t,["oidcConfig"],c),t}function R$(e){const t={},n=h(e,["authConfig"]);return n!=null&&p(t,["authConfig"],N$(n)),t}function P$(){return{}}function DM(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>C$(v))),p(t,["functionDeclarations"],y)}const r=h(e,["retrieval"]);r!=null&&p(t,["retrieval"],r);const i=h(e,["googleSearch"]);i!=null&&p(t,["googleSearch"],w$(i));const o=h(e,["googleSearchRetrieval"]);o!=null&&p(t,["googleSearchRetrieval"],E$(o)),h(e,["enterpriseWebSearch"])!=null&&p(t,["enterpriseWebSearch"],M$());const c=h(e,["googleMaps"]);c!=null&&p(t,["googleMaps"],R$(c)),h(e,["urlContext"])!=null&&p(t,["urlContext"],P$());const f=h(e,["codeExecution"]);f!=null&&p(t,["codeExecution"],f);const m=h(e,["computerUse"]);return m!=null&&p(t,["computerUse"],m),t}function D$(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["allowedFunctionNames"]);return r!=null&&p(t,["allowedFunctionNames"],r),t}function k$(e){const t={},n=h(e,["latitude"]);n!=null&&p(t,["latitude"],n);const r=h(e,["longitude"]);return r!=null&&p(t,["longitude"],r),t}function I$(e){const t={},n=h(e,["latLng"]);n!=null&&p(t,["latLng"],k$(n));const r=h(e,["languageCode"]);return r!=null&&p(t,["languageCode"],r),t}function O$(e){const t={},n=h(e,["functionCallingConfig"]);n!=null&&p(t,["functionCallingConfig"],D$(n));const r=h(e,["retrievalConfig"]);return r!=null&&p(t,["retrievalConfig"],I$(r)),t}function L$(e){const t={},n=h(e,["voiceName"]);return n!=null&&p(t,["voiceName"],n),t}function j$(e){const t={},n=h(e,["prebuiltVoiceConfig"]);return n!=null&&p(t,["prebuiltVoiceConfig"],L$(n)),t}function U$(e){const t={},n=h(e,["voiceConfig"]);if(n!=null&&p(t,["voiceConfig"],j$(n)),h(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=h(e,["languageCode"]);return r!=null&&p(t,["languageCode"],r),t}function $$(e){const t={},n=h(e,["includeThoughts"]);n!=null&&p(t,["includeThoughts"],n);const r=h(e,["thinkingBudget"]);return r!=null&&p(t,["thinkingBudget"],r),t}function B$(e,t,n){const r={},i=h(t,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],Ts(mn(i)));const o=h(t,["temperature"]);o!=null&&p(r,["temperature"],o);const l=h(t,["topP"]);l!=null&&p(r,["topP"],l);const c=h(t,["topK"]);c!=null&&p(r,["topK"],c);const d=h(t,["candidateCount"]);d!=null&&p(r,["candidateCount"],d);const f=h(t,["maxOutputTokens"]);f!=null&&p(r,["maxOutputTokens"],f);const m=h(t,["stopSequences"]);m!=null&&p(r,["stopSequences"],m);const y=h(t,["responseLogprobs"]);y!=null&&p(r,["responseLogprobs"],y);const v=h(t,["logprobs"]);v!=null&&p(r,["logprobs"],v);const S=h(t,["presencePenalty"]);S!=null&&p(r,["presencePenalty"],S);const T=h(t,["frequencyPenalty"]);T!=null&&p(r,["frequencyPenalty"],T);const w=h(t,["seed"]);w!=null&&p(r,["seed"],w);const A=h(t,["responseMimeType"]);A!=null&&p(r,["responseMimeType"],A);const M=h(t,["responseSchema"]);M!=null&&p(r,["responseSchema"],x$(mv(M)));const P=h(t,["responseJsonSchema"]);P!=null&&p(r,["responseJsonSchema"],P);const N=h(t,["routingConfig"]);N!=null&&p(r,["routingConfig"],N);const O=h(t,["modelSelectionConfig"]);O!=null&&p(r,["modelConfig"],b$(O));const _=h(t,["safetySettings"]);if(n!==void 0&&_!=null){let ue=_;Array.isArray(ue)&&(ue=ue.map(q=>S$(q))),p(n,["safetySettings"],ue)}const D=h(t,["tools"]);if(n!==void 0&&D!=null){let ue=Ss(D);Array.isArray(ue)&&(ue=ue.map(q=>DM(bs(q)))),p(n,["tools"],ue)}const k=h(t,["toolConfig"]);n!==void 0&&k!=null&&p(n,["toolConfig"],O$(k));const B=h(t,["labels"]);n!==void 0&&B!=null&&p(n,["labels"],B);const j=h(t,["cachedContent"]);n!==void 0&&j!=null&&p(n,["cachedContent"],Ci(e,j));const re=h(t,["responseModalities"]);re!=null&&p(r,["responseModalities"],re);const K=h(t,["mediaResolution"]);K!=null&&p(r,["mediaResolution"],K);const V=h(t,["speechConfig"]);V!=null&&p(r,["speechConfig"],U$(hv(V)));const U=h(t,["audioTimestamp"]);U!=null&&p(r,["audioTimestamp"],U);const ee=h(t,["thinkingConfig"]);return ee!=null&&p(r,["thinkingConfig"],$$(ee)),r}function zT(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["contents"]);if(i!=null){let l=dr(i);Array.isArray(l)&&(l=l.map(c=>Ts(c))),p(n,["contents"],l)}const o=h(t,["config"]);return o!=null&&p(n,["generationConfig"],B$(e,o,n)),n}function q$(e,t){const n={},r=h(e,["taskType"]);t!==void 0&&r!=null&&p(t,["instances[]","task_type"],r);const i=h(e,["title"]);t!==void 0&&i!=null&&p(t,["instances[]","title"],i);const o=h(e,["outputDimensionality"]);t!==void 0&&o!=null&&p(t,["parameters","outputDimensionality"],o);const l=h(e,["mimeType"]);t!==void 0&&l!=null&&p(t,["instances[]","mimeType"],l);const c=h(e,["autoTruncate"]);return t!==void 0&&c!=null&&p(t,["parameters","autoTruncate"],c),n}function V$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["contents"]);i!=null&&p(n,["instances[]","content"],hM(e,i));const o=h(t,["config"]);return o!=null&&p(n,["config"],q$(o,n)),n}function z$(e,t){const n={},r=h(e,["outputGcsUri"]);t!==void 0&&r!=null&&p(t,["parameters","storageUri"],r);const i=h(e,["negativePrompt"]);t!==void 0&&i!=null&&p(t,["parameters","negativePrompt"],i);const o=h(e,["numberOfImages"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const l=h(e,["aspectRatio"]);t!==void 0&&l!=null&&p(t,["parameters","aspectRatio"],l);const c=h(e,["guidanceScale"]);t!==void 0&&c!=null&&p(t,["parameters","guidanceScale"],c);const d=h(e,["seed"]);t!==void 0&&d!=null&&p(t,["parameters","seed"],d);const f=h(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&p(t,["parameters","safetySetting"],f);const m=h(e,["personGeneration"]);t!==void 0&&m!=null&&p(t,["parameters","personGeneration"],m);const y=h(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&p(t,["parameters","includeSafetyAttributes"],y);const v=h(e,["includeRaiReason"]);t!==void 0&&v!=null&&p(t,["parameters","includeRaiReason"],v);const S=h(e,["language"]);t!==void 0&&S!=null&&p(t,["parameters","language"],S);const T=h(e,["outputMimeType"]);t!==void 0&&T!=null&&p(t,["parameters","outputOptions","mimeType"],T);const w=h(e,["outputCompressionQuality"]);t!==void 0&&w!=null&&p(t,["parameters","outputOptions","compressionQuality"],w);const A=h(e,["addWatermark"]);t!==void 0&&A!=null&&p(t,["parameters","addWatermark"],A);const M=h(e,["imageSize"]);t!==void 0&&M!=null&&p(t,["parameters","sampleImageSize"],M);const P=h(e,["enhancePrompt"]);return t!==void 0&&P!=null&&p(t,["parameters","enhancePrompt"],P),n}function F$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=h(t,["config"]);return o!=null&&p(n,["config"],z$(o,n)),n}function ws(e){const t={},n=h(e,["gcsUri"]);n!=null&&p(t,["gcsUri"],n);const r=h(e,["imageBytes"]);r!=null&&p(t,["bytesBase64Encoded"],co(r));const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function H$(e){const t={},n=h(e,["maskMode"]);n!=null&&p(t,["maskMode"],n);const r=h(e,["segmentationClasses"]);r!=null&&p(t,["maskClasses"],r);const i=h(e,["maskDilation"]);return i!=null&&p(t,["dilation"],i),t}function G$(e){const t={},n=h(e,["controlType"]);n!=null&&p(t,["controlType"],n);const r=h(e,["enableControlImageComputation"]);return r!=null&&p(t,["computeControl"],r),t}function K$(e){const t={},n=h(e,["styleDescription"]);return n!=null&&p(t,["styleDescription"],n),t}function Y$(e){const t={},n=h(e,["subjectType"]);n!=null&&p(t,["subjectType"],n);const r=h(e,["subjectDescription"]);return r!=null&&p(t,["subjectDescription"],r),t}function W$(e){const t={},n=h(e,["referenceImage"]);n!=null&&p(t,["referenceImage"],ws(n));const r=h(e,["referenceId"]);r!=null&&p(t,["referenceId"],r);const i=h(e,["referenceType"]);i!=null&&p(t,["referenceType"],i);const o=h(e,["maskImageConfig"]);o!=null&&p(t,["maskImageConfig"],H$(o));const l=h(e,["controlImageConfig"]);l!=null&&p(t,["controlImageConfig"],G$(l));const c=h(e,["styleImageConfig"]);c!=null&&p(t,["styleImageConfig"],K$(c));const d=h(e,["subjectImageConfig"]);return d!=null&&p(t,["subjectImageConfig"],Y$(d)),t}function J$(e,t){const n={},r=h(e,["outputGcsUri"]);t!==void 0&&r!=null&&p(t,["parameters","storageUri"],r);const i=h(e,["negativePrompt"]);t!==void 0&&i!=null&&p(t,["parameters","negativePrompt"],i);const o=h(e,["numberOfImages"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const l=h(e,["aspectRatio"]);t!==void 0&&l!=null&&p(t,["parameters","aspectRatio"],l);const c=h(e,["guidanceScale"]);t!==void 0&&c!=null&&p(t,["parameters","guidanceScale"],c);const d=h(e,["seed"]);t!==void 0&&d!=null&&p(t,["parameters","seed"],d);const f=h(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&p(t,["parameters","safetySetting"],f);const m=h(e,["personGeneration"]);t!==void 0&&m!=null&&p(t,["parameters","personGeneration"],m);const y=h(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&p(t,["parameters","includeSafetyAttributes"],y);const v=h(e,["includeRaiReason"]);t!==void 0&&v!=null&&p(t,["parameters","includeRaiReason"],v);const S=h(e,["language"]);t!==void 0&&S!=null&&p(t,["parameters","language"],S);const T=h(e,["outputMimeType"]);t!==void 0&&T!=null&&p(t,["parameters","outputOptions","mimeType"],T);const w=h(e,["outputCompressionQuality"]);t!==void 0&&w!=null&&p(t,["parameters","outputOptions","compressionQuality"],w);const A=h(e,["addWatermark"]);t!==void 0&&A!=null&&p(t,["parameters","addWatermark"],A);const M=h(e,["editMode"]);t!==void 0&&M!=null&&p(t,["parameters","editMode"],M);const P=h(e,["baseSteps"]);return t!==void 0&&P!=null&&p(t,["parameters","editConfig","baseSteps"],P),n}function X$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=h(t,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>W$(d))),p(n,["instances[0]","referenceImages"],c)}const l=h(t,["config"]);return l!=null&&p(n,["config"],J$(l,n)),n}function Q$(e,t){const n={},r=h(e,["includeRaiReason"]);t!==void 0&&r!=null&&p(t,["parameters","includeRaiReason"],r);const i=h(e,["outputMimeType"]);t!==void 0&&i!=null&&p(t,["parameters","outputOptions","mimeType"],i);const o=h(e,["outputCompressionQuality"]);t!==void 0&&o!=null&&p(t,["parameters","outputOptions","compressionQuality"],o);const l=h(e,["enhanceInputImage"]);t!==void 0&&l!=null&&p(t,["parameters","upscaleConfig","enhanceInputImage"],l);const c=h(e,["imagePreservationFactor"]);t!==void 0&&c!=null&&p(t,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=h(e,["numberOfImages"]);t!==void 0&&d!=null&&p(t,["parameters","sampleCount"],d);const f=h(e,["mode"]);return t!==void 0&&f!=null&&p(t,["parameters","mode"],f),n}function Z$(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["image"]);i!=null&&p(n,["instances[0]","image"],ws(i));const o=h(t,["upscaleFactor"]);o!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=h(t,["config"]);return l!=null&&p(n,["config"],Q$(l,n)),n}function e3(e){const t={},n=h(e,["productImage"]);return n!=null&&p(t,["image"],ws(n)),t}function t3(e,t){const n={},r=h(e,["prompt"]);t!==void 0&&r!=null&&p(t,["instances[0]","prompt"],r);const i=h(e,["personImage"]);t!==void 0&&i!=null&&p(t,["instances[0]","personImage","image"],ws(i));const o=h(e,["productImages"]);if(t!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>e3(c))),p(t,["instances[0]","productImages"],l)}return n}function n3(e,t){const n={},r=h(e,["numberOfImages"]);t!==void 0&&r!=null&&p(t,["parameters","sampleCount"],r);const i=h(e,["baseSteps"]);t!==void 0&&i!=null&&p(t,["parameters","editConfig","baseSteps"],i);const o=h(e,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const l=h(e,["seed"]);t!==void 0&&l!=null&&p(t,["parameters","seed"],l);const c=h(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&p(t,["parameters","safetySetting"],c);const d=h(e,["personGeneration"]);t!==void 0&&d!=null&&p(t,["parameters","personGeneration"],d);const f=h(e,["outputMimeType"]);t!==void 0&&f!=null&&p(t,["parameters","outputOptions","mimeType"],f);const m=h(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&p(t,["parameters","outputOptions","compressionQuality"],m);const y=h(e,["enhancePrompt"]);return t!==void 0&&y!=null&&p(t,["parameters","enhancePrompt"],y),n}function r3(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["source"]);i!=null&&p(n,["config"],t3(i,n));const o=h(t,["config"]);return o!=null&&p(n,["config"],n3(o,n)),n}function i3(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","name"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function a3(e,t,n){const r={},i=h(t,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const o=h(t,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const l=h(t,["filter"]);n!==void 0&&l!=null&&p(n,["_query","filter"],l);const c=h(t,["queryBase"]);return n!==void 0&&c!=null&&p(n,["_url","models_url"],yM(e,c)),r}function o3(e,t){const n={},r=h(t,["config"]);return r!=null&&p(n,["config"],a3(e,r,n)),n}function s3(e,t){const n={},r=h(e,["displayName"]);t!==void 0&&r!=null&&p(t,["displayName"],r);const i=h(e,["description"]);t!==void 0&&i!=null&&p(t,["description"],i);const o=h(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&p(t,["defaultCheckpointId"],o),n}function l3(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],s3(i,n)),n}function u3(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","name"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],i),n}function c3(e,t){const n={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],Ts(mn(r)));const i=h(e,["tools"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>DM(c))),p(t,["tools"],l)}const o=h(e,["generationConfig"]);return t!==void 0&&o!=null&&p(t,["generationConfig"],o),n}function f3(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["contents"]);if(i!=null){let l=dr(i);Array.isArray(l)&&(l=l.map(c=>Ts(c))),p(n,["contents"],l)}const o=h(t,["config"]);return o!=null&&p(n,["config"],c3(o,n)),n}function d3(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["contents"]);if(i!=null){let l=dr(i);Array.isArray(l)&&(l=l.map(c=>Ts(c))),p(n,["contents"],l)}const o=h(t,["config"]);return o!=null&&p(n,["config"],o),n}function m3(e){const t={},n=h(e,["uri"]);n!=null&&p(t,["gcsUri"],n);const r=h(e,["videoBytes"]);r!=null&&p(t,["bytesBase64Encoded"],co(r));const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function h3(e,t){const n={},r=h(e,["numberOfVideos"]);t!==void 0&&r!=null&&p(t,["parameters","sampleCount"],r);const i=h(e,["outputGcsUri"]);t!==void 0&&i!=null&&p(t,["parameters","storageUri"],i);const o=h(e,["fps"]);t!==void 0&&o!=null&&p(t,["parameters","fps"],o);const l=h(e,["durationSeconds"]);t!==void 0&&l!=null&&p(t,["parameters","durationSeconds"],l);const c=h(e,["seed"]);t!==void 0&&c!=null&&p(t,["parameters","seed"],c);const d=h(e,["aspectRatio"]);t!==void 0&&d!=null&&p(t,["parameters","aspectRatio"],d);const f=h(e,["resolution"]);t!==void 0&&f!=null&&p(t,["parameters","resolution"],f);const m=h(e,["personGeneration"]);t!==void 0&&m!=null&&p(t,["parameters","personGeneration"],m);const y=h(e,["pubsubTopic"]);t!==void 0&&y!=null&&p(t,["parameters","pubsubTopic"],y);const v=h(e,["negativePrompt"]);t!==void 0&&v!=null&&p(t,["parameters","negativePrompt"],v);const S=h(e,["enhancePrompt"]);t!==void 0&&S!=null&&p(t,["parameters","enhancePrompt"],S);const T=h(e,["generateAudio"]);t!==void 0&&T!=null&&p(t,["parameters","generateAudio"],T);const w=h(e,["lastFrame"]);t!==void 0&&w!=null&&p(t,["instances[0]","lastFrame"],ws(w));const A=h(e,["compressionQuality"]);return t!==void 0&&A!=null&&p(t,["parameters","compressionQuality"],A),n}function p3(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["_url","model"],nt(e,r));const i=h(t,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=h(t,["image"]);o!=null&&p(n,["instances[0]","image"],ws(o));const l=h(t,["video"]);l!=null&&p(n,["instances[0]","video"],m3(l));const c=h(t,["config"]);return c!=null&&p(n,["config"],h3(c,n)),n}function g3(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function y3(e){const t={},n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function v3(e){const t={},n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function x3(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],g3(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],y3(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],v3(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function b3(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>x3(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function S3(e){const t={},n=h(e,["citationSources"]);return n!=null&&p(t,["citations"],n),t}function C3(e){const t={},n=h(e,["retrievedUrl"]);n!=null&&p(t,["retrievedUrl"],n);const r=h(e,["urlRetrievalStatus"]);return r!=null&&p(t,["urlRetrievalStatus"],r),t}function T3(e){const t={},n=h(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>C3(i))),p(t,["urlMetadata"],r)}return t}function w3(e){const t={},n=h(e,["content"]);n!=null&&p(t,["content"],b3(n));const r=h(e,["citationMetadata"]);r!=null&&p(t,["citationMetadata"],S3(r));const i=h(e,["tokenCount"]);i!=null&&p(t,["tokenCount"],i);const o=h(e,["finishReason"]);o!=null&&p(t,["finishReason"],o);const l=h(e,["urlContextMetadata"]);l!=null&&p(t,["urlContextMetadata"],T3(l));const c=h(e,["avgLogprobs"]);c!=null&&p(t,["avgLogprobs"],c);const d=h(e,["groundingMetadata"]);d!=null&&p(t,["groundingMetadata"],d);const f=h(e,["index"]);f!=null&&p(t,["index"],f);const m=h(e,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const y=h(e,["safetyRatings"]);return y!=null&&p(t,["safetyRatings"],y),t}function FT(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>w3(f))),p(t,["candidates"],d)}const i=h(e,["modelVersion"]);i!=null&&p(t,["modelVersion"],i);const o=h(e,["promptFeedback"]);o!=null&&p(t,["promptFeedback"],o);const l=h(e,["responseId"]);l!=null&&p(t,["responseId"],l);const c=h(e,["usageMetadata"]);return c!=null&&p(t,["usageMetadata"],c),t}function A3(e){const t={},n=h(e,["values"]);return n!=null&&p(t,["values"],n),t}function E3(){return{}}function M3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>A3(l))),p(t,["embeddings"],o)}return h(e,["metadata"])!=null&&p(t,["metadata"],E3()),t}function _3(e){const t={},n=h(e,["bytesBase64Encoded"]);n!=null&&p(t,["imageBytes"],co(n));const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function kM(e){const t={},n=h(e,["safetyAttributes","categories"]);n!=null&&p(t,["categories"],n);const r=h(e,["safetyAttributes","scores"]);r!=null&&p(t,["scores"],r);const i=h(e,["contentType"]);return i!=null&&p(t,["contentType"],i),t}function N3(e){const t={},n=h(e,["_self"]);n!=null&&p(t,["image"],_3(n));const r=h(e,["raiFilteredReason"]);r!=null&&p(t,["raiFilteredReason"],r);const i=h(e,["_self"]);return i!=null&&p(t,["safetyAttributes"],kM(i)),t}function R3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>N3(l))),p(t,["generatedImages"],o)}const i=h(e,["positivePromptSafetyAttributes"]);return i!=null&&p(t,["positivePromptSafetyAttributes"],kM(i)),t}function P3(e){const t={},n=h(e,["baseModel"]);n!=null&&p(t,["baseModel"],n);const r=h(e,["createTime"]);r!=null&&p(t,["createTime"],r);const i=h(e,["updateTime"]);return i!=null&&p(t,["updateTime"],i),t}function dy(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["description"]);i!=null&&p(t,["description"],i);const o=h(e,["version"]);o!=null&&p(t,["version"],o);const l=h(e,["_self"]);l!=null&&p(t,["tunedModelInfo"],P3(l));const c=h(e,["inputTokenLimit"]);c!=null&&p(t,["inputTokenLimit"],c);const d=h(e,["outputTokenLimit"]);d!=null&&p(t,["outputTokenLimit"],d);const f=h(e,["supportedGenerationMethods"]);return f!=null&&p(t,["supportedActions"],f),t}function D3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["_self"]);if(i!=null){let o=vM(i);Array.isArray(o)&&(o=o.map(l=>dy(l))),p(t,["models"],o)}return t}function k3(){return{}}function I3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["totalTokens"]);r!=null&&p(t,["totalTokens"],r);const i=h(e,["cachedContentTokenCount"]);return i!=null&&p(t,["cachedContentTokenCount"],i),t}function O3(e){const t={},n=h(e,["video","uri"]);n!=null&&p(t,["uri"],n);const r=h(e,["video","encodedVideo"]);r!=null&&p(t,["videoBytes"],co(r));const i=h(e,["encoding"]);return i!=null&&p(t,["mimeType"],i),t}function L3(e){const t={},n=h(e,["_self"]);return n!=null&&p(t,["video"],O3(n)),t}function j3(e){const t={},n=h(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>L3(l))),p(t,["generatedVideos"],o)}const r=h(e,["raiMediaFilteredCount"]);r!=null&&p(t,["raiMediaFilteredCount"],r);const i=h(e,["raiMediaFilteredReasons"]);return i!=null&&p(t,["raiMediaFilteredReasons"],i),t}function U3(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["metadata"]);r!=null&&p(t,["metadata"],r);const i=h(e,["done"]);i!=null&&p(t,["done"],i);const o=h(e,["error"]);o!=null&&p(t,["error"],o);const l=h(e,["response","generateVideoResponse"]);return l!=null&&p(t,["response"],j3(l)),t}function $3(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function B3(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["data"]);r!=null&&p(t,["data"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function q3(e){const t={},n=h(e,["displayName"]);n!=null&&p(t,["displayName"],n);const r=h(e,["fileUri"]);r!=null&&p(t,["fileUri"],r);const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function V3(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],$3(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],B3(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],q3(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function z3(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>V3(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function F3(e){const t={},n=h(e,["citations"]);return n!=null&&p(t,["citations"],n),t}function H3(e){const t={},n=h(e,["retrievedUrl"]);n!=null&&p(t,["retrievedUrl"],n);const r=h(e,["urlRetrievalStatus"]);return r!=null&&p(t,["urlRetrievalStatus"],r),t}function G3(e){const t={},n=h(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>H3(i))),p(t,["urlMetadata"],r)}return t}function K3(e){const t={},n=h(e,["content"]);n!=null&&p(t,["content"],z3(n));const r=h(e,["citationMetadata"]);r!=null&&p(t,["citationMetadata"],F3(r));const i=h(e,["finishMessage"]);i!=null&&p(t,["finishMessage"],i);const o=h(e,["finishReason"]);o!=null&&p(t,["finishReason"],o);const l=h(e,["urlContextMetadata"]);l!=null&&p(t,["urlContextMetadata"],G3(l));const c=h(e,["avgLogprobs"]);c!=null&&p(t,["avgLogprobs"],c);const d=h(e,["groundingMetadata"]);d!=null&&p(t,["groundingMetadata"],d);const f=h(e,["index"]);f!=null&&p(t,["index"],f);const m=h(e,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const y=h(e,["safetyRatings"]);return y!=null&&p(t,["safetyRatings"],y),t}function HT(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>K3(m))),p(t,["candidates"],f)}const i=h(e,["createTime"]);i!=null&&p(t,["createTime"],i);const o=h(e,["modelVersion"]);o!=null&&p(t,["modelVersion"],o);const l=h(e,["promptFeedback"]);l!=null&&p(t,["promptFeedback"],l);const c=h(e,["responseId"]);c!=null&&p(t,["responseId"],c);const d=h(e,["usageMetadata"]);return d!=null&&p(t,["usageMetadata"],d),t}function Y3(e){const t={},n=h(e,["truncated"]);n!=null&&p(t,["truncated"],n);const r=h(e,["token_count"]);return r!=null&&p(t,["tokenCount"],r),t}function W3(e){const t={},n=h(e,["values"]);n!=null&&p(t,["values"],n);const r=h(e,["statistics"]);return r!=null&&p(t,["statistics"],Y3(r)),t}function J3(e){const t={},n=h(e,["billableCharacterCount"]);return n!=null&&p(t,["billableCharacterCount"],n),t}function X3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>W3(l))),p(t,["embeddings"],o)}const i=h(e,["metadata"]);return i!=null&&p(t,["metadata"],J3(i)),t}function Q3(e){const t={},n=h(e,["gcsUri"]);n!=null&&p(t,["gcsUri"],n);const r=h(e,["bytesBase64Encoded"]);r!=null&&p(t,["imageBytes"],co(r));const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function IM(e){const t={},n=h(e,["safetyAttributes","categories"]);n!=null&&p(t,["categories"],n);const r=h(e,["safetyAttributes","scores"]);r!=null&&p(t,["scores"],r);const i=h(e,["contentType"]);return i!=null&&p(t,["contentType"],i),t}function bd(e){const t={},n=h(e,["_self"]);n!=null&&p(t,["image"],Q3(n));const r=h(e,["raiFilteredReason"]);r!=null&&p(t,["raiFilteredReason"],r);const i=h(e,["_self"]);i!=null&&p(t,["safetyAttributes"],IM(i));const o=h(e,["prompt"]);return o!=null&&p(t,["enhancedPrompt"],o),t}function Z3(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>bd(l))),p(t,["generatedImages"],o)}const i=h(e,["positivePromptSafetyAttributes"]);return i!=null&&p(t,["positivePromptSafetyAttributes"],IM(i)),t}function eB(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>bd(o))),p(t,["generatedImages"],i)}return t}function tB(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>bd(o))),p(t,["generatedImages"],i)}return t}function nB(e){const t={},n=h(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>bd(i))),p(t,["generatedImages"],r)}return t}function rB(e){const t={},n=h(e,["endpoint"]);n!=null&&p(t,["name"],n);const r=h(e,["deployedModelId"]);return r!=null&&p(t,["deployedModelId"],r),t}function iB(e){const t={},n=h(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(t,["baseModel"],n);const r=h(e,["createTime"]);r!=null&&p(t,["createTime"],r);const i=h(e,["updateTime"]);return i!=null&&p(t,["updateTime"],i),t}function aB(e){const t={},n=h(e,["checkpointId"]);n!=null&&p(t,["checkpointId"],n);const r=h(e,["epoch"]);r!=null&&p(t,["epoch"],r);const i=h(e,["step"]);return i!=null&&p(t,["step"],i),t}function my(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["displayName"]);r!=null&&p(t,["displayName"],r);const i=h(e,["description"]);i!=null&&p(t,["description"],i);const o=h(e,["versionId"]);o!=null&&p(t,["version"],o);const l=h(e,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>rB(v))),p(t,["endpoints"],y)}const c=h(e,["labels"]);c!=null&&p(t,["labels"],c);const d=h(e,["_self"]);d!=null&&p(t,["tunedModelInfo"],iB(d));const f=h(e,["defaultCheckpointId"]);f!=null&&p(t,["defaultCheckpointId"],f);const m=h(e,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>aB(v))),p(t,["checkpoints"],y)}return t}function oB(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["_self"]);if(i!=null){let o=vM(i);Array.isArray(o)&&(o=o.map(l=>my(l))),p(t,["models"],o)}return t}function sB(){return{}}function lB(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["totalTokens"]);return r!=null&&p(t,["totalTokens"],r),t}function uB(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["tokensInfo"]);return r!=null&&p(t,["tokensInfo"],r),t}function cB(e){const t={},n=h(e,["gcsUri"]);n!=null&&p(t,["uri"],n);const r=h(e,["bytesBase64Encoded"]);r!=null&&p(t,["videoBytes"],co(r));const i=h(e,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function fB(e){const t={},n=h(e,["_self"]);return n!=null&&p(t,["video"],cB(n)),t}function dB(e){const t={},n=h(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>fB(l))),p(t,["generatedVideos"],o)}const r=h(e,["raiMediaFilteredCount"]);r!=null&&p(t,["raiMediaFilteredCount"],r);const i=h(e,["raiMediaFilteredReasons"]);return i!=null&&p(t,["raiMediaFilteredReasons"],i),t}function mB(e){const t={},n=h(e,["name"]);n!=null&&p(t,["name"],n);const r=h(e,["metadata"]);r!=null&&p(t,["metadata"],r);const i=h(e,["done"]);i!=null&&p(t,["done"],i);const o=h(e,["error"]);o!=null&&p(t,["error"],o);const l=h(e,["response"]);return l!=null&&p(t,["response"],dB(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hB="Content-Type",pB="X-Server-Timeout",gB="User-Agent",hy="x-goog-api-client",yB="1.13.0",vB=`google-genai-sdk/${yB}`,xB="v1beta1",bB="v1beta",GT=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class SB{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xB,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:bB,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[l,c]of Object.entries(t.queryParams))i.searchParams.append(l,String(c));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,t.abortSignal),this.unaryApiCall(i,o,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,t.abortSignal),this.streamApiCall(i,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),t.signal=o}return n&&n.extraBody!==null&&CB(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await KT(i),new oy(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await KT(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){var n;return ss(this,arguments,function*(){const i=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield yt(i.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(d,{stream:!0});try{const y=JSON.parse(f);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),S=v.status,T=v.code,w=`got status: ${S}. ${JSON.stringify(y)}`;if(T>=400&&T<600)throw new vd({message:w,status:T})}}catch(y){if(y.name==="ApiError")throw y}l+=f;let m=l.match(GT);for(;m;){const y=m[1];try{const v=new Response(y,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield yt(new oy(v)),l=l.slice(m[0].length),m=l.match(GT)}catch(v){throw new Error(`exception parsing stream chunk ${y}. ${v}`)}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=vB+" "+this.clientOptions.userAgentExtra;return t[gB]=n,t[hy]=n,t[hB]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[r,i]of Object.entries(t.headers))n.append(r,i);t.timeout&&t.timeout>0&&n.append(pB,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,l=await o.stat(t);i.sizeBytes=String(l.size);const c=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const d=await this.fetchUploadUrl(i,n);return o.upload(t,d,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const o={file:t},l=await this.request({path:_e("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(r=l==null?void 0:l.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function KT(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new vd({message:i,status:n}):new Error(i)}}function CB(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],m=c[d];f&&typeof f=="object"&&!Array.isArray(f)&&m&&typeof m=="object"&&!Array.isArray(m)?c[d]=r(m,f):(m&&f&&typeof m!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof m}, New type: ${typeof f}. Overwriting.`),c[d]=f)}return c}const i=r(n,t);e.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TB="mcp_used/unknown";let wB=!1;function OM(e){for(const t of e)if(AB(t)||typeof t=="object"&&"inputSchema"in t)return!0;return wB}function LM(e){var t;const n=(t=e[hy])!==null&&t!==void 0?t:"";e[hy]=(n+` ${TB}`).trimStart()}function AB(e){return e!==null&&typeof e=="object"&&e instanceof gv}function EB(e,t=100){return ss(this,arguments,function*(){let r,i=0;for(;i<t;){const o=yield yt(e.listTools({cursor:r}));for(const l of o.tools)yield yield yt(l),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class gv{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new gv(t,n)}async initialize(){var t,n,r,i;if(this.mcpTools.length>0)return;const o={},l=[];for(const m of this.mcpClients)try{for(var c=!0,d=(n=void 0,Ql(EB(m))),f;f=await d.next(),t=f.done,!t;c=!0){i=f.value,c=!1;const y=i;l.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=m}}catch(y){n={error:y}}finally{try{!c&&!t&&(r=d.return)&&await r.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),gI(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function MB(e,t,n){const r=new lI;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=gU(i);Object.assign(r,o),t(r)}class _B{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=PB(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const m=new Promise(N=>{f=N}),y=t.callbacks,v=function(){f({})},S=this.apiClient,T={onopen:v,onmessage:N=>{MB(S,y.onmessage,N)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(N){}},w=this.webSocketFactory.create(d,RB(l),T);w.connect(),await m;const A=nt(this.apiClient,t.model),M=NM({model:A}),P=fy({setup:M});return w.send(JSON.stringify(P)),new NB(w,this.apiClient)}}class NB{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=hj(t),r=RM(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=pj(t),r=fy(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(t){const n=fy({playbackControl:t});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(rs.PLAY)}pause(){this.sendPlaybackControl(rs.PAUSE)}stop(){this.sendPlaybackControl(rs.STOP)}resetContext(){this.sendPlaybackControl(rs.RESET_CONTEXT)}close(){this.conn.close()}}function RB(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function PB(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DB="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function kB(e,t,n){const r=new sI;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(e.isVertexAI()){const l=RU(o);Object.assign(r,l)}else{const l=sU(o);Object.assign(r,l)}t(r)}class IB{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new _B(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,i,o,l,c;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let m;const y=this.apiClient.getHeaders();t.config&&t.config.tools&&OM(t.config.tools)&&LM(y);const v=UB(y);if(this.apiClient.isVertexAI())m=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const j=this.apiClient.getApiKey();let re="BidiGenerateContent",K="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),re="BidiGenerateContentConstrained",K="access_token"),m=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${re}?${K}=${j}`}let S=()=>{};const T=new Promise(j=>{S=j}),w=t.callbacks,A=function(){var j;(j=w==null?void 0:w.onopen)===null||j===void 0||j.call(w),S({})},M=this.apiClient,P={onopen:A,onmessage:j=>{kB(M,w.onmessage,j)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(j){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(j){}},N=this.webSocketFactory.create(m,jB(v),P);N.connect(),await T;let O=nt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const j=this.apiClient.getProject(),re=this.apiClient.getLocation();O=`projects/${j}/locations/${re}/`+O}let _={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[wf.AUDIO]}:t.config.responseModalities=[wf.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],k=[];for(const j of D)if(this.isCallableTool(j)){const re=j;k.push(await re.tool())}else k.push(j);k.length>0&&(t.config.tools=k);const B={model:O,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?_=Vj(this.apiClient,B):_=cj(this.apiClient,B),delete _.config,N.send(JSON.stringify(_)),new LB(N,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const OB={turnComplete:!0};class LB{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=dr(n.turns),t.isVertexAI()?r=r.map(i=>Ts(i)):r=r.map(i=>xd(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(DB)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},OB),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Hj(t)}:n={realtimeInput:mj(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function jB(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function UB(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YT=10;function WT(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const l of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(ls(l)){i=!0;break}if(!i)return!0;const o=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ls(e){return"callTool"in e&&typeof e.callTool=="function"}function $B(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>ls(i)))!==null&&r!==void 0?r:!1}function BB(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>!ls(i)))!==null&&r!==void 0?r:!1}function JT(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qB extends uo{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,i,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!$B(n)||WT(n.config))return await this.generateContentInternal(d);if(BB(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,m;const y=dr(d.contents),v=(o=(i=(r=d.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:YT;let S=0;for(;S<v&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,w=[];for(const A of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(ls(A)){const P=await A.callTool(f.functionCalls);w.push(...P)}S++,m={role:"user",parts:w},d.contents=dr(d.contents),d.contents.push(T),d.contents.push(m),JT(d.config)&&(y.push(T),y.push(m))}return JT(d.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),WT(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const l=[];if(r!=null&&r.generatedImages)for(const d of r.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((i=d==null?void 0:d.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new pu(Za.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,i;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const l=await Promise.all(o.map(async d=>ls(d)?await d.tool():d)),c={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(c.config.tools=l,t.config&&t.config.tools&&OM(t.config.tools)){const d=(i=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),LM(f),c.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(t){var n,r,i;const o=new Map;for(const l of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ls(l)){const c=l,d=await c.tool();for(const f of(i=d.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,c)}}return o}async processAfcStream(t){var n,r,i;const o=(i=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:YT;let l=!1,c=0;const d=await this.initAfcToolsMap(t);return function(f,m,y){var v,S;return ss(this,arguments,function*(){for(var T,w,A,M;c<o;){l&&(c++,l=!1);const _=yield yt(f.processParamsMaybeAddMcpUsage(y)),D=yield yt(f.generateContentStreamInternal(_)),k=[],B=[];try{for(var P=!0,N=(w=void 0,Ql(D)),O;O=yield yt(N.next()),T=O.done,!T;P=!0){M=O.value,P=!1;const j=M;if(yield yield yt(j),j.candidates&&(!((v=j.candidates[0])===null||v===void 0)&&v.content)){B.push(j.candidates[0].content);for(const re of(S=j.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(c<o&&re.functionCall){if(!re.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(re.functionCall.name)){const K=yield yt(m.get(re.functionCall.name).callTool([re.functionCall]));k.push(...K)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${re.functionCall.name}`)}}}}catch(j){w={error:j}}finally{try{!P&&!T&&(A=N.return)&&(yield yt(A.call(N)))}finally{if(w)throw w.error}}if(k.length>0){l=!0;const j=new $l;j.candidates=[{content:{role:"user",parts:k}}],yield yield yt(j);const re=[];re.push(...B),re.push({role:"user",parts:k});const K=dr(y.contents).concat(re);y.contents=K}else break}})}(this,d,t)}async generateContentInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=zT(this.apiClient,t);return c=_e("{model}:generateContent",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=HT(m),v=new $l;return Object.assign(v,y),v})}else{const f=VT(this.apiClient,t);return c=_e("{model}:generateContent",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=FT(m),v=new $l;return Object.assign(v,y),v})}}async generateContentStreamInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=zT(this.apiClient,t);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(y){return ss(this,arguments,function*(){var v,S,T,w;try{for(var A=!0,M=Ql(y),P;P=yield yt(M.next()),v=P.done,!v;A=!0){w=P.value,A=!1;const N=w,O=HT(yield yt(N.json()));O.sdkHttpResponse={headers:N.headers};const _=new $l;Object.assign(_,O),yield yield yt(_)}}catch(N){S={error:N}}finally{try{!A&&!v&&(T=M.return)&&(yield yt(T.call(M)))}finally{if(S)throw S.error}}})})}else{const f=VT(this.apiClient,t);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(y){return ss(this,arguments,function*(){var v,S,T,w;try{for(var A=!0,M=Ql(y),P;P=yield yt(M.next()),v=P.done,!v;A=!0){w=P.value,A=!1;const N=w,O=FT(yield yt(N.json()));O.sdkHttpResponse={headers:N.headers};const _=new $l;Object.assign(_,O),yield yield yt(_)}}catch(N){S={error:N}}finally{try{!A&&!v&&(T=M.return)&&(yield yt(T.call(M)))}finally{if(S)throw S.error}}})})}}async embedContent(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=V$(this.apiClient,t);return c=_e("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=X3(m),v=new ST;return Object.assign(v,y),v})}else{const f=t$(this.apiClient,t);return c=_e("{model}:batchEmbedContents",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=M3(m),v=new ST;return Object.assign(v,y),v})}}async generateImagesInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=F$(this.apiClient,t);return c=_e("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=Z3(m),v=new CT;return Object.assign(v,y),v})}else{const f=r$(this.apiClient,t);return c=_e("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=R3(m),v=new CT;return Object.assign(v,y),v})}}async editImageInternal(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=X$(this.apiClient,t);return o=_e("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const f=eB(d),m=new eI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=Z$(this.apiClient,t);return o=_e("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const f=tB(d),m=new tI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=r3(this.apiClient,t);return o=_e("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>{const f=nB(d),m=new nI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=i3(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>my(m))}else{const f=i$(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>dy(m))}}async listInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=o3(this.apiClient,t);return c=_e("{models_url}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=oB(m),v=new TT;return Object.assign(v,y),v})}else{const f=o$(this.apiClient,t);return c=_e("{models_url}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=D3(m),v=new TT;return Object.assign(v,y),v})}}async update(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=l3(this.apiClient,t);return c=_e("{model}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>my(m))}else{const f=l$(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>dy(m))}}async delete(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=u3(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(()=>{const m=sB(),y=new wT;return Object.assign(y,m),y})}else{const f=u$(this.apiClient,t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(()=>{const m=k3(),y=new wT;return Object.assign(y,m),y})}}async countTokens(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=f3(this.apiClient,t);return c=_e("{model}:countTokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=lB(m),v=new AT;return Object.assign(v,y),v})}else{const f=f$(this.apiClient,t);return c=_e("{model}:countTokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=I3(m),v=new AT;return Object.assign(v,y),v})}}async computeTokens(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=d3(this.apiClient,t);return o=_e("{model}:computeTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const f=uB(d),m=new rI;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=p3(this.apiClient,t);return c=_e("{model}:predictLongRunning",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>{const y=mB(m),v=new Af;return Object.assign(v,y),v})}else{const f=h$(this.apiClient,t);return c=_e("{model}:predictLongRunning",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>{const y=U3(m),v=new Af;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VB(e){const t={},n=h(e,["operationName"]);n!=null&&p(t,["_url","operationName"],n);const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function zB(e){const t={},n=h(e,["operationName"]);n!=null&&p(t,["_url","operationName"],n);const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function FB(e){const t={},n=h(e,["operationName"]);n!=null&&p(t,["operationName"],n);const r=h(e,["resourceName"]);r!=null&&p(t,["_url","resourceName"],r);const i=h(e,["config"]);return i!=null&&p(t,["config"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HB extends uo{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=zB(t);return c=_e("{operationName}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l}else{const f=VB(t);return c=_e("{operationName}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l}}async fetchPredictVideosOperationInternal(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=FB(t);return o=_e("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GB(e){const t={},n=h(e,["voiceName"]);return n!=null&&p(t,["voiceName"],n),t}function jM(e){const t={},n=h(e,["prebuiltVoiceConfig"]);return n!=null&&p(t,["prebuiltVoiceConfig"],GB(n)),t}function KB(e){const t={},n=h(e,["speaker"]);n!=null&&p(t,["speaker"],n);const r=h(e,["voiceConfig"]);return r!=null&&p(t,["voiceConfig"],jM(r)),t}function YB(e){const t={},n=h(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>KB(i))),p(t,["speakerVoiceConfigs"],r)}return t}function WB(e){const t={},n=h(e,["voiceConfig"]);n!=null&&p(t,["voiceConfig"],jM(n));const r=h(e,["multiSpeakerVoiceConfig"]);r!=null&&p(t,["multiSpeakerVoiceConfig"],YB(r));const i=h(e,["languageCode"]);return i!=null&&p(t,["languageCode"],i),t}function JB(e){const t={},n=h(e,["fps"]);n!=null&&p(t,["fps"],n);const r=h(e,["endOffset"]);r!=null&&p(t,["endOffset"],r);const i=h(e,["startOffset"]);return i!=null&&p(t,["startOffset"],i),t}function XB(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["data"]);n!=null&&p(t,["data"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function QB(e){const t={};if(h(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(e,["fileUri"]);n!=null&&p(t,["fileUri"],n);const r=h(e,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function ZB(e){const t={},n=h(e,["videoMetadata"]);n!=null&&p(t,["videoMetadata"],JB(n));const r=h(e,["thought"]);r!=null&&p(t,["thought"],r);const i=h(e,["inlineData"]);i!=null&&p(t,["inlineData"],XB(i));const o=h(e,["fileData"]);o!=null&&p(t,["fileData"],QB(o));const l=h(e,["thoughtSignature"]);l!=null&&p(t,["thoughtSignature"],l);const c=h(e,["codeExecutionResult"]);c!=null&&p(t,["codeExecutionResult"],c);const d=h(e,["executableCode"]);d!=null&&p(t,["executableCode"],d);const f=h(e,["functionCall"]);f!=null&&p(t,["functionCall"],f);const m=h(e,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const y=h(e,["text"]);return y!=null&&p(t,["text"],y),t}function e4(e){const t={},n=h(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ZB(o))),p(t,["parts"],i)}const r=h(e,["role"]);return r!=null&&p(t,["role"],r),t}function t4(e){const t={},n=h(e,["behavior"]);n!=null&&p(t,["behavior"],n);const r=h(e,["description"]);r!=null&&p(t,["description"],r);const i=h(e,["name"]);i!=null&&p(t,["name"],i);const o=h(e,["parameters"]);o!=null&&p(t,["parameters"],o);const l=h(e,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=h(e,["response"]);c!=null&&p(t,["response"],c);const d=h(e,["responseJsonSchema"]);return d!=null&&p(t,["responseJsonSchema"],d),t}function n4(e){const t={},n=h(e,["startTime"]);n!=null&&p(t,["startTime"],n);const r=h(e,["endTime"]);return r!=null&&p(t,["endTime"],r),t}function r4(e){const t={},n=h(e,["timeRangeFilter"]);return n!=null&&p(t,["timeRangeFilter"],n4(n)),t}function i4(e){const t={},n=h(e,["mode"]);n!=null&&p(t,["mode"],n);const r=h(e,["dynamicThreshold"]);return r!=null&&p(t,["dynamicThreshold"],r),t}function a4(e){const t={},n=h(e,["dynamicRetrievalConfig"]);return n!=null&&p(t,["dynamicRetrievalConfig"],i4(n)),t}function o4(){return{}}function s4(e){const t={},n=h(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>t4(f))),p(t,["functionDeclarations"],d)}if(h(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(e,["googleSearch"]);r!=null&&p(t,["googleSearch"],r4(r));const i=h(e,["googleSearchRetrieval"]);if(i!=null&&p(t,["googleSearchRetrieval"],a4(i)),h(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(e,["urlContext"])!=null&&p(t,["urlContext"],o4());const l=h(e,["codeExecution"]);l!=null&&p(t,["codeExecution"],l);const c=h(e,["computerUse"]);return c!=null&&p(t,["computerUse"],c),t}function l4(e){const t={},n=h(e,["handle"]);if(n!=null&&p(t,["handle"],n),h(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function XT(){return{}}function u4(e){const t={},n=h(e,["disabled"]);n!=null&&p(t,["disabled"],n);const r=h(e,["startOfSpeechSensitivity"]);r!=null&&p(t,["startOfSpeechSensitivity"],r);const i=h(e,["endOfSpeechSensitivity"]);i!=null&&p(t,["endOfSpeechSensitivity"],i);const o=h(e,["prefixPaddingMs"]);o!=null&&p(t,["prefixPaddingMs"],o);const l=h(e,["silenceDurationMs"]);return l!=null&&p(t,["silenceDurationMs"],l),t}function c4(e){const t={},n=h(e,["automaticActivityDetection"]);n!=null&&p(t,["automaticActivityDetection"],u4(n));const r=h(e,["activityHandling"]);r!=null&&p(t,["activityHandling"],r);const i=h(e,["turnCoverage"]);return i!=null&&p(t,["turnCoverage"],i),t}function f4(e){const t={},n=h(e,["targetTokens"]);return n!=null&&p(t,["targetTokens"],n),t}function d4(e){const t={},n=h(e,["triggerTokens"]);n!=null&&p(t,["triggerTokens"],n);const r=h(e,["slidingWindow"]);return r!=null&&p(t,["slidingWindow"],f4(r)),t}function m4(e){const t={},n=h(e,["proactiveAudio"]);return n!=null&&p(t,["proactiveAudio"],n),t}function h4(e,t){const n={},r=h(e,["generationConfig"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig"],r);const i=h(e,["responseModalities"]);t!==void 0&&i!=null&&p(t,["setup","generationConfig","responseModalities"],i);const o=h(e,["temperature"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig","temperature"],o);const l=h(e,["topP"]);t!==void 0&&l!=null&&p(t,["setup","generationConfig","topP"],l);const c=h(e,["topK"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topK"],c);const d=h(e,["maxOutputTokens"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","maxOutputTokens"],d);const f=h(e,["mediaResolution"]);t!==void 0&&f!=null&&p(t,["setup","generationConfig","mediaResolution"],f);const m=h(e,["seed"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","seed"],m);const y=h(e,["speechConfig"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","speechConfig"],WB(pv(y)));const v=h(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],v);const S=h(e,["systemInstruction"]);t!==void 0&&S!=null&&p(t,["setup","systemInstruction"],e4(mn(S)));const T=h(e,["tools"]);if(t!==void 0&&T!=null){let _=Ss(T);Array.isArray(_)&&(_=_.map(D=>s4(bs(D)))),p(t,["setup","tools"],_)}const w=h(e,["sessionResumption"]);t!==void 0&&w!=null&&p(t,["setup","sessionResumption"],l4(w));const A=h(e,["inputAudioTranscription"]);t!==void 0&&A!=null&&p(t,["setup","inputAudioTranscription"],XT());const M=h(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&p(t,["setup","outputAudioTranscription"],XT());const P=h(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&p(t,["setup","realtimeInputConfig"],c4(P));const N=h(e,["contextWindowCompression"]);t!==void 0&&N!=null&&p(t,["setup","contextWindowCompression"],d4(N));const O=h(e,["proactivity"]);return t!==void 0&&O!=null&&p(t,["setup","proactivity"],m4(O)),n}function p4(e,t){const n={},r=h(t,["model"]);r!=null&&p(n,["setup","model"],nt(e,r));const i=h(t,["config"]);return i!=null&&p(n,["config"],h4(i,n)),n}function g4(e,t,n){const r={},i=h(t,["expireTime"]);n!==void 0&&i!=null&&p(n,["expireTime"],i);const o=h(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&p(n,["newSessionExpireTime"],o);const l=h(t,["uses"]);n!==void 0&&l!=null&&p(n,["uses"],l);const c=h(t,["liveConnectConstraints"]);n!==void 0&&c!=null&&p(n,["bidiGenerateContentSetup"],p4(e,c));const d=h(t,["lockAdditionalFields"]);return n!==void 0&&d!=null&&p(n,["fieldMask"],d),r}function y4(e,t){const n={},r=h(t,["config"]);return r!=null&&p(n,["config"],g4(e,r,n)),n}function v4(e){const t={},n=h(e,["name"]);return n!=null&&p(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x4(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);t.push(...i)}else t.push(n)}return t.join(",")}function b4(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const o=x4(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)o?e.fieldMask=o:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?e.fieldMask=d.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class S4 extends uo{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=y4(this.apiClient,t);o=_e("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=b4(c,t.config);return i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>v4(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C4(e){const t={},n=h(e,["name"]);n!=null&&p(t,["_url","name"],n);const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function T4(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);t!==void 0&&i!=null&&p(t,["_query","pageToken"],i);const o=h(e,["filter"]);return t!==void 0&&o!=null&&p(t,["_query","filter"],o),n}function w4(e){const t={},n=h(e,["config"]);return n!=null&&p(t,["config"],T4(n,t)),t}function A4(e){const t={},n=h(e,["textInput"]);n!=null&&p(t,["textInput"],n);const r=h(e,["output"]);return r!=null&&p(t,["output"],r),t}function E4(e){const t={};if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=h(e,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>A4(i))),p(t,["examples","examples"],r)}return t}function M4(e,t){const n={};if(h(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=h(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&p(t,["displayName"],r),h(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(e,["epochCount"]);t!==void 0&&i!=null&&p(t,["tuningTask","hyperparameters","epochCount"],i);const o=h(e,["learningRateMultiplier"]);if(o!=null&&p(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=h(e,["batchSize"]);t!==void 0&&l!=null&&p(t,["tuningTask","hyperparameters","batchSize"],l);const c=h(e,["learningRate"]);return t!==void 0&&c!=null&&p(t,["tuningTask","hyperparameters","learningRate"],c),n}function _4(e){const t={},n=h(e,["baseModel"]);n!=null&&p(t,["baseModel"],n);const r=h(e,["trainingDataset"]);r!=null&&p(t,["tuningTask","trainingData"],E4(r));const i=h(e,["config"]);return i!=null&&p(t,["config"],M4(i,t)),t}function N4(e){const t={},n=h(e,["name"]);n!=null&&p(t,["_url","name"],n);const r=h(e,["config"]);return r!=null&&p(t,["config"],r),t}function R4(e,t){const n={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const i=h(e,["pageToken"]);t!==void 0&&i!=null&&p(t,["_query","pageToken"],i);const o=h(e,["filter"]);return t!==void 0&&o!=null&&p(t,["_query","filter"],o),n}function P4(e){const t={},n=h(e,["config"]);return n!=null&&p(t,["config"],R4(n,t)),t}function D4(e,t){const n={},r=h(e,["gcsUri"]);t!==void 0&&r!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],r);const i=h(e,["vertexDatasetResource"]);if(t!==void 0&&i!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],i),h(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function k4(e,t){const n={},r=h(e,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const i=h(e,["vertexDatasetResource"]);return t!==void 0&&i!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],i),n}function I4(e,t){const n={},r=h(e,["validationDataset"]);t!==void 0&&r!=null&&p(t,["supervisedTuningSpec"],k4(r,n));const i=h(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&p(t,["tunedModelDisplayName"],i);const o=h(e,["description"]);t!==void 0&&o!=null&&p(t,["description"],o);const l=h(e,["epochCount"]);t!==void 0&&l!=null&&p(t,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=h(e,["learningRateMultiplier"]);t!==void 0&&c!=null&&p(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=h(e,["exportLastCheckpointOnly"]);t!==void 0&&d!=null&&p(t,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=h(e,["adapterSize"]);if(t!==void 0&&f!=null&&p(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),h(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function O4(e){const t={},n=h(e,["baseModel"]);n!=null&&p(t,["baseModel"],n);const r=h(e,["trainingDataset"]);r!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],D4(r,t));const i=h(e,["config"]);return i!=null&&p(t,["config"],I4(i,t)),t}function L4(e){const t={},n=h(e,["name"]);n!=null&&p(t,["model"],n);const r=h(e,["name"]);return r!=null&&p(t,["endpoint"],r),t}function UM(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["state"]);i!=null&&p(t,["state"],pM(i));const o=h(e,["createTime"]);o!=null&&p(t,["createTime"],o);const l=h(e,["tuningTask","startTime"]);l!=null&&p(t,["startTime"],l);const c=h(e,["tuningTask","completeTime"]);c!=null&&p(t,["endTime"],c);const d=h(e,["updateTime"]);d!=null&&p(t,["updateTime"],d);const f=h(e,["description"]);f!=null&&p(t,["description"],f);const m=h(e,["baseModel"]);m!=null&&p(t,["baseModel"],m);const y=h(e,["_self"]);y!=null&&p(t,["tunedModel"],L4(y));const v=h(e,["distillationSpec"]);v!=null&&p(t,["distillationSpec"],v);const S=h(e,["experiment"]);S!=null&&p(t,["experiment"],S);const T=h(e,["labels"]);T!=null&&p(t,["labels"],T);const w=h(e,["pipelineJob"]);w!=null&&p(t,["pipelineJob"],w);const A=h(e,["satisfiesPzi"]);A!=null&&p(t,["satisfiesPzi"],A);const M=h(e,["satisfiesPzs"]);M!=null&&p(t,["satisfiesPzs"],M);const P=h(e,["serviceAccount"]);P!=null&&p(t,["serviceAccount"],P);const N=h(e,["tunedModelDisplayName"]);return N!=null&&p(t,["tunedModelDisplayName"],N),t}function j4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>UM(l))),p(t,["tuningJobs"],o)}return t}function U4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(e,["done"]);o!=null&&p(t,["done"],o);const l=h(e,["error"]);return l!=null&&p(t,["error"],l),t}function $4(e){const t={},n=h(e,["checkpointId"]);n!=null&&p(t,["checkpointId"],n);const r=h(e,["epoch"]);r!=null&&p(t,["epoch"],r);const i=h(e,["step"]);i!=null&&p(t,["step"],i);const o=h(e,["endpoint"]);return o!=null&&p(t,["endpoint"],o),t}function B4(e){const t={},n=h(e,["model"]);n!=null&&p(t,["model"],n);const r=h(e,["endpoint"]);r!=null&&p(t,["endpoint"],r);const i=h(e,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$4(l))),p(t,["checkpoints"],o)}return t}function py(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["name"]);r!=null&&p(t,["name"],r);const i=h(e,["state"]);i!=null&&p(t,["state"],pM(i));const o=h(e,["createTime"]);o!=null&&p(t,["createTime"],o);const l=h(e,["startTime"]);l!=null&&p(t,["startTime"],l);const c=h(e,["endTime"]);c!=null&&p(t,["endTime"],c);const d=h(e,["updateTime"]);d!=null&&p(t,["updateTime"],d);const f=h(e,["error"]);f!=null&&p(t,["error"],f);const m=h(e,["description"]);m!=null&&p(t,["description"],m);const y=h(e,["baseModel"]);y!=null&&p(t,["baseModel"],y);const v=h(e,["tunedModel"]);v!=null&&p(t,["tunedModel"],B4(v));const S=h(e,["supervisedTuningSpec"]);S!=null&&p(t,["supervisedTuningSpec"],S);const T=h(e,["tuningDataStats"]);T!=null&&p(t,["tuningDataStats"],T);const w=h(e,["encryptionSpec"]);w!=null&&p(t,["encryptionSpec"],w);const A=h(e,["partnerModelTuningSpec"]);A!=null&&p(t,["partnerModelTuningSpec"],A);const M=h(e,["distillationSpec"]);M!=null&&p(t,["distillationSpec"],M);const P=h(e,["experiment"]);P!=null&&p(t,["experiment"],P);const N=h(e,["labels"]);N!=null&&p(t,["labels"],N);const O=h(e,["pipelineJob"]);O!=null&&p(t,["pipelineJob"],O);const _=h(e,["satisfiesPzi"]);_!=null&&p(t,["satisfiesPzi"],_);const D=h(e,["satisfiesPzs"]);D!=null&&p(t,["satisfiesPzs"],D);const k=h(e,["serviceAccount"]);k!=null&&p(t,["serviceAccount"],k);const B=h(e,["tunedModelDisplayName"]);return B!=null&&p(t,["tunedModelDisplayName"],B),t}function q4(e){const t={},n=h(e,["sdkHttpResponse"]);n!=null&&p(t,["sdkHttpResponse"],n);const r=h(e,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const i=h(e,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>py(l))),p(t,["tuningJobs"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V4 extends uo{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new pu(Za.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:ay.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=N4(t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>py(m))}else{const f=C4(t);return c=_e("{name}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>UM(m))}}async listInternal(t){var n,r,i,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=P4(t);return c=_e("tuningJobs",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=q4(m),v=new MT;return Object.assign(v,y),v})}else{const f=w4(t);return c=_e("tunedModels",f._url),d=f._query,delete f.config,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:m.headers},v})),l.then(m=>{const y=j4(m),v=new MT;return Object.assign(v,y),v})}}async tuneInternal(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=O4(t);return o=_e("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>py(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_4(t);return o=_e("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>U4(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z4{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const F4=1024*1024*8,H4=3,G4=1e3,K4=2,up="x-goog-upload-status";async function Y4(e,t,n){var r,i,o;let l=0,c=0,d=new oy(new Response),f="upload";for(l=e.size;c<l;){const y=Math.min(F4,l-c),v=e.slice(c,c+y);c+y>=l&&(f+=", finalize");let S=0,T=G4;for(;S<H4&&(d=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[up]));)S++,await J4(T),T=T*K4;if(c+=y,((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i[up])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(d==null?void 0:d.json());if(((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[up])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function W4(e){return{size:e.size,type:e.type}}function J4(e){return new Promise(t=>setTimeout(t,e))}class X4{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Y4(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await W4(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q4{create(t,n,r){return new Z4(t,n,r)}}class Z4{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QT="x-goog-api-key";class eq{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(QT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(QT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tq="gl-node/";class $M{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=Zk(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion;const i=new eq(this.apiKey);this.apiClient=new SB({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:tq+"web",uploader:new X4,downloader:new z4}),this.models=new qB(this.apiClient),this.live=new IB(this.apiClient,i,new Q4),this.batches=new TO(this.apiClient),this.chats=new ML(this.models,this.apiClient),this.caches=new wL(this.apiClient),this.files=new BL(this.apiClient),this.operations=new HB(this.apiClient),this.authTokens=new S4(this.apiClient),this.tunings=new V4(this.apiClient)}}var xe=(e=>(e[e.Welcome=0]="Welcome",e[e.Configure=1]="Configure",e[e.DataValidation=2]="DataValidation",e[e.FeatureEngineering=3]="FeatureEngineering",e[e.Modeling=4]="Modeling",e[e.Report=5]="Report",e[e.Optimize=6]="Optimize",e))(xe||{}),Oe=(e=>(e.TIME_DIMENSION="Time Dimension",e.GEO_DIMENSION="Geo Dimension",e.DEPENDENT_VARIABLE="Dependent Variable",e.MARKETING_SPEND="Marketing Spend",e.MARKETING_ACTIVITY="Marketing Activity",e.CONTROL_VARIABLE="Control Variable",e.IGNORE="Ignore",e))(Oe||{});class cp{static mean(t){return t.length===0?0:t.reduce((n,r)=>n+r,0)/t.length}static standardDeviation(t){if(t.length===0)return 0;const n=this.mean(t),r=t.map(i=>Math.pow(i-n,2));return Math.sqrt(this.mean(r))}static coefficientOfVariation(t){const n=this.mean(t);return n===0?0:this.standardDeviation(t)/n}static correlation(t,n){if(t.length!==n.length||t.length===0)return 0;const r=this.mean(t),i=this.mean(n);let o=0,l=0,c=0;for(let f=0;f<t.length;f++){const m=t[f]-r,y=n[f]-i;o+=m*y,l+=m*m,c+=y*y}const d=Math.sqrt(l*c);return d===0?0:o/d}static rSquared(t,n){if(t.length!==n.length||t.length===0)return 0;const r=this.mean(t);let i=0,o=0;for(let l=0;l<t.length;l++)i+=Math.pow(t[l]-r,2),o+=Math.pow(t[l]-n[l],2);return i===0?0:1-o/i}static mape(t,n){if(t.length!==n.length||t.length===0)return 0;let r=0,i=0;for(let o=0;o<t.length;o++)t[o]!==0&&(r+=Math.abs((t[o]-n[o])/t[o]),i++);return i===0?0:r/i*100}}const nq=new $M({apiKey:"AIzaSyCBQ_Bc4t8rYJXU6487nQ3MAaCGui29Sbc"});let la=null;function rf(){la=null,console.log("Data cache cleared - ready for new dataset")}const ZT=e=>e.replace(/\$\\sigma\s*=\s*([^$]+)\$/g,"( = $1)").replace(/\$\\mu\s*=\s*([^$]+)\$/g,"( = $1)").replace(/\$([^$]+)\$/g,"$1").replace(/\*\*(.+?)\*\*/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/###\s*(.+)/g,"$1").replace(/##\s*(.+)/g,"$1").replace(/#\s*(.+)/g,"$1").replace(/\s*/g,"").replace(/\*\s*/g,"").replace(/^\s*-\s*/gm,"").replace(/^\s*\d+\.\s*/gm,"").replace(/\bstd\b/g,"standard deviation").replace(/\bcv\b/g,"coefficient of variation").replace(/\n{3,}/g,`

`).trim();async function Bl(e,t,n,r){if(r.length===0)return"I don't have any data to analyze yet. Please upload your CSV file first!";const i=(()=>{if(r.length===0)return"empty";const v=r.slice(0,Math.min(5,r.length)).map(S=>Object.keys(S).slice(0,5).map(T=>String(S[T]).slice(0,10)).join("|")).join("||");return`${r.length}_${Object.keys(r[0]).join("_")}_${v}`})();let o,l,c;if(la&&la.dataHash===i)console.log("Using cached statistical data from:",new Date(la.timestamp).toLocaleTimeString()),o=la.statistics,l=la.correlations,c=la.numericColumns;else{console.log("Computing new statistical analysis - data changed or cache miss"),c=Object.keys(r[0]).filter(y=>r.slice(0,10).map(S=>S[y]).some(S=>S!=null&&S!==""&&!isNaN(Number(S)))),o={};for(const y of c){const v=r.map(S=>Number(S[y])||0);o[y]={mean:cp.mean(v),std:cp.standardDeviation(v),min:Math.min(...v),max:Math.max(...v),count:v.length}}if(l={},c.length>1&&c.length<=10)for(let y=0;y<Math.min(c.length,5);y++)for(let v=y+1;v<Math.min(c.length,5);v++){const S=c[y],T=c[v],w=r.map(P=>Number(P[S])||0),A=r.map(P=>Number(P[T])||0),M=cp.correlation(w,A);l[`${S} vs ${T}`]=M}la={dataHash:i,statistics:o,correlations:l,numericColumns:c,timestamp:Date.now()},console.log("Cached new statistical analysis at:",new Date().toLocaleTimeString())}const d=Object.entries(o).sort(([,y],[,v])=>v.std-y.std).slice(0,8),f=Object.entries(l).filter(([,y])=>Math.abs(y)>.3).slice(0,5),m=`You are MixMind, an expert data analyst. Answer the user's question using real statistical analysis.

User's Question: "${e}"

Dataset: ${r.length} rows, ${Object.keys(r[0]).length} columns

Key Statistics:
${d.map(([y,v])=>`${y}: =${v.mean.toFixed(1)}, =${v.std.toFixed(1)}`).join(" | ")}

Notable Correlations:
${f.map(([y,v])=>`${y}: ${v.toFixed(2)}`).join(" | ")}

Context: ${xe[t]} step

IMPORTANT: Write a clean, readable response WITHOUT markdown formatting (no **, , ###, etc.). Use plain text with simple line breaks. Be concise, specific, and actionable. Keep under 200 words.`;try{const y=await nq.models.generateContent({model:"gemini-2.5-flash",contents:m});return ZT(y.text)}catch(y){console.error("Failed to generate chat response:",y);const v=c.slice(0,3);return ZT(`Based on your data: ${r.length} rows, ${c.length} numeric columns. Key metrics: ${v.map(S=>`${S} (=${o[S].mean.toFixed(1)})`).join(", ")}. Ask me specific questions!`)}}const yv=(e,t)=>e.size===t.size&&[...e].every(n=>t.has(n)),gy=(e,t)=>e!=null&&e.channels?yv(new Set(e.channels),new Set(t)):!1,ew=(e,t,n)=>e.provenance?e.provenance.features_hash!==t||e.provenance.ranges_hash!==n:!0;function rq(e,t){const n=new Set(e.channels),r=new Set(t.channels),i=t.channels.filter(d=>!n.has(d)),o=e.channels.filter(d=>!r.has(d)),l=e.channels.filter(d=>!r.has(d)),c=t.channels.filter(d=>!n.has(d));return{is_aligned:yv(n,r),contributions_channels:e.channels,diagnostics_channels:t.channels,missing_in_contributions:i,missing_in_diagnostics:o,extra_in_contributions:l,extra_in_diagnostics:c}}function iq(e,t,n){const r=[],i=rq(t,n);i.is_aligned||r.push(`Channel arrays not aligned for model ${e}`);const o=t.values.length===t.channels.length,l=n.rows.length===n.channels.length;o||r.push(`Contributions values array length (${t.values.length}) doesn't match channels length (${t.channels.length})`),l||r.push(`Diagnostics rows array length (${n.rows.length}) doesn't match channels length (${n.channels.length})`);const c=new Set(n.rows.map(f=>f.channel)),d=new Set(n.channels);return yv(c,d)||r.push("Diagnostic row channels don't match declared channels array"),{model_id:e,is_complete:r.length===0,channel_alignment:i,array_length_check:{contributions_match:o,diagnostics_match:l,expected_length:t.channels.length,contributions_length:t.values.length,diagnostics_length:n.rows.length},errors:r}}function aq(e){var c,d,f,m,y,v,S,T,w;const t={id:e.id,algorithm:e.algo.includes("Bayesian")?"Bayesian":e.algo.includes("GLM")?"GLM":e.algo.includes("LightGBM")?"LightGBM":"NN",performance:{rsq:e.rsq,mape:e.mape,roi:e.roi},training_info:{trained_at:new Date(((c=e.provenance)==null?void 0:c.timestamp)||Date.now()).toISOString(),data_version:((d=e.provenance)==null?void 0:d.data_version)||"unknown",seed:(f=e.provenance)==null?void 0:f.seed},provenance:{features_hash:((m=e.provenance)==null?void 0:m.features_hash)||"",ranges_hash:((y=e.provenance)==null?void 0:y.ranges_hash)||""}},n=e.channels||e.details.map(A=>A.name),r={model_id:e.id,channels:[...n],values:n.map(A=>{const M=e.details.find(P=>P.name===A);return(M==null?void 0:M.contribution)||0}),basis:"train"},i=t.algorithm==="GLM"||t.algorithm==="Bayesian",o=n.map(A=>{var N,O,_,D;const M=e.details.find(k=>k.name===A),P=(O=(N=e.diagnostics)==null?void 0:N.channel_diagnostics)==null?void 0:O.find(k=>k.name===A);return i?{channel:A,coefficient:(P==null?void 0:P.coefficient)||(M==null?void 0:M.contribution)||0,p_value:(M==null?void 0:M.pValue)||(P==null?void 0:P.pValue)||null,ci95_lower:((_=P==null?void 0:P.confidence_interval)==null?void 0:_[0])||null,ci95_upper:((D=P==null?void 0:P.confidence_interval)==null?void 0:D[1])||null,sign:(P==null?void 0:P.actual_sign)||(M!=null&&M.contribution&&M.contribution>0?"positive":M!=null&&M.contribution&&M.contribution<0?"negative":"neutral"),importance:null}:{channel:A,coefficient:null,p_value:null,ci95_lower:null,ci95_upper:null,sign:null,importance:(P==null?void 0:P.importance)||Math.abs((M==null?void 0:M.contribution)||0)/100}}),l={model_id:e.id,channels:[...n],rows:o,summary:{weak_channels:((v=e.diagnostics)==null?void 0:v.weak_channels)||[],sign_mismatches:((S=e.diagnostics)==null?void 0:S.sign_mismatch)||[],overfit_risk:((T=e.diagnostics)==null?void 0:T.overfit_risk)||!1,warning_count:((w=e.diagnostics)==null?void 0:w.warning_count)||0}};return{metadata:t,contributions:r,diagnostics:l}}const aa=e=>e.replace(/\*\*(.+?)\*\*/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/###\s*(.+)/g,"$1").replace(/##\s*(.+)/g,"$1").replace(/#\s*(.+)/g,"$1").replace(/\s*/g,"").replace(/\*\s*/g,"").replace(/^\s*-\s*/gm,"").replace(/^\s*\d+\.\s*/gm,"").replace(/\n{3,}/g,`

`).trim(),yy={},BM=e=>{var i;if(!e||e==="Activity Only"||e==="N/A")return 0;const t=e.match(/\$(\d+(?:\.\d+)?)([kKmM])?/);if(!t)return 0;const n=parseFloat(t[1]),r=(i=t[2])==null?void 0:i.toLowerCase();return r==="k"?n*1e3:r==="m"?n*1e6:n},qM=e=>{e.forEach(t=>{const n=t;if(n.latest52wSpend){const r=BM(n.latest52wSpend);r>0&&(yy[t.name]=r)}})},Mf=(e,t)=>yy[e]?yy[e]:_f(e,1e4,52),_f=(e,t,n=52)=>{let r=5;e.toLowerCase().includes("tv")?r=25:e.toLowerCase().includes("hcp")&&e.toLowerCase().includes("call")?r=20:e.toLowerCase().includes("speaker")?r=5:e.toLowerCase().includes("hcp")?r=4:e.toLowerCase().includes("display")?r=6:e.toLowerCase().includes("search")&&(r=4);const i=t/1e4*.3;return r*(.7+i)*(n/52)*1e6},VM=(e,t)=>{const n=Object.keys(e).find(U=>e[U]===Oe.TIME_DIMENSION),r=Object.keys(e).find(U=>e[U]===Oe.DEPENDENT_VARIABLE),i=Object.keys(e).filter(U=>e[U]===Oe.MARKETING_SPEND),o=Object.keys(e).filter(U=>e[U]===Oe.MARKETING_ACTIVITY);if(!n||!r)throw new Error("A 'Time Dimension' and 'Dependent Variable' column must be selected.");const l=[];o.forEach(U=>{const ee=i.find(ue=>{const q=U.toLowerCase().replace(/_?(impressions?|clicks?|grps?|reach|views?|activity|count|events?|sends?|engagements?)$/i,""),H=ue.toLowerCase().replace(/_?(spend|cost|investment)$/i,"");return q===H||q.includes(H)||H.includes(q)||U.toLowerCase().replace(/_(impressions?|clicks?|count|events?|sends?|engagements?)$/i,"_spend")===ue.toLowerCase()||q.replace(/[^a-z]/g,"")===H.replace(/[^a-z]/g,"")||q.startsWith("hcp")&&H.startsWith("hcp")&&q.replace("hcp","")===H.replace("hcp","")});l.push({name:ee?U.replace(/_?(impressions?|clicks?|grps?|reach|views?|activity|count|events?|sends?|engagements?)$/i,""):U,spendCol:ee,activityCol:U})});const c=l.map(U=>U.spendCol).filter(Boolean);i.filter(U=>!c.includes(U)).forEach(U=>{l.push({name:U.replace(/_?(spend|cost|investment)$/i,""),spendCol:U,activityCol:U})});const d=l.map((U,ee)=>{const ue=U.activityCol,q=t.map(Ze=>Number(Ze[U.activityCol])||0),H=q.filter(Ze=>Ze===0).length,ae=Math.round(H/t.length*100),pe=q.reduce((Ze,Ue)=>Ze+Ue,0)/q.length,$=q.reduce((Ze,Ue)=>Ze+Math.pow(Ue-pe,2),0)/q.length,Y=pe>0?Math.round(Math.sqrt($)/pe*100):0;let te="Activity Only",he="N/A";if(U.spendCol){const Ze=t.map(Ue=>Number(Ue[U.spendCol])||0);if(t.length>=52){const Ue=Ze.slice(-52).reduce((ct,We)=>ct+We,0);if(Ue>0)te=`$${(Ue/1e3).toFixed(0)}k`;else{const ct=q.reduce((et,Rr)=>et+Rr,0)/q.length,We=_f(ue,ct,52);te=`$${Math.round(We/1e3)}k`}if(t.length>=104){const ct=Ze.slice(-104,-52).reduce((We,et)=>We+et,0);if(Ue>0&&ct>0){const We=(Ue-ct)/ct*100;he=`${We>0?"+":""}${We.toFixed(1)}%`}else if(Ue>0){const We=[-15,25],et=We[0]+Math.random()*(We[1]-We[0]);he=`${et>0?"+":""}${et.toFixed(1)}%`}}}else{const Ue=q.reduce((We,et)=>We+et,0)/q.length,ct=_f(ue,Ue,Math.min(t.length,52));te=`$${Math.round(ct/1e3)}k`}}let Ce="";const Ae=U.name.toLowerCase(),Ye=ae>50,$e=ae<=20,ve=Y>70,Le=Y<=40;let Ee="",se="";return Ae.includes("tv")?Ye&&ve?(Ee=`TV shows ${ae}% zero periods with ${Y.toFixed(0)}% volatility - highly flighted campaigns targeting specific launch windows.`,se="  Model consideration: High adstock (0.7+) needed to capture brand halo effects between flights. Consider 2-3 week lag for full impact measurement."):ve?(Ee=`TV investment varies by ${Y.toFixed(0)}% weekly, indicating burst strategies during key moments.`,se="  Model consideration: Use S-curve transformation to capture saturation at peak spend levels. Monitor for overspending in high-burst periods."):$e&&Le?(Ee=`TV maintains consistent presence with only ${ae}% gaps and ${Y.toFixed(0)}% variation.`,se="  Model consideration: Stable base makes it ideal for baseline estimation. Lower adstock (0.4-0.6) may suffice due to continuous presence."):(Ee=`TV shows ${ae}% zero periods with ${Y.toFixed(0)}% spending variation.`,se="  Model consideration: Mixed pattern suggests testing multiple decay rates. Validate carryover against campaign calendar."):Ae.includes("display")?Ye?(Ee=`Display runs in ${100-ae}% of periods with ${Y.toFixed(0)}% spend volatility - selective targeting strategy.`,se="  Model consideration: Sparse data may cause unstable coefficients. Consider aggregating with similar digital channels or using regularization."):ve?(Ee=`Display shows ${Y.toFixed(0)}% volatility with ${ae}% downtime - performance-driven optimization in action.`,se="  Model consideration: High variation ideal for response curve estimation. Use power or log transformation to capture diminishing returns."):(Ee=`Display maintains ${100-ae}% coverage with ${Y.toFixed(0)}% spend stability.`,se="  Model consideration: Consistent signal enables reliable attribution. Test immediate (lag 0) vs short-term (lag 1) response patterns."):Ae.includes("search")||Ae.includes("paidsearch")?Le?(Ee=`Search shows remarkably stable investment (${Y.toFixed(0)}% CV) capturing consistent demand.`,se="  Model consideration: Low volatility perfect for baseline ROI. Minimal adstock (0.1-0.2) as search is direct response."):(Ee=`Search varies by ${Y.toFixed(0)}% with ${ae}% inactive periods - adaptive bidding strategy.`,se="  Model consideration: Volatility helps identify elasticity. Use log transformation and test same-week impact (lag 0)."):Ae.includes("hcp")?Ae.includes("call")?Ye?(Ee=`HCP calls active in ${100-ae}% of periods with ${Y.toFixed(0)}% effort variation - targeted territory focus.`,se="  Model consideration: Sparse calls may indicate pilot programs. Consider geographic clustering or pooling for stability."):(Ee=`HCP calls show ${ae}% gaps with ${Y.toFixed(0)}% effort changes - consistent field force deployment.`,se="  Model consideration: Professional detailing has 2-4 week prescription lag. High adstock (0.6+) captures relationship building."):Ae.includes("email")?(Ee=`HCP email shows ${ae}% inactive periods with ${Y.toFixed(0)}% send variation.`,se="  Model consideration: Digital HCP has 1-week lag typically. Lower adstock (0.2-0.3) due to inbox saturation effects."):Ae.includes("social")?(Ee=`HCP social engagement varies by ${Y.toFixed(0)}% with ${100-ae}% active weeks.`,se="  Model consideration: Social amplification suggests moderate adstock (0.3-0.4). Test interaction effects with other HCP channels."):(Ee=`HCP channel shows ${ae}% downtime with ${Y.toFixed(0)}% activity variation.`,se="  Model consideration: Professional channels need longer attribution windows. Consider 2-3 week lags for prescription impact."):Ae.includes("speaker")?Ye?(Ee=`Speaker programs run in ${100-ae}% of periods - selective high-value KOL events.`,se="  Model consideration: Sporadic but high-impact. Use high adstock (0.7-0.9) for long-term influence. May need 3-4 week lag."):(Ee=`Speaker programs show ${Y.toFixed(0)}% variation across ${100-ae}% active periods.`,se="  Model consideration: Regular programs build cumulative credibility. S-curve captures event capacity constraints."):Ye&&ve?(Ee=`Channel active only ${100-ae}% of time with ${Y.toFixed(0)}% spend swings - highly tactical execution.`,se="  Model consideration: Sparse, volatile data challenges modeling. Consider grouping with similar channels or using Bayesian priors for stability."):Ye?(Ee=`Channel shows ${ae}% zero periods - flighted campaign strategy with focused bursts.`,se="  Model consideration: Gaps between flights require careful adstock tuning. Test 0.5-0.7 range to bridge campaign periods."):ve?(Ee=`Channel volatility at ${Y.toFixed(0)}% indicates dynamic optimization based on performance.`,se="  Model consideration: High variance excellent for response curve fitting. Use flexible transformations (power/s-curve)."):$e&&Le?(Ee=`Channel maintains steady presence - ${ae}% gaps, ${Y.toFixed(0)}% variation showing disciplined execution.`,se="  Model consideration: Stable signal ideal for MMM. Can reliably estimate both base and incremental effects."):(Ee=`Channel shows ${ae}% inactive periods with ${Y.toFixed(0)}% spending variation.`,se="  Model consideration: Moderate pattern allows standard MMM approaches. Test multiple transformation types for best fit."),Ce=Ee+se,{name:ue,sparsity:`${ae}% zeros`,volatility:`${Y.toFixed(1)}% CV`,yoyTrend:he,commentary:Ce,isApproved:!0,latest52wSpend:te,yoySpendTrend:he}}),f=t.map(U=>({date:String(U[n])||"",kpi:Number(U[r])||0})).sort((U,ee)=>new Date(U.date).getTime()-new Date(ee.date).getTime()),m=f.reduce((U,ee)=>U+ee.kpi,0)/f.length,y=f.slice(-13).reduce((U,ee)=>U+ee.kpi,0)/13,v=(y-m)/m*100,S=Math.max(...f.map(U=>U.kpi)),T=Math.min(...f.map(U=>U.kpi)),A=(S-T)/m*100,M=f.slice(-13,-9).reduce((U,ee)=>U+ee.kpi,0)/4,P=f.slice(-9,-5).reduce((U,ee)=>U+ee.kpi,0)/4,N=f.slice(-5).reduce((U,ee)=>U+ee.kpi,0)/Math.min(5,f.slice(-5).length),O=N>P&&P>M,_=N<P&&P<M;let D="";Math.abs(v)<5&&A<20?D=`${r} shows remarkable stability with ${m.toFixed(0)} weekly average and only ${A.toFixed(1)}% range variation. This consistency (${v>0?"+":""}${v.toFixed(1)}% recent trend) indicates mature market dynamics with predictable baseline, ideal for MMM coefficient estimation.`:v>15?O?D=`${r} demonstrates accelerating growth momentum - ${v.toFixed(1)}% above baseline with sequential quarterly improvements. Latest performance (${y.toFixed(0)} weekly avg) suggests successful market capture. Peak at ${S.toFixed(0)} shows upside potential still available.`:D=`${r} shows strong ${v.toFixed(1)}% growth vs baseline (${m.toFixed(0)} historical avg). Recent performance averaging ${y.toFixed(0)} weekly with ${A.toFixed(1)}% volatility range. Growth pattern indicates effective media mix driving incremental volume.`:v>0?D=`${r} trending positively at ${v.toFixed(1)}% above ${m.toFixed(0)} baseline. Current ${y.toFixed(0)} weekly average with ${A.toFixed(1)}% volatility suggests stable growth trajectory. Range from ${T.toFixed(0)} to ${S.toFixed(0)} provides good variance for response curve fitting.`:v<-10?_?D=`${r} facing sustained pressure with ${Math.abs(v).toFixed(1)}% decline and accelerating downward trend. Current ${y.toFixed(0)} vs ${m.toFixed(0)} historical average signals urgent optimization need. High ${A.toFixed(1)}% volatility suggests unstable market conditions.`:D=`${r} declined ${Math.abs(v).toFixed(1)}% from ${m.toFixed(0)} baseline to current ${y.toFixed(0)} weekly average. Performance range ${T.toFixed(0)}-${S.toFixed(0)} with ${A.toFixed(1)}% volatility indicates optimization opportunities through media mix refinement.`:D=`${r} relatively flat with ${Math.abs(v).toFixed(1)}% variance from ${m.toFixed(0)} baseline. Current performance at ${y.toFixed(0)} weekly with ${A.toFixed(1)}% range volatility. Stable but uninspiring trend suggests need for strategic media mix evolution.`;const k=d.filter(U=>parseInt(U.sparsity.replace("% zeros",""))<100),B=k.filter(U=>parseInt(U.sparsity.replace("% zeros",""))>50),j=k.filter(U=>{const ee=U.volatility.match(/(\d+\.?\d*)/);return(ee?parseFloat(ee[1]):0)>70}),re=k.filter(U=>{const ee=parseInt(U.sparsity.replace("% zeros","")),ue=U.volatility.match(/(\d+\.?\d*)/),q=ue?parseFloat(ue[1]):0;return ee<20&&q<40});let K="";k.length===0?K="Critical data issue: No active marketing channels detected. Please verify data upload and column mappings.":B.length>k.length*.5?K=`Data shows ${k.length} channels but ${B.length} have >50% zero periods, indicating highly flighted campaigns. This sparsity pattern requires careful modeling with regularization and potentially channel pooling for stable coefficients. Consider testing Bayesian methods for sparse data handling.`:j.length>k.length*.5?K=`Marketing mix includes ${k.length} channels with ${j.length} showing >70% volatility. High variation excellent for response curve estimation but may indicate unstable spending patterns. Recommend testing multiple saturation curves and validating against known campaign calendars.`:re.length>k.length*.7?K=`Exceptional data quality with ${k.length} channels, ${re.length} showing stable patterns (<20% sparsity, <40% CV). This consistency enables robust MMM with reliable attribution. Low noise ideal for detecting incremental effects and interaction terms.`:K=`Balanced marketing dataset with ${k.length} active channels: ${re.length} stable, ${B.length} flighted, ${j.length} dynamic. Mixed patterns provide good signal diversity for MMM while requiring channel-specific transformation strategies.`;const V={trendData:f,trendsSummary:D,diagnosticsSummary:K,channelDiagnostics:d};return qM(V.channelDiagnostics),V},zM=e=>{const t={TV:{adstock:{min:.5,max:.8},lag:{min:0,max:2},transform:"S-Curve",rationale:aa(`Why 0.5-0.8 adstock range: TV builds brand awareness with 3-6 week persistence. Range allows testing immediate vs sustained carryover effects.
Why 0-2 week lag range: Captures immediate awareness through delayed purchase behavior patterns.
Watchout: If TV is heavily flighted, narrow adstock range to 0.4-0.6 to avoid overestimating carryover during off-periods.`)},Display:{adstock:{min:.2,max:.5},lag:{min:0,max:2},transform:"Negative Exponential",rationale:aa(`Why 0.2-0.5 adstock range: Display ads show moderate brand recall, testing 1-3 week persistence patterns.
Why 0-2 week lag range: Click-to-conversion journey varies from immediate to consideration periods.
Watchout: High frequency campaigns may show fatigue - if range includes negative coefficients, consider upper bound reduction.`)},PaidSearch:{adstock:{min:0,max:.2},lag:{min:0,max:1},transform:"Log-transform",rationale:aa(`Why 0.0-0.2 adstock range: Search is intent-driven with minimal carryover, testing immediate vs short-term brand effects.
Why 0-1 week lag range: Same-session conversions vs brief consideration periods for high-value items.
Watchout: Brand vs non-brand keywords behave differently. Consider separate parameter ranges if you have the data.`)},HCPCalls:{adstock:{min:.4,max:.7},lag:{min:1,max:3},transform:"S-Curve",rationale:aa(`Why 0.4-0.7 adstock range: Face-to-face HCP interactions build relationships with 3-6 week persistence variability.
Why 1-3 week lag range: Prescription decisions happen at next patient visits with varying appointment schedules.
Watchout: If call frequency is low, consider 0.6-0.8 range to bridge longer gaps between interactions.`)},Speaker:{adstock:{min:.6,max:.9},lag:{min:2,max:5},transform:"S-Curve",rationale:aa(`Why 0.6-0.9 adstock range: KOL events create lasting credibility with 4-8+ week influence variability.
Why 2-5 week lag range: HCPs need varying time to absorb clinical data and change prescribing behavior.
Watchout: Sporadic events may cause instability - if range shows inconsistent coefficients, consider aggregating with other HCP channels.`)},HCPEmail:{adstock:{min:.1,max:.3},lag:{min:0,max:2},transform:"Log-transform",rationale:aa(`Why 0.1-0.3 adstock range: Email impact decays quickly, testing 1-2 week persistence patterns.
Why 0-2 week lag range: HCP email checking patterns vary from immediate to periodic review.
Watchout: Open rates affect exposure - if you have engagement data, consider using opens instead of sends for better parameter stability.`)},HCPSocial:{adstock:{min:.2,max:.4},lag:{min:0,max:2},transform:"Log-transform",rationale:aa(`Why 0.2-0.4 adstock range: Social content persistence varies with shares and professional discussions.
Why 0-2 week lag range: Content circulation time varies in professional networks.
Watchout: Engagement quality varies widely. Range helps capture high vs low impact content patterns.`)}};return e.map(n=>{const r=Object.keys(t).find(o=>n.toLowerCase().includes(o.toLowerCase())),i=r?t[r]:{adstock:{min:.1,max:.4},lag:{min:0,max:1},transform:"Log-transform",rationale:aa(`Why 0.1-0.4 adstock range: Assuming moderate carryover typical of digital channels with 1-3 week persistence testing.
Why 0-1 week lag range: Default immediate to brief consideration period. Adjust based on business knowledge.
Watchout: Generic ranges may not capture channel-specific behavior. Monitor model fit and narrow ranges based on coefficient stability.`)};return{channel:n,...i}})},Nf=(e,t,n,r,i)=>{const o=[],l=t?Object.keys(t).find(d=>t[d]===Oe.DEPENDENT_VARIABLE):null;return t&&Object.keys(t).find(d=>t[d]===Oe.GEO_DIMENSION),[{name:"GLM Regression",variants:4,rsqRange:[.78,.92],mapeRange:[7,15],hasPValues:!0,commentary:(d,f,m,y,v)=>{let S=`Linear regression with statistical significance testing${m?` for ${m} prediction`:""}. Strong interpretability with R = ${(d*100).toFixed(1)}% and ${f.toFixed(1)}% MAPE.`;if(y&&y.length>0){const T=y.filter(A=>A.adstock.max>.6),w=y.filter(A=>A.lag.min===0);T.length>0&&(S+=`  Following your high adstock ranges (${T.map(A=>A.channel).join(", ")}) for carryover modeling.`),w.length>0&&(S+=`  Respecting your immediate-impact channel ranges (${w.slice(0,2).map(A=>A.channel).join(", ")}).`)}return v&&v.toLowerCase().includes("conservative")&&(S+="  Aligned with your conservative modeling approach."),S}},{name:"Bayesian Regression",variants:3,rsqRange:[.76,.89],mapeRange:[8,16],hasPValues:!0,commentary:(d,f,m,y,v)=>{let S=`Bayesian approach with uncertainty quantification${m?` for ${m} modeling`:""}. R = ${(d*100).toFixed(1)}% with ${f.toFixed(1)}% MAPE.`;if(y){const T=y.filter(w=>w.transform==="S-Curve");T.length>0&&(S+=`  Modeling your S-Curve transforms (${T.slice(0,2).map(w=>w.channel).join(", ")}) with Bayesian priors.`)}return S+" Excellent for handling parameter uncertainty."}},{name:"LightGBM",variants:4,rsqRange:[.82,.94],mapeRange:[5,12],hasPValues:!1,commentary:(d,f,m,y,v)=>{let S=`Gradient boosting with feature importance${m?` for ${m} optimization`:""}. Superior performance: R = ${(d*100).toFixed(1)}% and ${f.toFixed(1)}% MAPE.`;if(y){const T=y.filter(w=>w.transform==="Power");T.length>0&&(S+=`  Your Power transforms (${T.slice(0,2).map(w=>w.channel).join(", ")}) work excellently with tree-based learning.`)}return v&&v.toLowerCase().includes("performance")&&(S+="  Maximizing predictive accuracy as requested."),S+" Captures complex saturation patterns automatically."}},{name:"NN",variants:3,rsqRange:[.79,.91],mapeRange:[6,14],hasPValues:!1,commentary:(d,f,m,y,v)=>{let S=`Neural network with regularization${m?` for ${m} prediction`:""}. R = ${(d*100).toFixed(1)}% and ${f.toFixed(1)}% MAPE.`;if(y){const T=y.filter(w=>w.lag>=2);T.length>0&&(S+=`  Neural layers effectively capture your lag settings (${T.slice(0,2).map(w=>w.channel).join(", ")}).`)}return S+" Excellent at modeling complex channel interactions."}}].forEach(d=>{for(let f=1;f<=d.variants;f++){const m=Math.random()*(d.rsqRange[1]-d.rsqRange[0])+d.rsqRange[0],y=Math.random()*(d.mapeRange[1]-d.mapeRange[0])+d.mapeRange[0],v=e.map((_,D)=>{const k=.12+Math.random()*.28;let B=1.1+Math.random()*2;return d.name==="LightGBM"?B*=1.05:d.name==="GLM Regression"&&(B*=.97),{channel:_,contribution:k,efficiency:B,confidenceInterval:[B*.8,B*1.2]}}),S=v.reduce((_,D)=>_+D.contribution,0),T=.75+Math.random()*.1;v.forEach(_=>_.contribution=_.contribution/S*T);const w=v.reduce((_,D)=>_+D.efficiency*D.contribution,0)/v.reduce((_,D)=>_+D.contribution,0),A=v.map(_=>{const D=r==null?void 0:r.find(j=>j.channel===_.channel);let k,B;if(D){const j=D.adstock.max-D.adstock.min;k=D.adstock.min+Math.random()*j;const re=D.lag.max-D.lag.min;B=Math.round(D.lag.min+Math.random()*re)}else k=.2+Math.random()*.6,B=Math.floor(Math.random()*4);return{name:_.channel,included:Math.random()>.15,contribution:_.contribution*100,roi:_.efficiency,pValue:d.hasPValues?Math.random()*.12:null,adstock:Math.round(k*100)/100,lag:B,transform:D?D.transform:["Log-transform","S-Curve","Power","Negative Exponential"][Math.floor(Math.random()*4)]}}),M=(_,D,k,B)=>{const j=_.map(U=>{const ee=D.includes("Regression")||D.includes("Bayesian"),ue=(Math.random()-.5)*2,q=ee?Math.abs(ue)*(.1+Math.random()*.3):void 0,H=ee?Math.random()*.2:null,ae=(["TV","Display","Search","Social"].includes(U.name),"positive"),pe=ue>.1?"positive":ue<-.1?"negative":"neutral";return{name:U.name,coefficient:ee?ue:void 0,stderr:q,pValue:H,confidence_interval:ee&&q?[ue-1.96*q,ue+1.96*q]:void 0,expected_sign:ae,actual_sign:pe,sign_mismatch:ae!==pe,importance:ee?void 0:Math.random(),top_driver_rank:ee?void 0:Math.floor(Math.random()*_.length)+1}}),re=j.filter(U=>U.pValue!==null&&U.pValue>.1||U.confidence_interval&&U.confidence_interval[0]<=0&&U.confidence_interval[1]>=0||U.importance!==void 0&&U.importance<.1).map(U=>U.name),K=j.filter(U=>U.sign_mismatch).map(U=>U.name),V=k>.9&&B>15;return{weak_channels:re,sign_mismatch:K,overfit_risk:V,warning_count:re.length+K.length+(V?1:0),channel_diagnostics:j}},P=JSON.stringify(e.sort()).slice(0,8),N=r?JSON.stringify(r.map(_=>({channel:_.channel,adstock:_.adstock,lag:_.lag,transform:_.transform})).sort((_,D)=>_.channel.localeCompare(D.channel))).slice(0,8):"default",O=M(A,d.name,m,y);o.push({id:`${d.name.toLowerCase().replace(/\s+/g,"_")}_${f}`,algo:d.name,rsq:m,mape:y,roi:w,commentary:d.commentary(m,y,l||void 0,r,n),details:A,channels:[...e],provenance:{features_hash:P,ranges_hash:N,algo:d.name,data_version:"demo_v1",timestamp:Date.now(),seed:Math.floor(Math.random()*1e4)},diagnostics:O,isNew:!1,isPinned:!1,isStale:!1})}}),o.sort((d,f)=>Math.abs(d.rsq-f.rsq)>.02?f.rsq-d.rsq:d.mape-f.mape)},oq=Object.freeze(Object.defineProperty({__proto__:null,cacheChannelSpends:qM,calculateRealisticSpend:_f,generateDemoFeatures:zM,generateDemoInsights:VM,generateDemoModels:Nf,getConsistentChannelSpend:Mf,parseSpendFromDiagnostic:BM},Symbol.toStringTag,{value:"Module"})),sq=e=>e.replace(/\*\*(.+?)\*\*/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/###\s*(.+)/g,"$1").replace(/##\s*(.+)/g,"$1").replace(/#\s*(.+)/g,"$1").replace(/\s*/g,"").replace(/\*\s*/g,"").replace(/^\s*-\s*/gm,"").replace(/^\s*\d+\.\s*/gm,"").replace(/\n{3,}/g,`

`).trim(),As=new $M({apiKey:"AIzaSyCBQ_Bc4t8rYJXU6487nQ3MAaCGui29Sbc"}),lq=(e,t=6)=>e.split(`
`).filter(r=>r.trim()!=="").slice(0,t).join(`
`),uq={type:we.ARRAY,items:{type:we.OBJECT,properties:{columnName:{type:we.STRING},suggestedType:{type:we.STRING,enum:Object.values(Oe)}},required:["columnName","suggestedType"]}},cq=async e=>{const t=lq(e),n=`You are a data analyst specializing in Marketing Mix Modeling. I will provide a CSV sample. Your task is to analyze the columns and classify each one into one of the following roles: '${Object.values(Oe).join(", ")}'.

Column Types:
- Dependent Variable: The target metric to be predicted (e.g., sales, prescriptions). Should be numeric.
- Time Dimension: The date or week column, which defines the time grain of the model.
- Geo Dimension: The geographical area column, if present. Often an ID.
- Marketing Spend: Columns representing money spent on marketing. These are used for ROI calculations and must be numeric.
- Marketing Activity: Columns representing marketing effort (e.g., impressions, clicks, GRPs). Must be numeric.
- Control Variable: External or contextual factors that can influence the dependent variable (e.g., seasonality, competitor actions, economic data, promotions, holidays). Can be numeric or categorical.
- Ignore: Columns not relevant for modeling (e.g., duplicate IDs, notes).

CSV Sample:
\`\`\`csv
${t}
\`\`\`

Base your analysis on column names and the data. For example, a column named 'TRx' with numeric values is likely the Dependent Variable. 'Week' is the Time Dimension. 'TV_Spend' is Marketing Spend. 'TV_Impressions' is Marketing Activity. 'Seasonality' is a Control Variable.

Return the result as a JSON array matching the provided schema. Be logical and accurate.
`,r=await As.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:uq}});try{return JSON.parse(r.text).map(o=>({...o,suggestedType:Object.values(Oe).includes(o.suggestedType)?o.suggestedType:Oe.IGNORE}))}catch(i){throw console.error("Failed to parse EDA response:",r.text,i),new Error("Received an invalid JSON format from the AI for EDA.")}};we.ARRAY,we.OBJECT,we.STRING,we.NUMBER,we.NUMBER,we.STRING,we.STRING;const fq=async(e,t,n)=>zM(t),dq=async(e,t,n)=>{const r=e.filter(y=>y.adstock>.5),i=e.filter(y=>y.adstock<=.2),o=e.filter(y=>y.lag>=2),l=e.filter(y=>y.transform==="S-Curve"),c=t?Object.keys(t).find(y=>t[y]===Oe.DEPENDENT_VARIABLE):null,d=t?Object.keys(t).find(y=>t[y]===Oe.GEO_DIMENSION):null;t&&Object.keys(t).filter(y=>t[y]===Oe.MARKETING_SPEND);let f="This parameter setup is designed to accurately model the carryover effects, time delays, and diminishing returns patterns of your marketing channels";c&&(f+=` to optimize ${c} performance`),d&&(f+=` across ${d} markets`),f+=" and measure true channel effectiveness.";let m="";return n&&n.trim()&&(m=`

*Based on your input: "${n}" - these parameters have been tailored to align with your specific business context and requirements.*`),sq(`Overall Strategy

${f}${m}

Key Highlights

Strategic Channel Differentiation: ${r.length>0?`Brand-building channels like ${r.map(y=>y.channel).join(", ")} use high adstock (${r.map(y=>y.adstock.toFixed(1)).join(", ")}) for long-term effects`:"Channels focus on immediate impact"}, ${i.length>0?`while direct-response channels like ${i.map(y=>y.channel).join(", ")} use minimal adstock for immediate impact modeling`:"with balanced carryover effects"}.

Professional Decision Cycles: ${o.length>0?`Healthcare-focused channels like ${o.map(y=>y.channel).join(", ")} incorporate ${o.map(y=>y.lag).join("-")}-week lags to reflect realistic professional decision-making timeframes.`:"Most channels show immediate impact with minimal lag, indicating direct-response focus."}

Saturation Modeling: ${l.length>0?`S-Curve transforms on ${l.map(y=>y.channel).join(", ")} capture the realistic ramp-up and saturation patterns of relationship-driven marketing.`:"Log-transform and Power curves capture diminishing returns patterns for performance channels."}

Expert Considerations

Industry Best Practices: The parameter choices align with MMM standards - search channels show low carryover, brand channels maintain longer effects, and HCP touchpoints reflect healthcare decision cycles.

Model Robustness: This setup balances statistical rigor with business reality, ensuring the model can distinguish between immediate performance drivers and long-term brand builders for actionable insights.`)},fs={type:we.ARRAY,items:{type:we.OBJECT,properties:{id:{type:we.STRING},algo:{type:we.STRING,enum:["Bayesian Regression","NN","LightGBM","GLM Regression"]},rsq:{type:we.NUMBER},mape:{type:we.NUMBER},roi:{type:we.NUMBER},commentary:{type:we.STRING},details:{type:we.ARRAY,items:{type:we.OBJECT,properties:{name:{type:we.STRING},included:{type:we.BOOLEAN},contribution:{type:we.NUMBER},roi:{type:we.NUMBER},pValue:{type:we.NUMBER},adstock:{type:we.NUMBER},lag:{type:we.NUMBER},transform:{type:we.STRING,enum:["Log-transform","Negative Exponential","S-Curve","Power"]}},required:["name","included","contribution","roi","pValue","adstock","lag","transform"]}}},required:["id","algo","rsq","mape","roi","commentary","details"]}},mq=async(e,t)=>{const r=`Okay, acknowledged. Based on your settings, I will apply the following transformations to model '${Object.keys(t).find(d=>t[d]===Oe.DEPENDENT_VARIABLE)||"the target variable"}':`,i="| Channel | Adstock | Lag (Weeks) | Transformation |",o="|---|---|---|---|",l=e.map(d=>`| ${d.channel} | ${d.adstock} | ${d.lag} | ${d.transform} |`).join(`
`),c=[r,"",i,o,l].join(`
`);return Promise.resolve(c)},hq={type:we.OBJECT,properties:{text:{type:we.STRING,description:"A conversational response to the user's query."},newModel:{type:we.OBJECT,description:"A new model object to be added to the leaderboard, only if the user requested a re-run.",properties:fs.items.properties,required:fs.items.required},selectModelId:{type:we.STRING,description:"The ID of the model to be selected for calibration, if the user indicated they want to proceed or examine a model."}},required:["text"]},pq=async(e,t)=>{const n=`
You are an AI assistant for a Marketing Mix Modeling platform. The user is viewing a leaderboard of models and has sent a query.
Your task is to interpret the user's query and respond appropriately in JSON format by querying the provided model data.

Current Model Leaderboard (with details):
\`\`\`json
${JSON.stringify(t,null,2)}
\`\`\`

User Query: "${e}"

Your Tasks:

1. Analyze the Query: Understand the user's intent.
2. Formulate a Text Response: Write a helpful, conversational response in plain text WITHOUT markdown formatting (no bold, headers, bullets, etc.). Keep it concise and readable.
3. Determine Actions and populate the JSON response:

   If the user asks a question about a specific model or channel (e.g., "what is the TV impact in br_2?", "compare roi for samples in nn_1 and lgbm_1"):
      CRITICAL: Find the answer in the JSON data provided. Look up the model by its 'id', find the channel in its 'details' array, and extract the requested metric ('contribution', 'roi', 'pValue', etc.).
      Formulate the answer in the 'text' field.
      Do not populate 'newModel' or 'selectModelId'.

   If the user asks to "rerun" a model or create a new one (e.g., "rerun with stricter outliering"):
      Generate a single new model object for the 'newModel' field that is consistent with the schema.
      Create a new, unique ID (e.g., if 'br_3' exists, create 'br_4').
      Slightly adjust metrics and details to plausibly reflect their request.
      Your text response should announce the new model.

   If the user asks to proceed with, select, activate, or examine a specific model (e.g., "let's go with br_2", "activate nn_1"):
      Identify the correct model ID from the leaderboard.
      Put this ID in the 'selectModelId' field.
      Your text response should confirm their selection.

   For any other general question:
      Provide a helpful answer in the 'text' field.

Output Format:
Return a single JSON object matching the provided schema. Only include 'newModel' or 'selectModelId' if the user's query explicitly triggers those actions.
`,r=await As.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:hq}});try{return JSON.parse(r.text)}catch(i){throw console.error("Failed to parse modeling interaction response:",r.text,i),new Error("Received an invalid JSON format from the AI for the modeling interaction.")}},gq={type:we.OBJECT,properties:{text:{type:we.STRING,description:"A conversational response to the user's tuning request."},updatedModel:{type:we.OBJECT,description:"The complete, updated model object after applying the user's change.",properties:fs.items.properties,required:fs.items.required}},required:["text","updatedModel"]},yq=async(e,t)=>{const n=`
You are an AI assistant for an MMM platform. The user wants to tune the provided model via a natural language command.
Your task is to interpret the command, apply it to the model JSON, and return the complete updated model object.

Current Model State:
\`\`\`json
${JSON.stringify(t,null,2)}
\`\`\`

User's Command: "${e}"

Instructions:
1. Interpret Command: Understand if the user is changing adstock, lag, or including/excluding a channel.
2. Update 'details' Array: Modify the 'details' array to reflect the command.
   If changing a value (e.g., "set TV adstock to 0.7"), update the 'adstock' field for the 'TV' channel.
   If excluding a channel, set its 'included' property to false.
3. Recalculate Metrics (Crucial): After updating, you MUST adjust other values plausibly.
   Contributions: When a channel is excluded/included, you MUST recalculate the 'contribution' for ALL channels. The total contribution of all included channels should be roughly the same as the original total.
   Top-Level Metrics (rsq, mape, roi): The model's overall performance will change.
      If a channel is excluded, the model gets "weaker". Slightly decrease rsq (e.g., by 0.01-0.03) and slightly increase mape (e.g., by 0.2-0.5). Adjust blended 'roi' down a bit.
      If a channel is included, do the reverse.
      If tuning a parameter like adstock, metric changes should be very small.
4. Formulate Text Response: Write a short response confirming the action in plain text without markdown formatting (e.g., "Excluded Samples and updated the model.").
5. Return Full Object: Return a single JSON object containing your 'text' response and the complete, updated 'updatedModel' object.

This is a simulation. Make logical, plausible changes.
`,r=await As.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:gq}});try{const i=JSON.parse(r.text);if(!i.updatedModel)throw new Error("AI response missing required 'updatedModel' field.");return i}catch(i){throw console.error("Failed to parse calibration interaction response:",r.text,i),new Error("Received an invalid JSON format from the AI for the calibration interaction.")}},vq={type:we.OBJECT,properties:{intent:{type:we.STRING,enum:["affirmative","negative","other"],description:"The user's intent. 'affirmative' for yes/proceed, 'negative' for no/stop, 'other' for questions or unrelated comments."}},required:["intent"]},af=async e=>{const t=`
    A user was asked to confirm a choice. Analyze their response to determine their intent.
    - If the user says "yes", "yep", "ok", "proceed", "confirm", "looks good", "correct", or similar, the intent is "affirmative".
    - If the user says "no", "stop", "wait", "cancel", or similar, the intent is "negative".
    - If the user asks a question or says something unrelated, the intent is "other".

    User response: "${e}"

    Return the intent as a JSON object with a single key "intent".
    `;try{const n=await As.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{responseMimeType:"application/json",responseSchema:vq}});return JSON.parse(n.text).intent}catch(n){console.error("Error getting confirmation intent",n);const r=e.toLowerCase();return["yes","yep","ok","proceed","confirm"].some(i=>r.includes(i))?"affirmative":"other"}},xq={type:we.OBJECT,properties:{text:{type:we.STRING,description:"A conversational response to the user's request."},newScenario:{type:we.OBJECT,properties:{id:{type:we.STRING},title:{type:we.STRING},recommendedSpend:{type:we.NUMBER},projectedROI:{type:we.NUMBER},netRevenue:{type:we.NUMBER},channels:{type:we.ARRAY,items:{type:we.OBJECT,properties:{name:{type:we.STRING},currentSpend:{type:we.NUMBER},recommendedSpend:{type:we.NUMBER},change:{type:we.NUMBER},projectedROI:{type:we.NUMBER},agentCommentary:{type:we.STRING}},required:["name","currentSpend","recommendedSpend","change","projectedROI","agentCommentary"]}}},required:["id","title","recommendedSpend","projectedROI","netRevenue","channels"]}},required:["text","newScenario"]},bq=async(e,t,n)=>{const r=`
You are an AI budget optimization specialist for a Marketing Mix Modeling (MMM) platform. Create data-driven budget scenarios that address strategic marketing objectives.

**CONTEXT & DATA FOUNDATION**
Current MMM Model Performance:
\`\`\`json
${JSON.stringify(t,null,2)}
\`\`\`

Existing Portfolio Scenarios:
\`\`\`json
${JSON.stringify(n.slice(0,3),null,2)}
\`\`\`

**USER REQUEST ANALYSIS**
Query: "${e}"

**OBJECTIVE**
Create a data-driven budget allocation scenario that addresses the user's request while leveraging MMM insights for optimal performance.

**OPTIMIZATION INTELLIGENCE GUIDELINES**

1. **Strategic Interpretation**
   - Decode business intent: Are they optimizing for efficiency (ROI), scale (volume), or balanced growth?
   - Identify constraints: Fixed budgets, channel minimums, competitive pressures
   - Recognize market dynamics: Seasonality, saturation points, diminishing returns

2. **Advanced Allocation Logic**
   - **High ROI Channels**: Increase allocation up to saturation curve inflection points
   - **Volume Drivers**: Scale spend on high-contribution channels for growth objectives  
   - **Portfolio Balance**: Maintain diversification to reduce risk and capture full-funnel effects
   - **Marginal ROI Optimization**: Reallocate budget where marginal returns are highest
   - **Cross-Channel Effects**: Account for halo effects and channel synergies

3. **Market-Ready Scenario Creation**
   - **ID**: Generate professional naming (e.g., "efficiency_max_2024", "scale_growth_q4")
   - **Title**: Business-focused names like "Q4 Efficiency Focus", "Growth Acceleration Plan", "Balanced Performance Strategy"
   - **Budget Math**: Ensure all channel spends sum exactly to target budget
   - **ROI Projections**: Use diminishing returns curves - higher budgets typically show slight ROI compression
   - **Change Rationale**: Provide strategic reasoning, not just mathematical optimization

4. **Channel-Level Strategic Insights**
   - **Current Spend**: Use model contribution as base (channel ROI  baseline factor)
   - **Recommended Spend**: Apply strategic reallocation based on efficiency curves
   - **Change %**: Calculate precise percentage shifts with business context
   - **Channel ROI**: Project new ROI considering saturation and competitive factors  
   - **Strategic Commentary**: Explain the "why" behind each allocation decision

5. **Response Communication**
   Write a clear business explanation that:
   - Explains the optimization approach
   - Quantifies the expected business impact
   - Describes key allocation changes with rationale
   - Uses professional marketing terminology

**RESPONSE FORMAT**
Provide clear business communication without markdown, followed by precise JSON schema compliance.

**EXAMPLE LANGUAGE**
- "Reallocated investment toward high-performing channels to improve overall portfolio efficiency"
- "This strategy optimizes budget allocation for improved ROI while maintaining scale objectives"
`,i=await As.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:xq}});try{return JSON.parse(i.text)}catch(o){throw console.error("Failed to parse optimizer interaction response:",i.text,o),new Error("Received an invalid JSON format from the AI for the optimizer interaction.")}},Sq={type:we.OBJECT,properties:fs.items.properties,required:fs.items.required},Cq=async e=>{const t=`
You are a data science platform simulating a model recalibration. A user has updated parameters for an existing model.
Based on these new parameters, generate a SINGLE new model run object.

Original Model State (for context):
\`\`\`json
${JSON.stringify({id:e.id,algo:e.algo,rsq:e.rsq,mape:e.mape,roi:e.roi},null,2)}
\`\`\`

User's Updated Model Parameters (this is the new target state):
\`\`\`json
${JSON.stringify(e,null,2)}
\`\`\`

Task:
1. Generate a new unique ID. Append a suffix to the original ID. For example, if the original ID is "glm_1", the new ID should be "glm_1_cal_1". If it's already a calibrated model like "glm_1_cal_1", make it "glm_1_cal_2".
2. Plausibly adjust metrics. Based on the changes in the 'details' array (e.g., a channel was excluded, adstock changed), make small, logical adjustments to the top-level metrics (rsq, mape, roi). For example, excluding a channel with a p-value > 0.1 might slightly IMPROVE the model, while excluding one with p < 0.05 will likely WORSEN it (lower rsq, higher mape). Changing adstock should cause minor fluctuations. When a channel is excluded, its contribution must be redistributed among other channels. The total contribution should remain similar. The blended ROI should also be recalculated.
3. Write a new commentary. The commentary should briefly mention what was changed from the original model (e.g., "Recalibrated from ${e.id} by excluding 'Samples' channel.").
4. Return the complete new model object. The 'details' array in your response should be identical to the one in the "User's Updated Model Parameters" input. The overall object must match the schema.

Return a single JSON object matching the provided schema. Ensure every field is populated correctly.
`,n=await As.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{responseMimeType:"application/json",responseSchema:Sq}});try{const r=JSON.parse(n.text);return r.algo!=="Bayesian Regression"&&r.algo!=="GLM Regression"&&r.details.forEach(i=>i.pValue=null),r}catch(r){throw console.error("Failed to parse rerun model response:",n.text,r),new Error("Received an invalid JSON format from the AI for the recalibrated model.")}},tw=[{id:xe.Welcome,name:"Start"},{id:xe.DataValidation,name:"Validate"},{id:xe.FeatureEngineering,name:"Features"},{id:xe.Modeling,name:"Model"},{id:xe.Report,name:"Report"},{id:xe.Optimize,name:"Optimize"}],Tq=({currentStep:e,completedSteps:t,onStepClick:n})=>{const r=tw.findIndex(i=>i.id===e);return x.jsx("nav",{"aria-label":"Progress",children:x.jsx("ol",{role:"list",className:"flex items-center justify-center space-x-4 md:space-x-8",children:tw.map((i,o)=>{const l=t.has(i.id),c=o===r,d=l&&!c;return x.jsxs("li",{className:"relative",children:[x.jsx("button",{onClick:()=>d&&n(i.id),disabled:!d,className:`step-button-nav text-sm font-medium transition-colors duration-300 disabled:cursor-not-allowed ${c?"text-gray-900":l?"text-gray-600":"text-gray-400"}`,children:i.name}),c&&x.jsx("div",{className:"absolute -bottom-5 left-1/2 -translate-x-1/2 w-full h-0.5 bg-[#EC7200]",style:{filter:"blur(3px)",backgroundColor:"var(--color-orange)"}}),c&&x.jsx("div",{className:"absolute -bottom-5 left-1/2 -translate-x-1/2 w-3/4 h-0.5",style:{backgroundColor:"var(--color-orange)"}})]},i.name)})})})},wq=({className:e})=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:e,children:[x.jsx("path",{d:"M12,2A10,10,0,0,0,2,12A10,10,0,0,0,12,22A10,10,0,0,0,22,12A10,10,0,0,0,12,2ZM11,6H13V8H11V6ZM11,10H13V16H11V10Z"}),x.jsx("circle",{cx:"12",cy:"12",r:"2"}),x.jsx("path",{d:"M7,12a5,5,0,0,1,5-5V5A7,7,0,0,0,5,12Z"}),x.jsx("path",{d:"M12,17a5,5,0,0,1-5-5H5A7,7,0,0,0,12,19Z"})]}),nw=({message:e,onActionClick:t})=>{const n=e.sender==="ai";return x.jsxs("div",{className:`flex items-start gap-3 my-4 ${n?"":"justify-end"}`,children:[n&&x.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center border border-gray-200 bg-gray-100",children:x.jsx("div",{className:"w-5 h-5 text-transparent bg-clip-text bg-gradient-to-br from-[#EC7200] to-[#32A29B]",children:x.jsx(wq,{})})}),x.jsxs("div",{className:`rounded-xl px-4 py-2.5 max-w-md shadow-md ${n?"bg-white text-[#1A1628] border border-gray-200":"text-white bg-[#32A29B]"}`,children:[x.jsx("div",{className:`prose prose-sm max-w-none whitespace-pre-wrap ${n?"":"prose-invert"}`,children:e.text}),e.actions&&e.actions.length>0&&x.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map((r,i)=>x.jsx("button",{onClick:()=>{r.onClick?r.onClick():t==null||t(r.text)},disabled:r.disabled,className:`text-xs px-3 py-1.5 rounded-full border transition-colors ${r.style==="primary"?"bg-[#EC7200] text-white border-[#EC7200] hover:bg-[#d86800]":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100"} disabled:opacity-50 disabled:cursor-not-allowed`,children:r.text},i))})]})]})},Aq=(e,t)=>e.length<=t?e:e.substring(0,t-3)+"...",Eq=e=>{const t=new Set;return e.filter(n=>{const r=n.text.toLowerCase().trim();return t.has(r)?!1:(t.add(r),!0)})},Mq=({suggestions:e,onActionClick:t,isDisabled:n=!1,maxPills:r=6,maxChars:i=60})=>{const o=Eq(e).slice(0,r).map(l=>({...l,text:Aq(l.text,i)}));return o.length===0?null:x.jsxs("div",{className:"",children:[x.jsx("div",{className:"text-xs text-gray-500 mb-2 px-4",children:" What would you like to explore?"}),x.jsx("div",{className:"flex flex-wrap gap-1 px-4",children:o.map((l,c)=>x.jsx("button",{onClick:()=>t(l.text),disabled:n,"aria-label":`Quick action: ${l.text}`,className:`text-xs px-2 py-1 rounded-full border transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-[#EC7200] focus:ring-opacity-50 ${l.style==="primary"?"bg-[#EC7200] text-white border-[#EC7200] hover:bg-[#d86800] disabled:hover:bg-[#EC7200]":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100 disabled:hover:bg-gray-50"}`,children:l.text},c))})]})},fa=()=>x.jsxs("svg",{className:"animate-spin h-6 w-6",style:{color:"var(--primary-color)"},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_q=({className:e})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})});var FM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rw=Kn.createContext&&Kn.createContext(FM),Nq=["attr","size","title"];function Rq(e,t){if(e==null)return{};var n=Pq(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pq(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rf.apply(this,arguments)}function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(n),!0).forEach(function(r){Dq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dq(e,t,n){return t=kq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kq(e){var t=Iq(e,"string");return typeof t=="symbol"?t:t+""}function Iq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HM(e){return e&&e.map((t,n)=>Kn.createElement(t.tag,Pf({key:n},t.attr),HM(t.child)))}function Oq(e){return t=>Kn.createElement(Lq,Rf({attr:Pf({},e.attr)},t),HM(e.child))}function Lq(e){var t=n=>{var{attr:r,size:i,title:o}=e,l=Rq(e,Nq),c=i||n.size||"1em",d;return n.className&&(d=n.className),e.className&&(d=(d?d+" ":"")+e.className),Kn.createElement("svg",Rf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:d,style:Pf(Pf({color:e.color||n.color},n.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&Kn.createElement("title",null,o),e.children)};return rw!==void 0?Kn.createElement(rw.Consumer,null,n=>t(n)):t(FM)}function jq(e){return Oq({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}const Uq=({onSubmit:e,placeholder:t,disabled:n,value:r,onValueChange:i})=>{const o=l=>{l.preventDefault(),r.trim()&&!n&&(e(r.trim()),i(""))};return x.jsx("div",{className:"p-4 border-t border-gray-200 bg-white/70",children:x.jsxs("form",{onSubmit:o,children:[x.jsx("label",{htmlFor:"user-input",className:"sr-only",children:"Your feedback"}),x.jsxs("div",{className:"relative",children:[x.jsx("textarea",{id:"user-input",rows:2,className:"block w-full resize-none rounded-lg border-0 bg-gray-100 py-2.5 pl-4 pr-12 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-[#EC7200] sm:text-sm sm:leading-6 disabled:opacity-50 transition-all",placeholder:t,value:r,onChange:l=>i(l.target.value),disabled:n,onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&o(l)}}),x.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:x.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md h-8 w-8 text-white bg-[#EC7200] hover:bg-[#d86800] focus:outline-none focus:ring-2 focus:ring-[#EC7200] focus:ring-offset-2 focus:ring-offset-white disabled:opacity-50 disabled:hover:bg-transparent transition-all",disabled:!r.trim()||n,children:[x.jsx(jq,{size:16}),x.jsx("span",{className:"sr-only",children:"Send feedback"})]})})]})]})})};var aw={},fp={},dp=34,ql=10,mp=13;function GM(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function $q(e,t){var n=GM(e);return function(r,i){return t(n(r),i,e)}}function ow(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function An(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Bq(e){return e<0?"-"+An(-e,6):e>9999?"+"+An(e,6):An(e,4)}function qq(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Bq(e.getUTCFullYear())+"-"+An(e.getUTCMonth()+1,2)+"-"+An(e.getUTCDate(),2)+(i?"T"+An(t,2)+":"+An(n,2)+":"+An(r,2)+"."+An(i,3)+"Z":r?"T"+An(t,2)+":"+An(n,2)+":"+An(r,2)+"Z":n||t?"T"+An(t,2)+":"+An(n,2)+"Z":"")}function Vq(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(y,v){var S,T,w=i(y,function(A,M){if(S)return S(A,M-1);T=A,S=v?$q(A,v):GM(A)});return w.columns=T||[],w}function i(y,v){var S=[],T=y.length,w=0,A=0,M,P=T<=0,N=!1;y.charCodeAt(T-1)===ql&&--T,y.charCodeAt(T-1)===mp&&--T;function O(){if(P)return fp;if(N)return N=!1,aw;var D,k=w,B;if(y.charCodeAt(k)===dp){for(;w++<T&&y.charCodeAt(w)!==dp||y.charCodeAt(++w)===dp;);return(D=w)>=T?P=!0:(B=y.charCodeAt(w++))===ql?N=!0:B===mp&&(N=!0,y.charCodeAt(w)===ql&&++w),y.slice(k+1,D-1).replace(/""/g,'"')}for(;w<T;){if((B=y.charCodeAt(D=w++))===ql)N=!0;else if(B===mp)N=!0,y.charCodeAt(w)===ql&&++w;else if(B!==n)continue;return y.slice(k,D)}return P=!0,y.slice(k,T)}for(;(M=O())!==fp;){for(var _=[];M!==aw&&M!==fp;)_.push(M),M=O();v&&(_=v(_,A++))==null||S.push(_)}return S}function o(y,v){return y.map(function(S){return v.map(function(T){return m(S[T])}).join(e)})}function l(y,v){return v==null&&(v=ow(y)),[v.map(m).join(e)].concat(o(y,v)).join(`
`)}function c(y,v){return v==null&&(v=ow(y)),o(y,v).join(`
`)}function d(y){return y.map(f).join(`
`)}function f(y){return y.map(m).join(e)}function m(y){return y==null?"":y instanceof Date?qq(y):t.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:l,formatBody:c,formatRows:d,formatRow:f,formatValue:m}}var zq=Vq(","),KM=zq.parse;function YM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=YM(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function tt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=YM(e))&&(r&&(r+=" "),r+=t);return r}var hp={},pp={},sw;function Fq(){return sw||(sw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t}(pp)),pp}var gp={},lw;function WM(){return lw||(lw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t}(gp)),gp}var yp={},uw;function JM(){return uw||(uw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t}(yp)),yp}var vp={},cw;function vv(){return cw||(cw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let o=0,l="",c="",d=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const f=n[o];c?f==="\\"&&o+1<i?(o++,l+=n[o]):f===c?c="":l+=f:d?f==='"'||f==="'"?c=f:f==="]"?(d=!1,r.push(l),l=""):l+=f:f==="["?(d=!0,l&&(r.push(l),l="")):f==="."?l&&(r.push(l),l=""):l+=f,o++}return l&&r.push(l),r}e.toPath=t}(vp)),vp}var fw;function xv(){return fw||(fw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fq(),n=WM(),r=JM(),i=vv();function o(c,d,f){if(c==null)return f;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return f;const m=c[d];return m===void 0?n.isDeepKey(d)?o(c,i.toPath(d),f):f:m}case"number":case"symbol":{typeof d=="number"&&(d=r.toKey(d));const m=c[d];return m===void 0?f:m}default:{if(Array.isArray(d))return l(c,d,f);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return f;const m=c[d];return m===void 0?f:m}}}function l(c,d,f){if(d.length===0)return f;let m=c;for(let y=0;y<d.length;y++){if(m==null||t.isUnsafeProperty(d[y]))return f;m=m[d[y]]}return m===void 0?f:m}e.get=o}(hp)),hp}var xp,dw;function Hq(){return dw||(dw=1,xp=xv().get),xp}var Gq=Hq();const eo=Hr(Gq);var bp={exports:{}},ut={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function Kq(){if(mw)return ut;mw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),S=Symbol.for("react.client.reference");function T(w){if(typeof w=="object"&&w!==null){var A=w.$$typeof;switch(A){case e:switch(w=w.type,w){case n:case i:case r:case d:case f:case v:return w;default:switch(w=w&&w.$$typeof,w){case l:case c:case y:case m:return w;case o:return w;default:return A}}case t:return A}}}return ut.ContextConsumer=o,ut.ContextProvider=l,ut.Element=e,ut.ForwardRef=c,ut.Fragment=n,ut.Lazy=y,ut.Memo=m,ut.Portal=t,ut.Profiler=i,ut.StrictMode=r,ut.Suspense=d,ut.SuspenseList=f,ut.isContextConsumer=function(w){return T(w)===o},ut.isContextProvider=function(w){return T(w)===l},ut.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},ut.isForwardRef=function(w){return T(w)===c},ut.isFragment=function(w){return T(w)===n},ut.isLazy=function(w){return T(w)===y},ut.isMemo=function(w){return T(w)===m},ut.isPortal=function(w){return T(w)===t},ut.isProfiler=function(w){return T(w)===i},ut.isStrictMode=function(w){return T(w)===r},ut.isSuspense=function(w){return T(w)===d},ut.isSuspenseList=function(w){return T(w)===f},ut.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===i||w===r||w===d||w===f||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===l||w.$$typeof===o||w.$$typeof===c||w.$$typeof===S||w.getModuleId!==void 0)},ut.typeOf=T,ut}var hw;function Yq(){return hw||(hw=1,bp.exports=Kq()),bp.exports}var Wq=Yq(),Mn=e=>e===0?0:e>0?1:-1,Nn=e=>typeof e=="number"&&e!=+e,za=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,be=e=>(typeof e=="number"||e instanceof Number)&&!Nn(e),qr=e=>be(e)||typeof e=="string",Jq=0,nu=e=>{var t=++Jq;return"".concat(e||"").concat(t)},_r=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!be(t)&&typeof t!="string")return r;var o;if(za(t)){if(n==null)return r;var l=t.indexOf("%");o=n*parseFloat(t.slice(0,l))/100}else o=+t;return Nn(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},XM=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function nn(e,t,n){return be(e)&&be(t)?e+n*(t-e):t}function QM(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):eo(r,t))===n)}var pt=e=>e===null||typeof e>"u",gu=e=>pt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Xq=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function bv(e){if(typeof e!="string")return!1;var t=Xq;return t.includes(e)}var Qq=["viewBox","children"],pw=["points","pathLength"],Sp={svg:Qq,polygon:pw,polyline:pw},Sv=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{bv(i)&&(r[i]=o=>n[i](n,o))}),r},Zq=(e,t,n)=>r=>(e(t,n,r),null),Cv=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var o=e[i];bv(i)&&typeof o=="function"&&(r||(r={}),r[i]=Zq(o,t,n))}),r},eV=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function ZM(e){if(typeof e!="string")return!1;var t=eV;return t.includes(e)}function Ti(e){var t=Object.entries(e).filter(n=>{var[r]=n;return ZM(r)});return Object.fromEntries(t)}var gw=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",yw=null,Cp=null,e_=e=>{if(e===yw&&Array.isArray(Cp))return Cp;var t=[];return E.Children.forEach(e,n=>{pt(n)||(Wq.isFragment(n)?t=t.concat(e_(n.props.children)):t.push(n))}),Cp=t,yw=e,t};function Tv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>gw(i)):r=[gw(t)],e_(e).forEach(i=>{var o=eo(i,"type.displayName")||eo(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var Sd=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,tV=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var o=(i=r&&(Sp==null?void 0:Sp[r]))!==null&&i!==void 0?i:[],l=t.startsWith("data-"),c=typeof e!="function"&&(!!r&&o.includes(t)||ZM(t)),d=!!n&&bv(t);return l||c||d},bt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var l;tV((l=r)===null||l===void 0?void 0:l[o],o,t,n)&&(i[o]=r[o])}),i},nV=["children","width","height","viewBox","className","style","title","desc"];function vy(){return vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vy.apply(null,arguments)}function rV(e,t){if(e==null)return{};var n,r,i=iV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iV(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var t_=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:o,className:l,style:c,title:d,desc:f}=e,m=rV(e,nV),y=o||{width:r,height:i,x:0,y:0},v=tt("recharts-surface",l);return E.createElement("svg",vy({},bt(m,!0,"svg"),{className:v,width:r,height:i,style:c,viewBox:"".concat(y.x," ").concat(y.y," ").concat(y.width," ").concat(y.height),ref:t}),E.createElement("title",null,d),E.createElement("desc",null,f),n)}),aV=["children","className"];function xy(){return xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xy.apply(null,arguments)}function oV(e,t){if(e==null)return{};var n,r,i=sV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sV(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var hn=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=oV(e,aV),o=tt("recharts-layer",r);return E.createElement("g",xy({className:o},bt(i,!0),{ref:t}),n)}),lV=lM(),uV=E.createContext(null);function ht(e){return function(){return e}}const n_=Math.cos,Df=Math.sin,Nr=Math.sqrt,kf=Math.PI,Cd=2*kf,by=Math.PI,Sy=2*by,Ba=1e-6,cV=Sy-Ba;function r_(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function fV(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return r_;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class dV{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?r_:fV(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,c=this._y1,d=r-t,f=i-n,m=l-t,y=c-n,v=m*m+y*y;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(v>Ba)if(!(Math.abs(y*d-f*m)>Ba)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let S=r-l,T=i-c,w=d*d+f*f,A=S*S+T*T,M=Math.sqrt(w),P=Math.sqrt(v),N=o*Math.tan((by-Math.acos((w+v-A)/(2*M*P)))/2),O=N/P,_=N/M;Math.abs(O-1)>Ba&&this._append`L${t+O*m},${n+O*y}`,this._append`A${o},${o},0,0,${+(y*S>m*T)},${this._x1=t+_*d},${this._y1=n+_*f}`}}arc(t,n,r,i,o,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),d=r*Math.sin(i),f=t+c,m=n+d,y=1^l,v=l?i-o:o-i;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Ba||Math.abs(this._y1-m)>Ba)&&this._append`L${f},${m}`,r&&(v<0&&(v=v%Sy+Sy),v>cV?this._append`A${r},${r},0,1,${y},${t-c},${n-d}A${r},${r},0,1,${y},${this._x1=f},${this._y1=m}`:v>Ba&&this._append`A${r},${r},0,${+(v>=by)},${y},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function wv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new dV(t)}function Av(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i_(e){this._context=e}i_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Td(e){return new i_(e)}function a_(e){return e[0]}function o_(e){return e[1]}function s_(e,t){var n=ht(!0),r=null,i=Td,o=null,l=wv(c);e=typeof e=="function"?e:e===void 0?a_:ht(e),t=typeof t=="function"?t:t===void 0?o_:ht(t);function c(d){var f,m=(d=Av(d)).length,y,v=!1,S;for(r==null&&(o=i(S=l())),f=0;f<=m;++f)!(f<m&&n(y=d[f],f,d))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+e(y,f,d),+t(y,f,d));if(S)return o=null,S+""||null}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:ht(+d),c):e},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:ht(+d),c):t},c.defined=function(d){return arguments.length?(n=typeof d=="function"?d:ht(!!d),c):n},c.curve=function(d){return arguments.length?(i=d,r!=null&&(o=i(r)),c):i},c.context=function(d){return arguments.length?(d==null?r=o=null:o=i(r=d),c):r},c}function of(e,t,n){var r=null,i=ht(!0),o=null,l=Td,c=null,d=wv(f);e=typeof e=="function"?e:e===void 0?a_:ht(+e),t=typeof t=="function"?t:ht(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?o_:ht(+n);function f(y){var v,S,T,w=(y=Av(y)).length,A,M=!1,P,N=new Array(w),O=new Array(w);for(o==null&&(c=l(P=d())),v=0;v<=w;++v){if(!(v<w&&i(A=y[v],v,y))===M)if(M=!M)S=v,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=v-1;T>=S;--T)c.point(N[T],O[T]);c.lineEnd(),c.areaEnd()}M&&(N[v]=+e(A,v,y),O[v]=+t(A,v,y),c.point(r?+r(A,v,y):N[v],n?+n(A,v,y):O[v]))}if(P)return c=null,P+""||null}function m(){return s_().defined(i).curve(l).context(o)}return f.x=function(y){return arguments.length?(e=typeof y=="function"?y:ht(+y),r=null,f):e},f.x0=function(y){return arguments.length?(e=typeof y=="function"?y:ht(+y),f):e},f.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:ht(+y),f):r},f.y=function(y){return arguments.length?(t=typeof y=="function"?y:ht(+y),n=null,f):t},f.y0=function(y){return arguments.length?(t=typeof y=="function"?y:ht(+y),f):t},f.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:ht(+y),f):n},f.lineX0=f.lineY0=function(){return m().x(e).y(t)},f.lineY1=function(){return m().x(e).y(n)},f.lineX1=function(){return m().x(r).y(t)},f.defined=function(y){return arguments.length?(i=typeof y=="function"?y:ht(!!y),f):i},f.curve=function(y){return arguments.length?(l=y,o!=null&&(c=l(o)),f):l},f.context=function(y){return arguments.length?(y==null?o=c=null:c=l(o=y),f):o},f}class l_{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function mV(e){return new l_(e,!0)}function hV(e){return new l_(e,!1)}const Ev={draw(e,t){const n=Nr(t/kf);e.moveTo(n,0),e.arc(0,0,n,0,Cd)}},pV={draw(e,t){const n=Nr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},u_=Nr(1/3),gV=u_*2,yV={draw(e,t){const n=Nr(t/gV),r=n*u_;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},vV={draw(e,t){const n=Nr(t),r=-n/2;e.rect(r,r,n,n)}},xV=.8908130915292852,c_=Df(kf/10)/Df(7*kf/10),bV=Df(Cd/10)*c_,SV=-n_(Cd/10)*c_,CV={draw(e,t){const n=Nr(t*xV),r=bV*n,i=SV*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const l=Cd*o/5,c=n_(l),d=Df(l);e.lineTo(d*n,-c*n),e.lineTo(c*r-d*i,d*r+c*i)}e.closePath()}},Tp=Nr(3),TV={draw(e,t){const n=-Nr(t/(Tp*3));e.moveTo(0,n*2),e.lineTo(-Tp*n,-n),e.lineTo(Tp*n,-n),e.closePath()}},or=-.5,sr=Nr(3)/2,Cy=1/Nr(12),wV=(Cy/2+1)*3,AV={draw(e,t){const n=Nr(t/wV),r=n/2,i=n*Cy,o=r,l=n*Cy+n,c=-o,d=l;e.moveTo(r,i),e.lineTo(o,l),e.lineTo(c,d),e.lineTo(or*r-sr*i,sr*r+or*i),e.lineTo(or*o-sr*l,sr*o+or*l),e.lineTo(or*c-sr*d,sr*c+or*d),e.lineTo(or*r+sr*i,or*i-sr*r),e.lineTo(or*o+sr*l,or*l-sr*o),e.lineTo(or*c+sr*d,or*d-sr*c),e.closePath()}};function EV(e,t){let n=null,r=wv(i);e=typeof e=="function"?e:ht(e||Ev),t=typeof t=="function"?t:ht(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ht(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ht(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function If(){}function Of(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function f_(e){this._context=e}f_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Of(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Of(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MV(e){return new f_(e)}function d_(e){this._context=e}d_.prototype={areaStart:If,areaEnd:If,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Of(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _V(e){return new d_(e)}function m_(e){this._context=e}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Of(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NV(e){return new m_(e)}function h_(e){this._context=e}h_.prototype={areaStart:If,areaEnd:If,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RV(e){return new h_(e)}function vw(e){return e<0?-1:1}function xw(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),c=(o*i+l*r)/(r+i);return(vw(o)+vw(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(c))||0}function bw(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function wp(e,t,n){var r=e._x0,i=e._y0,o=e._x1,l=e._y1,c=(o-r)/3;e._context.bezierCurveTo(r+c,i+c*t,o-c,l-c*n,o,l)}function Lf(e){this._context=e}Lf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wp(this,this._t0,bw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wp(this,bw(this,n=xw(this,e,t)),n);break;default:wp(this,this._t0,n=xw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function p_(e){this._context=new g_(e)}(p_.prototype=Object.create(Lf.prototype)).point=function(e,t){Lf.prototype.point.call(this,t,e)};function g_(e){this._context=e}g_.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function PV(e){return new Lf(e)}function DV(e){return new p_(e)}function y_(e){this._context=e}y_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Sw(e),i=Sw(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Sw(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),l=new Array(n);for(i[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function kV(e){return new y_(e)}function wd(e,t){this._context=e,this._t=t}wd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function IV(e){return new wd(e,.5)}function OV(e){return new wd(e,0)}function LV(e){return new wd(e,1)}function ds(e,t){if((l=e.length)>1)for(var n=1,r,i,o=e[t[0]],l,c=o.length;n<l;++n)for(i=o,o=e[t[n]],r=0;r<c;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ty(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function jV(e,t){return e[t]}function UV(e){const t=[];return t.key=e,t}function $V(){var e=ht([]),t=Ty,n=ds,r=jV;function i(o){var l=Array.from(e.apply(this,arguments),UV),c,d=l.length,f=-1,m;for(const y of o)for(c=0,++f;c<d;++c)(l[c][f]=[0,+r(y,l[c].key,f,o)]).data=y;for(c=0,m=Av(t(l));c<d;++c)l[m[c]].index=c;return n(l,m),l}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:ht(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:ht(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?Ty:typeof o=="function"?o:ht(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??ds,i):n},i}function BV(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,l;i<o;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}ds(e,t)}}function qV(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var l=0,c=0;l<i;++l)c+=e[l][n][1]||0;r[n][1]+=r[n][0]=-c/2}ds(e,t)}}function VV(e,t){if(!(!((l=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,l;r<o;++r){for(var c=0,d=0,f=0;c<l;++c){for(var m=e[t[c]],y=m[r][1]||0,v=m[r-1][1]||0,S=(y-v)/2,T=0;T<c;++T){var w=e[t[T]],A=w[r][1]||0,M=w[r-1][1]||0;S+=A-M}d+=y,f+=S*y}i[r-1][1]+=i[r-1][0]=n,d&&(n-=f/d)}i[r-1][1]+=i[r-1][0]=n,ds(e,t)}}var zV=["type","size","sizeType"];function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wy.apply(null,arguments)}function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(r){FV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FV(e,t,n){return(t=HV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HV(e){var t=GV(e,"string");return typeof t=="symbol"?t:t+""}function GV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KV(e,t){if(e==null)return{};var n,r,i=YV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YV(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var v_={symbolCircle:Ev,symbolCross:pV,symbolDiamond:yV,symbolSquare:vV,symbolStar:CV,symbolTriangle:TV,symbolWye:AV},WV=Math.PI/180,JV=e=>{var t="symbol".concat(gu(e));return v_[t]||Ev},XV=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*WV;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},QV=(e,t)=>{v_["symbol".concat(gu(e))]=t},x_=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=KV(e,zV),o=Tw(Tw({},i),{},{type:t,size:n,sizeType:r}),l=()=>{var y=JV(t),v=EV().type(y).size(XV(n,r,t));return v()},{className:c,cx:d,cy:f}=o,m=bt(o,!0);return d===+d&&f===+f&&n===+n?E.createElement("path",wy({},m,{className:tt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};x_.registerSymbol=QV;var Ap={},Ep={},ww;function ZV(){return ww||(ww=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let o=0;o<n.length;o++){const l=n[o],c=r(l);i.has(c)||i.set(c,l)}return Array.from(i.values())}e.uniqBy=t}(Ep)),Ep}var Mp={},Aw;function b_(){return Aw||(Aw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t}(Mp)),Mp}var _p={},Np={},Rp={},Ew;function e5(){return Ew||(Ew=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t}(Rp)),Rp}var Mw;function Mv(){return Mw||(Mw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e5();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n}(Np)),Np}var Pp={},_w;function t5(){return _w||(_w=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t}(Pp)),Pp}var Nw;function n5(){return Nw||(Nw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mv(),n=t5();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r}(_p)),_p}var Dp={},kp={},Rw;function r5(){return Rw||(Rw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xv();function n(r){return function(i){return t.get(i,r)}}e.property=n}(kp)),kp}var Ip={},Op={},Lp={},jp={},Pw;function S_(){return Pw||(Pw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t}(jp)),jp}var Up={},Dw;function C_(){return Dw||(Dw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t}(Up)),Up}var $p={},kw;function _v(){return kw||(kw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t}($p)),$p}var Iw;function i5(){return Iw||(Iw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nv(),n=S_(),r=C_(),i=_v();function o(y,v,S){return typeof S!="function"?t.isMatch(y,v):l(y,v,function T(w,A,M,P,N,O){const _=S(w,A,M,P,N,O);return _!==void 0?!!_:l(w,A,T,O)},new Map)}function l(y,v,S,T){if(v===y)return!0;switch(typeof v){case"object":return c(y,v,S,T);case"function":return Object.keys(v).length>0?l(y,{...v},S,T):i.eq(y,v);default:return n.isObject(y)?typeof v=="string"?v==="":!0:i.eq(y,v)}}function c(y,v,S,T){if(v==null)return!0;if(Array.isArray(v))return f(y,v,S,T);if(v instanceof Map)return d(y,v,S,T);if(v instanceof Set)return m(y,v,S,T);const w=Object.keys(v);if(y==null)return w.length===0;if(w.length===0)return!0;if(T&&T.has(v))return T.get(v)===y;T&&T.set(v,y);try{for(let A=0;A<w.length;A++){const M=w[A];if(!r.isPrimitive(y)&&!(M in y)||v[M]===void 0&&y[M]!==void 0||v[M]===null&&y[M]!==null||!S(y[M],v[M],M,y,v,T))return!1}return!0}finally{T&&T.delete(v)}}function d(y,v,S,T){if(v.size===0)return!0;if(!(y instanceof Map))return!1;for(const[w,A]of v.entries()){const M=y.get(w);if(S(M,A,w,y,v,T)===!1)return!1}return!0}function f(y,v,S,T){if(v.length===0)return!0;if(!Array.isArray(y))return!1;const w=new Set;for(let A=0;A<v.length;A++){const M=v[A];let P=!1;for(let N=0;N<y.length;N++){if(w.has(N))continue;const O=y[N];let _=!1;if(S(O,M,A,y,v,T)&&(_=!0),_){w.add(N),P=!0;break}}if(!P)return!1}return!0}function m(y,v,S,T){return v.size===0?!0:y instanceof Set?f([...y],[...v],S,T):!1}e.isMatchWith=o,e.isSetMatch=m}(Lp)),Lp}var Ow;function Nv(){return Ow||(Ow=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i5();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n}(Op)),Op}var Bp={},qp={},Vp={},Lw;function T_(){return Lw||(Lw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t}(Vp)),Vp}var zp={},jw;function Rv(){return jw||(jw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t}(zp)),zp}var Fp={},Uw;function Pv(){return Uw||(Uw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",l="[object Symbol]",c="[object Date]",d="[object Map]",f="[object Set]",m="[object Array]",y="[object Function]",v="[object ArrayBuffer]",S="[object Object]",T="[object Error]",w="[object DataView]",A="[object Uint8Array]",M="[object Uint8ClampedArray]",P="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",_="[object Int8Array]",D="[object Int16Array]",k="[object Int32Array]",B="[object BigInt64Array]",j="[object Float32Array]",re="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=v,e.arrayTag=m,e.bigInt64ArrayTag=B,e.bigUint64ArrayTag=O,e.booleanTag=i,e.dataViewTag=w,e.dateTag=c,e.errorTag=T,e.float32ArrayTag=j,e.float64ArrayTag=re,e.functionTag=y,e.int16ArrayTag=D,e.int32ArrayTag=k,e.int8ArrayTag=_,e.mapTag=d,e.numberTag=r,e.objectTag=S,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=P,e.uint32ArrayTag=N,e.uint8ArrayTag=A,e.uint8ClampedArrayTag=M}(Fp)),Fp}var Hp={},$w;function a5(){return $w||($w=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t}(Hp)),Hp}var Bw;function w_(){return Bw||(Bw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T_(),n=Rv(),r=Pv(),i=C_(),o=a5();function l(m,y){return c(m,void 0,m,new Map,y)}function c(m,y,v,S=new Map,T=void 0){const w=T==null?void 0:T(m,y,v,S);if(w!=null)return w;if(i.isPrimitive(m))return m;if(S.has(m))return S.get(m);if(Array.isArray(m)){const A=new Array(m.length);S.set(m,A);for(let M=0;M<m.length;M++)A[M]=c(m[M],M,v,S,T);return Object.hasOwn(m,"index")&&(A.index=m.index),Object.hasOwn(m,"input")&&(A.input=m.input),A}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const A=new RegExp(m.source,m.flags);return A.lastIndex=m.lastIndex,A}if(m instanceof Map){const A=new Map;S.set(m,A);for(const[M,P]of m)A.set(M,c(P,M,v,S,T));return A}if(m instanceof Set){const A=new Set;S.set(m,A);for(const M of m)A.add(c(M,void 0,v,S,T));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(o.isTypedArray(m)){const A=new(Object.getPrototypeOf(m)).constructor(m.length);S.set(m,A);for(let M=0;M<m.length;M++)A[M]=c(m[M],M,v,S,T);return A}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const A=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return S.set(m,A),d(A,m,v,S,T),A}if(typeof File<"u"&&m instanceof File){const A=new File([m],m.name,{type:m.type});return S.set(m,A),d(A,m,v,S,T),A}if(m instanceof Blob){const A=new Blob([m],{type:m.type});return S.set(m,A),d(A,m,v,S,T),A}if(m instanceof Error){const A=new m.constructor;return S.set(m,A),A.message=m.message,A.name=m.name,A.stack=m.stack,A.cause=m.cause,d(A,m,v,S,T),A}if(typeof m=="object"&&f(m)){const A=Object.create(Object.getPrototypeOf(m));return S.set(m,A),d(A,m,v,S,T),A}return m}function d(m,y,v=m,S,T){const w=[...Object.keys(y),...t.getSymbols(y)];for(let A=0;A<w.length;A++){const M=w[A],P=Object.getOwnPropertyDescriptor(m,M);(P==null||P.writable)&&(m[M]=c(y[M],M,v,S,T))}}function f(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=c,e.copyProperties=d}(qp)),qp}var qw;function o5(){return qw||(qw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w_();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n}(Bp)),Bp}var Vw;function s5(){return Vw||(Vw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nv(),n=o5();function r(i){return i=n.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=r}(Ip)),Ip}var Gp={},Kp={},Yp={},zw;function l5(){return zw||(zw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w_(),n=Pv();function r(i,o){return t.cloneDeepWith(i,(l,c,d,f)=>{const m=o==null?void 0:o(l,c,d,f);if(m!=null)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(y,i),y}case n.argumentsTag:{const y={};return t.copyProperties(y,i),y.length=i.length,y[Symbol.iterator]=i[Symbol.iterator],y}default:return}})}e.cloneDeepWith=r}(Yp)),Yp}var Fw;function u5(){return Fw||(Fw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l5();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n}(Kp)),Kp}var Wp={},Jp={},Hw;function A_(){return Hw||(Hw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n}(Jp)),Jp}var Xp={},Gw;function c5(){return Gw||(Gw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rv();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n}(Xp)),Xp}var Kw;function f5(){return Kw||(Kw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WM(),n=A_(),r=c5(),i=vv();function o(l,c){let d;if(Array.isArray(c)?d=c:typeof c=="string"&&t.isDeepKey(c)&&(l==null?void 0:l[c])==null?d=i.toPath(c):d=[c],d.length===0)return!1;let f=l;for(let m=0;m<d.length;m++){const y=d[m];if((f==null||!Object.hasOwn(f,y))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(y)&&y<f.length))return!1;f=f[y]}return!0}e.has=o}(Wp)),Wp}var Yw;function d5(){return Yw||(Yw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nv(),n=JM(),r=u5(),i=xv(),o=f5();function l(c,d){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return d=r.cloneDeep(d),function(f){const m=i.get(f,c);return m===void 0?o.has(f,c):d===void 0?m===void 0:t.isMatch(m,d)}}e.matchesProperty=l}(Gp)),Gp}var Ww;function m5(){return Ww||(Ww=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b_(),n=r5(),r=s5(),i=d5();function o(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=o}(Dp)),Dp}var Jw;function h5(){return Jw||(Jw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZV(),n=b_(),r=n5(),i=m5();function o(l,c=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(c)):[]}e.uniqBy=o}(Ap)),Ap}var Qp,Xw;function p5(){return Xw||(Xw=1,Qp=h5().uniqBy),Qp}var g5=p5();const Qw=Hr(g5);function y5(e,t,n){return t===!0?Qw(e,n):typeof t=="function"?Qw(e,t):e}var Zp={exports:{}},eg={},tg={exports:{}},ng={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function v5(){if(Zw)return ng;Zw=1;var e=xs();function t(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function c(y,v){var S=v(),T=r({inst:{value:S,getSnapshot:v}}),w=T[0].inst,A=T[1];return o(function(){w.value=S,w.getSnapshot=v,d(w)&&A({inst:w})},[y,S,v]),i(function(){return d(w)&&A({inst:w}),y(function(){d(w)&&A({inst:w})})},[y]),l(S),S}function d(y){var v=y.getSnapshot;y=y.value;try{var S=v();return!n(y,S)}catch{return!0}}function f(y,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return ng.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,ng}var e1;function x5(){return e1||(e1=1,tg.exports=v5()),tg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1;function b5(){if(t1)return eg;t1=1;var e=xs(),t=x5();function n(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,c=e.useMemo,d=e.useDebugValue;return eg.useSyncExternalStoreWithSelector=function(f,m,y,v,S){var T=o(null);if(T.current===null){var w={hasValue:!1,value:null};T.current=w}else w=T.current;T=c(function(){function M(D){if(!P){if(P=!0,N=D,D=v(D),S!==void 0&&w.hasValue){var k=w.value;if(S(k,D))return O=k}return O=D}if(k=O,r(N,D))return k;var B=v(D);return S!==void 0&&S(k,B)?(N=D,k):(N=D,O=B)}var P=!1,N,O,_=y===void 0?null:y;return[function(){return M(m())},_===null?void 0:function(){return M(_())}]},[m,y,v,S]);var A=i(f,T[0],T[1]);return l(function(){w.hasValue=!0,w.value=A},[A]),d(A),A},eg}var n1;function S5(){return n1||(n1=1,Zp.exports=b5()),Zp.exports}var C5=S5(),Dv=E.createContext(null),T5=e=>e,Kt=()=>{var e=E.useContext(Dv);return e?e.store.dispatch:T5},Tf=()=>{},w5=()=>Tf,A5=(e,t)=>e===t;function Re(e){var t=E.useContext(Dv);return C5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:w5,t?t.store.getState:Tf,t?t.store.getState:Tf,t?e:Tf,A5)}function E5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function M5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function _5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var r1=e=>Array.isArray(e)?e:[e];function N5(e){const t=Array.isArray(e[0])?e[0]:e;return _5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function R5(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var P5=class{constructor(e){this.value=e}deref(){return this.value}},D5=typeof WeakRef<"u"?WeakRef:P5,k5=0,i1=1;function sf(){return{s:k5,v:void 0,o:null,p:null}}function E_(e,t={}){let n=sf();const{resultEqualityCheck:r}=t;let i,o=0;function l(){var y;let c=n;const{length:d}=arguments;for(let v=0,S=d;v<S;v++){const T=arguments[v];if(typeof T=="function"||typeof T=="object"&&T!==null){let w=c.o;w===null&&(c.o=w=new WeakMap);const A=w.get(T);A===void 0?(c=sf(),w.set(T,c)):c=A}else{let w=c.p;w===null&&(c.p=w=new Map);const A=w.get(T);A===void 0?(c=sf(),w.set(T,c)):c=A}}const f=c;let m;if(c.s===i1)m=c.v;else if(m=e.apply(null,arguments),o++,r){const v=((y=i==null?void 0:i.deref)==null?void 0:y.call(i))??i;v!=null&&r(v,m)&&(m=v,o!==0&&o--),i=typeof m=="object"&&m!==null||typeof m=="function"?new D5(m):m}return f.s=i1,f.v=m,m}return l.clearCache=()=>{n=sf(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function I5(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,l=0,c,d={},f=i.pop();typeof f=="object"&&(d=f,f=i.pop()),E5(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const m={...n,...d},{memoize:y,memoizeOptions:v=[],argsMemoize:S=E_,argsMemoizeOptions:T=[]}=m,w=r1(v),A=r1(T),M=N5(i),P=y(function(){return o++,f.apply(null,arguments)},...w),N=S(function(){l++;const _=R5(M,arguments);return c=P.apply(null,_),c},...A);return Object.assign(N,{resultFunc:f,memoizedResultFunc:P,dependencies:M,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:S})};return Object.assign(r,{withTypes:()=>r}),r}var ne=I5(E_),O5=Object.assign((e,t=ne)=>{M5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((l,c,d)=>(l[n[d]]=c,l),{}))},{withTypes:()=>O5}),rg={},ig={},ag={},a1;function L5(){return a1||(a1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const l=t(r),c=t(i);if(l===c&&l===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?c-l:l-c}return 0};e.compareValues=n}(ag)),ag}var og={},sg={},o1;function M_(){return o1||(o1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t}(sg)),sg}var s1;function j5(){return s1||(s1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M_(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,l){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||l!=null&&Object.hasOwn(l,o)}e.isKey=i}(og)),og}var l1;function U5(){return l1||(l1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5(),n=j5(),r=vv();function i(o,l,c,d){if(o==null)return[];c=d?void 0:c,Array.isArray(o)||(o=Object.values(o)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(S=>String(S));const f=(S,T)=>{let w=S;for(let A=0;A<T.length&&w!=null;++A)w=w[T[A]];return w},m=(S,T)=>T==null||S==null?T:typeof S=="object"&&"key"in S?Object.hasOwn(T,S.key)?T[S.key]:f(T,S.path):typeof S=="function"?S(T):Array.isArray(S)?f(T,S):typeof T=="object"?T[S]:T,y=l.map(S=>(Array.isArray(S)&&S.length===1&&(S=S[0]),S==null||typeof S=="function"||Array.isArray(S)||n.isKey(S)?S:{key:S,path:r.toPath(S)}));return o.map(S=>({original:S,criteria:y.map(T=>m(T,S))})).slice().sort((S,T)=>{for(let w=0;w<y.length;w++){const A=t.compareValues(S.criteria[w],T.criteria[w],c[w]);if(A!==0)return A}return 0}).map(S=>S.original)}e.orderBy=i}(ig)),ig}var lg={},u1;function $5(){return u1||(u1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],o=Math.floor(r),l=(c,d)=>{for(let f=0;f<c.length;f++){const m=c[f];Array.isArray(m)&&d<o?l(m,d+1):i.push(m)}};return l(n,0),i}e.flatten=t}(lg)),lg}var ug={},c1;function __(){return c1||(c1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A_(),n=Mv(),r=S_(),i=_v();function o(l,c,d){return r.isObject(d)&&(typeof c=="number"&&n.isArrayLike(d)&&t.isIndex(c)&&c<d.length||typeof c=="string"&&c in d)?i.eq(d[c],l):!1}e.isIterateeCall=o}(ug)),ug}var f1;function B5(){return f1||(f1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5(),n=$5(),r=__();function i(o,...l){const c=l.length;return c>1&&r.isIterateeCall(o,l[0],l[1])?l=[]:c>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(o,n.flatten(l),["asc"])}e.sortBy=i}(rg)),rg}var cg,d1;function q5(){return d1||(d1=1,cg=B5().sortBy),cg}var V5=q5();const Ad=Hr(V5);var N_=e=>e.legend.settings,z5=e=>e.legend.size,F5=e=>e.legend.payload;ne([F5,N_],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Ad(r,n):r});var lf=1;function H5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),l={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(l.height-t.height)>lf||Math.abs(l.left-t.left)>lf||Math.abs(l.top-t.top)>lf||Math.abs(l.width-t.width)>lf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function en(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var G5=typeof Symbol=="function"&&Symbol.observable||"@@observable",m1=G5,fg=()=>Math.random().toString(36).substring(7).split("").join("."),K5={INIT:`@@redux/INIT${fg()}`,REPLACE:`@@redux/REPLACE${fg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fg()}`},jf=K5;function kv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function R_(e,t,n){if(typeof e!="function")throw new Error(en(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(en(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(en(1));return n(R_)(e,t)}let r=e,i=t,o=new Map,l=o,c=0,d=!1;function f(){l===o&&(l=new Map,o.forEach((A,M)=>{l.set(M,A)}))}function m(){if(d)throw new Error(en(3));return i}function y(A){if(typeof A!="function")throw new Error(en(4));if(d)throw new Error(en(5));let M=!0;f();const P=c++;return l.set(P,A),function(){if(M){if(d)throw new Error(en(6));M=!1,f(),l.delete(P),o=null}}}function v(A){if(!kv(A))throw new Error(en(7));if(typeof A.type>"u")throw new Error(en(8));if(typeof A.type!="string")throw new Error(en(17));if(d)throw new Error(en(9));try{d=!0,i=r(i,A)}finally{d=!1}return(o=l).forEach(P=>{P()}),A}function S(A){if(typeof A!="function")throw new Error(en(10));r=A,v({type:jf.REPLACE})}function T(){const A=y;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(en(11));function P(){const O=M;O.next&&O.next(m())}return P(),{unsubscribe:A(P)}},[m1](){return this}}}return v({type:jf.INIT}),{dispatch:v,subscribe:y,getState:m,replaceReducer:S,[m1]:T}}function Y5(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:jf.INIT})>"u")throw new Error(en(12));if(typeof n(void 0,{type:jf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(en(13))})}function P_(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{Y5(n)}catch(o){i=o}return function(l={},c){if(i)throw i;let d=!1;const f={};for(let m=0;m<r.length;m++){const y=r[m],v=n[y],S=l[y],T=v(S,c);if(typeof T>"u")throw c&&c.type,new Error(en(14));f[y]=T,d=d||T!==S}return d=d||r.length!==Object.keys(l).length,d?f:l}}function Uf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function W5(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(en(15))};const l={getState:i.getState,dispatch:(d,...f)=>o(d,...f)},c=e.map(d=>d(l));return o=Uf(...c)(i.dispatch),{...i,dispatch:o}}}function D_(e){return kv(e)&&"type"in e&&typeof e.type=="string"}var k_=Symbol.for("immer-nothing"),h1=Symbol.for("immer-draftable"),Wn=Symbol.for("immer-state");function Er(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ms=Object.getPrototypeOf;function to(e){return!!e&&!!e[Wn]}function vi(e){var t;return e?I_(e)||Array.isArray(e)||!!e[h1]||!!((t=e.constructor)!=null&&t[h1])||Md(e)||_d(e):!1}var J5=Object.prototype.constructor.toString();function I_(e){if(!e||typeof e!="object")return!1;const t=ms(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===J5}function $f(e,t){Ed(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Ed(e){const t=e[Wn];return t?t.type_:Array.isArray(e)?1:Md(e)?2:_d(e)?3:0}function Ay(e,t){return Ed(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function O_(e,t,n){const r=Ed(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function X5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Md(e){return e instanceof Map}function _d(e){return e instanceof Set}function qa(e){return e.copy_||e.base_}function Ey(e,t){if(Md(e))return new Map(e);if(_d(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=I_(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Wn];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const l=i[o],c=r[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[l]})}return Object.create(ms(e),r)}else{const r=ms(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Iv(e,t=!1){return Nd(e)||to(e)||!vi(e)||(Ed(e)>1&&(e.set=e.add=e.clear=e.delete=Q5),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Iv(r,!0))),e}function Q5(){Er(2)}function Nd(e){return Object.isFrozen(e)}var Z5={};function no(e){const t=Z5[e];return t||Er(0,e),t}var ru;function L_(){return ru}function e6(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function p1(e,t){t&&(no("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function My(e){_y(e),e.drafts_.forEach(t6),e.drafts_=null}function _y(e){e===ru&&(ru=e.parent_)}function g1(e){return ru=e6(ru,e)}function t6(e){const t=e[Wn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function y1(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Wn].modified_&&(My(t),Er(4)),vi(e)&&(e=Bf(t,e),t.parent_||qf(t,e)),t.patches_&&no("Patches").generateReplacementPatches_(n[Wn].base_,e,t.patches_,t.inversePatches_)):e=Bf(t,n,[]),My(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==k_?e:void 0}function Bf(e,t,n){if(Nd(t))return t;const r=t[Wn];if(!r)return $f(t,(i,o)=>v1(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return qf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),$f(o,(c,d)=>v1(e,r,i,c,d,n,l)),qf(e,i,!1),n&&e.patches_&&no("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function v1(e,t,n,r,i,o,l){if(to(i)){const c=o&&t&&t.type_!==3&&!Ay(t.assigned_,r)?o.concat(r):void 0,d=Bf(e,i,c);if(O_(n,r,d),to(d))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(vi(i)&&!Nd(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Bf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&qf(e,i)}}function qf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Iv(t,n)}function n6(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:L_(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Ov;n&&(i=[r],o=iu);const{revoke:l,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=l,c}var Ov={get(e,t){if(t===Wn)return e;const n=qa(e);if(!Ay(n,t))return r6(e,n,t);const r=n[t];return e.finalized_||!vi(r)?r:r===dg(e.base_,t)?(mg(e),e.copy_[t]=Ry(r,e)):r},has(e,t){return t in qa(e)},ownKeys(e){return Reflect.ownKeys(qa(e))},set(e,t,n){const r=j_(qa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=dg(qa(e),t),o=i==null?void 0:i[Wn];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(X5(n,i)&&(n!==void 0||Ay(e.base_,t)))return!0;mg(e),Ny(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return dg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,mg(e),Ny(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=qa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Er(11)},getPrototypeOf(e){return ms(e.base_)},setPrototypeOf(){Er(12)}},iu={};$f(Ov,(e,t)=>{iu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});iu.deleteProperty=function(e,t){return iu.set.call(this,e,t,void 0)};iu.set=function(e,t,n){return Ov.set.call(this,e[0],t,n,e[0])};function dg(e,t){const n=e[Wn];return(n?qa(n):e)[t]}function r6(e,t,n){var i;const r=j_(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function j_(e,t){if(!(t in e))return;let n=ms(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ms(n)}}function Ny(e){e.modified_||(e.modified_=!0,e.parent_&&Ny(e.parent_))}function mg(e){e.copy_||(e.copy_=Ey(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var i6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const l=this;return function(d=o,...f){return l.produce(d,m=>n.call(this,m,...f))}}typeof n!="function"&&Er(6),r!==void 0&&typeof r!="function"&&Er(7);let i;if(vi(t)){const o=g1(this),l=Ry(t,void 0);let c=!0;try{i=n(l),c=!1}finally{c?My(o):_y(o)}return p1(o,r),y1(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===k_&&(i=void 0),this.autoFreeze_&&Iv(i,!0),r){const o=[],l=[];no("Patches").generateReplacementPatches_(t,i,o,l),r(o,l)}return i}else Er(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...c)=>this.produceWithPatches(l,d=>t(d,...c));let r,i;return[this.produce(t,n,(l,c)=>{r=l,i=c}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){vi(e)||Er(8),to(e)&&(e=hi(e));const t=g1(this),n=Ry(e,void 0);return n[Wn].isManual_=!0,_y(t),n}finishDraft(e,t){const n=e&&e[Wn];(!n||!n.isManual_)&&Er(9);const{scope_:r}=n;return p1(r,t),y1(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=no("Patches").applyPatches_;return to(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Ry(e,t){const n=Md(e)?no("MapSet").proxyMap_(e,t):_d(e)?no("MapSet").proxySet_(e,t):n6(e,t);return(t?t.scope_:L_()).drafts_.push(n),n}function hi(e){return to(e)||Er(10,e),U_(e)}function U_(e){if(!vi(e)||Nd(e))return e;const t=e[Wn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ey(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ey(e,!0);return $f(n,(r,i)=>{O_(n,r,U_(i))}),t&&(t.finalized_=!1),n}var Jn=new i6,$_=Jn.produce;Jn.produceWithPatches.bind(Jn);Jn.setAutoFreeze.bind(Jn);Jn.setUseStrictShallowCopy.bind(Jn);Jn.applyPatches.bind(Jn);Jn.createDraft.bind(Jn);Jn.finishDraft.bind(Jn);function B_(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var a6=B_(),o6=B_,s6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Uf:Uf.apply(null,arguments)};function mr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Yn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>D_(r)&&r.type===e,n}var q_=class Jl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Jl.prototype)}static get[Symbol.species](){return Jl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Jl(...t[0].concat(this)):new Jl(...t.concat(this))}};function x1(e){return vi(e)?$_(e,()=>{}):e}function uf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function l6(e){return typeof e=="boolean"}var u6=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let l=new q_;return n&&(l6(n)?l.push(a6):l.push(o6(n.extraArgument))),l},c6="RTK_autoBatch",b1=e=>t=>{setTimeout(t,e)},f6=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,l=!1;const c=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:b1(10):e.type==="callback"?e.queueNotification:b1(e.timeout),f=()=>{l=!1,o&&(o=!1,c.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const y=()=>i&&m(),v=r.subscribe(y);return c.add(m),()=>{v(),c.delete(m)}},dispatch(m){var y;try{return i=!((y=m==null?void 0:m.meta)!=null&&y[c6]),o=!i,o&&(l||(l=!0,d(f))),r.dispatch(m)}finally{i=!0}}})},d6=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new q_(e);return r&&i.push(f6(typeof r=="object"?r:void 0)),i};function m6(e){const t=u6(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(kv(n))c=P_(n);else throw new Error(Yn(1));let d;typeof r=="function"?d=r(t):d=t();let f=Uf;i&&(f=s6({trace:!1,...typeof i=="object"&&i}));const m=W5(...d),y=d6(m);let v=typeof l=="function"?l(y):y();const S=f(...v);return R_(c,o,S)}function V_(e){const t={},n=[];let r;const i={addCase(o,l){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(Yn(28));if(c in t)throw new Error(Yn(29));return t[c]=l,i},addMatcher(o,l){return n.push({matcher:o,reducer:l}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function h6(e){return typeof e=="function"}function p6(e,t){let[n,r,i]=V_(t),o;if(h6(e))o=()=>x1(e());else{const c=x1(e);o=()=>c}function l(c=o(),d){let f=[n[d.type],...r.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[i]),f.reduce((m,y)=>{if(y)if(to(m)){const S=y(m,d);return S===void 0?m:S}else{if(vi(m))return $_(m,v=>y(v,d));{const v=y(m,d);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},c)}return l.getInitialState=o,l}var g6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",y6=(e=21)=>{let t="",n=e;for(;n--;)t+=g6[Math.random()*64|0];return t},v6=Symbol.for("rtk-slice-createasyncthunk");function x6(e,t){return`${e}/${t}`}function b6({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[v6];return function(i){const{name:o,reducerPath:l=o}=i;if(!o)throw new Error(Yn(11));const c=(typeof i.reducers=="function"?i.reducers(C6()):i.reducers)||{},d=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(O,_){const D=typeof O=="string"?O:O.type;if(!D)throw new Error(Yn(12));if(D in f.sliceCaseReducersByType)throw new Error(Yn(13));return f.sliceCaseReducersByType[D]=_,m},addMatcher(O,_){return f.sliceMatchers.push({matcher:O,reducer:_}),m},exposeAction(O,_){return f.actionCreators[O]=_,m},exposeCaseReducer(O,_){return f.sliceCaseReducersByName[O]=_,m}};d.forEach(O=>{const _=c[O],D={reducerName:O,type:x6(o,O),createNotation:typeof i.reducers=="function"};w6(_)?E6(D,_,m,t):T6(D,_,m)});function y(){const[O={},_=[],D=void 0]=typeof i.extraReducers=="function"?V_(i.extraReducers):[i.extraReducers],k={...O,...f.sliceCaseReducersByType};return p6(i.initialState,B=>{for(let j in k)B.addCase(j,k[j]);for(let j of f.sliceMatchers)B.addMatcher(j.matcher,j.reducer);for(let j of _)B.addMatcher(j.matcher,j.reducer);D&&B.addDefaultCase(D)})}const v=O=>O,S=new Map,T=new WeakMap;let w;function A(O,_){return w||(w=y()),w(O,_)}function M(){return w||(w=y()),w.getInitialState()}function P(O,_=!1){function D(B){let j=B[O];return typeof j>"u"&&_&&(j=uf(T,D,M)),j}function k(B=v){const j=uf(S,_,()=>new WeakMap);return uf(j,B,()=>{const re={};for(const[K,V]of Object.entries(i.selectors??{}))re[K]=S6(V,B,()=>uf(T,B,M),_);return re})}return{reducerPath:O,getSelectors:k,get selectors(){return k(D)},selectSlice:D}}const N={name:o,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:M,...P(l),injectInto(O,{reducerPath:_,...D}={}){const k=_??l;return O.inject({reducerPath:k,reducer:A},D),{...N,...P(k,!0)}}};return N}}function S6(e,t,n,r){function i(o,...l){let c=t(o);return typeof c>"u"&&r&&(c=n()),e(c,...l)}return i.unwrapped=e,i}var Xn=b6();function C6(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function T6({type:e,reducerName:t,createNotation:n},r,i){let o,l;if("reducer"in r){if(n&&!A6(r))throw new Error(Yn(17));o=r.reducer,l=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?mr(e,l):mr(e))}function w6(e){return e._reducerDefinitionType==="asyncThunk"}function A6(e){return e._reducerDefinitionType==="reducerWithPrepare"}function E6({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Yn(18));const{payloadCreator:o,fulfilled:l,pending:c,rejected:d,settled:f,options:m}=n,y=i(e,o,m);r.exposeAction(t,y),l&&r.addCase(y.fulfilled,l),c&&r.addCase(y.pending,c),d&&r.addCase(y.rejected,d),f&&r.addMatcher(y.settled,f),r.exposeCaseReducer(t,{fulfilled:l||cf,pending:c||cf,rejected:d||cf,settled:f||cf})}function cf(){}var M6="task",z_="listener",F_="completed",Lv="cancelled",_6=`task-${Lv}`,N6=`task-${F_}`,Py=`${z_}-${Lv}`,R6=`${z_}-${F_}`,Rd=class{constructor(e){np(this,"name","TaskAbortError");np(this,"message");this.code=e,this.message=`${M6} ${Lv} (reason: ${e})`}},jv=(e,t)=>{if(typeof e!="function")throw new TypeError(Yn(32))},Vf=()=>{},H_=(e,t=Vf)=>(e.catch(t),e),G_=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Wa=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ja=e=>{if(e.aborted){const{reason:t}=e;throw new Rd(t)}};function K_(e,t){let n=Vf;return new Promise((r,i)=>{const o=()=>i(new Rd(e.reason));if(e.aborted){o();return}n=G_(e,o),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Vf})}var P6=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Rd?"cancelled":"rejected",error:n}}finally{t==null||t()}},zf=e=>t=>H_(K_(e,t).then(n=>(Ja(e),n))),Y_=e=>{const t=zf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:us}=Object,S1={},Pd="listenerMiddleware",D6=(e,t)=>{const n=r=>G_(e,()=>Wa(r,e.reason));return(r,i)=>{jv(r);const o=new AbortController;n(o);const l=P6(async()=>{Ja(e),Ja(o.signal);const c=await r({pause:zf(o.signal),delay:Y_(o.signal),signal:o.signal});return Ja(o.signal),c},()=>Wa(o,N6));return i!=null&&i.autoJoin&&t.push(l.catch(Vf)),{result:zf(e)(l),cancel(){Wa(o,_6)}}}},k6=(e,t)=>{const n=async(r,i)=>{Ja(t);let o=()=>{};const c=[new Promise((d,f)=>{let m=e({predicate:r,effect:(y,v)=>{v.unsubscribe(),d([y,v.getState(),v.getOriginalState()])}});o=()=>{m(),f()}})];i!=null&&c.push(new Promise(d=>setTimeout(d,i,null)));try{const d=await K_(t,Promise.race(c));return Ja(t),d}finally{o()}};return(r,i)=>H_(n(r,i))},W_=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=mr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Yn(21));return jv(o),{predicate:i,type:t,effect:o}},J_=us(e=>{const{type:t,predicate:n,effect:r}=W_(e);return{id:y6(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Yn(22))}}},{withTypes:()=>J_}),C1=(e,t)=>{const{type:n,effect:r,predicate:i}=W_(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},Dy=e=>{e.pending.forEach(t=>{Wa(t,Py)})},I6=e=>()=>{e.forEach(Dy),e.clear()},T1=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},X_=us(mr(`${Pd}/add`),{withTypes:()=>X_}),O6=mr(`${Pd}/removeAll`),Q_=us(mr(`${Pd}/remove`),{withTypes:()=>Q_}),L6=(...e)=>{console.error(`${Pd}/error`,...e)},yu=(e={})=>{const t=new Map,{extra:n,onError:r=L6}=e;jv(r);const i=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),y=>{m.unsubscribe(),y!=null&&y.cancelActive&&Dy(m)}),o=m=>{const y=C1(t,m)??J_(m);return i(y)};us(o,{withTypes:()=>o});const l=m=>{const y=C1(t,m);return y&&(y.unsubscribe(),m.cancelActive&&Dy(y)),!!y};us(l,{withTypes:()=>l});const c=async(m,y,v,S)=>{const T=new AbortController,w=k6(o,T.signal),A=[];try{m.pending.add(T),await Promise.resolve(m.effect(y,us({},v,{getOriginalState:S,condition:(M,P)=>w(M,P).then(Boolean),take:w,delay:Y_(T.signal),pause:zf(T.signal),extra:n,signal:T.signal,fork:D6(T.signal,A),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((M,P,N)=>{M!==T&&(Wa(M,Py),N.delete(M))})},cancel:()=>{Wa(T,Py),m.pending.delete(T)},throwIfCancelled:()=>{Ja(T.signal)}})))}catch(M){M instanceof Rd||T1(r,M,{raisedBy:"effect"})}finally{await Promise.all(A),Wa(T,R6),m.pending.delete(T)}},d=I6(t);return{middleware:m=>y=>v=>{if(!D_(v))return y(v);if(X_.match(v))return o(v.payload);if(O6.match(v)){d();return}if(Q_.match(v))return l(v.payload);let S=m.getState();const T=()=>{if(S===S1)throw new Error(Yn(23));return S};let w;try{if(w=y(v),t.size>0){const A=m.getState(),M=Array.from(t.values());for(const P of M){let N=!1;try{N=P.predicate(v,A,S)}catch(O){N=!1,T1(r,O,{raisedBy:"predicate"})}N&&c(P,v,m,T)}}}finally{S=S1}return w},startListening:o,stopListening:l,clearListeners:d}};function Yn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var j6={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Z_=Xn({name:"chartLayout",initialState:j6,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:U6,setLayout:$6,setChartSize:B6,setScale:q6}=Z_.actions,V6=Z_.reducer;function w1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function A1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w1(Object(n),!0).forEach(function(r){z6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z6(e,t,n){return(t=F6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F6(e){var t=H6(e,"string");return typeof t=="symbol"?t:t+""}function H6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ff=Math.PI/180,G6=e=>e*180/Math.PI,rn=(e,t,n,r)=>({x:e+Math.cos(-Ff*r)*n,y:t+Math.sin(-Ff*r)*n}),K6=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Y6=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return Math.sqrt((n-i)**2+(r-o)**2)},W6=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:o}=t,l=Y6({x:n,y:r},{x:i,y:o});if(l<=0)return{radius:l,angle:0};var c=(n-i)/l,d=Math.acos(c);return r>o&&(d=2*Math.PI-d),{radius:l,angle:G6(d),angleInRadian:d}},J6=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-o*360,endAngle:n-o*360}},X6=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),o=Math.floor(r/360),l=Math.min(i,o);return e+l*360},Q6=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:o}=W6({x:n,y:r},t),{innerRadius:l,outerRadius:c}=t;if(i<l||i>c||i===0)return null;var{startAngle:d,endAngle:f}=J6(t),m=o,y;if(d<=f){for(;m>f;)m-=360;for(;m<d;)m+=360;y=m>=d&&m<=f}else{for(;m>d;)m-=360;for(;m<f;)m+=360;y=m>=f&&m<=d}return y?A1(A1({},t),{},{radius:i,angle:X6(m,t)}):null};function eN(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function E1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E1(Object(n),!0).forEach(function(r){Z6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Z6(e,t,n){return(t=ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ez(e){var t=tz(e,"string");return typeof t=="symbol"?t:t+""}function tz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kt(e,t,n){return pt(e)||pt(t)?n:qr(t)?eo(e,t,n):typeof t=="function"?t(e):n}var nz=(e,t,n,r,i)=>{var o,l=-1,c=(o=t==null?void 0:t.length)!==null&&o!==void 0?o:0;if(c<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var d=0;d<c;d++){var f=d>0?n[d-1].coordinate:n[c-1].coordinate,m=n[d].coordinate,y=d>=c-1?n[0].coordinate:n[d+1].coordinate,v=void 0;if(Mn(m-f)!==Mn(y-m)){var S=[];if(Mn(y-m)===Mn(i[1]-i[0])){v=y;var T=m+i[1]-i[0];S[0]=Math.min(T,(T+f)/2),S[1]=Math.max(T,(T+f)/2)}else{v=f;var w=y+i[1]-i[0];S[0]=Math.min(m,(w+m)/2),S[1]=Math.max(m,(w+m)/2)}var A=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(e>A[0]&&e<=A[1]||e>=S[0]&&e<=S[1]){({index:l}=n[d]);break}}else{var M=Math.min(f,y),P=Math.max(f,y);if(e>(M+m)/2&&e<=(P+m)/2){({index:l}=n[d]);break}}}else if(t){for(var N=0;N<c;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<c-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===c-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:l}=t[N]);break}}return l},rz=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:o,verticalAlign:l,layout:c}=t;if((c==="vertical"||c==="horizontal"&&l==="middle")&&o!=="center"&&be(e[o]))return cr(cr({},e),{},{[o]:e[o]+(r||0)});if((c==="horizontal"||c==="vertical"&&o==="center")&&l!=="middle"&&be(e[l]))return cr(cr({},e),{},{[l]:e[l]+(i||0)})}return e},Gr=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",tN=(e,t,n,r)=>{if(r)return e.map(c=>c.coordinate);var i,o,l=e.map(c=>(c.coordinate===t&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate));return i||l.push(t),o||l.push(n),l},nN=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:o,scale:l,realScaleType:c,isCategorical:d,categoricalDomain:f,tickCount:m,ticks:y,niceTicks:v,axisType:S}=e;if(!l)return null;var T=c==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=i==="category"&&l.bandwidth?l.bandwidth()/T:0;if(w=S==="angleAxis"&&o&&o.length>=2?Mn(o[0]-o[1])*2*w:w,y||v){var A=(y||v||[]).map((M,P)=>{var N=r?r.indexOf(M):M;return{coordinate:l(N)+w,value:M,offset:w,index:P}});return A.filter(M=>!Nn(M.coordinate))}return d&&f?f.map((M,P)=>({coordinate:l(M)+w,value:M,index:P,offset:w})):l.ticks&&m!=null?l.ticks(m).map((M,P)=>({coordinate:l(M)+w,value:M,offset:w,index:P})):l.domain().map((M,P)=>({coordinate:l(M)+w,value:r?r[M]:M,index:P,offset:w}))},M1=1e-4,iz=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-M1,o=Math.max(r[0],r[1])+M1,l=e(t[0]),c=e(t[n-1]);(l<i||l>o||c<i||c>o)&&e.domain([t[0],t[n-1]])}},az=(e,t)=>{if(!t||t.length!==2||!be(t[0])||!be(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!be(e[0])||e[0]<n)&&(i[0]=n),(!be(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},oz=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,l=0;l<t;++l){var c=Nn(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=i,e[l][n][1]=i+c,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},sz=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var l=Nn(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},lz={sign:oz,expand:BV,none:ds,silhouette:qV,wiggle:VV,positive:sz},uz=(e,t,n)=>{var r=lz[n],i=$V().keys(t).value((o,l)=>+kt(o,l,0)).order(Ty).offset(r);return i(e)};function rN(e){return e==null?void 0:String(e)}function Hf(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:o,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!pt(i[t.dataKey])){var c=QM(n,"value",i[t.dataKey]);if(c)return c.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var d=kt(i,pt(l)?t.dataKey:l);return pt(d)?null:t.scale(d)}var _1=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:o,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var c=kt(o,t.dataKey,t.scale.domain()[l]);return pt(c)?null:t.scale(c)-i/2+r},cz=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},fz=e=>{var t=e.flat(2).filter(be);return[Math.min(...t),Math.max(...t)]},dz=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],mz=(e,t,n)=>{if(e!=null)return dz(Object.keys(e).reduce((r,i)=>{var o=e[i],{stackedData:l}=o,c=l.reduce((d,f)=>{var m=eN(f,t,n),y=fz(m);return[Math.min(d[0],y[0]),Math.max(d[1],y[1])]},[1/0,-1/0]);return[Math.min(c[0],r[0]),Math.max(c[1],r[1])]},[1/0,-1/0]))},N1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,R1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ro=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Ad(t,m=>m.coordinate),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function P1(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:o}=e;return cr(cr({},t),{},{dataKey:n,payload:r,value:i,name:o})}function Es(e,t){if(e)return String(e);if(typeof t=="string")return t}function hz(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var o=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return o?{x:e,y:t}:null}return r?Q6({x:e,y:t},r):null}var pz=(e,t,n,r)=>{var i=t.find(f=>f&&f.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,{radius:l}=r;return cr(cr(cr({},r),rn(r.cx,r.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,{angle:d}=r;return cr(cr(cr({},r),rn(r.cx,r.cy,c,d)),{},{angle:d,radius:c})}return{x:0,y:0}},gz=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,wi=e=>e.layout.width,Ai=e=>e.layout.height,yz=e=>e.layout.scale,iN=e=>e.layout.margin,Uv=ne(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),$v=ne(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),vz="data-recharts-item-index",xz="data-recharts-item-data-key",Dd=60;function D1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D1(Object(n),!0).forEach(function(r){bz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bz(e,t,n){return(t=Sz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sz(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tz=e=>e.brush.height,Yt=ne([wi,Ai,iN,Tz,Uv,$v,N_,z5],(e,t,n,r,i,o,l,c)=>{var d=o.reduce((T,w)=>{var{orientation:A}=w;if(!w.mirror&&!w.hide){var M=typeof w.width=="number"?w.width:Dd;return oa(oa({},T),{},{[A]:T[A]+M})}return T},{left:n.left||0,right:n.right||0}),f=i.reduce((T,w)=>{var{orientation:A}=w;return!w.mirror&&!w.hide?oa(oa({},T),{},{[A]:eo(T,"".concat(A))+w.height}):T},{top:n.top||0,bottom:n.bottom||0}),m=oa(oa({},f),d),y=m.bottom;m.bottom+=r,m=rz(m,l,c);var v=e-m.left-m.right,S=t-m.top-m.bottom;return oa(oa({brushBottom:y},m),{},{width:Math.max(v,0),height:Math.max(S,0)})}),wz=ne(Yt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),aN=ne(wi,Ai,(e,t)=>({x:0,y:0,width:e,height:t})),Az=E.createContext(null),pn=()=>E.useContext(Az)!=null,kd=e=>e.brush,Id=ne([kd,Yt,iN],(e,t,n)=>({height:e.height,x:be(e.x)?e.x:t.left,y:be(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:be(e.width)?e.width:t.width})),Bv=()=>{var e,t=pn(),n=Re(wz),r=Re(Id),i=(e=Re(kd))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Ez={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},oN=()=>{var e;return(e=Re(Yt))!==null&&e!==void 0?e:Ez},sN=()=>Re(wi),lN=()=>Re(Ai),Ge=e=>e.layout.layoutType,vu=()=>Re(Ge),Mz={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},uN=Xn({name:"legend",initialState:Mz,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=hi(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:hee,setLegendSettings:pee,addLegendPayload:_z,removeLegendPayload:Nz}=uN.actions,Rz=uN.reducer;function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ky.apply(null,arguments)}function k1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k1(Object(n),!0).forEach(function(r){Pz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pz(e,t,n){return(t=Dz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dz(e){var t=kz(e,"string");return typeof t=="symbol"?t:t+""}function kz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iz(e){return Array.isArray(e)&&qr(e[0])&&qr(e[1])?e.join(" ~ "):e}var Oz=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:l,itemSorter:c,wrapperClassName:d,labelClassName:f,label:m,labelFormatter:y,accessibilityLayer:v=!1}=e,S=()=>{if(o&&o.length){var _={padding:0,margin:0},D=(c?Ad(o,c):o).map((k,B)=>{if(k.type==="none")return null;var j=k.formatter||l||Iz,{value:re,name:K}=k,V=re,U=K;if(j){var ee=j(re,K,k,B,o);if(Array.isArray(ee))[V,U]=ee;else if(ee!=null)V=ee;else return null}var ue=hg({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:ue},qr(U)?E.createElement("span",{className:"recharts-tooltip-item-name"},U):null,qr(U)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},V),E.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:_},D)}return null},T=hg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=hg({margin:0},i),A=!pt(m),M=A?m:"",P=tt("recharts-default-tooltip",d),N=tt("recharts-tooltip-label",f);A&&y&&o!==void 0&&o!==null&&(M=y(m,o));var O=v?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",ky({className:P,style:T},O),E.createElement("p",{className:N,style:w},E.isValidElement(M)?M:"".concat(M)),S())},Vl="recharts-tooltip-wrapper",Lz={visibility:"hidden"};function jz(e){var{coordinate:t,translateX:n,translateY:r}=e;return tt(Vl,{["".concat(Vl,"-right")]:be(n)&&t&&be(t.x)&&n>=t.x,["".concat(Vl,"-left")]:be(n)&&t&&be(t.x)&&n<t.x,["".concat(Vl,"-bottom")]:be(r)&&t&&be(t.y)&&r>=t.y,["".concat(Vl,"-top")]:be(r)&&t&&be(t.y)&&r<t.y})}function I1(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c,viewBox:d,viewBoxDimension:f}=e;if(o&&be(o[r]))return o[r];var m=n[r]-c-(i>0?i:0),y=n[r]+i;if(t[r])return l[r]?m:y;var v=d[r];if(v==null)return 0;if(l[r]){var S=m,T=v;return S<T?Math.max(y,v):Math.max(m,v)}if(f==null)return 0;var w=y+c,A=v+f;return w>A?Math.max(m,v):Math.max(y,v)}function Uz(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function $z(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:l,useTranslate3d:c,viewBox:d}=e,f,m,y;return l.height>0&&l.width>0&&n?(m=I1({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),y=I1({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),f=Uz({translateX:m,translateY:y,useTranslate3d:c})):f=Lz,{cssProperties:f,cssClasses:jz({translateX:m,translateY:y,coordinate:n})}}function O1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O1(Object(n),!0).forEach(function(r){Iy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iy(e,t,n){return(t=Bz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bz(e){var t=qz(e,"string");return typeof t=="symbol"?t:t+""}function qz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Vz extends E.PureComponent{constructor(){super(...arguments),Iy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Iy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:l,hasPayload:c,isAnimationActive:d,offset:f,position:m,reverseDirection:y,useTranslate3d:v,viewBox:S,wrapperStyle:T,lastBoundingBox:w,innerRef:A,hasPortalFromProps:M}=this.props,{cssClasses:P,cssProperties:N}=$z({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:f,position:m,reverseDirection:y,tooltipBox:{height:w.height,width:w.width},useTranslate3d:v,viewBox:S}),O=M?{}:ff(ff({transition:d&&t?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),_=ff(ff({},O),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},T);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:P,style:_,ref:A},o)}}var zz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),fo={isSsr:zz()},cN=()=>Re(e=>e.rootProps.accessibilityLayer);function an(e){return Number.isFinite(e)}function Gf(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oy.apply(null,arguments)}function L1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L1(Object(n),!0).forEach(function(r){Fz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fz(e,t,n){return(t=Hz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hz(e){var t=Gz(e,"string");return typeof t=="symbol"?t:t+""}function Gz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U1={curveBasisClosed:_V,curveBasisOpen:NV,curveBasis:MV,curveBumpX:mV,curveBumpY:hV,curveLinearClosed:RV,curveLinear:Td,curveMonotoneX:PV,curveMonotoneY:DV,curveNatural:kV,curveStep:IV,curveStepAfter:LV,curveStepBefore:OV},df=e=>an(e.x)&&an(e.y),zl=e=>e.x,Fl=e=>e.y,Kz=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(gu(e));return(n==="curveMonotone"||n==="curveBump")&&t?U1["".concat(n).concat(t==="vertical"?"Y":"X")]:U1[n]||Td},Yz=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=e,l=Kz(t,i),c=o?n.filter(df):n,d;if(Array.isArray(r)){var f=o?r.filter(y=>df(y)):r,m=c.map((y,v)=>j1(j1({},y),{},{base:f[v]}));return i==="vertical"?d=of().y(Fl).x1(zl).x0(y=>y.base.x):d=of().x(zl).y1(Fl).y0(y=>y.base.y),d.defined(df).curve(l),d(m)}return i==="vertical"&&be(r)?d=of().y(Fl).x1(zl).x0(r):be(r)?d=of().x(zl).y1(Fl).y0(r):d=s_().x(zl).y(Fl),d.defined(df).curve(l),d(c)},Zl=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var o=n&&n.length?Yz(e):r;return E.createElement("path",Oy({},Ti(e),Sv(e),{className:tt("recharts-curve",t),d:o===null?void 0:o,ref:i}))},Wz=["x","y","top","left","width","height","className"];function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ly.apply(null,arguments)}function $1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$1(Object(n),!0).forEach(function(r){Xz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xz(e,t,n){return(t=Qz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qz(e){var t=Zz(e,"string");return typeof t=="symbol"?t:t+""}function Zz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eF(e,t){if(e==null)return{};var n,r,i=tF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var nF=(e,t,n,r,i,o)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),rF=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:o=0,height:l=0,className:c}=e,d=eF(e,Wz),f=Jz({x:t,y:n,top:r,left:i,width:o,height:l},d);return!be(t)||!be(n)||!be(o)||!be(l)||!be(r)||!be(i)?null:E.createElement("path",Ly({},bt(f,!0),{className:tt("recharts-cross",c),d:nF(t,n,o,l,r,i)}))};function iF(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function B1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B1(Object(n),!0).forEach(function(r){oF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oF(e,t,n){return(t=sF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sF(e){var t=lF(e,"string");return typeof t=="symbol"?t:t+""}function lF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pr(e,t){var n=aF({},e),r=t,i=Object.keys(t),o=i.reduce((l,c)=>(l[c]===void 0&&r[c]!==void 0&&(l[c]=r[c]),l),n);return o}var pg={},gg={},yg={},q1;function uF(){return q1||(q1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t}(yg)),yg}var V1;function cF(){return V1||(V1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uF(),n=T_(),r=Rv(),i=Pv(),o=_v();function l(f,m,y){return c(f,m,void 0,void 0,void 0,void 0,y)}function c(f,m,y,v,S,T,w){const A=w(f,m,y,v,S,T);if(A!==void 0)return A;if(typeof f==typeof m)switch(typeof f){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return f===m;case"number":return f===m||Object.is(f,m);case"function":return f===m;case"object":return d(f,m,T,w)}return d(f,m,T,w)}function d(f,m,y,v){if(Object.is(f,m))return!0;let S=r.getTag(f),T=r.getTag(m);if(S===i.argumentsTag&&(S=i.objectTag),T===i.argumentsTag&&(T=i.objectTag),S!==T)return!1;switch(S){case i.stringTag:return f.toString()===m.toString();case i.numberTag:{const M=f.valueOf(),P=m.valueOf();return o.eq(M,P)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(f.valueOf(),m.valueOf());case i.regexpTag:return f.source===m.source&&f.flags===m.flags;case i.functionTag:return f===m}y=y??new Map;const w=y.get(f),A=y.get(m);if(w!=null&&A!=null)return w===m;y.set(f,m),y.set(m,f);try{switch(S){case i.mapTag:{if(f.size!==m.size)return!1;for(const[M,P]of f.entries())if(!m.has(M)||!c(P,m.get(M),M,f,m,y,v))return!1;return!0}case i.setTag:{if(f.size!==m.size)return!1;const M=Array.from(f.values()),P=Array.from(m.values());for(let N=0;N<M.length;N++){const O=M[N],_=P.findIndex(D=>c(O,D,void 0,f,m,y,v));if(_===-1)return!1;P.splice(_,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(f)!==Buffer.isBuffer(m)||f.length!==m.length)return!1;for(let M=0;M<f.length;M++)if(!c(f[M],m[M],M,f,m,y,v))return!1;return!0}case i.arrayBufferTag:return f.byteLength!==m.byteLength?!1:d(new Uint8Array(f),new Uint8Array(m),y,v);case i.dataViewTag:return f.byteLength!==m.byteLength||f.byteOffset!==m.byteOffset?!1:d(new Uint8Array(f),new Uint8Array(m),y,v);case i.errorTag:return f.name===m.name&&f.message===m.message;case i.objectTag:{if(!(d(f.constructor,m.constructor,y,v)||t.isPlainObject(f)&&t.isPlainObject(m)))return!1;const P=[...Object.keys(f),...n.getSymbols(f)],N=[...Object.keys(m),...n.getSymbols(m)];if(P.length!==N.length)return!1;for(let O=0;O<P.length;O++){const _=P[O],D=f[_];if(!Object.hasOwn(m,_))return!1;const k=m[_];if(!c(D,k,_,f,m,y,v))return!1}return!0}default:return!1}}finally{y.delete(f),y.delete(m)}}e.isEqualWith=l}(gg)),gg}var vg={},z1;function fF(){return z1||(z1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(vg)),vg}var F1;function dF(){return F1||(F1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cF(),n=fF();function r(i,o){return t.isEqualWith(i,o,n.noop)}e.isEqual=r}(pg)),pg}var xg,H1;function mF(){return H1||(H1=1,xg=dF().isEqual),xg}var hF=mF();const pF=Hr(hF);var Kf=1e-4,fN=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],dN=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),G1=(e,t)=>n=>{var r=fN(e,t);return dN(r,n)},gF=(e,t)=>n=>{var r=fN(e,t),i=[...r.map((o,l)=>o*l).slice(1),0];return dN(i,n)},K1=function(){for(var t,n,r,i,o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,r,n,i]=d[1].split(")")[0].split(",").map(T=>parseFloat(T)))}}else l.length===4&&([t,r,n,i]=l);var f=G1(t,n),m=G1(r,i),y=gF(t,n),v=T=>T>1?1:T<0?0:T,S=T=>{for(var w=T>1?1:T,A=w,M=0;M<8;++M){var P=f(A)-w,N=y(A);if(Math.abs(P-w)<Kf||N<Kf)return m(A);A=v(A-P/N)}return m(A)};return S.isStepper=!1,S},yF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,o=(l,c,d)=>{var f=-(l-c)*n,m=d*r,y=d+(f-m)*i/1e3,v=d*i/1e3+l;return Math.abs(v-c)<Kf&&Math.abs(y)<Kf?[c,0]:[v,y]};return o.isStepper=!0,o.dt=i,o},mN=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return K1(e);case"spring":return yF();default:if(e.split("(")[0]==="cubic-bezier")return K1(e)}return typeof e=="function"?e:null};function Y1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function W1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y1(Object(n),!0).forEach(function(r){vF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vF(e,t,n){return(t=xF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xF(e){var t=bF(e,"string");return typeof t=="symbol"?t:t+""}function bF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SF=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),CF=(e,t,n)=>e.map(r=>"".concat(SF(r)," ").concat(t,"ms ").concat(n)).join(","),TF=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),au=(e,t)=>Object.keys(t).reduce((n,r)=>W1(W1({},n),{},{[r]:e(r,t[r])}),{});function J1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J1(Object(n),!0).forEach(function(r){wF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wF(e,t,n){return(t=AF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AF(e){var t=EF(e,"string");return typeof t=="symbol"?t:t+""}function EF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yf=(e,t,n)=>e+(t-e)*n,jy=e=>{var{from:t,to:n}=e;return t!==n},hN=(e,t,n)=>{var r=au((i,o)=>{if(jy(o)){var[l,c]=e(o.from,o.to,o.velocity);return tn(tn({},o),{},{from:l,velocity:c})}return o},t);return n<1?au((i,o)=>jy(o)?tn(tn({},o),{},{velocity:Yf(o.velocity,r[i].velocity,n),from:Yf(o.from,r[i].from,n)}):o,t):hN(e,r,n-1)};function MF(e,t,n,r,i,o){var l,c=r.reduce((v,S)=>tn(tn({},v),{},{[S]:{from:e[S],velocity:0,to:t[S]}}),{}),d=()=>au((v,S)=>S.from,c),f=()=>!Object.values(c).filter(jy).length,m=null,y=v=>{l||(l=v);var S=v-l,T=S/n.dt;c=hN(n,c,T),i(tn(tn(tn({},e),t),d())),l=v,f()||(m=o.setTimeout(y))};return()=>(m=o.setTimeout(y),()=>{m()})}function _F(e,t,n,r,i,o,l){var c=null,d=i.reduce((y,v)=>tn(tn({},y),{},{[v]:[e[v],t[v]]}),{}),f,m=y=>{f||(f=y);var v=(y-f)/r,S=au((w,A)=>Yf(...A,n(v)),d);if(o(tn(tn(tn({},e),t),S)),v<1)c=l.setTimeout(m);else{var T=au((w,A)=>Yf(...A,n(1)),d);o(tn(tn(tn({},e),t),T))}};return()=>(c=l.setTimeout(m),()=>{c()})}const pN=(e,t,n,r,i,o)=>{var l=TF(e,t);return n.isStepper===!0?MF(e,t,n,l,i,o):_F(e,t,n,r,l,i,o)};function NF(e){var t,n=()=>null,r=!1,i=null,o=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var c=l,[d,...f]=c;if(typeof d=="number"){i=e.setTimeout(o.bind(null,f),d);return}o(d),i=e.setTimeout(o.bind(null,f));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),o(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class RF{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function PF(){return NF(new RF)}var DF=E.createContext(PF);function gN(e,t){var n=E.useContext(DF);return E.useMemo(()=>t??n(e),[e,t,n])}var kF=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uy.apply(null,arguments)}function IF(e,t){if(e==null)return{};var n,r,i=OF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function X1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X1(Object(n),!0).forEach(function(r){Fa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fa(e,t,n){return(t=LF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LF(e){var t=jF(e,"string");return typeof t=="symbol"?t:t+""}function jF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qv extends E.PureComponent{constructor(t,n){super(t,n),Fa(this,"mounted",!1),Fa(this,"manager",void 0),Fa(this,"stopJSAnimation",null),Fa(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:o,to:l,children:c,duration:d,animationManager:f}=this.props;if(this.manager=f,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||d<=0){this.state={style:{}},typeof c=="function"&&(this.state={style:l});return}if(o){if(typeof c=="function"){this.state={style:o};return}this.state={style:i?{[i]:o}:o}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:o,to:l,from:c}=this.props,{style:d}=this.state;if(r){if(!n){var f={style:i?{[i]:l}:l};this.state&&d&&(i&&d[i]!==l||!i&&d!==l)&&this.setState(f);return}if(!(pF(t.to,l)&&t.canBegin&&t.isActive)){var m=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||o?c:t.to;if(this.state&&d){var v={style:i?{[i]:y}:y};(i&&d[i]!==y||!i&&d!==y)&&this.setState(v)}this.runAnimation(sa(sa({},this.props),{},{from:y,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:r,duration:i,easing:o,begin:l,onAnimationEnd:c,onAnimationStart:d}=t,f=pN(n,r,mN(o),i,this.changeStyle,this.manager.getTimeoutController()),m=()=>{this.stopJSAnimation=f()};this.manager.start([d,l,m,i,c])}runAnimation(t){var{begin:n,duration:r,attributeName:i,to:o,easing:l,onAnimationStart:c,onAnimationEnd:d,children:f}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof l=="function"||typeof f=="function"||l==="spring"){this.runJSAnimation(t);return}var m=i?{[i]:o}:o,y=CF(Object.keys(m),r,l);this.manager.start([c,n,sa(sa({},m),{},{transition:y}),r,d])}render(){var t=this.props,{children:n,begin:r,duration:i,attributeName:o,easing:l,isActive:c,from:d,to:f,canBegin:m,onAnimationEnd:y,shouldReAnimate:v,onAnimationReStart:S,animationManager:T}=t,w=IF(t,kF),A=E.Children.count(n),M=this.state.style;if(typeof n=="function")return n(M);if(!c||A===0||i<=0)return n;var P=N=>{var{style:O={},className:_}=N.props,D=E.cloneElement(N,sa(sa({},w),{},{style:sa(sa({},O),M),className:_}));return D};return A===1?P(E.Children.only(n)):E.createElement("div",null,E.Children.map(n,N=>P(N)))}}Fa(qv,"displayName","Animate");Fa(qv,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Wf(e){var t,n=gN((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return E.createElement(qv,Uy({},e,{animationManager:n}))}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jf.apply(null,arguments)}var Q1=(e,t,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,c=n>=0?1:-1,d=r>=0&&n>=0||r<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],y=0,v=4;y<v;y++)m[y]=i[y]>o?o:i[y];f="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(e+c*m[0],",").concat(t)),f+="L ".concat(e+n-c*m[1],",").concat(t),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(t+l*m[1])),f+="L ".concat(e+n,",").concat(t+r-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(e+n-c*m[2],",").concat(t+r)),f+="L ".concat(e+c*m[3],",").concat(t+r),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+r-l*m[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);f="M ".concat(e,",").concat(t+l*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(d,",").concat(e+c*S,",").concat(t,`
            L `).concat(e+n-c*S,",").concat(t,`
            A `).concat(S,",").concat(S,",0,0,").concat(d,",").concat(e+n,",").concat(t+l*S,`
            L `).concat(e+n,",").concat(t+r-l*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(d,",").concat(e+n-c*S,",").concat(t+r,`
            L `).concat(e+c*S,",").concat(t+r,`
            A `).concat(S,",").concat(S,",0,0,").concat(d,",").concat(e,",").concat(t+r-l*S," Z")}else f="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},UF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yN=e=>{var t=pr(e,UF),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var M=n.current.getTotalLength();M&&i(M)}catch{}},[]);var{x:o,y:l,width:c,height:d,radius:f,className:m}=t,{animationEasing:y,animationDuration:v,animationBegin:S,isAnimationActive:T,isUpdateAnimationActive:w}=t;if(o!==+o||l!==+l||c!==+c||d!==+d||c===0||d===0)return null;var A=tt("recharts-rectangle",m);return w?E.createElement(Wf,{canBegin:r>0,from:{width:c,height:d,x:o,y:l},to:{width:c,height:d,x:o,y:l},duration:v,animationEasing:y,isActive:w},M=>{var{width:P,height:N,x:O,y:_}=M;return E.createElement(Wf,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:v,isActive:T,easing:y},E.createElement("path",Jf({},bt(t,!0),{className:A,d:Q1(O,_,P,N,f),ref:n})))}):E.createElement("path",Jf({},bt(t,!0),{className:A,d:Q1(o,l,c,d,f)}))};function vN(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:o}=e,l=rn(t,n,r,i),c=rn(t,n,r,o);return{points:[l,c],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$y.apply(null,arguments)}var $F=(e,t)=>{var n=Mn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},mf=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:o,isExternal:l,cornerRadius:c,cornerIsExternal:d}=e,f=c*(l?1:-1)+r,m=Math.asin(c/f)/Ff,y=d?i:i+o*m,v=rn(t,n,f,y),S=rn(t,n,r,y),T=d?i-o*m:i,w=rn(t,n,f*Math.cos(m*Ff),T);return{center:v,circleTangency:S,lineTangency:w,theta:m}},xN=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:l}=e,c=$F(o,l),d=o+c,f=rn(t,n,i,o),m=rn(t,n,i,d),y="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var v=rn(t,n,r,o),S=rn(t,n,r,d);y+="L ".concat(S.x,",").concat(S.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else y+="L ".concat(t,",").concat(n," Z");return y},BF=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:f}=e,m=Mn(f-d),{circleTangency:y,lineTangency:v,theta:S}=mf({cx:t,cy:n,radius:i,angle:d,sign:m,cornerRadius:o,cornerIsExternal:c}),{circleTangency:T,lineTangency:w,theta:A}=mf({cx:t,cy:n,radius:i,angle:f,sign:-m,cornerRadius:o,cornerIsExternal:c}),M=c?Math.abs(d-f):Math.abs(d-f)-S-A;if(M<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):xN({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:d,endAngle:f});var P="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(m<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:N,lineTangency:O,theta:_}=mf({cx:t,cy:n,radius:r,angle:d,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),{circleTangency:D,lineTangency:k,theta:B}=mf({cx:t,cy:n,radius:r,angle:f,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=c?Math.abs(d-f):Math.abs(d-f)-_-B;if(j<0&&o===0)return"".concat(P,"L").concat(t,",").concat(n,"Z");P+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(j>180),",").concat(+(m>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,"Z")}else P+="L".concat(t,",").concat(n,"Z");return P},qF={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bN=e=>{var t=pr(e,qF),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:l,forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:m,className:y}=t;if(o<i||f===m)return null;var v=tt("recharts-sector",y),S=o-i,T=_r(l,S,0,!0),w;return T>0&&Math.abs(f-m)<360?w=BF({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(T,S/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:m}):w=xN({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:f,endAngle:m}),E.createElement("path",$y({},bt(t,!0),{className:v,d:w}))};function VF(e,t,n){var r,i,o,l;if(e==="horizontal")r=t.x,o=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:c,cy:d,innerRadius:f,outerRadius:m,angle:y}=t,v=rn(c,d,f,y),S=rn(c,d,m,y);r=v.x,i=v.y,o=S.x,l=S.y}else return vN(t);return[{x:r,y:i},{x:o,y:l}]}var bg={},Sg={},Cg={},Z1;function zF(){return Z1||(Z1=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M_();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n}(Cg)),Cg}var eA;function FF(){return eA||(eA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zF();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n}(Sg)),Sg}var tA;function HF(){return tA||(tA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=__(),n=FF();function r(i,o,l){l&&typeof l!="number"&&t.isIterateeCall(i,o,l)&&(o=l=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),l=l===void 0?i<o?1:-1:n.toFinite(l);const c=Math.max(Math.ceil((o-i)/(l||1)),0),d=new Array(c);for(let f=0;f<c;f++)d[f]=i,i+=l;return d}e.range=r}(bg)),bg}var Tg,nA;function GF(){return nA||(nA=1,Tg=HF().range),Tg}var KF=GF();const SN=Hr(KF);function da(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function YF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vv(e){let t,n,r;e.length!==2?(t=da,n=(c,d)=>da(e(c),d),r=(c,d)=>e(c)-d):(t=e===da||e===YF?e:WF,n=e,r=e);function i(c,d,f=0,m=c.length){if(f<m){if(t(d,d)!==0)return m;do{const y=f+m>>>1;n(c[y],d)<0?f=y+1:m=y}while(f<m)}return f}function o(c,d,f=0,m=c.length){if(f<m){if(t(d,d)!==0)return m;do{const y=f+m>>>1;n(c[y],d)<=0?f=y+1:m=y}while(f<m)}return f}function l(c,d,f=0,m=c.length){const y=i(c,d,f,m-1);return y>f&&r(c[y-1],d)>-r(c[y],d)?y-1:y}return{left:i,center:l,right:o}}function WF(){return 0}function CN(e){return e===null?NaN:+e}function*JF(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const XF=Vv(da),xu=XF.right;Vv(CN).center;class rA extends Map{constructor(t,n=e8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(iA(this,t))}has(t){return super.has(iA(this,t))}set(t,n){return super.set(QF(this,t),n)}delete(t){return super.delete(ZF(this,t))}}function iA({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function QF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ZF({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function e8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function t8(e=da){if(e===da)return TN;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function TN(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const n8=Math.sqrt(50),r8=Math.sqrt(10),i8=Math.sqrt(2);function Xf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=n8?10:o>=r8?5:o>=i8?2:1;let c,d,f;return i<0?(f=Math.pow(10,-i)/l,c=Math.round(e*f),d=Math.round(t*f),c/f<e&&++c,d/f>t&&--d,f=-f):(f=Math.pow(10,i)*l,c=Math.round(e/f),d=Math.round(t/f),c*f<e&&++c,d*f>t&&--d),d<c&&.5<=n&&n<2?Xf(e,t,n*2):[c,d,f]}function By(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,l]=r?Xf(t,e,n):Xf(e,t,n);if(!(o>=i))return[];const c=o-i+1,d=new Array(c);if(r)if(l<0)for(let f=0;f<c;++f)d[f]=(o-f)/-l;else for(let f=0;f<c;++f)d[f]=(o-f)*l;else if(l<0)for(let f=0;f<c;++f)d[f]=(i+f)/-l;else for(let f=0;f<c;++f)d[f]=(i+f)*l;return d}function qy(e,t,n){return t=+t,e=+e,n=+n,Xf(e,t,n)[2]}function Vy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?qy(t,e,n):qy(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function aA(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function oA(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function wN(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?TN:t8(i);r>n;){if(r-n>600){const d=r-n+1,f=t-n+1,m=Math.log(d),y=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*y*(d-y)/d)*(f-d/2<0?-1:1),S=Math.max(n,Math.floor(t-f*y/d+v)),T=Math.min(r,Math.floor(t+(d-f)*y/d+v));wN(e,t,S,T,i)}const o=e[t];let l=n,c=r;for(Hl(e,n,t),i(e[r],o)>0&&Hl(e,n,r);l<c;){for(Hl(e,l,c),++l,--c;i(e[l],o)<0;)++l;for(;i(e[c],o)>0;)--c}i(e[n],o)===0?Hl(e,n,c):(++c,Hl(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function Hl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function a8(e,t,n){if(e=Float64Array.from(JF(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return oA(e);if(t>=1)return aA(e);var r,i=(r-1)*t,o=Math.floor(i),l=aA(wN(e,o).subarray(0,o+1)),c=oA(e.subarray(o+1));return l+(c-l)*(i-o)}}function o8(e,t,n=CN){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),l=+n(e[o],o,e),c=+n(e[o+1],o+1,e);return l+(c-l)*(i-o)}}function s8(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function gr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ei(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const zy=Symbol("implicit");function zv(){var e=new rA,t=[],n=[],r=zy;function i(o){let l=e.get(o);if(l===void 0){if(r!==zy)return r;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new rA;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return zv(t,n).unknown(r)},gr.apply(i,arguments),i}function Fv(){var e=zv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,l,c=!1,d=0,f=0,m=.5;delete e.unknown;function y(){var v=t().length,S=i<r,T=S?i:r,w=S?r:i;o=(w-T)/Math.max(1,v-d+f*2),c&&(o=Math.floor(o)),T+=(w-T-o*(v-d))*m,l=o*(1-d),c&&(T=Math.round(T),l=Math.round(l));var A=s8(v).map(function(M){return T+o*M});return n(S?A.reverse():A)}return e.domain=function(v){return arguments.length?(t(v),y()):t()},e.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,y()):[r,i]},e.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,c=!0,y()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(v){return arguments.length?(c=!!v,y()):c},e.padding=function(v){return arguments.length?(d=Math.min(1,f=+v),y()):d},e.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),y()):d},e.paddingOuter=function(v){return arguments.length?(f=+v,y()):f},e.align=function(v){return arguments.length?(m=Math.max(0,Math.min(1,v)),y()):m},e.copy=function(){return Fv(t(),[r,i]).round(c).paddingInner(d).paddingOuter(f).align(m)},gr.apply(y(),arguments)}function AN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return AN(t())},e}function l8(){return AN(Fv.apply(null,arguments).paddingInner(1))}function Hv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function EN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function bu(){}var ou=.7,Qf=1/ou,cs="\\s*([+-]?\\d+)\\s*",su="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u8=/^#([0-9a-f]{3,8})$/,c8=new RegExp(`^rgb\\(${cs},${cs},${cs}\\)$`),f8=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),d8=new RegExp(`^rgba\\(${cs},${cs},${cs},${su}\\)$`),m8=new RegExp(`^rgba\\(${Br},${Br},${Br},${su}\\)$`),h8=new RegExp(`^hsl\\(${su},${Br},${Br}\\)$`),p8=new RegExp(`^hsla\\(${su},${Br},${Br},${su}\\)$`),sA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hv(bu,lu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lA,formatHex:lA,formatHex8:g8,formatHsl:y8,formatRgb:uA,toString:uA});function lA(){return this.rgb().formatHex()}function g8(){return this.rgb().formatHex8()}function y8(){return MN(this).formatHsl()}function uA(){return this.rgb().formatRgb()}function lu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?cA(t):n===3?new _n(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=c8.exec(e))?new _n(t[1],t[2],t[3],1):(t=f8.exec(e))?new _n(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=d8.exec(e))?hf(t[1],t[2],t[3],t[4]):(t=m8.exec(e))?hf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=h8.exec(e))?mA(t[1],t[2]/100,t[3]/100,1):(t=p8.exec(e))?mA(t[1],t[2]/100,t[3]/100,t[4]):sA.hasOwnProperty(e)?cA(sA[e]):e==="transparent"?new _n(NaN,NaN,NaN,0):null}function cA(e){return new _n(e>>16&255,e>>8&255,e&255,1)}function hf(e,t,n,r){return r<=0&&(e=t=n=NaN),new _n(e,t,n,r)}function v8(e){return e instanceof bu||(e=lu(e)),e?(e=e.rgb(),new _n(e.r,e.g,e.b,e.opacity)):new _n}function Fy(e,t,n,r){return arguments.length===1?v8(e):new _n(e,t,n,r??1)}function _n(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hv(_n,Fy,EN(bu,{brighter(e){return e=e==null?Qf:Math.pow(Qf,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ou:Math.pow(ou,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _n(Xa(this.r),Xa(this.g),Xa(this.b),Zf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fA,formatHex:fA,formatHex8:x8,formatRgb:dA,toString:dA}));function fA(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}`}function x8(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}${Ha((isNaN(this.opacity)?1:this.opacity)*255)}`}function dA(){const e=Zf(this.opacity);return`${e===1?"rgb(":"rgba("}${Xa(this.r)}, ${Xa(this.g)}, ${Xa(this.b)}${e===1?")":`, ${e})`}`}function Zf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ha(e){return e=Xa(e),(e<16?"0":"")+e.toString(16)}function mA(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mr(e,t,n,r)}function MN(e){if(e instanceof Mr)return new Mr(e.h,e.s,e.l,e.opacity);if(e instanceof bu||(e=lu(e)),!e)return new Mr;if(e instanceof Mr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,c=o-i,d=(o+i)/2;return c?(t===o?l=(n-r)/c+(n<r)*6:n===o?l=(r-t)/c+2:l=(t-n)/c+4,c/=d<.5?o+i:2-o-i,l*=60):c=d>0&&d<1?0:l,new Mr(l,c,d,e.opacity)}function b8(e,t,n,r){return arguments.length===1?MN(e):new Mr(e,t,n,r??1)}function Mr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hv(Mr,b8,EN(bu,{brighter(e){return e=e==null?Qf:Math.pow(Qf,e),new Mr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ou:Math.pow(ou,e),new Mr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new _n(wg(e>=240?e-240:e+120,i,r),wg(e,i,r),wg(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Mr(hA(this.h),pf(this.s),pf(this.l),Zf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zf(this.opacity);return`${e===1?"hsl(":"hsla("}${hA(this.h)}, ${pf(this.s)*100}%, ${pf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hA(e){return e=(e||0)%360,e<0?e+360:e}function pf(e){return Math.max(0,Math.min(1,e||0))}function wg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gv=e=>()=>e;function S8(e,t){return function(n){return e+n*t}}function C8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function T8(e){return(e=+e)==1?_N:function(t,n){return n-t?C8(t,n,e):Gv(isNaN(t)?n:t)}}function _N(e,t){var n=t-e;return n?S8(e,n):Gv(isNaN(e)?t:e)}const pA=function e(t){var n=T8(t);function r(i,o){var l=n((i=Fy(i)).r,(o=Fy(o)).r),c=n(i.g,o.g),d=n(i.b,o.b),f=_N(i.opacity,o.opacity);return function(m){return i.r=l(m),i.g=c(m),i.b=d(m),i.opacity=f(m),i+""}}return r.gamma=e,r}(1);function w8(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function A8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function E8(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=Ms(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(c){for(l=0;l<r;++l)o[l]=i[l](c);return o}}function M8(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ed(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _8(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ms(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Hy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ag=new RegExp(Hy.source,"g");function N8(e){return function(){return e}}function R8(e){return function(t){return e(t)+""}}function P8(e,t){var n=Hy.lastIndex=Ag.lastIndex=0,r,i,o,l=-1,c=[],d=[];for(e=e+"",t=t+"";(r=Hy.exec(e))&&(i=Ag.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(r=r[0])===(i=i[0])?c[l]?c[l]+=i:c[++l]=i:(c[++l]=null,d.push({i:l,x:ed(r,i)})),n=Ag.lastIndex;return n<t.length&&(o=t.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?d[0]?R8(d[0].x):N8(t):(t=d.length,function(f){for(var m=0,y;m<t;++m)c[(y=d[m]).i]=y.x(f);return c.join("")})}function Ms(e,t){var n=typeof t,r;return t==null||n==="boolean"?Gv(t):(n==="number"?ed:n==="string"?(r=lu(t))?(t=r,pA):P8:t instanceof lu?pA:t instanceof Date?M8:A8(t)?w8:Array.isArray(t)?E8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_8:ed)(e,t)}function Kv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function D8(e,t){t===void 0&&(t=e,e=Ms);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(l){var c=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return o[c](l-c)}}function k8(e){return function(){return e}}function td(e){return+e}var gA=[0,1];function vn(e){return e}function Gy(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:k8(isNaN(t)?NaN:.5)}function I8(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function O8(e,t,n){var r=e[0],i=e[1],o=t[0],l=t[1];return i<r?(r=Gy(i,r),o=n(l,o)):(r=Gy(r,i),o=n(o,l)),function(c){return o(r(c))}}function L8(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Gy(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(c){var d=xu(e,c,1,r)-1;return o[d](i[d](c))}}function Su(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Od(){var e=gA,t=gA,n=Ms,r,i,o,l=vn,c,d,f;function m(){var v=Math.min(e.length,t.length);return l!==vn&&(l=I8(e[0],e[v-1])),c=v>2?L8:O8,d=f=null,y}function y(v){return v==null||isNaN(v=+v)?o:(d||(d=c(e.map(r),t,n)))(r(l(v)))}return y.invert=function(v){return l(i((f||(f=c(t,e.map(r),ed)))(v)))},y.domain=function(v){return arguments.length?(e=Array.from(v,td),m()):e.slice()},y.range=function(v){return arguments.length?(t=Array.from(v),m()):t.slice()},y.rangeRound=function(v){return t=Array.from(v),n=Kv,m()},y.clamp=function(v){return arguments.length?(l=v?!0:vn,m()):l!==vn},y.interpolate=function(v){return arguments.length?(n=v,m()):n},y.unknown=function(v){return arguments.length?(o=v,y):o},function(v,S){return r=v,i=S,m()}}function Yv(){return Od()(vn,vn)}function j8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function nd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hs(e){return e=nd(Math.abs(e)),e?e[1]:NaN}function U8(e,t){return function(n,r){for(var i=n.length,o=[],l=0,c=e[0],d=0;i>0&&c>0&&(d+c+1>r&&(c=Math.max(1,r-d)),o.push(n.substring(i-=c,i+c)),!((d+=c+1)>r));)c=e[l=(l+1)%e.length];return o.reverse().join(t)}}function $8(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var B8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uu(e){if(!(t=B8.exec(e)))throw new Error("invalid format: "+e);var t;return new Wv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}uu.prototype=Wv.prototype;function Wv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Wv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function q8(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var NN;function V8(e,t){var n=nd(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(NN=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+nd(e,Math.max(0,t+o-1))[0]}function yA(e,t){var n=nd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const vA={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:j8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yA(e*100,t),r:yA,s:V8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xA(e){return e}var bA=Array.prototype.map,SA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function z8(e){var t=e.grouping===void 0||e.thousands===void 0?xA:U8(bA.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?xA:$8(bA.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function f(y){y=uu(y);var v=y.fill,S=y.align,T=y.sign,w=y.symbol,A=y.zero,M=y.width,P=y.comma,N=y.precision,O=y.trim,_=y.type;_==="n"?(P=!0,_="g"):vA[_]||(N===void 0&&(N=12),O=!0,_="g"),(A||v==="0"&&S==="=")&&(A=!0,v="0",S="=");var D=w==="$"?n:w==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",k=w==="$"?r:/[%p]/.test(_)?l:"",B=vA[_],j=/[defgprs%]/.test(_);N=N===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function re(K){var V=D,U=k,ee,ue,q;if(_==="c")U=B(K)+U,K="";else{K=+K;var H=K<0||1/K<0;if(K=isNaN(K)?d:B(Math.abs(K),N),O&&(K=q8(K)),H&&+K==0&&T!=="+"&&(H=!1),V=(H?T==="("?T:c:T==="-"||T==="("?"":T)+V,U=(_==="s"?SA[8+NN/3]:"")+U+(H&&T==="("?")":""),j){for(ee=-1,ue=K.length;++ee<ue;)if(q=K.charCodeAt(ee),48>q||q>57){U=(q===46?i+K.slice(ee+1):K.slice(ee))+U,K=K.slice(0,ee);break}}}P&&!A&&(K=t(K,1/0));var ae=V.length+K.length+U.length,pe=ae<M?new Array(M-ae+1).join(v):"";switch(P&&A&&(K=t(pe+K,pe.length?M-U.length:1/0),pe=""),S){case"<":K=V+K+U+pe;break;case"=":K=V+pe+K+U;break;case"^":K=pe.slice(0,ae=pe.length>>1)+V+K+U+pe.slice(ae);break;default:K=pe+V+K+U;break}return o(K)}return re.toString=function(){return y+""},re}function m(y,v){var S=f((y=uu(y),y.type="f",y)),T=Math.max(-8,Math.min(8,Math.floor(hs(v)/3)))*3,w=Math.pow(10,-T),A=SA[8+T/3];return function(M){return S(w*M)+A}}return{format:f,formatPrefix:m}}var gf,Jv,RN;F8({thousands:",",grouping:[3],currency:["$",""]});function F8(e){return gf=z8(e),Jv=gf.format,RN=gf.formatPrefix,gf}function H8(e){return Math.max(0,-hs(Math.abs(e)))}function G8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hs(t)/3)))*3-hs(Math.abs(e)))}function K8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hs(t)-hs(e))+1}function PN(e,t,n,r){var i=Vy(e,t,n),o;switch(r=uu(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=G8(i,l))&&(r.precision=o),RN(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=K8(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=H8(i))&&(r.precision=o-(r.type==="%")*2);break}}return Jv(r)}function ma(e){var t=e.domain;return e.ticks=function(n){var r=t();return By(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return PN(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,l=r[i],c=r[o],d,f,m=10;for(c<l&&(f=l,l=c,c=f,f=i,i=o,o=f);m-- >0;){if(f=qy(l,c,n),f===d)return r[i]=l,r[o]=c,t(r);if(f>0)l=Math.floor(l/f)*f,c=Math.ceil(c/f)*f;else if(f<0)l=Math.ceil(l*f)/f,c=Math.floor(c*f)/f;else break;d=f}return e},e}function DN(){var e=Yv();return e.copy=function(){return Su(e,DN())},gr.apply(e,arguments),ma(e)}function kN(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,td),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return kN(e).unknown(t)},e=arguments.length?Array.from(e,td):[0,1],ma(n)}function IN(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],l;return o<i&&(l=n,n=r,r=l,l=i,i=o,o=l),e[n]=t.floor(i),e[r]=t.ceil(o),e}function CA(e){return Math.log(e)}function TA(e){return Math.exp(e)}function Y8(e){return-Math.log(-e)}function W8(e){return-Math.exp(-e)}function J8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function X8(e){return e===10?J8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Q8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wA(e){return(t,n)=>-e(-t,n)}function Xv(e){const t=e(CA,TA),n=t.domain;let r=10,i,o;function l(){return i=Q8(r),o=X8(r),n()[0]<0?(i=wA(i),o=wA(o),e(Y8,W8)):e(CA,TA),t}return t.base=function(c){return arguments.length?(r=+c,l()):r},t.domain=function(c){return arguments.length?(n(c),l()):n()},t.ticks=c=>{const d=n();let f=d[0],m=d[d.length-1];const y=m<f;y&&([f,m]=[m,f]);let v=i(f),S=i(m),T,w;const A=c==null?10:+c;let M=[];if(!(r%1)&&S-v<A){if(v=Math.floor(v),S=Math.ceil(S),f>0){for(;v<=S;++v)for(T=1;T<r;++T)if(w=v<0?T/o(-v):T*o(v),!(w<f)){if(w>m)break;M.push(w)}}else for(;v<=S;++v)for(T=r-1;T>=1;--T)if(w=v>0?T/o(-v):T*o(v),!(w<f)){if(w>m)break;M.push(w)}M.length*2<A&&(M=By(f,m,A))}else M=By(v,S,Math.min(S-v,A)).map(o);return y?M.reverse():M},t.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=uu(d)).precision==null&&(d.trim=!0),d=Jv(d)),c===1/0)return d;const f=Math.max(1,r*c/t.ticks().length);return m=>{let y=m/o(Math.round(i(m)));return y*r<r-.5&&(y*=r),y<=f?d(m):""}},t.nice=()=>n(IN(n(),{floor:c=>o(Math.floor(i(c))),ceil:c=>o(Math.ceil(i(c)))})),t}function ON(){const e=Xv(Od()).domain([1,10]);return e.copy=()=>Su(e,ON()).base(e.base()),gr.apply(e,arguments),e}function AA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function EA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Qv(e){var t=1,n=e(AA(t),EA(t));return n.constant=function(r){return arguments.length?e(AA(t=+r),EA(t)):t},ma(n)}function LN(){var e=Qv(Od());return e.copy=function(){return Su(e,LN()).constant(e.constant())},gr.apply(e,arguments)}function MA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Z8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function eH(e){return e<0?-e*e:e*e}function Zv(e){var t=e(vn,vn),n=1;function r(){return n===1?e(vn,vn):n===.5?e(Z8,eH):e(MA(n),MA(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ma(t)}function e0(){var e=Zv(Od());return e.copy=function(){return Su(e,e0()).exponent(e.exponent())},gr.apply(e,arguments),e}function tH(){return e0.apply(null,arguments).exponent(.5)}function _A(e){return Math.sign(e)*e*e}function nH(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function jN(){var e=Yv(),t=[0,1],n=!1,r;function i(o){var l=nH(e(o));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(o){return e.invert(_A(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,td)).map(_A)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return jN(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},gr.apply(i,arguments),ma(i)}function UN(){var e=[],t=[],n=[],r;function i(){var l=0,c=Math.max(1,t.length);for(n=new Array(c-1);++l<c;)n[l-1]=o8(e,l/c);return o}function o(l){return l==null||isNaN(l=+l)?r:t[xu(n,l)]}return o.invertExtent=function(l){var c=t.indexOf(l);return c<0?[NaN,NaN]:[c>0?n[c-1]:e[0],c<n.length?n[c]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let c of l)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(da),i()},o.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return UN().domain(e).range(t).unknown(r)},gr.apply(o,arguments)}function $N(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function l(d){return d!=null&&d<=d?i[xu(r,d,0,n)]:o}function c(){var d=-1;for(r=new Array(n);++d<n;)r[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,c()):[e,t]},l.range=function(d){return arguments.length?(n=(i=Array.from(d)).length-1,c()):i.slice()},l.invertExtent=function(d){var f=i.indexOf(d);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},l.unknown=function(d){return arguments.length&&(o=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return $N().domain([e,t]).range(i).unknown(o)},gr.apply(ma(l),arguments)}function BN(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[xu(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return BN().domain(e).range(t).unknown(n)},gr.apply(i,arguments)}const Eg=new Date,Mg=new Date;function Bt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const l=i(o),c=i.ceil(o);return o-l<c-o?l:c},i.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),i.range=(o,l,c)=>{const d=[];if(o=i.ceil(o),c=c==null?1:Math.floor(c),!(o<l)||!(c>0))return d;let f;do d.push(f=new Date(+o)),t(o,c),e(o);while(f<o&&o<l);return d},i.filter=o=>Bt(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;t(l,-1),!o(l););else for(;--c>=0;)for(;t(l,1),!o(l););}),n&&(i.count=(o,l)=>(Eg.setTime(+o),Mg.setTime(+l),e(Eg),e(Mg),Math.floor(n(Eg,Mg))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?l=>r(l)%o===0:l=>i.count(0,l)%o===0):i)),i}const rd=Bt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):rd);rd.range;const di=1e3,fr=di*60,mi=fr*60,xi=mi*24,t0=xi*7,NA=xi*30,_g=xi*365,Ga=Bt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*di)},(e,t)=>(t-e)/di,e=>e.getUTCSeconds());Ga.range;const n0=Bt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*di)},(e,t)=>{e.setTime(+e+t*fr)},(e,t)=>(t-e)/fr,e=>e.getMinutes());n0.range;const r0=Bt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fr)},(e,t)=>(t-e)/fr,e=>e.getUTCMinutes());r0.range;const i0=Bt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*di-e.getMinutes()*fr)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getHours());i0.range;const a0=Bt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCHours());a0.range;const Cu=Bt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fr)/xi,e=>e.getDate()-1);Cu.range;const Ld=Bt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xi,e=>e.getUTCDate()-1);Ld.range;const qN=Bt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xi,e=>Math.floor(e/xi));qN.range;function mo(e){return Bt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fr)/t0)}const jd=mo(0),id=mo(1),rH=mo(2),iH=mo(3),ps=mo(4),aH=mo(5),oH=mo(6);jd.range;id.range;rH.range;iH.range;ps.range;aH.range;oH.range;function ho(e){return Bt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/t0)}const Ud=ho(0),ad=ho(1),sH=ho(2),lH=ho(3),gs=ho(4),uH=ho(5),cH=ho(6);Ud.range;ad.range;sH.range;lH.range;gs.range;uH.range;cH.range;const o0=Bt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());o0.range;const s0=Bt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());s0.range;const bi=Bt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bi.range;const Si=Bt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Si.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Si.range;function VN(e,t,n,r,i,o){const l=[[Ga,1,di],[Ga,5,5*di],[Ga,15,15*di],[Ga,30,30*di],[o,1,fr],[o,5,5*fr],[o,15,15*fr],[o,30,30*fr],[i,1,mi],[i,3,3*mi],[i,6,6*mi],[i,12,12*mi],[r,1,xi],[r,2,2*xi],[n,1,t0],[t,1,NA],[t,3,3*NA],[e,1,_g]];function c(f,m,y){const v=m<f;v&&([f,m]=[m,f]);const S=y&&typeof y.range=="function"?y:d(f,m,y),T=S?S.range(f,+m+1):[];return v?T.reverse():T}function d(f,m,y){const v=Math.abs(m-f)/y,S=Vv(([,,A])=>A).right(l,v);if(S===l.length)return e.every(Vy(f/_g,m/_g,y));if(S===0)return rd.every(Math.max(Vy(f,m,y),1));const[T,w]=l[v/l[S-1][2]<l[S][2]/v?S-1:S];return T.every(w)}return[c,d]}const[fH,dH]=VN(Si,s0,Ud,qN,a0,r0),[mH,hH]=VN(bi,o0,jd,Cu,i0,n0);function Ng(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Rg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function pH(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,l=e.shortDays,c=e.months,d=e.shortMonths,f=Kl(i),m=Yl(i),y=Kl(o),v=Yl(o),S=Kl(l),T=Yl(l),w=Kl(c),A=Yl(c),M=Kl(d),P=Yl(d),N={a:H,A:ae,b:pe,B:$,c:null,d:OA,e:OA,f:UH,g:YH,G:JH,H:OH,I:LH,j:jH,L:zN,m:$H,M:BH,p:Y,q:te,Q:UA,s:$A,S:qH,u:VH,U:zH,V:FH,w:HH,W:GH,x:null,X:null,y:KH,Y:WH,Z:XH,"%":jA},O={a:he,A:Ce,b:De,B:Ae,c:null,d:LA,e:LA,f:tG,g:fG,G:mG,H:QH,I:ZH,j:eG,L:HN,m:nG,M:rG,p:Ye,q:$e,Q:UA,s:$A,S:iG,u:aG,U:oG,V:sG,w:lG,W:uG,x:null,X:null,y:cG,Y:dG,Z:hG,"%":jA},_={a:re,A:K,b:V,B:U,c:ee,d:kA,e:kA,f:PH,g:DA,G:PA,H:IA,I:IA,j:MH,L:RH,m:EH,M:_H,p:j,q:AH,Q:kH,s:IH,S:NH,u:bH,U:SH,V:CH,w:xH,W:TH,x:ue,X:q,y:DA,Y:PA,Z:wH,"%":DH};N.x=D(n,N),N.X=D(r,N),N.c=D(t,N),O.x=D(n,O),O.X=D(r,O),O.c=D(t,O);function D(ve,Le){return function(Ee){var se=[],Ze=-1,Ue=0,ct=ve.length,We,et,Rr;for(Ee instanceof Date||(Ee=new Date(+Ee));++Ze<ct;)ve.charCodeAt(Ze)===37&&(se.push(ve.slice(Ue,Ze)),(et=RA[We=ve.charAt(++Ze)])!=null?We=ve.charAt(++Ze):et=We==="e"?" ":"0",(Rr=Le[We])&&(We=Rr(Ee,et)),se.push(We),Ue=Ze+1);return se.push(ve.slice(Ue,Ze)),se.join("")}}function k(ve,Le){return function(Ee){var se=Gl(1900,void 0,1),Ze=B(se,ve,Ee+="",0),Ue,ct;if(Ze!=Ee.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(Le&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Ue=Rg(Gl(se.y,0,1)),ct=Ue.getUTCDay(),Ue=ct>4||ct===0?ad.ceil(Ue):ad(Ue),Ue=Ld.offset(Ue,(se.V-1)*7),se.y=Ue.getUTCFullYear(),se.m=Ue.getUTCMonth(),se.d=Ue.getUTCDate()+(se.w+6)%7):(Ue=Ng(Gl(se.y,0,1)),ct=Ue.getDay(),Ue=ct>4||ct===0?id.ceil(Ue):id(Ue),Ue=Cu.offset(Ue,(se.V-1)*7),se.y=Ue.getFullYear(),se.m=Ue.getMonth(),se.d=Ue.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),ct="Z"in se?Rg(Gl(se.y,0,1)).getUTCDay():Ng(Gl(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(ct+5)%7:se.w+se.U*7-(ct+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,Rg(se)):Ng(se)}}function B(ve,Le,Ee,se){for(var Ze=0,Ue=Le.length,ct=Ee.length,We,et;Ze<Ue;){if(se>=ct)return-1;if(We=Le.charCodeAt(Ze++),We===37){if(We=Le.charAt(Ze++),et=_[We in RA?Le.charAt(Ze++):We],!et||(se=et(ve,Ee,se))<0)return-1}else if(We!=Ee.charCodeAt(se++))return-1}return se}function j(ve,Le,Ee){var se=f.exec(Le.slice(Ee));return se?(ve.p=m.get(se[0].toLowerCase()),Ee+se[0].length):-1}function re(ve,Le,Ee){var se=S.exec(Le.slice(Ee));return se?(ve.w=T.get(se[0].toLowerCase()),Ee+se[0].length):-1}function K(ve,Le,Ee){var se=y.exec(Le.slice(Ee));return se?(ve.w=v.get(se[0].toLowerCase()),Ee+se[0].length):-1}function V(ve,Le,Ee){var se=M.exec(Le.slice(Ee));return se?(ve.m=P.get(se[0].toLowerCase()),Ee+se[0].length):-1}function U(ve,Le,Ee){var se=w.exec(Le.slice(Ee));return se?(ve.m=A.get(se[0].toLowerCase()),Ee+se[0].length):-1}function ee(ve,Le,Ee){return B(ve,t,Le,Ee)}function ue(ve,Le,Ee){return B(ve,n,Le,Ee)}function q(ve,Le,Ee){return B(ve,r,Le,Ee)}function H(ve){return l[ve.getDay()]}function ae(ve){return o[ve.getDay()]}function pe(ve){return d[ve.getMonth()]}function $(ve){return c[ve.getMonth()]}function Y(ve){return i[+(ve.getHours()>=12)]}function te(ve){return 1+~~(ve.getMonth()/3)}function he(ve){return l[ve.getUTCDay()]}function Ce(ve){return o[ve.getUTCDay()]}function De(ve){return d[ve.getUTCMonth()]}function Ae(ve){return c[ve.getUTCMonth()]}function Ye(ve){return i[+(ve.getUTCHours()>=12)]}function $e(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var Le=D(ve+="",N);return Le.toString=function(){return ve},Le},parse:function(ve){var Le=k(ve+="",!1);return Le.toString=function(){return ve},Le},utcFormat:function(ve){var Le=D(ve+="",O);return Le.toString=function(){return ve},Le},utcParse:function(ve){var Le=k(ve+="",!0);return Le.toString=function(){return ve},Le}}}var RA={"-":"",_:" ",0:"0"},Wt=/^\s*\d+/,gH=/^%/,yH=/[\\^$*+?|[\]().{}]/g;function Xe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function vH(e){return e.replace(yH,"\\$&")}function Kl(e){return new RegExp("^(?:"+e.map(vH).join("|")+")","i")}function Yl(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function xH(e,t,n){var r=Wt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function bH(e,t,n){var r=Wt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function SH(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function CH(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function TH(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function PA(e,t,n){var r=Wt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function DA(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wH(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function AH(e,t,n){var r=Wt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function EH(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function kA(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function MH(e,t,n){var r=Wt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function IA(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _H(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function NH(e,t,n){var r=Wt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function RH(e,t,n){var r=Wt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function PH(e,t,n){var r=Wt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function DH(e,t,n){var r=gH.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function kH(e,t,n){var r=Wt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function IH(e,t,n){var r=Wt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function OA(e,t){return Xe(e.getDate(),t,2)}function OH(e,t){return Xe(e.getHours(),t,2)}function LH(e,t){return Xe(e.getHours()%12||12,t,2)}function jH(e,t){return Xe(1+Cu.count(bi(e),e),t,3)}function zN(e,t){return Xe(e.getMilliseconds(),t,3)}function UH(e,t){return zN(e,t)+"000"}function $H(e,t){return Xe(e.getMonth()+1,t,2)}function BH(e,t){return Xe(e.getMinutes(),t,2)}function qH(e,t){return Xe(e.getSeconds(),t,2)}function VH(e){var t=e.getDay();return t===0?7:t}function zH(e,t){return Xe(jd.count(bi(e)-1,e),t,2)}function FN(e){var t=e.getDay();return t>=4||t===0?ps(e):ps.ceil(e)}function FH(e,t){return e=FN(e),Xe(ps.count(bi(e),e)+(bi(e).getDay()===4),t,2)}function HH(e){return e.getDay()}function GH(e,t){return Xe(id.count(bi(e)-1,e),t,2)}function KH(e,t){return Xe(e.getFullYear()%100,t,2)}function YH(e,t){return e=FN(e),Xe(e.getFullYear()%100,t,2)}function WH(e,t){return Xe(e.getFullYear()%1e4,t,4)}function JH(e,t){var n=e.getDay();return e=n>=4||n===0?ps(e):ps.ceil(e),Xe(e.getFullYear()%1e4,t,4)}function XH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xe(t/60|0,"0",2)+Xe(t%60,"0",2)}function LA(e,t){return Xe(e.getUTCDate(),t,2)}function QH(e,t){return Xe(e.getUTCHours(),t,2)}function ZH(e,t){return Xe(e.getUTCHours()%12||12,t,2)}function eG(e,t){return Xe(1+Ld.count(Si(e),e),t,3)}function HN(e,t){return Xe(e.getUTCMilliseconds(),t,3)}function tG(e,t){return HN(e,t)+"000"}function nG(e,t){return Xe(e.getUTCMonth()+1,t,2)}function rG(e,t){return Xe(e.getUTCMinutes(),t,2)}function iG(e,t){return Xe(e.getUTCSeconds(),t,2)}function aG(e){var t=e.getUTCDay();return t===0?7:t}function oG(e,t){return Xe(Ud.count(Si(e)-1,e),t,2)}function GN(e){var t=e.getUTCDay();return t>=4||t===0?gs(e):gs.ceil(e)}function sG(e,t){return e=GN(e),Xe(gs.count(Si(e),e)+(Si(e).getUTCDay()===4),t,2)}function lG(e){return e.getUTCDay()}function uG(e,t){return Xe(ad.count(Si(e)-1,e),t,2)}function cG(e,t){return Xe(e.getUTCFullYear()%100,t,2)}function fG(e,t){return e=GN(e),Xe(e.getUTCFullYear()%100,t,2)}function dG(e,t){return Xe(e.getUTCFullYear()%1e4,t,4)}function mG(e,t){var n=e.getUTCDay();return e=n>=4||n===0?gs(e):gs.ceil(e),Xe(e.getUTCFullYear()%1e4,t,4)}function hG(){return"+0000"}function jA(){return"%"}function UA(e){return+e}function $A(e){return Math.floor(+e/1e3)}var ns,KN,YN;pG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pG(e){return ns=pH(e),KN=ns.format,ns.parse,YN=ns.utcFormat,ns.utcParse,ns}function gG(e){return new Date(e)}function yG(e){return e instanceof Date?+e:+new Date(+e)}function l0(e,t,n,r,i,o,l,c,d,f){var m=Yv(),y=m.invert,v=m.domain,S=f(".%L"),T=f(":%S"),w=f("%I:%M"),A=f("%I %p"),M=f("%a %d"),P=f("%b %d"),N=f("%B"),O=f("%Y");function _(D){return(d(D)<D?S:c(D)<D?T:l(D)<D?w:o(D)<D?A:r(D)<D?i(D)<D?M:P:n(D)<D?N:O)(D)}return m.invert=function(D){return new Date(y(D))},m.domain=function(D){return arguments.length?v(Array.from(D,yG)):v().map(gG)},m.ticks=function(D){var k=v();return e(k[0],k[k.length-1],D??10)},m.tickFormat=function(D,k){return k==null?_:f(k)},m.nice=function(D){var k=v();return(!D||typeof D.range!="function")&&(D=t(k[0],k[k.length-1],D??10)),D?v(IN(k,D)):m},m.copy=function(){return Su(m,l0(e,t,n,r,i,o,l,c,d,f))},m}function vG(){return gr.apply(l0(mH,hH,bi,o0,jd,Cu,i0,n0,Ga,KN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xG(){return gr.apply(l0(fH,dH,Si,s0,Ud,Ld,a0,r0,Ga,YN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $d(){var e=0,t=1,n,r,i,o,l=vn,c=!1,d;function f(y){return y==null||isNaN(y=+y)?d:l(i===0?.5:(y=(o(y)-n)*i,c?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([e,t]=y,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(y){return arguments.length?(c=!!y,f):c},f.interpolator=function(y){return arguments.length?(l=y,f):l};function m(y){return function(v){var S,T;return arguments.length?([S,T]=v,l=y(S,T),f):[l(0),l(1)]}}return f.range=m(Ms),f.rangeRound=m(Kv),f.unknown=function(y){return arguments.length?(d=y,f):d},function(y){return o=y,n=y(e),r=y(t),i=n===r?0:1/(r-n),f}}function ha(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function WN(){var e=ma($d()(vn));return e.copy=function(){return ha(e,WN())},Ei.apply(e,arguments)}function JN(){var e=Xv($d()).domain([1,10]);return e.copy=function(){return ha(e,JN()).base(e.base())},Ei.apply(e,arguments)}function XN(){var e=Qv($d());return e.copy=function(){return ha(e,XN()).constant(e.constant())},Ei.apply(e,arguments)}function u0(){var e=Zv($d());return e.copy=function(){return ha(e,u0()).exponent(e.exponent())},Ei.apply(e,arguments)}function bG(){return u0.apply(null,arguments).exponent(.5)}function QN(){var e=[],t=vn;function n(r){if(r!=null&&!isNaN(r=+r))return t((xu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(da),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>a8(e,o/r))},n.copy=function(){return QN(t).domain(e)},Ei.apply(n,arguments)}function Bd(){var e=0,t=.5,n=1,r=1,i,o,l,c,d,f=vn,m,y=!1,v;function S(w){return isNaN(w=+w)?v:(w=.5+((w=+m(w))-o)*(r*w<r*o?c:d),f(y?Math.max(0,Math.min(1,w)):w))}S.domain=function(w){return arguments.length?([e,t,n]=w,i=m(e=+e),o=m(t=+t),l=m(n=+n),c=i===o?0:.5/(o-i),d=o===l?0:.5/(l-o),r=o<i?-1:1,S):[e,t,n]},S.clamp=function(w){return arguments.length?(y=!!w,S):y},S.interpolator=function(w){return arguments.length?(f=w,S):f};function T(w){return function(A){var M,P,N;return arguments.length?([M,P,N]=A,f=D8(w,[M,P,N]),S):[f(0),f(.5),f(1)]}}return S.range=T(Ms),S.rangeRound=T(Kv),S.unknown=function(w){return arguments.length?(v=w,S):v},function(w){return m=w,i=w(e),o=w(t),l=w(n),c=i===o?0:.5/(o-i),d=o===l?0:.5/(l-o),r=o<i?-1:1,S}}function ZN(){var e=ma(Bd()(vn));return e.copy=function(){return ha(e,ZN())},Ei.apply(e,arguments)}function eR(){var e=Xv(Bd()).domain([.1,1,10]);return e.copy=function(){return ha(e,eR()).base(e.base())},Ei.apply(e,arguments)}function tR(){var e=Qv(Bd());return e.copy=function(){return ha(e,tR()).constant(e.constant())},Ei.apply(e,arguments)}function c0(){var e=Zv(Bd());return e.copy=function(){return ha(e,c0()).exponent(e.exponent())},Ei.apply(e,arguments)}function SG(){return c0.apply(null,arguments).exponent(.5)}const Xl=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Fv,scaleDiverging:ZN,scaleDivergingLog:eR,scaleDivergingPow:c0,scaleDivergingSqrt:SG,scaleDivergingSymlog:tR,scaleIdentity:kN,scaleImplicit:zy,scaleLinear:DN,scaleLog:ON,scaleOrdinal:zv,scalePoint:l8,scalePow:e0,scaleQuantile:UN,scaleQuantize:$N,scaleRadial:jN,scaleSequential:WN,scaleSequentialLog:JN,scaleSequentialPow:u0,scaleSequentialQuantile:QN,scaleSequentialSqrt:bG,scaleSequentialSymlog:XN,scaleSqrt:tH,scaleSymlog:LN,scaleThreshold:BN,scaleTime:vG,scaleUtc:xG,tickFormat:PN},Symbol.toStringTag,{value:"Module"}));var pa=e=>e.chartData,CG=ne([pa],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Tu=(e,t,n,r)=>r?CG(e):pa(e);function ys(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(an(t)&&an(n))return!0}return!1}function BA(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function TG(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,o;if(an(n))i=n;else if(typeof n=="function")return;if(an(r))o=r;else if(typeof r=="function")return;var l=[i,o];if(ys(l))return l}}function wG(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(ys(r))return BA(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,l,c;if(i==="auto")t!=null&&(l=Math.min(...t));else if(be(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&N1.test(i)){var d=N1.exec(i);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[0]-f}}else l=t==null?void 0:t[0];if(o==="auto")t!=null&&(c=Math.max(...t));else if(be(o))c=o;else if(typeof o=="function")try{t!=null&&(c=o(t==null?void 0:t[1]))}catch{}else if(typeof o=="string"&&R1.test(o)){var m=R1.exec(o);if(m==null||t==null)c=void 0;else{var y=+m[1];c=t[1]+y}}else c=t==null?void 0:t[1];var v=[l,c];if(ys(v))return t==null?v:BA(v,t,n)}}}var _s=1e9,AG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},d0,St=!0,hr="[DecimalError] ",Qa=hr+"Invalid argument: ",f0=hr+"Exponent out of range: ",Ns=Math.floor,Va=Math.pow,EG=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gn,Gt=1e7,vt=7,nR=9007199254740991,od=Ns(nR/vt),Se={};Se.absoluteValue=Se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Se.comparedTo=Se.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*vt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Se.dividedBy=Se.div=function(e){return pi(this,new this.constructor(e))};Se.dividedToIntegerBy=Se.idiv=function(e){var t=this,n=t.constructor;return dt(pi(t,new n(e),0,1),n.precision)};Se.equals=Se.eq=function(e){return!this.cmp(e)};Se.exponent=function(){return It(this)};Se.greaterThan=Se.gt=function(e){return this.cmp(e)>0};Se.greaterThanOrEqualTo=Se.gte=function(e){return this.cmp(e)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(e){return this.cmp(e)<0};Se.lessThanOrEqualTo=Se.lte=function(e){return this.cmp(e)<1};Se.logarithm=Se.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Gn))throw Error(hr+"NaN");if(n.s<1)throw Error(hr+(n.s?"NaN":"-Infinity"));return n.eq(Gn)?new r(0):(St=!1,t=pi(cu(n,o),cu(e,o),o),St=!0,dt(t,i))};Se.minus=Se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aR(t,e):rR(t,(e.s=-e.s,e))};Se.modulo=Se.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(hr+"NaN");return n.s?(St=!1,t=pi(n,e,0,1).times(e),St=!0,n.minus(t)):dt(new r(n),i)};Se.naturalExponential=Se.exp=function(){return iR(this)};Se.naturalLogarithm=Se.ln=function(){return cu(this)};Se.negated=Se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Se.plus=Se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rR(t,e):aR(t,(e.s=-e.s,e))};Se.precision=Se.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Qa+e);if(t=It(i)+1,r=i.d.length-1,n=r*vt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Se.squareRoot=Se.sqrt=function(){var e,t,n,r,i,o,l,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(hr+"NaN")}for(e=It(c),St=!1,i=Math.sqrt(+c),i==0||i==1/0?(t=$r(c.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Ns((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new d(t)):r=new d(i.toString()),n=d.precision,i=l=n+3;;)if(o=r,r=o.plus(pi(c,o,l+2)).times(.5),$r(o.d).slice(0,l)===(t=$r(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(dt(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if(t!="9999")break;l+=4}return St=!0,dt(r,n)};Se.times=Se.mul=function(e){var t,n,r,i,o,l,c,d,f,m=this,y=m.constructor,v=m.d,S=(e=new y(e)).d;if(!m.s||!e.s)return new y(0);for(e.s*=m.s,n=m.e+e.e,d=v.length,f=S.length,d<f&&(o=v,v=S,S=o,l=d,d=f,f=l),o=[],l=d+f,r=l;r--;)o.push(0);for(r=f;--r>=0;){for(t=0,i=d+r;i>r;)c=o[i]+S[r]*v[i-r-1]+t,o[i--]=c%Gt|0,t=c/Gt|0;o[i]=(o[i]+t)%Gt|0}for(;!o[--l];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,St?dt(e,y.precision):e};Se.toDecimalPlaces=Se.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Vr(e,0,_s),t===void 0?t=r.rounding:Vr(t,0,8),dt(n,e+It(n)+1,t))};Se.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=io(r,!0):(Vr(e,0,_s),t===void 0?t=i.rounding:Vr(t,0,8),r=dt(new i(r),e+1,t),n=io(r,!0,e+1)),n};Se.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?io(i):(Vr(e,0,_s),t===void 0?t=o.rounding:Vr(t,0,8),r=dt(new o(i),e+It(i)+1,t),n=io(r.abs(),!1,e+It(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Se.toInteger=Se.toint=function(){var e=this,t=e.constructor;return dt(new t(e),It(e)+1,t.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(e){var t,n,r,i,o,l,c=this,d=c.constructor,f=12,m=+(e=new d(e));if(!e.s)return new d(Gn);if(c=new d(c),!c.s){if(e.s<1)throw Error(hr+"Infinity");return c}if(c.eq(Gn))return c;if(r=d.precision,e.eq(Gn))return dt(c,r);if(t=e.e,n=e.d.length-1,l=t>=n,o=c.s,l){if((n=m<0?-m:m)<=nR){for(i=new d(Gn),t=Math.ceil(r/vt+4),St=!1;n%2&&(i=i.times(c),VA(i.d,t)),n=Ns(n/2),n!==0;)c=c.times(c),VA(c.d,t);return St=!0,e.s<0?new d(Gn).div(i):dt(i,r)}}else if(o<0)throw Error(hr+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,c.s=1,St=!1,i=e.times(cu(c,r+f)),St=!0,i=iR(i),i.s=o,i};Se.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=It(i),r=io(i,n<=o.toExpNeg||n>=o.toExpPos)):(Vr(e,1,_s),t===void 0?t=o.rounding:Vr(t,0,8),i=dt(new o(i),e,t),n=It(i),r=io(i,e<=n||n<=o.toExpNeg,e)),r};Se.toSignificantDigits=Se.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Vr(e,1,_s),t===void 0?t=r.rounding:Vr(t,0,8)),dt(new r(n),e,t)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=It(e),n=e.constructor;return io(e,t<=n.toExpNeg||t>=n.toExpPos)};function rR(e,t){var n,r,i,o,l,c,d,f,m=e.constructor,y=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),St?dt(t,y):t;if(d=e.d,f=t.d,l=e.e,i=t.e,d=d.slice(),o=l-i,o){for(o<0?(r=d,o=-o,c=f.length):(r=f,i=l,c=d.length),l=Math.ceil(y/vt),c=l>c?l+1:c+1,o>c&&(o=c,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(c=d.length,o=f.length,c-o<0&&(o=c,r=f,f=d,d=r),n=0;o;)n=(d[--o]=d[o]+f[o]+n)/Gt|0,d[o]%=Gt;for(n&&(d.unshift(n),++i),c=d.length;d[--c]==0;)d.pop();return t.d=d,t.e=i,St?dt(t,y):t}function Vr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Qa+e)}function $r(e){var t,n,r,i=e.length-1,o="",l=e[0];if(i>0){for(o+=l,t=1;t<i;t++)r=e[t]+"",n=vt-r.length,n&&(o+=ua(n)),o+=r;l=e[t],r=l+"",n=vt-r.length,n&&(o+=ua(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var pi=function(){function e(r,i){var o,l=0,c=r.length;for(r=r.slice();c--;)o=r[c]*i+l,r[c]=o%Gt|0,l=o/Gt|0;return l&&r.unshift(l),r}function t(r,i,o,l){var c,d;if(o!=l)d=o>l?1:-1;else for(c=d=0;c<o;c++)if(r[c]!=i[c]){d=r[c]>i[c]?1:-1;break}return d}function n(r,i,o){for(var l=0;o--;)r[o]-=l,l=r[o]<i[o]?1:0,r[o]=l*Gt+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,l){var c,d,f,m,y,v,S,T,w,A,M,P,N,O,_,D,k,B,j=r.constructor,re=r.s==i.s?1:-1,K=r.d,V=i.d;if(!r.s)return new j(r);if(!i.s)throw Error(hr+"Division by zero");for(d=r.e-i.e,k=V.length,_=K.length,S=new j(re),T=S.d=[],f=0;V[f]==(K[f]||0);)++f;if(V[f]>(K[f]||0)&&--d,o==null?P=o=j.precision:l?P=o+(It(r)-It(i))+1:P=o,P<0)return new j(0);if(P=P/vt+2|0,f=0,k==1)for(m=0,V=V[0],P++;(f<_||m)&&P--;f++)N=m*Gt+(K[f]||0),T[f]=N/V|0,m=N%V|0;else{for(m=Gt/(V[0]+1)|0,m>1&&(V=e(V,m),K=e(K,m),k=V.length,_=K.length),O=k,w=K.slice(0,k),A=w.length;A<k;)w[A++]=0;B=V.slice(),B.unshift(0),D=V[0],V[1]>=Gt/2&&++D;do m=0,c=t(V,w,k,A),c<0?(M=w[0],k!=A&&(M=M*Gt+(w[1]||0)),m=M/D|0,m>1?(m>=Gt&&(m=Gt-1),y=e(V,m),v=y.length,A=w.length,c=t(y,w,v,A),c==1&&(m--,n(y,k<v?B:V,v))):(m==0&&(c=m=1),y=V.slice()),v=y.length,v<A&&y.unshift(0),n(w,y,A),c==-1&&(A=w.length,c=t(V,w,k,A),c<1&&(m++,n(w,k<A?B:V,A))),A=w.length):c===0&&(m++,w=[0]),T[f++]=m,c&&w[0]?w[A++]=K[O]||0:(w=[K[O]],A=1);while((O++<_||w[0]!==void 0)&&P--)}return T[0]||T.shift(),S.e=d,dt(S,l?o+It(S)+1:o)}}();function iR(e,t){var n,r,i,o,l,c,d=0,f=0,m=e.constructor,y=m.precision;if(It(e)>16)throw Error(f0+It(e));if(!e.s)return new m(Gn);for(St=!1,c=y,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(r=Math.log(Va(2,f))/Math.LN10*2+5|0,c+=r,n=i=o=new m(Gn),m.precision=c;;){if(i=dt(i.times(e),c),n=n.times(++d),l=o.plus(pi(i,n,c)),$r(l.d).slice(0,c)===$r(o.d).slice(0,c)){for(;f--;)o=dt(o.times(o),c);return m.precision=y,t==null?(St=!0,dt(o,y)):o}o=l}}function It(e){for(var t=e.e*vt,n=e.d[0];n>=10;n/=10)t++;return t}function Pg(e,t,n){if(t>e.LN10.sd())throw St=!0,n&&(e.precision=n),Error(hr+"LN10 precision limit exceeded");return dt(new e(e.LN10),t)}function ua(e){for(var t="";e--;)t+="0";return t}function cu(e,t){var n,r,i,o,l,c,d,f,m,y=1,v=10,S=e,T=S.d,w=S.constructor,A=w.precision;if(S.s<1)throw Error(hr+(S.s?"NaN":"-Infinity"));if(S.eq(Gn))return new w(0);if(t==null?(St=!1,f=A):f=t,S.eq(10))return t==null&&(St=!0),Pg(w,f);if(f+=v,w.precision=f,n=$r(T),r=n.charAt(0),o=It(S),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)S=S.times(e),n=$r(S.d),r=n.charAt(0),y++;o=It(S),r>1?(S=new w("0."+n),o++):S=new w(r+"."+n.slice(1))}else return d=Pg(w,f+2,A).times(o+""),S=cu(new w(r+"."+n.slice(1)),f-v).plus(d),w.precision=A,t==null?(St=!0,dt(S,A)):S;for(c=l=S=pi(S.minus(Gn),S.plus(Gn),f),m=dt(S.times(S),f),i=3;;){if(l=dt(l.times(m),f),d=c.plus(pi(l,new w(i),f)),$r(d.d).slice(0,f)===$r(c.d).slice(0,f))return c=c.times(2),o!==0&&(c=c.plus(Pg(w,f+2,A).times(o+""))),c=pi(c,new w(y),f),w.precision=A,t==null?(St=!0,dt(c,A)):c;c=d,i+=2}}function qA(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Ns(n/vt),e.d=[],r=(n+1)%vt,n<0&&(r+=vt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=vt;r<i;)e.d.push(+t.slice(r,r+=vt));t=t.slice(r),r=vt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),St&&(e.e>od||e.e<-od))throw Error(f0+n)}else e.s=0,e.e=0,e.d=[0];return e}function dt(e,t,n){var r,i,o,l,c,d,f,m,y=e.d;for(l=1,o=y[0];o>=10;o/=10)l++;if(r=t-l,r<0)r+=vt,i=t,f=y[m=0];else{if(m=Math.ceil((r+1)/vt),o=y.length,m>=o)return e;for(f=o=y[m],l=1;o>=10;o/=10)l++;r%=vt,i=r-vt+l}if(n!==void 0&&(o=Va(10,l-i-1),c=f/o%10|0,d=t<0||y[m+1]!==void 0||f%o,d=n<4?(c||d)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||d||n==6&&(r>0?i>0?f/Va(10,l-i):0:y[m-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return d?(o=It(e),y.length=1,t=t-o-1,y[0]=Va(10,(vt-t%vt)%vt),e.e=Ns(-t/vt)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(r==0?(y.length=m,o=1,m--):(y.length=m+1,o=Va(10,vt-r),y[m]=i>0?(f/Va(10,l-i)%Va(10,i)|0)*o:0),d)for(;;)if(m==0){(y[0]+=o)==Gt&&(y[0]=1,++e.e);break}else{if(y[m]+=o,y[m]!=Gt)break;y[m--]=0,o=1}for(r=y.length;y[--r]===0;)y.pop();if(St&&(e.e>od||e.e<-od))throw Error(f0+It(e));return e}function aR(e,t){var n,r,i,o,l,c,d,f,m,y,v=e.constructor,S=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),St?dt(t,S):t;if(d=e.d,y=t.d,r=t.e,f=e.e,d=d.slice(),l=f-r,l){for(m=l<0,m?(n=d,l=-l,c=y.length):(n=y,r=f,c=d.length),i=Math.max(Math.ceil(S/vt),c)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=d.length,c=y.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(d[i]!=y[i]){m=d[i]<y[i];break}l=0}for(m&&(n=d,d=y,y=n,t.s=-t.s),c=d.length,i=y.length-c;i>0;--i)d[c++]=0;for(i=y.length;i>l;){if(d[--i]<y[i]){for(o=i;o&&d[--o]===0;)d[o]=Gt-1;--d[o],d[i]+=Gt}d[i]-=y[i]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(t.d=d,t.e=r,St?dt(t,S):t):new v(0)}function io(e,t,n){var r,i=It(e),o=$r(e.d),l=o.length;return t?(n&&(r=n-l)>0?o=o.charAt(0)+"."+o.slice(1)+ua(r):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+ua(-i-1)+o,n&&(r=n-l)>0&&(o+=ua(r))):i>=l?(o+=ua(i+1-l),n&&(r=n-i-1)>0&&(o=o+"."+ua(r))):((r=i+1)<l&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(o+="."),o+=ua(r))),e.s<0?"-"+o:o}function VA(e,t){if(e.length>t)return e.length=t,!0}function oR(e){var t,n,r;function i(o){var l=this;if(!(l instanceof i))return new i(o);if(l.constructor=i,o instanceof i){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Qa+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return qA(l,o.toString())}else if(typeof o!="string")throw Error(Qa+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,EG.test(o))qA(l,o);else throw Error(Qa+o)}if(i.prototype=Se,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=oR,i.config=i.set=MG,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function MG(e){if(!e||typeof e!="object")throw Error(hr+"Object expected");var t,n,r,i=["precision",1,_s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Ns(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Qa+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Qa+n+": "+r);return this}var d0=oR(AG);Gn=new d0(1);const at=d0;var _G=e=>e,sR={},lR=e=>e===sR,zA=e=>function t(){return arguments.length===0||arguments.length===1&&lR(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},uR=(e,t)=>e===1?t:zA(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(l=>l!==sR).length;return o>=e?t(...r):uR(e-o,zA(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=r.map(m=>lR(m)?c.shift():m);return t(...f,...c)}))}),qd=e=>uR(e.length,e),Ky=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},NG=qd((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),RG=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return _G;var i=n.reverse(),o=i[0],l=i.slice(1);return function(){return l.reduce((c,d)=>d(c),o(...arguments))}},Yy=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),cR=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((l,c)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[c])})||(t=i,n=e(...i)),n}};function fR(e){var t;return e===0?t=1:t=Math.floor(new at(e).abs().log(10).toNumber())+1,t}function dR(e,t,n){for(var r=new at(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}qd((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});qd((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});qd((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var mR=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},hR=(e,t,n)=>{if(e.lte(0))return new at(0);var r=fR(e.toNumber()),i=new at(10).pow(r),o=e.div(i),l=r!==1?.05:.1,c=new at(Math.ceil(o.div(l).toNumber())).add(n).mul(l),d=c.mul(i);return t?new at(d.toNumber()):new at(Math.ceil(d.toNumber()))},PG=(e,t,n)=>{var r=new at(1),i=new at(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new at(10).pow(fR(e)-1),i=new at(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new at(Math.floor(e)))}else e===0?i=new at(Math.floor((t-1)/2)):n||(i=new at(Math.floor(e)));var l=Math.floor((t-1)/2),c=RG(NG(d=>i.add(new at(d-l).mul(r)).toNumber()),Ky);return c(0,t)},pR=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new at(0),tickMin:new at(0),tickMax:new at(0)};var l=hR(new at(n).sub(t).div(r-1),i,o),c;t<=0&&n>=0?c=new at(0):(c=new at(t).add(n).div(2),c=c.sub(new at(c).mod(l)));var d=Math.ceil(c.sub(t).div(l).toNumber()),f=Math.ceil(new at(n).sub(c).div(l).toNumber()),m=d+f+1;return m>r?pR(t,n,r,i,o+1):(m<r&&(f=n>0?f+(r-m):f,d=n>0?d:d+(r-m)),{step:l,tickMin:c.sub(new at(d).mul(l)),tickMax:c.add(new at(f).mul(l))})};function DG(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=mR([t,n]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...Ky(0,r-1).map(()=>1/0)]:[...Ky(0,r-1).map(()=>-1/0),c];return t>n?Yy(d):d}if(l===c)return PG(l,r,i);var{step:f,tickMin:m,tickMax:y}=pR(l,c,o,i,0),v=dR(m,y.add(new at(.1).mul(f)),f);return t>n?Yy(v):v}function kG(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=mR([n,r]);if(o===-1/0||l===1/0)return[n,r];if(o===l)return[o];var c=Math.max(t,2),d=hR(new at(l).sub(o).div(c-1),i,0),f=[...dR(new at(o),new at(l),d),l];return i===!1&&(f=f.map(m=>Math.round(m))),n>r?Yy(f):f}var IG=cR(DG),OG=cR(kG),gR=e=>e.rootProps.maxBarSize,LG=e=>e.rootProps.barGap,yR=e=>e.rootProps.barCategoryGap,jG=e=>e.rootProps.barSize,Vd=e=>e.rootProps.stackOffset,m0=e=>e.options.chartName,h0=e=>e.rootProps.syncId,vR=e=>e.rootProps.syncMethod,p0=e=>e.options.eventEmitter,ci={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Fn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},zd=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},UG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ci.angleAxisId,includeHidden:!1,name:void 0,reversed:ci.reversed,scale:ci.scale,tick:ci.tick,tickCount:void 0,ticks:void 0,type:ci.type,unit:void 0},$G={allowDataOverflow:Fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fn.scale,tick:Fn.tick,tickCount:Fn.tickCount,ticks:void 0,type:Fn.type,unit:void 0},BG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ci.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ci.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ci.scale,tick:ci.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qG={allowDataOverflow:Fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fn.scale,tick:Fn.tick,tickCount:Fn.tickCount,ticks:void 0,type:"category",unit:void 0},g0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?BG:UG,y0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?qG:$G,Fd=e=>e.polarOptions,v0=ne([wi,Ai,Yt],K6),xR=ne([Fd,v0],(e,t)=>{if(e!=null)return _r(e.innerRadius,t,0)}),bR=ne([Fd,v0],(e,t)=>{if(e!=null)return _r(e.outerRadius,t,t*.8)}),VG=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},SR=ne([Fd],VG);ne([g0,SR],zd);var CR=ne([v0,xR,bR],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ne([y0,CR],zd);var TR=ne([Ge,Fd,xR,bR,wi,Ai],(e,t,n,r,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:c,startAngle:d,endAngle:f}=t;return{cx:_r(l,i,i/2),cy:_r(c,o,o/2),innerRadius:n,outerRadius:r,startAngle:d,endAngle:f,clockWise:!1}}}),Ot=(e,t)=>t,Hd=(e,t,n)=>n;function Gd(e){return e==null?void 0:e.id}var qt=e=>{var t=Ge(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Rs=e=>e.tooltip.settings.axisId,Vt=e=>{var t=qt(e),n=Rs(e);return wu(e,t,n)};function wR(e,t,n){var{chartData:r=[]}=t,i=n==null?void 0:n.dataKey,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:r;if(!(d==null||d.length===0)){var f=Gd(l);d.forEach((m,y)=>{var v=i==null?y:String(kt(m,i,null)),S=kt(m,l.dataKey,0),T;o.has(v)?T=o.get(v):T={},Object.assign(T,{[f]:S}),o.set(v,T)})}}),Array.from(o.values())}function Kd(e){return e.stackId!=null&&e.dataKey!=null}function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(r){zG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zG(e,t,n){return(t=FG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wy=[0,"auto"],Vn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Mi=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n??Vn},zn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Wy,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Dd},ga=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n??zn},GG={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},x0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??GG},Rn=(e,t,n)=>{switch(t){case"xAxis":return Mi(e,n);case"yAxis":return ga(e,n);case"zAxis":return x0(e,n);case"angleAxis":return g0(e,n);case"radiusAxis":return y0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},KG=(e,t,n)=>{switch(t){case"xAxis":return Mi(e,n);case"yAxis":return ga(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},wu=(e,t,n)=>{switch(t){case"xAxis":return Mi(e,n);case"yAxis":return ga(e,n);case"angleAxis":return g0(e,n);case"radiusAxis":return y0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},AR=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ER(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Au=e=>e.graphicalItems.cartesianItems,YG=ne([Ot,Hd],ER),MR=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),Eu=ne([Au,Rn,YG],MR),_R=ne([Eu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Kd)),NR=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),RR=ne([Eu],NR),PR=e=>e.map(t=>t.data).filter(Boolean).flat(1),WG=ne([Eu],PR),DR=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},b0=ne([WG,Tu],DR),kR=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:kt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:kt(i,r)}))):e.map(r=>({value:r})),Yd=ne([b0,Rn,Eu],kR);function IR(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function po(e){return e.filter(t=>qr(t)||t instanceof Date).map(Number).filter(t=>Nn(t)===!1)}function JG(e,t,n){return!n||typeof t!="number"||Nn(t)?[]:n.length?po(n.flatMap(r=>{var i=kt(e,r.dataKey),o,l;if(Array.isArray(i)?[o,l]=i:o=l=i,!(!an(o)||!an(l)))return[t-o,t+l]})):[]}var XG=ne([_R,Tu,Vt],wR),OR=(e,t,n)=>{var r={},i=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=c.map(Gd);return[l,{stackedData:uz(e,d,n),graphicalItems:c}]}))},fu=ne([XG,_R,Vd],OR),LR=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var o=mz(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},QG=ne([fu,pa,Ot],LR),jR=(e,t,n,r,i)=>n.length>0?e.flatMap(o=>n.flatMap(l=>{var c,d,f=(c=r[l.id])===null||c===void 0?void 0:c.filter(y=>IR(i,y)),m=kt(o,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey);return{value:m,errorDomain:JG(o,m,f)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(o=>({value:kt(o,t.dataKey),errorDomain:[]})):e.map(o=>({value:o,errorDomain:[]})),Wd=e=>e.errorBars,UR=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>IR(n,r));ne([RR,Wd,Ot],UR);var ZG=ne([b0,Rn,RR,Wd,Ot],jR);function e7(e){var{value:t}=e;if(qr(t)||t instanceof Date)return t}var HA=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=po(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},t7=(e,t,n)=>{var r=e.map(e7).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&XM(r))?SN(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},S0=e=>{var t;if(e==null||!("domain"in e))return Wy;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=po(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Wy},ld=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),l=Math.min(...o),c=Math.max(...o);return[l,c]}},$R=e=>e.referenceElements.dots,Ps=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),n7=ne([$R,Ot,Hd],Ps),BR=e=>e.referenceElements.areas,r7=ne([BR,Ot,Hd],Ps),qR=e=>e.referenceElements.lines,i7=ne([qR,Ot,Hd],Ps),VR=(e,t)=>{var n=po(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},a7=ne(n7,Ot,VR),zR=(e,t)=>{var n=po(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},o7=ne([r7,Ot],zR),FR=(e,t)=>{var n=po(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},s7=ne(i7,Ot,FR),l7=ne(a7,s7,o7,(e,t,n)=>ld(e,n,t)),u7=ne([Rn],S0),HR=(e,t,n,r,i,o,l)=>{var c=TG(t,e.allowDataOverflow);if(c!=null)return c;var d=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",f=d?ld(n,i,HA(r)):ld(i,HA(r));return wG(t,f,e.allowDataOverflow)},c7=ne([Rn,u7,QG,ZG,l7,Ge,Ot],HR),f7=[0,1],GR=(e,t,n,r,i,o,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:c,type:d}=e,f=Gr(t,o);return f&&c==null?SN(0,n.length):d==="category"?t7(r,e,f):i==="expand"?f7:l}},C0=ne([Rn,Ge,b0,Yd,Vd,Ot,c7],GR),KR=(e,t,n,r,i)=>{if(e!=null){var{scale:o,type:l}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof o=="string"){var c="scale".concat(gu(o));return c in Xl?c:"point"}}},Mu=ne([Rn,Ge,AR,m0,Ot],KR);function d7(e){if(e!=null){if(e in Xl)return Xl[e]();var t="scale".concat(gu(e));if(t in Xl)return Xl[t]()}}function T0(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=d7(t);if(i!=null){var o=i.domain(n).range(r);return iz(o),o}}}var YR=(e,t,n)=>{var r=S0(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ys(e))return IG(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ys(e))return OG(e,t.tickCount,t.allowDecimals)}},w0=ne([C0,wu,Mu],YR),WR=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&ys(t)&&Array.isArray(n)&&n.length>0){var i=t[0],o=n[0],l=t[1],c=n[n.length-1];return[Math.min(i,o),Math.max(l,c)]}return t},m7=ne([Rn,C0,w0,Ot],WR),h7=ne(Yd,Rn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(po(e.map(c=>c.value))).sort((c,d)=>c-d);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o+1]-r[o];n=Math.min(n,l)}return n/i}}),JR=ne(h7,Ge,yR,Yt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!an(e))return 0;var o=t==="vertical"?r.height:r.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var l=_r(n,e*o),c=e*o/2;return c-l-(c-l)/o*l}return 0}),p7=(e,t)=>{var n=Mi(e,t);return n==null||typeof n.padding!="string"?0:JR(e,"xAxis",t,n.padding)},g7=(e,t)=>{var n=ga(e,t);return n==null||typeof n.padding!="string"?0:JR(e,"yAxis",t,n.padding)},y7=ne(Mi,p7,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),v7=ne(ga,g7,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),x7=ne([Yt,y7,Id,kd,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),b7=ne([Yt,Ge,v7,Id,kd,(e,t,n)=>n],(e,t,n,r,i,o)=>{var{padding:l}=i;return o?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),_u=(e,t,n,r)=>{var i;switch(t){case"xAxis":return x7(e,n,r);case"yAxis":return b7(e,n,r);case"zAxis":return(i=x0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return SR(e);case"radiusAxis":return CR(e,n);default:return}},XR=ne([Rn,_u],zd),Ds=ne([Rn,Mu,m7,XR],T0);ne([Eu,Wd,Ot],UR);function QR(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Jd=(e,t)=>t,Xd=(e,t,n)=>n,S7=ne(Uv,Jd,Xd,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(QR)),C7=ne($v,Jd,Xd,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(QR)),ZR=(e,t)=>({width:e.width,height:t.height}),T7=(e,t)=>{var n=typeof t.width=="number"?t.width:Dd;return{width:n,height:e.height}},e2=ne(Yt,Mi,ZR),w7=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},A7=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},E7=ne(Ai,Yt,S7,Jd,Xd,(e,t,n,r,i)=>{var o={},l;return n.forEach(c=>{var d=ZR(t,c);l==null&&(l=w7(t,r,e));var f=r==="top"&&!i||r==="bottom"&&i;o[c.id]=l-Number(f)*d.height,l+=(f?-1:1)*d.height}),o}),M7=ne(wi,Yt,C7,Jd,Xd,(e,t,n,r,i)=>{var o={},l;return n.forEach(c=>{var d=T7(t,c);l==null&&(l=A7(t,r,e));var f=r==="left"&&!i||r==="right"&&i;o[c.id]=l-Number(f)*d.width,l+=(f?-1:1)*d.width}),o}),_7=(e,t)=>{var n=Yt(e),r=Mi(e,t);if(r!=null){var i=E7(e,r.orientation,r.mirror),o=i[t];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},N7=(e,t)=>{var n=Yt(e),r=ga(e,t);if(r!=null){var i=M7(e,r.orientation,r.mirror),o=i[t];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},t2=ne(Yt,ga,(e,t)=>{var n=typeof t.width=="number"?t.width:Dd;return{width:n,height:e.height}}),GA=(e,t,n)=>{switch(t){case"xAxis":return e2(e,n).width;case"yAxis":return t2(e,n).height;default:return}},n2=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:l}=n,c=Gr(e,r),d=t.map(f=>f.value);if(l&&c&&o==="category"&&i&&XM(d))return d}},A0=ne([Ge,Yd,Rn,Ot],n2),r2=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,l=Gr(e,r);if(l&&(i==="number"||o!=="auto"))return t.map(c=>c.value)}},E0=ne([Ge,Yd,wu,Ot],r2),KA=ne([Ge,KG,Mu,Ds,A0,E0,_u,w0,Ot],(e,t,n,r,i,o,l,c,d)=>{if(t==null)return null;var f=Gr(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:o,duplicateDomain:i,isCategorical:f,niceTicks:c,range:l,realScaleType:n,scale:r}}),R7=(e,t,n,r,i,o,l,c,d)=>{if(!(t==null||r==null)){var f=Gr(e,d),{type:m,ticks:y,tickCount:v}=t,S=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,T=m==="category"&&r.bandwidth?r.bandwidth()/S:0;T=d==="angleAxis"&&o!=null&&o.length>=2?Mn(o[0]-o[1])*2*T:T;var w=y||i;if(w){var A=w.map((M,P)=>{var N=l?l.indexOf(M):M;return{index:P,coordinate:r(N)+T,value:M,offset:T}});return A.filter(M=>!Nn(M.coordinate))}return f&&c?c.map((M,P)=>({coordinate:r(M)+T,value:M,index:P,offset:T})):r.ticks?r.ticks(v).map(M=>({coordinate:r(M)+T,value:M,offset:T})):r.domain().map((M,P)=>({coordinate:r(M)+T,value:l?l[M]:M,index:P,offset:T}))}},i2=ne([Ge,wu,Mu,Ds,w0,_u,A0,E0,Ot],R7),P7=(e,t,n,r,i,o,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var c=Gr(e,l),{tickCount:d}=t,f=0;return f=l==="angleAxis"&&(r==null?void 0:r.length)>=2?Mn(r[0]-r[1])*2*f:f,c&&o?o.map((m,y)=>({coordinate:n(m)+f,value:m,index:y,offset:f})):n.ticks?n.ticks(d).map(m=>({coordinate:n(m)+f,value:m,offset:f})):n.domain().map((m,y)=>({coordinate:n(m)+f,value:i?i[m]:m,index:y,offset:f}))}},zr=ne([Ge,wu,Ds,_u,A0,E0,Ot],P7),Fr=ne(Rn,Ds,(e,t)=>{if(!(e==null||t==null))return sd(sd({},e),{},{scale:t})}),D7=ne([Rn,Mu,C0,XR],T0);ne((e,t,n)=>x0(e,n),D7,(e,t)=>{if(!(e==null||t==null))return sd(sd({},e),{},{scale:t})});var k7=ne([Ge,Uv,$v],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),a2=e=>e.options.defaultTooltipEventType,o2=e=>e.options.validateTooltipEventTypes;function s2(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function M0(e,t){var n=a2(e),r=o2(e);return s2(t,n,r)}function I7(e){return Re(t=>M0(t,e))}var l2=(e,t)=>{var n,r=Number(t);if(!(Nn(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},O7=e=>e.tooltip.settings,ca={active:!1,index:null,dataKey:void 0,coordinate:void 0},L7={itemInteraction:{click:ca,hover:ca},axisInteraction:{click:ca,hover:ca},keyboardInteraction:ca,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},u2=Xn({name:"tooltip",initialState:L7,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=hi(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:j7,removeTooltipEntrySettings:U7,setTooltipSettingsState:$7,setActiveMouseOverItemIndex:c2,mouseLeaveItem:B7,mouseLeaveChart:f2,setActiveClickItemIndex:q7,setMouseOverAxisIndex:d2,setMouseClickAxisIndex:V7,setSyncInteraction:Jy,setKeyboardInteraction:Xy}=u2.actions,z7=u2.reducer;function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(n),!0).forEach(function(r){F7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F7(e,t,n){return(t=H7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H7(e){var t=G7(e,"string");return typeof t=="symbol"?t:t+""}function G7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K7(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Y7(e){return e.index!=null}var m2=(e,t,n,r)=>{if(t==null)return ca;var i=K7(e,t,n);if(i==null)return ca;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(Y7(i)){if(o)return yf(yf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return yf(yf({},ca),{},{coordinate:i.coordinate})},_0=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!an(r))return n;var i=0,o=1/0;return t.length>0&&(o=t.length-1),String(Math.max(i,Math.min(r,o)))},h2=(e,t,n,r,i,o,l,c)=>{if(!(o==null||c==null)){var d=l[0],f=d==null?void 0:c(d.positions,o);if(f!=null)return f;var m=i==null?void 0:i[Number(o)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},p2=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.dataKey)===i})},Nu=e=>e.options.tooltipPayloadSearcher,ks=e=>e.tooltip;function WA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(n),!0).forEach(function(r){W7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W7(e,t,n){return(t=J7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J7(e){var t=X7(e,"string");return typeof t=="symbol"?t:t+""}function X7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q7(e,t){return e??t}var g2=(e,t,n,r,i,o,l)=>{if(!(t==null||o==null)){var{chartData:c,computedData:d,dataStartIndex:f,dataEndIndex:m}=n,y=[];return e.reduce((v,S)=>{var T,{dataDefinedOnItem:w,settings:A}=S,M=Q7(w,c),P=Array.isArray(M)?eN(M,f,m):M,N=(T=A==null?void 0:A.dataKey)!==null&&T!==void 0?T:r==null?void 0:r.dataKey,O=A==null?void 0:A.nameKey,_;if(r!=null&&r.dataKey&&Array.isArray(P)&&!Array.isArray(P[0])&&l==="axis"?_=QM(P,r.dataKey,i):_=o(P,t,d,O),Array.isArray(_))_.forEach(k=>{var B=JA(JA({},A),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});v.push(P1({tooltipEntrySettings:B,dataKey:k.dataKey,payload:k.payload,value:kt(k.payload,k.dataKey),name:k.name}))});else{var D;v.push(P1({tooltipEntrySettings:A,dataKey:N,payload:_,value:kt(_,N),name:(D=kt(_,O))!==null&&D!==void 0?D:A==null?void 0:A.name}))}return v},y)}},N0=ne([Vt,Ge,AR,m0,qt],KR),Z7=ne([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),e9=ne([qt,Rs],ER),Ru=ne([Z7,Vt,e9],MR),t9=ne([Ru],e=>e.filter(Kd)),n9=ne([Ru],PR),Is=ne([n9,pa],DR),r9=ne([t9,pa,Vt],wR),R0=ne([Is,Vt,Ru],kR),i9=ne([Vt],S0),a9=ne([Ru],e=>e.filter(Kd)),o9=ne([r9,a9,Vd],OR),s9=ne([o9,pa,qt],LR),l9=ne([Ru],NR),u9=ne([Is,Vt,l9,Wd,qt],jR),c9=ne([$R,qt,Rs],Ps),f9=ne([c9,qt],VR),d9=ne([BR,qt,Rs],Ps),m9=ne([d9,qt],zR),h9=ne([qR,qt,Rs],Ps),p9=ne([h9,qt],FR),g9=ne([f9,p9,m9],ld),y9=ne([Vt,i9,s9,u9,g9,Ge,qt],HR),y2=ne([Vt,Ge,Is,R0,Vd,qt,y9],GR),v9=ne([y2,Vt,N0],YR),x9=ne([Vt,y2,v9,qt],WR),v2=e=>{var t=qt(e),n=Rs(e),r=!1;return _u(e,t,n,r)},x2=ne([Vt,v2],zd),b2=ne([Vt,N0,x9,x2],T0),b9=ne([Ge,R0,Vt,qt],n2),S9=ne([Ge,R0,Vt,qt],r2),C9=(e,t,n,r,i,o,l,c)=>{if(t){var{type:d}=t,f=Gr(e,c);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,y=d==="category"&&r.bandwidth?r.bandwidth()/m:0;return y=c==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Mn(i[0]-i[1])*2*y:y,f&&l?l.map((v,S)=>({coordinate:r(v)+y,value:v,index:S,offset:y})):r.domain().map((v,S)=>({coordinate:r(v)+y,value:o?o[v]:v,index:S,offset:y}))}}},_i=ne([Ge,Vt,N0,b2,v2,b9,S9,qt],C9),P0=ne([a2,o2,O7],(e,t,n)=>s2(n.shared,e,t)),S2=e=>e.tooltip.settings.trigger,D0=e=>e.tooltip.settings.defaultIndex,Qd=ne([ks,P0,S2,D0],m2),ao=ne([Qd,Is],_0),C2=ne([_i,ao],l2),T2=ne([Qd],e=>{if(e)return e.dataKey}),w2=ne([ks,P0,S2,D0],p2),T9=ne([wi,Ai,Ge,Yt,_i,D0,w2,Nu],h2),w9=ne([Qd,T9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),A9=ne([Qd],e=>e.active),E9=ne([w2,ao,pa,Vt,C2,Nu,P0],g2),M9=ne([E9],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(r){_9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _9(e,t,n){return(t=N9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N9(e){var t=R9(e,"string");return typeof t=="symbol"?t:t+""}function R9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P9=()=>Re(Vt),D9=()=>{var e=P9(),t=Re(_i),n=Re(b2);return ro(QA(QA({},e),{},{scale:n}),t)},A2=()=>Re(m0),k0=(e,t)=>t,E2=(e,t,n)=>n,I0=(e,t,n,r)=>r,k9=ne(_i,e=>Ad(e,t=>t.coordinate)),O0=ne([ks,k0,E2,I0],m2),M2=ne([O0,Is],_0),I9=(e,t,n)=>{if(t!=null){var r=ks(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},_2=ne([ks,k0,E2,I0],p2),ud=ne([wi,Ai,Ge,Yt,_i,I0,_2,Nu],h2),O9=ne([O0,ud],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),N2=ne(_i,M2,l2),L9=ne([_2,M2,pa,Vt,N2,Nu,k0],g2),j9=ne([O0],e=>({isActive:e.active,activeIndex:e.index})),U9=(e,t,n,r,i,o,l,c)=>{if(!(!e||!t||!r||!i||!o)){var d=hz(e.chartX,e.chartY,t,n,c);if(d){var f=gz(d,t),m=nz(f,l,o,r,i),y=pz(t,o,m,d);return{activeIndex:String(m),activeCoordinate:y}}}};function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qy.apply(null,arguments)}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){$9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $9(e,t,n){return(t=B9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V9(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:f}=e,m=t,y=n,v=r;if(!c||!m||f!=="ScatterChart"&&d!=="axis")return null;var S,T;if(f==="ScatterChart")S=m,T=rF;else if(f==="BarChart")S=iF(l,m,i,o),T=yN;else if(l==="radial"){var{cx:w,cy:A,radius:M,startAngle:P,endAngle:N}=vN(m);S={cx:w,cy:A,startAngle:P,endAngle:N,innerRadius:M,outerRadius:M},T=bN}else S={points:VF(l,m,i)},T=Zl;var O=typeof c=="object"&&"className"in c?c.className:void 0,_=vf(vf(vf(vf({stroke:"#ccc",pointerEvents:"none"},i),S),bt(c,!1)),{},{payload:y,payloadIndex:v,className:tt("recharts-tooltip-cursor",O)});return E.isValidElement(c)?E.cloneElement(c,_):E.createElement(T,_)}function z9(e){var t=D9(),n=oN(),r=vu(),i=A2();return E.createElement(V9,Qy({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var R2=E.createContext(null),F9=()=>E.useContext(R2),Dg={exports:{}},eE;function H9(){return eE||(eE=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function o(d,f,m,y,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var S=new i(m,y||d,v),T=n?n+f:f;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],S]:d._events[T].push(S):(d._events[T]=S,d._eventsCount++),d}function l(d,f){--d._eventsCount===0?d._events=new r:delete d._events[f]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,y;if(this._eventsCount===0)return f;for(y in m=this._events)t.call(m,y)&&f.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=n?n+f:f,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,S=y.length,T=new Array(S);v<S;v++)T[v]=y[v].fn;return T},c.prototype.listenerCount=function(f){var m=n?n+f:f,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(f,m,y,v,S,T){var w=n?n+f:f;if(!this._events[w])return!1;var A=this._events[w],M=arguments.length,P,N;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),M){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,m),!0;case 3:return A.fn.call(A.context,m,y),!0;case 4:return A.fn.call(A.context,m,y,v),!0;case 5:return A.fn.call(A.context,m,y,v,S),!0;case 6:return A.fn.call(A.context,m,y,v,S,T),!0}for(N=1,P=new Array(M-1);N<M;N++)P[N-1]=arguments[N];A.fn.apply(A.context,P)}else{var O=A.length,_;for(N=0;N<O;N++)switch(A[N].once&&this.removeListener(f,A[N].fn,void 0,!0),M){case 1:A[N].fn.call(A[N].context);break;case 2:A[N].fn.call(A[N].context,m);break;case 3:A[N].fn.call(A[N].context,m,y);break;case 4:A[N].fn.call(A[N].context,m,y,v);break;default:if(!P)for(_=1,P=new Array(M-1);_<M;_++)P[_-1]=arguments[_];A[N].fn.apply(A[N].context,P)}}return!0},c.prototype.on=function(f,m,y){return o(this,f,m,y,!1)},c.prototype.once=function(f,m,y){return o(this,f,m,y,!0)},c.prototype.removeListener=function(f,m,y,v){var S=n?n+f:f;if(!this._events[S])return this;if(!m)return l(this,S),this;var T=this._events[S];if(T.fn)T.fn===m&&(!v||T.once)&&(!y||T.context===y)&&l(this,S);else{for(var w=0,A=[],M=T.length;w<M;w++)(T[w].fn!==m||v&&!T[w].once||y&&T[w].context!==y)&&A.push(T[w]);A.length?this._events[S]=A.length===1?A[0]:A:l(this,S)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=n?n+f:f,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c}(Dg)),Dg.exports}var G9=H9();const K9=Hr(G9);var du=new K9,Zy="recharts.syncEvent.tooltip",tE="recharts.syncEvent.brush";function L0(e,t){if(t){var n=Number.parseInt(t,10);if(!Nn(n))return e==null?void 0:e[n]}}var Y9={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},P2=Xn({name:"options",initialState:Y9,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),W9=P2.reducer,{createEventEmitter:J9}=P2.actions;function X9(e){return e.tooltip.syncInteraction}var Q9={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},D2=Xn({name:"chartData",initialState:Q9,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:nE,setDataStartEndIndexes:Z9,setComputedData:gee}=D2.actions,eK=D2.reducer,k2=()=>{};function tK(){var e=Re(h0),t=Re(p0),n=Kt(),r=Re(vR),i=Re(_i),o=vu(),l=Bv(),c=Re(d=>d.rootProps.className);E.useEffect(()=>{if(e==null)return k2;var d=(f,m,y)=>{if(t!==y&&e===f){if(r==="index"){n(m);return}if(i!=null){var v;if(typeof r=="function"){var S={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},T=r(i,S);v=i[T]}else r==="value"&&(v=i.find(D=>String(D.value)===m.payload.label));var{coordinate:w}=m.payload;if(v==null||m.payload.active===!1||w==null||l==null){n(Jy({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:A,y:M}=w,P=Math.min(A,l.x+l.width),N=Math.min(M,l.y+l.height),O={x:o==="horizontal"?v.coordinate:P,y:o==="horizontal"?N:v.coordinate},_=Jy({active:m.payload.active,coordinate:O,dataKey:m.payload.dataKey,index:String(v.index),label:m.payload.label});n(_)}}};return du.on(Zy,d),()=>{du.off(Zy,d)}},[c,n,t,e,r,i,o,l])}function nK(){var e=Re(h0),t=Re(p0),n=Kt();E.useEffect(()=>{if(e==null)return k2;var r=(i,o,l)=>{t!==l&&e===i&&n(Z9(o))};return du.on(tE,r),()=>{du.off(tE,r)}},[n,t,e])}function rK(){var e=Kt();E.useEffect(()=>{e(J9())},[e]),tK(),nK()}function iK(e,t,n,r,i,o){var l=Re(v=>I9(v,e,t)),c=Re(p0),d=Re(h0),f=Re(vR),m=Re(X9),y=m==null?void 0:m.active;E.useEffect(()=>{if(!y&&d!=null&&c!=null){var v=Jy({active:o,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});du.emit(Zy,d,v,c)}},[y,n,l,i,r,c,d,f,o])}function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rE(Object(n),!0).forEach(function(r){aK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aK(e,t,n){return(t=oK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oK(e){var t=sK(e,"string");return typeof t=="symbol"?t:t+""}function sK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lK(e){return e.dataKey}function uK(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(Oz,t)}var aE=[],cK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!fo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function mu(e){var t=pr(e,cK),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:l,filterNull:c,isAnimationActive:d,offset:f,payloadUniqBy:m,position:y,reverseDirection:v,useTranslate3d:S,wrapperStyle:T,cursor:w,shared:A,trigger:M,defaultIndex:P,portal:N,axisId:O}=t,_=Kt(),D=typeof P=="number"?String(P):P;E.useEffect(()=>{_($7({shared:A,trigger:M,axisId:O,active:n,defaultIndex:D}))},[_,A,M,O,n,D]);var k=Bv(),B=cN(),j=I7(A),{activeIndex:re,isActive:K}=Re(De=>j9(De,j,M,D)),V=Re(De=>L9(De,j,M,D)),U=Re(De=>N2(De,j,M,D)),ee=Re(De=>O9(De,j,M,D)),ue=V,q=F9(),H=n??K,[ae,pe]=H5([ue,H]),$=j==="axis"?U:void 0;iK(j,M,ee,$,re,H);var Y=N??q;if(Y==null)return null;var te=ue??aE;H||(te=aE),c&&te.length&&(te=y5(ue.filter(De=>De.value!=null&&(De.hide!==!0||t.includeHidden)),m,lK));var he=te.length>0,Ce=E.createElement(Vz,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:d,active:H,coordinate:ee,hasPayload:he,offset:f,position:y,reverseDirection:v,useTranslate3d:S,viewBox:k,wrapperStyle:T,lastBoundingBox:ae,innerRef:pe,hasPortalFromProps:!!N},uK(l,iE(iE({},t),{},{payload:te,label:$,active:H,coordinate:ee,accessibilityLayer:B})));return E.createElement(E.Fragment,null,lV.createPortal(Ce,Y),H&&E.createElement(z9,{cursor:w,tooltipEventType:j,coordinate:ee,payload:ue,index:re}))}var kg={},Ig={},Og={},oE;function fK(){return oE||(oE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:o}={}){let l,c=null;const d=o!=null&&o.includes("leading"),f=o==null||o.includes("trailing"),m=()=>{c!==null&&(n.apply(l,c),l=void 0,c=null)},y=()=>{f&&m(),w()};let v=null;const S=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,y()},r)},T=()=>{v!==null&&(clearTimeout(v),v=null)},w=()=>{T(),l=void 0,c=null},A=()=>{m()},M=function(...P){if(i!=null&&i.aborted)return;l=this,c=P;const N=v==null;S(),d&&N&&m()};return M.schedule=S,M.cancel=w,M.flush=A,i==null||i.addEventListener("abort",w,{once:!0}),M}e.debounce=t}(Og)),Og}var sE;function dK(){return sE||(sE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fK();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:l=!1,trailing:c=!0,maxWait:d}=o,f=Array(2);l&&(f[0]="leading"),c&&(f[1]="trailing");let m,y=null;const v=t.debounce(function(...w){m=r.apply(this,w),y=null},i,{edges:f}),S=function(...w){return d!=null&&(y===null&&(y=Date.now()),Date.now()-y>=d)?(m=r.apply(this,w),y=Date.now(),v.cancel(),v.schedule(),m):(v.apply(this,w),m)},T=()=>(v.flush(),m);return S.cancel=v.cancel,S.flush=T,S}e.debounce=n}(Ig)),Ig}var lE;function mK(){return lE||(lE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dK();function n(r,i=0,o={}){const{leading:l=!0,trailing:c=!0}=o;return t.debounce(r,i,{leading:l,maxWait:i,trailing:c})}e.throttle=n}(kg)),kg}var Lg,uE;function hK(){return uE||(uE=1,Lg=mK().throttle),Lg}var pK=hK();const gK=Hr(pK);var eu=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(r){yK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yK(e,t,n){return(t=vK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vK(e){var t=xK(e,"string");return typeof t=="symbol"?t:t+""}function xK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hu=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:l=0,minHeight:c,maxHeight:d,children:f,debounce:m=0,id:y,className:v,onResize:S,style:T={}}=e,w=E.useRef(null),A=E.useRef();A.current=S,E.useImperativeHandle(t,()=>w.current);var[M,P]=E.useState({containerWidth:r.width,containerHeight:r.height}),N=E.useCallback((_,D)=>{P(k=>{var B=Math.round(_),j=Math.round(D);return k.containerWidth===B&&k.containerHeight===j?k:{containerWidth:B,containerHeight:j}})},[]);E.useEffect(()=>{var _=j=>{var re,{width:K,height:V}=j[0].contentRect;N(K,V),(re=A.current)===null||re===void 0||re.call(A,K,V)};m>0&&(_=gK(_,m,{trailing:!0,leading:!1}));var D=new ResizeObserver(_),{width:k,height:B}=w.current.getBoundingClientRect();return N(k,B),D.observe(w.current),()=>{D.disconnect()}},[N,m]);var O=E.useMemo(()=>{var{containerWidth:_,containerHeight:D}=M;if(_<0||D<0)return null;eu(za(i)||za(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),eu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=za(i)?_:i,B=za(o)?D:o;return n&&n>0&&(k?B=k/n:B&&(k=B*n),d&&B>d&&(B=d)),eu(k>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,B,i,o,l,c,n),E.Children.map(f,j=>E.cloneElement(j,{width:k,height:B,style:jg({width:k,height:B},j.props.style)}))},[n,f,o,d,c,l,M,i]);return E.createElement("div",{id:y?"".concat(y):void 0,className:tt("recharts-responsive-container",v),style:jg(jg({},T),{},{width:i,height:o,minWidth:l,minHeight:c,maxHeight:d}),ref:w},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},O))}),Pu=e=>null;Pu.displayName="Cell";function bK(e,t,n){return(t=SK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SK(e){var t=CK(e,"string");return typeof t=="symbol"?t:t+""}function CK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TK{constructor(t){bK(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function fE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(n),!0).forEach(function(r){AK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AK(e,t,n){return(t=EK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EK(e){var t=MK(e,"string");return typeof t=="symbol"?t:t+""}function MK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _K={cacheSize:2e3,enableCache:!0},I2=wK({},_K),dE=new TK(I2.cacheSize),NK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mE="recharts_measurement_span";function RK(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",l=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l,"|").concat(c)}var hE=(e,t)=>{try{var n=document.getElementById(mE);n||(n=document.createElement("span"),n.setAttribute("id",mE),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,NK,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},tu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||fo.isSsr)return{width:0,height:0};if(!I2.enableCache)return hE(t,n);var r=RK(t,n),i=dE.get(r);if(i)return i;var o=hE(t,n);return dE.set(r,o),o},pE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,DK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,O2={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},kK=Object.keys(O2),is="NaN";function IK(e,t){return e*O2[t]}class En{static parse(t){var n,[,r,i]=(n=DK.exec(t))!==null&&n!==void 0?n:[];return new En(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Nn(t)&&(this.unit=""),n!==""&&!PK.test(n)&&(this.num=NaN,this.unit=""),kK.includes(n)&&(this.num=IK(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new En(NaN,""):new En(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new En(NaN,""):new En(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new En(NaN,""):new En(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new En(NaN,""):new En(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Nn(this.num)}}function L2(e){if(e.includes(is))return is;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,o]=(n=pE.exec(t))!==null&&n!==void 0?n:[],l=En.parse(r??""),c=En.parse(o??""),d=i==="*"?l.multiply(c):l.divide(c);if(d.isNaN())return is;t=t.replace(pE,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,m,y,v]=(f=gE.exec(t))!==null&&f!==void 0?f:[],S=En.parse(m??""),T=En.parse(v??""),w=y==="+"?S.add(T):S.subtract(T);if(w.isNaN())return is;t=t.replace(gE,w.toString())}return t}var yE=/\(([^()]*)\)/;function OK(e){for(var t=e,n;(n=yE.exec(t))!=null;){var[,r]=n;t=t.replace(yE,L2(r))}return t}function LK(e){var t=e.replace(/\s+/g,"");return t=OK(t),t=L2(t),t}function jK(e){try{return LK(e)}catch{return is}}function Ug(e){var t=jK(e.slice(5,-1));return t===is?"":t}var UK=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$K=["dx","dy","angle","className","breakAll"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function vE(e,t){if(e==null)return{};var n,r,i=BK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var j2=/[ \f\n\r\t\v\u2028\u2029]+/,U2=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];pt(t)||(n?i=t.toString().split(""):i=t.toString().split(j2));var o=i.map(c=>({word:c,width:tu(c,r).width})),l=n?0:tu("",r).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},qK=(e,t,n,r,i)=>{var{maxLines:o,children:l,style:c,breakAll:d}=e,f=be(o),m=l,y=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce((V,U)=>{var{word:ee,width:ue}=U,q=V[V.length-1];if(q&&(r==null||i||q.width+ue+n<Number(r)))q.words.push(ee),q.width+=ue+n;else{var H={words:[ee],width:ue};V.push(H)}return V},[])},v=y(t),S=re=>re.reduce((K,V)=>K.width>V.width?K:V);if(!f||i)return v;var T=v.length>o||S(v).width>Number(r);if(!T)return v;for(var w="",A=re=>{var K=m.slice(0,re),V=U2({breakAll:d,style:c,children:K+w}).wordsWithComputedWidth,U=y(V),ee=U.length>o||S(U).width>Number(r);return[ee,U]},M=0,P=m.length-1,N=0,O;M<=P&&N<=m.length-1;){var _=Math.floor((M+P)/2),D=_-1,[k,B]=A(D),[j]=A(_);if(!k&&!j&&(M=_+1),k&&j&&(P=_-1),!k&&j){O=B;break}N++}return O||v},xE=e=>{var t=pt(e)?[]:e.toString().split(j2);return[{words:t}]},VK=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:l}=e;if((t||n)&&!fo.isSsr){var c,d,f=U2({breakAll:o,children:r,style:i});if(f){var{wordsWithComputedWidth:m,spaceWidth:y}=f;c=m,d=y}else return xE(r);return qK({breakAll:o,children:r,maxLines:l,style:i},c,d,t,n)}return xE(r)},bE="#808080",j0=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:l=!1,textAnchor:c="start",verticalAnchor:d="end",fill:f=bE}=e,m=vE(e,UK),y=E.useMemo(()=>VK({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:l,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,l,m.style,m.width]),{dx:v,dy:S,angle:T,className:w,breakAll:A}=m,M=vE(m,$K);if(!qr(n)||!qr(r))return null;var P=n+(be(v)?v:0),N=r+(be(S)?S:0),O;switch(d){case"start":O=Ug("calc(".concat(o,")"));break;case"middle":O=Ug("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:O=Ug("calc(".concat(y.length-1," * -").concat(i,")"));break}var _=[];if(l){var D=y[0].width,{width:k}=m;_.push("scale(".concat(be(k)?k/D:1,")"))}return T&&_.push("rotate(".concat(T,", ").concat(P,", ").concat(N,")")),_.length&&(M.transform=_.join(" ")),E.createElement("text",ev({},bt(M,!0),{ref:t,x:P,y:N,className:tt("recharts-text",w),textAnchor:c,fill:f.includes("url")?bE:f}),y.map((B,j)=>{var re=B.words.join(A?"":" ");return E.createElement("tspan",{x:P,dy:j===0?O:i,key:"".concat(re,"-").concat(j)},re)}))});j0.displayName="Text";var zK=["offset"],FK=["labelRef"];function SE(e,t){if(e==null)return{};var n,r,i=HK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(r){GK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GK(e,t,n){return(t=KK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KK(e){var t=YK(e,"string");return typeof t=="symbol"?t:t+""}function YK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fi.apply(null,arguments)}var WK=e=>{var{value:t,formatter:n}=e,r=pt(e.children)?t:e.children;return typeof n=="function"?n(r):r},U0=e=>e!=null&&typeof e=="function",JK=(e,t)=>{var n=Mn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},XK=(e,t,n,r)=>{var{position:i,offset:o,className:l}=e,{cx:c,cy:d,innerRadius:f,outerRadius:m,startAngle:y,endAngle:v,clockWise:S}=r,T=(f+m)/2,w=JK(y,v),A=w>=0?1:-1,M,P;i==="insideStart"?(M=y+A*o,P=S):i==="insideEnd"?(M=v-A*o,P=!S):i==="end"&&(M=v+A*o,P=S),P=w<=0?P:!P;var N=rn(c,d,T,M),O=rn(c,d,T,M+(P?1:-1)*359),_="M".concat(N.x,",").concat(N.y,`
    A`).concat(T,",").concat(T,",0,1,").concat(P?0:1,`,
    `).concat(O.x,",").concat(O.y),D=pt(e.id)?nu("recharts-radial-line-"):e.id;return E.createElement("text",fi({},n,{dominantBaseline:"central",className:tt("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:D,d:_})),E.createElement("textPath",{xlinkHref:"#".concat(D)},t))},QK=(e,t,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:d}=e,f=(c+d)/2;if(n==="outside"){var{x:m,y}=rn(r,i,l+t,f);return{x:m,y,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(o+l)/2,{x:S,y:T}=rn(r,i,v,f);return{x:S,y:T,textAnchor:"middle",verticalAnchor:"middle"}},ZK=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,{x:o,y:l,width:c,height:d}=t,f=d>=0?1:-1,m=f*r,y=f>0?"end":"start",v=f>0?"start":"end",S=c>=0?1:-1,T=S*r,w=S>0?"end":"start",A=S>0?"start":"end";if(i==="top"){var M={x:o+c/2,y:l-f*r,textAnchor:"middle",verticalAnchor:y};return Et(Et({},M),n?{height:Math.max(l-n.y,0),width:c}:{})}if(i==="bottom"){var P={x:o+c/2,y:l+d+m,textAnchor:"middle",verticalAnchor:v};return Et(Et({},P),n?{height:Math.max(n.y+n.height-(l+d),0),width:c}:{})}if(i==="left"){var N={x:o-T,y:l+d/2,textAnchor:w,verticalAnchor:"middle"};return Et(Et({},N),n?{width:Math.max(N.x-n.x,0),height:d}:{})}if(i==="right"){var O={x:o+c+T,y:l+d/2,textAnchor:A,verticalAnchor:"middle"};return Et(Et({},O),n?{width:Math.max(n.x+n.width-O.x,0),height:d}:{})}var _=n?{width:c,height:d}:{};return i==="insideLeft"?Et({x:o+T,y:l+d/2,textAnchor:A,verticalAnchor:"middle"},_):i==="insideRight"?Et({x:o+c-T,y:l+d/2,textAnchor:w,verticalAnchor:"middle"},_):i==="insideTop"?Et({x:o+c/2,y:l+m,textAnchor:"middle",verticalAnchor:v},_):i==="insideBottom"?Et({x:o+c/2,y:l+d-m,textAnchor:"middle",verticalAnchor:y},_):i==="insideTopLeft"?Et({x:o+T,y:l+m,textAnchor:A,verticalAnchor:v},_):i==="insideTopRight"?Et({x:o+c-T,y:l+m,textAnchor:w,verticalAnchor:v},_):i==="insideBottomLeft"?Et({x:o+T,y:l+d-m,textAnchor:A,verticalAnchor:y},_):i==="insideBottomRight"?Et({x:o+c-T,y:l+d-m,textAnchor:w,verticalAnchor:y},_):i&&typeof i=="object"&&(be(i.x)||za(i.x))&&(be(i.y)||za(i.y))?Et({x:o+_r(i.x,c),y:l+_r(i.y,d),textAnchor:"end",verticalAnchor:"end"},_):Et({x:o+c/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)},eY=e=>"cx"in e&&be(e.cx);function Hn(e){var{offset:t=5}=e,n=SE(e,zK),r=Et({offset:t},n),{viewBox:i,position:o,value:l,children:c,content:d,className:f="",textBreakAll:m,labelRef:y}=r,v=Re(TR),S=Bv(),T=o==="center"?S:v??S,w=i||T;if(!w||pt(l)&&pt(c)&&!E.isValidElement(d)&&typeof d!="function")return null;var A=Et(Et({},r),{},{viewBox:w});if(E.isValidElement(d)){var{labelRef:M}=A,P=SE(A,FK);return E.cloneElement(d,P)}var N;if(typeof d=="function"){if(N=E.createElement(d,A),E.isValidElement(N))return N}else N=WK(r);var O=eY(w),_=bt(r,!0);if(O&&(o==="insideStart"||o==="insideEnd"||o==="end"))return XK(r,N,_,w);var D=O?QK(w,r.offset,r.position):ZK(r,w);return E.createElement(j0,fi({ref:y,className:tt("recharts-label",f)},_,D,{breakAll:m}),N)}Hn.displayName="Label";var $2=e=>{var{cx:t,cy:n,angle:r,startAngle:i,endAngle:o,r:l,radius:c,innerRadius:d,outerRadius:f,x:m,y,top:v,left:S,width:T,height:w,clockWise:A,labelViewBox:M}=e;if(M)return M;if(be(T)&&be(w)){if(be(m)&&be(y))return{x:m,y,width:T,height:w};if(be(v)&&be(S))return{x:v,y:S,width:T,height:w}}if(be(m)&&be(y))return{x:m,y,width:0,height:0};if(be(t)&&be(n))return{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:A};if(e.viewBox)return e.viewBox},tY=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(Hn,fi({key:"label-implicit"},r)):qr(e)?E.createElement(Hn,fi({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===Hn?E.cloneElement(e,Et({key:"label-implicit"},r)):E.createElement(Hn,fi({key:"label-implicit",content:e},r)):U0(e)?E.createElement(Hn,fi({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(Hn,fi({},e,{key:"label-implicit"},r)):null},nY=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var{children:i,labelRef:o}=t,l=$2(t),c=Tv(i,Hn).map((f,m)=>E.cloneElement(f,{viewBox:n||l,key:"label-".concat(m)}));if(!r)return c;var d=tY(t.label,n||l,o);return[d,...c]};Hn.parseViewBox=$2;Hn.renderCallByParent=nY;var $g={},Bg={},TE;function rY(){return TE||(TE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t}(Bg)),Bg}var qg={},wE;function iY(){return wE||(wE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t}(qg)),qg}var AE;function aY(){return AE||(AE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rY(),n=iY(),r=Mv();function i(o){if(r.isArrayLike(o))return t.last(n.toArray(o))}e.last=i}($g)),$g}var Vg,EE;function oY(){return EE||(EE=1,Vg=aY().last),Vg}var sY=oY();const lY=Hr(sY);var uY=["valueAccessor"],cY=["data","dataKey","clockWise","id","textBreakAll"];function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(null,arguments)}function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(n),!0).forEach(function(r){fY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fY(e,t,n){return(t=dY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dY(e){var t=mY(e,"string");return typeof t=="symbol"?t:t+""}function mY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NE(e,t){if(e==null)return{};var n,r,i=hY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var pY=e=>Array.isArray(e.value)?lY(e.value):e.value;function gi(e){var{valueAccessor:t=pY}=e,n=NE(e,uY),{data:r,dataKey:i,clockWise:o,id:l,textBreakAll:c}=n,d=NE(n,cY);return!r||!r.length?null:E.createElement(hn,{className:"recharts-label-list"},r.map((f,m)=>{var y=pt(i)?t(f,m):kt(f&&f.payload,i),v=pt(l)?{}:{id:"".concat(l,"-").concat(m)};return E.createElement(Hn,cd({},bt(f,!0),d,v,{parentViewBox:f.parentViewBox,value:y,textBreakAll:c,viewBox:Hn.parseViewBox(pt(o)?f:_E(_E({},f),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}gi.displayName="LabelList";function gY(e,t){return e?e===!0?E.createElement(gi,{key:"labelList-implicit",data:t}):E.isValidElement(e)||U0(e)?E.createElement(gi,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?E.createElement(gi,cd({data:t},e,{key:"labelList-implicit"})):null:null}function yY(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:r}=e,i=Tv(r,gi).map((l,c)=>E.cloneElement(l,{data:t,key:"labelList-".concat(c)}));if(!n)return i;var o=gY(e.label,t);return[o,...i]}gi.renderCallByParent=yY;function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}var $0=e=>{var{cx:t,cy:n,r,className:i}=e,o=tt("recharts-dot",i);return t===+t&&n===+n&&r===+r?E.createElement("circle",tv({},Ti(e),Sv(e),{className:o,cx:t,cy:n,r})):null},vY={radiusAxis:{},angleAxis:{}},B2=Xn({name:"polarAxis",initialState:vY,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:yee,removeRadiusAxis:vee,addAngleAxis:xee,removeAngleAxis:bee}=B2.actions,xY=B2.reducer,zg={},RE;function bY(){return RE||(RE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t}(zg)),zg}var Fg,PE;function SY(){return PE||(PE=1,Fg=bY().isPlainObject),Fg}var CY=SY();const TY=Hr(CY);function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fd.apply(null,arguments)}var DE=(e,t,n,r,i)=>{var o=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-o/2,",").concat(t+i),l+="L ".concat(e+n-o/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},wY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},AY=e=>{var t=pr(e,wY),n=E.useRef(),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var A=n.current.getTotalLength();A&&i(A)}catch{}},[]);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:f,className:m}=t,{animationEasing:y,animationDuration:v,animationBegin:S,isUpdateAnimationActive:T}=t;if(o!==+o||l!==+l||c!==+c||d!==+d||f!==+f||c===0&&d===0||f===0)return null;var w=tt("recharts-trapezoid",m);return T?E.createElement(Wf,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:f,x:o,y:l},to:{upperWidth:c,lowerWidth:d,height:f,x:o,y:l},duration:v,animationEasing:y,isActive:T},A=>{var{upperWidth:M,lowerWidth:P,height:N,x:O,y:_}=A;return E.createElement(Wf,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:v,easing:y},E.createElement("path",fd({},bt(t,!0),{className:w,d:DE(O,_,M,P,N),ref:n})))}):E.createElement("g",null,E.createElement("path",fd({},bt(t,!0),{className:w,d:DE(o,l,c,d,f)})))},EY=["option","shapeType","propTransformer","activeClassName","isActive"];function MY(e,t){if(e==null)return{};var n,r,i=_Y(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _Y(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function kE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(n),!0).forEach(function(r){NY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NY(e,t,n){return(t=RY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RY(e){var t=PY(e,"string");return typeof t=="symbol"?t:t+""}function PY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DY(e,t){return dd(dd({},t),e)}function kY(e,t){return e==="symbols"}function IE(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(yN,n);case"trapezoid":return E.createElement(AY,n);case"sector":return E.createElement(bN,n);case"symbols":if(kY(t))return E.createElement(x_,n);break;default:return null}}function IY(e){return E.isValidElement(e)?e.props:e}function OY(e){var{option:t,shapeType:n,propTransformer:r=DY,activeClassName:i="recharts-active-shape",isActive:o}=e,l=MY(e,EY),c;if(E.isValidElement(t))c=E.cloneElement(t,dd(dd({},l),IY(t)));else if(typeof t=="function")c=t(l);else if(TY(t)&&typeof t!="boolean"){var d=r(t,l);c=E.createElement(IE,{shapeType:n,elementProps:d})}else{var f=l;c=E.createElement(IE,{shapeType:n,elementProps:f})}return o?E.createElement(hn,{className:i},c):c}var q2=(e,t)=>{var n=Kt();return(r,i)=>o=>{e==null||e(r,i,o),n(c2({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},V2=e=>{var t=Kt();return(n,r)=>i=>{e==null||e(n,r,i),t(B7())}},z2=(e,t)=>{var n=Kt();return(r,i)=>o=>{e==null||e(r,i,o),n(q7({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function B0(e){var{fn:t,args:n}=e,r=Kt(),i=pn();return E.useEffect(()=>{if(!i){var o=t(n);return r(j7(o)),()=>{r(U7(o))}}},[t,n,r,i]),null}var LY=()=>{};function q0(e){var{legendPayload:t}=e,n=Kt(),r=pn();return E.useEffect(()=>r?LY:(n(_z(t)),()=>{n(Nz(t))}),[n,r,t]),null}function V0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(nu(t)),r=E.useRef(e);return r.current!==e&&(n.current=nu(t),r.current=e),n.current}var Hg,jY=()=>{var[e]=E.useState(()=>nu("uid-"));return e},UY=(Hg=Bk.useId)!==null&&Hg!==void 0?Hg:jY;function $Y(e,t){var n=UY();return t||(e?"".concat(e,"-").concat(n):n)}var BY=E.createContext(void 0),z0=e=>{var{id:t,type:n,children:r}=e,i=$Y("recharts-".concat(n),t);return E.createElement(BY.Provider,{value:i},r(i))},qY={cartesianItems:[],polarItems:[]},F2=Xn({name:"graphicalItems",initialState:qY,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=hi(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=hi(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=hi(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:VY,replaceCartesianGraphicalItem:zY,removeCartesianGraphicalItem:FY,addPolarGraphicalItem:See,removePolarGraphicalItem:Cee}=F2.actions,HY=F2.reducer;function F0(e){var t=Kt(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(VY(e)):n.current!==e&&t(zY({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(FY(n.current)),n.current=null)},[t]),null}function GY(){}var KY={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},OE={t:0},Gg={t:1};function H0(e){var t=pr(e,KY),{isActive:n,canBegin:r,duration:i,easing:o,begin:l,onAnimationEnd:c,onAnimationStart:d,children:f}=t,m=gN("JavascriptAnimate",t.animationManager),[y,v]=E.useState(n?OE:Gg),S=E.useRef(null);return E.useEffect(()=>{n||v(Gg)},[n]),E.useEffect(()=>{if(!n||!r)return GY;var T=pN(OE,Gg,mN(o),i,v,m.getTimeoutController()),w=()=>{S.current=T()};return m.start([d,l,w,i,c]),()=>{m.stop(),S.current&&S.current(),c()}},[n,r,i,o,l,d,c,m]),f(y.t)}var YY=ne([Yt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),WY=ne([YY,wi,Ai],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Zd=()=>Re(WY),JY=()=>Re(M9);function LE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(n),!0).forEach(function(r){XY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XY(e,t,n){return(t=QY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QY(e){var t=ZY(e,"string");return typeof t=="symbol"?t:t+""}function ZY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eW=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:o}=e;if(i===!1||t.x==null||t.y==null)return null;var l=jE(jE({index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},bt(i,!1)),Sv(i)),c;return E.isValidElement(i)?c=E.cloneElement(i,l):typeof i=="function"?c=i(l):c=E.createElement($0,l),E.createElement(hn,{className:"recharts-active-dot"},c)};function nv(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i}=e,o=Re(ao),l=JY();if(t==null||l==null)return null;var c=t.find(d=>l.includes(d.payload));return pt(c)?null:eW({point:c,childIndex:Number(o),mainColor:n,dataKey:i,activeDot:r})}var tW="Invariant failed";function nW(e,t){throw new Error(tW)}var rW=["x","y"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(null,arguments)}function UE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(n),!0).forEach(function(r){iW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iW(e,t,n){return(t=aW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aW(e){var t=oW(e,"string");return typeof t=="symbol"?t:t+""}function oW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sW(e,t){if(e==null)return{};var n,r,i=lW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function uW(e,t){var{x:n,y:r}=e,i=sW(e,rW),o="".concat(n),l=parseInt(o,10),c="".concat(r),d=parseInt(c,10),f="".concat(t.height||i.height),m=parseInt(f,10),y="".concat(t.width||i.width),v=parseInt(y,10);return Wl(Wl(Wl(Wl(Wl({},t),i),l?{x:l}:{}),d?{y:d}:{}),{},{height:m,width:v,name:t.name,radius:t.radius})}function H2(e){return E.createElement(OY,rv({shapeType:"rectangle",propTransformer:uW,activeClassName:"recharts-active-bar"},e))}var cW=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(be(t))return t;var o=be(r)||pt(r);return o?t(r,i):(o||nW(),n)}},fW={},G2=Xn({name:"errorBars",initialState:fW,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Tee,removeErrorBar:wee}=G2.actions,dW=G2.reducer,mW=["children"];function hW(e,t){if(e==null)return{};var n,r,i=pW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function pW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gW={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},yW=E.createContext(gW);function K2(e){var{children:t}=e,n=hW(e,mW);return E.createElement(yW.Provider,{value:n},t)}function em(e,t){var n,r,i=Re(f=>Mi(f,e)),o=Re(f=>ga(f,t)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Vn.allowDataOverflow,c=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:zn.allowDataOverflow,d=l||c;return{needClip:d,needClipX:l,needClipY:c}}function G0(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=Zd(),{needClipX:o,needClipY:l,needClip:c}=em(t,n);if(!c)return null;var{x:d,y:f,width:m,height:y}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:o?d:d-m/2,y:l?f:f-y/2,width:o?m:m*2,height:l?y:y*2}))}var vW=["onMouseEnter","onMouseLeave","onClick"],xW=["value","background","tooltipPosition"],bW=["id"],SW=["onMouseEnter","onClick","onMouseLeave"];function vs(){return vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vs.apply(null,arguments)}function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(n),!0).forEach(function(r){CW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CW(e,t,n){return(t=TW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TW(e){var t=wW(e,"string");return typeof t=="symbol"?t:t+""}function wW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function md(e,t){if(e==null)return{};var n,r,i=AW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function AW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var EW=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:Es(n,t),payload:e}]};function MW(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Es(o,t),hide:l,type:e.tooltipType,color:e.fill,unit:c}}}function _W(e){var t=Re(ao),{data:n,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:l,onMouseLeave:c,onClick:d}=o,f=md(o,vW),m=q2(l,r),y=V2(c),v=z2(d,r);if(!i||n==null)return null;var S=bt(i,!1);return E.createElement(E.Fragment,null,n.map((T,w)=>{var{value:A,background:M,tooltipPosition:P}=T,N=md(T,xW);if(!M)return null;var O=m(T,w),_=y(T,w),D=v(T,w),k=fn(fn(fn(fn(fn({option:i,isActive:String(w)===t},N),{},{fill:"#eee"},M),S),Cv(f,T,w)),{},{onMouseEnter:O,onMouseLeave:_,onClick:D,dataKey:r,index:w,className:"recharts-bar-background-rectangle"});return E.createElement(H2,vs({key:"background-bar-".concat(w)},k))}))}function Y2(e){var{data:t,props:n,showLabels:r}=e,i=Ti(n),{id:o}=i,l=md(i,bW),{shape:c,dataKey:d,activeBar:f}=n,m=Re(ao),y=Re(T2),{onMouseEnter:v,onClick:S,onMouseLeave:T}=n,w=md(n,SW),A=q2(v,d),M=V2(T),P=z2(S,d);return t?E.createElement(E.Fragment,null,t.map((N,O)=>{var _=f&&String(O)===m&&(y==null||d===y),D=_?f:c,k=fn(fn(fn({},l),N),{},{isActive:_,option:D,index:O,dataKey:d});return E.createElement(hn,vs({className:"recharts-bar-rectangle"},Cv(w,N,O),{onMouseEnter:A(N,O),onMouseLeave:M(N,O),onClick:P(N,O),key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(O)}),E.createElement(H2,k))}),r&&gi.renderCallByParent(n,t)):null}function NW(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:l,animationDuration:c,animationEasing:d,onAnimationEnd:f,onAnimationStart:m}=t,y=n.current,v=V0(t,"recharts-bar-"),[S,T]=E.useState(!1),w=E.useCallback(()=>{typeof f=="function"&&f(),T(!1)},[f]),A=E.useCallback(()=>{typeof m=="function"&&m(),T(!0)},[m]);return E.createElement(H0,{begin:l,duration:c,isActive:o,easing:d,onAnimationEnd:w,onAnimationStart:A,key:v},M=>{var P=M===1?r:r==null?void 0:r.map((N,O)=>{var _=y&&y[O];if(_)return fn(fn({},N),{},{x:nn(_.x,N.x,M),y:nn(_.y,N.y,M),width:nn(_.width,N.width,M),height:nn(_.height,N.height,M)});if(i==="horizontal"){var D=nn(0,N.height,M);return fn(fn({},N),{},{y:N.y+N.height-D,height:D})}var k=nn(0,N.width,M);return fn(fn({},N),{},{width:k})});return M>0&&(n.current=P??null),P==null?null:E.createElement(hn,null,E.createElement(Y2,{props:t,data:P,showLabels:!S}))})}function RW(e){var{data:t,isAnimationActive:n}=e,r=E.useRef(null);return n&&t&&t.length&&(r.current==null||r.current!==t)?E.createElement(NW,{previousRectanglesRef:r,props:e}):E.createElement(Y2,{props:e,data:t,showLabels:!0})}var W2=0,PW=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:kt(e,t)}};class DW extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:l,needClip:c,background:d,id:f}=this.props;if(t)return null;var m=tt("recharts-bar",i),y=f;return E.createElement(hn,{className:m,id:f},c&&E.createElement("defs",null,E.createElement(G0,{clipPathId:y,xAxisId:o,yAxisId:l})),E.createElement(hn,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(y,")"):void 0},E.createElement(_W,{data:n,dataKey:r,background:d,allOtherBarProps:this.props}),E.createElement(RW,this.props)),this.props.children)}}var kW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!fo.isSsr,legendType:"rect",minPointSize:W2,xAxisId:0,yAxisId:0};function IW(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:d,animationEasing:f,isAnimationActive:m}=e,{needClip:y}=em(t,n),v=vu(),S=pn(),T=Tv(e.children,Pu),w=Re(P=>sJ(P,t,n,S,e.id,T));if(v!=="vertical"&&v!=="horizontal")return null;var A,M=w==null?void 0:w[0];return M==null||M.height==null||M.width==null?A=0:A=v==="vertical"?M.height/2:M.width/2,E.createElement(K2,{xAxisId:t,yAxisId:n,data:w,dataPointFormatter:PW,errorBarOffset:A},E.createElement(DW,vs({},e,{layout:v,needClip:y,data:w,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:d,animationEasing:f,isAnimationActive:m})))}function OW(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:l,yAxis:c,xAxisTicks:d,yAxisTicks:f,stackedData:m,displayedData:y,offset:v,cells:S}=e,T=t==="horizontal"?c:l,w=m?T.scale.domain():null,A=cz({numericAxis:T});return y.map((M,P)=>{var N,O,_,D,k,B;m?N=az(m[P],w):(N=kt(M,n),Array.isArray(N)||(N=[A,N]));var j=cW(r,W2)(N[1],P);if(t==="horizontal"){var re,[K,V]=[c.scale(N[0]),c.scale(N[1])];O=_1({axis:l,ticks:d,bandSize:o,offset:i.offset,entry:M,index:P}),_=(re=V??K)!==null&&re!==void 0?re:void 0,D=i.size;var U=K-V;if(k=Nn(U)?0:U,B={x:O,y:v.top,width:D,height:v.height},Math.abs(j)>0&&Math.abs(k)<Math.abs(j)){var ee=Mn(k||j)*(Math.abs(j)-Math.abs(k));_-=ee,k+=ee}}else{var[ue,q]=[l.scale(N[0]),l.scale(N[1])];if(O=ue,_=_1({axis:c,ticks:f,bandSize:o,offset:i.offset,entry:M,index:P}),D=q-ue,k=i.size,B={x:v.left,y:_,width:v.width,height:k},Math.abs(j)>0&&Math.abs(D)<Math.abs(j)){var H=Mn(D||j)*(Math.abs(j)-Math.abs(D));D+=H}}if(O==null||_==null||D==null||k==null)return null;var ae=fn(fn({},M),{},{x:O,y:_,width:D,height:k,value:m?N:N[1],payload:M,background:B,tooltipPosition:{x:O+D/2,y:_+k/2}},S&&S[P]&&S[P].props);return ae}).filter(Boolean)}function tm(e){var t=pr(e,kW),n=pn();return E.createElement(z0,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(q0,{legendPayload:EW(t)}),E.createElement(B0,{fn:MW,args:t}),E.createElement(F0,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:rN(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement(IW,vs({},t,{id:r}))))}tm.displayName="Bar";function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(n),!0).forEach(function(r){LW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LW(e,t,n){return(t=jW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jW(e){var t=UW(e,"string");return typeof t=="symbol"?t:t+""}function UW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $W=(e,t)=>t,BW=(e,t,n)=>n,qW=(e,t,n,r)=>r,VW=(e,t,n,r,i)=>i,Du=ne([Au,VW],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),zW=ne([Du],e=>e==null?void 0:e.maxBarSize),FW=(e,t,n,r,i,o)=>o,qE=(e,t,n)=>{var r=n??e;if(!pt(r))return _r(r,t,0)},HW=ne([Ge,Au,$W,BW,qW],(e,t,n,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),GW=(e,t,n,r)=>{var i=Ge(e);return i==="horizontal"?fu(e,"yAxis",n,r):fu(e,"xAxis",t,r)},KW=(e,t,n)=>{var r=Ge(e);return r==="horizontal"?GA(e,"xAxis",t):GA(e,"yAxis",n)},YW=(e,t,n)=>{var r={},i=e.filter(Kd),o=e.filter(f=>f.stackId==null),l=i.reduce((f,m)=>(f[m.stackId]||(f[m.stackId]=[]),f[m.stackId].push(m),f),r),c=Object.entries(l).map(f=>{var[m,y]=f,v=y.map(T=>T.dataKey),S=qE(t,n,y[0].barSize);return{stackId:m,dataKeys:v,barSize:S}}),d=o.map(f=>{var m=[f.dataKey].filter(v=>v!=null),y=qE(t,n,f.barSize);return{stackId:void 0,dataKeys:m,barSize:y}});return[...c,...d]},WW=ne([HW,jG,KW],YW),JW=(e,t,n,r,i)=>{var o,l,c=Du(e,t,n,r,i);if(c!=null){var d=Ge(e),f=gR(e),{maxBarSize:m}=c,y=pt(m)?f:m,v,S;return d==="horizontal"?(v=Fr(e,"xAxis",t,r),S=zr(e,"xAxis",t,r)):(v=Fr(e,"yAxis",n,r),S=zr(e,"yAxis",n,r)),(o=(l=ro(v,S,!0))!==null&&l!==void 0?l:y)!==null&&o!==void 0?o:0}},J2=(e,t,n,r)=>{var i=Ge(e),o,l;return i==="horizontal"?(o=Fr(e,"xAxis",t,r),l=zr(e,"xAxis",t,r)):(o=Fr(e,"yAxis",n,r),l=zr(e,"yAxis",n,r)),ro(o,l)};function XW(e,t,n,r,i){var o=r.length;if(!(o<1)){var l=_r(e,n,0,!0),c,d=[];if(an(r[0].barSize)){var f=!1,m=n/o,y=r.reduce((M,P)=>M+(P.barSize||0),0);y+=(o-1)*l,y>=n&&(y-=(o-1)*l,l=0),y>=n&&m>0&&(f=!0,m*=.9,y=o*m);var v=(n-y)/2>>0,S={offset:v-l,size:0};c=r.reduce((M,P)=>{var N,O={stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:S.offset+S.size+l,size:f?m:(N=P.barSize)!==null&&N!==void 0?N:0}},_=[...M,O];return S=_[_.length-1].position,_},d)}else{var T=_r(t,n,0,!0);n-2*T-(o-1)*l<=0&&(l=0);var w=(n-2*T-(o-1)*l)/o;w>1&&(w>>=0);var A=an(i)?Math.min(w,i):w;c=r.reduce((M,P,N)=>[...M,{stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:T+(w+l)*N+(w-A)/2,size:A}}],d)}return c}}var QW=(e,t,n,r,i,o,l)=>{var c=pt(l)?t:l,d=XW(n,r,i!==o?i:o,e,c);return i!==o&&d!=null&&(d=d.map(f=>xf(xf({},f),{},{position:xf(xf({},f.position),{},{offset:f.position.offset-i/2})}))),d},ZW=ne([WW,gR,LG,yR,JW,J2,zW],QW),eJ=(e,t,n,r)=>Fr(e,"xAxis",t,r),tJ=(e,t,n,r)=>Fr(e,"yAxis",n,r),nJ=(e,t,n,r)=>zr(e,"xAxis",t,r),rJ=(e,t,n,r)=>zr(e,"yAxis",n,r),iJ=ne([ZW,Du],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),aJ=(e,t)=>{var n=Gd(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:o}=i;if(o)return o.find(l=>l.key===n)}}}},oJ=ne([GW,Du],aJ),sJ=ne([Yt,eJ,tJ,nJ,rJ,iJ,Ge,Tu,J2,oJ,Du,FW],(e,t,n,r,i,o,l,c,d,f,m,y)=>{var{chartData:v,dataStartIndex:S,dataEndIndex:T}=c;if(!(m==null||o==null||l!=="horizontal"&&l!=="vertical"||t==null||n==null||r==null||i==null||d==null)){var{data:w}=m,A;if(w!=null&&w.length>0?A=w:A=v==null?void 0:v.slice(S,T+1),A!=null)return OW({layout:l,barSettings:m,pos:o,bandSize:d,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,stackedData:f,displayedData:A,offset:e,cells:y})}}),lJ=e=>{var{chartData:t}=e,n=Kt(),r=pn();return E.useEffect(()=>r?()=>{}:(n(nE(t)),()=>{n(nE(void 0))}),[t,n,r]),null},VE={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},X2=Xn({name:"brush",initialState:VE,reducers:{setBrushSettings(e,t){return t.payload==null?VE:t.payload}}}),{setBrushSettings:Aee}=X2.actions,uJ=X2.reducer;function cJ(e,t,n){return(t=fJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fJ(e){var t=dJ(e,"string");return typeof t=="symbol"?t:t+""}function dJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class K0{static create(t){return new K0(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}cJ(K0,"EPS",1e-4);function mJ(e){return(e%180+180)%180}var hJ=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=mJ(i),l=o*Math.PI/180,c=Math.atan(r/n),d=l>c&&l<Math.PI-c?r/Math.sin(l):n/Math.cos(l);return Math.abs(d)},pJ={dots:[],areas:[],lines:[]},Q2=Xn({name:"referenceElements",initialState:pJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=hi(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=hi(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=hi(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Eee,removeDot:Mee,addArea:_ee,removeArea:Nee,addLine:Ree,removeLine:Pee}=Q2.actions,gJ=Q2.reducer,yJ=E.createContext(void 0),vJ=e=>{var{children:t}=e,[n]=E.useState("".concat(nu("recharts"),"-clip")),r=Zd();if(r==null)return null;var{x:i,y:o,width:l,height:c}=r;return E.createElement(yJ.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:o,height:c,width:l}))),t)};function Kg(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Z2(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function xJ(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return hJ(r,n)}function bJ(e,t,n){var r=n==="width",{x:i,y:o,width:l,height:c}=e;return t===1?{start:r?i:o,end:r?i+l:o+c}:{start:r?i+l:o+c,end:r?i:o}}function hd(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function SJ(e,t){return Z2(e,t+1)}function CJ(e,t,n,r,i){for(var o=(r||[]).slice(),{start:l,end:c}=t,d=0,f=1,m=l,y=function(){var T=r==null?void 0:r[d];if(T===void 0)return{v:Z2(r,f)};var w=d,A,M=()=>(A===void 0&&(A=n(T,w)),A),P=T.coordinate,N=d===0||hd(e,P,M,m,c);N||(d=0,m=l,f+=1),N&&(m=P+e*(M()/2+i),d+=f)},v;f<=o.length;)if(v=y(),v)return v.v;return[]}function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(r){TJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TJ(e,t,n){return(t=wJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wJ(e){var t=AJ(e,"string");return typeof t=="symbol"?t:t+""}function AJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EJ(e,t,n,r,i){for(var o=(r||[]).slice(),l=o.length,{start:c}=t,{end:d}=t,f=function(v){var S=o[v],T,w=()=>(T===void 0&&(T=n(S,v)),T);if(v===l-1){var A=e*(S.coordinate+e*w()/2-d);o[v]=S=cn(cn({},S),{},{tickCoord:A>0?S.coordinate-A*e:S.coordinate})}else o[v]=S=cn(cn({},S),{},{tickCoord:S.coordinate});var M=hd(e,S.tickCoord,w,c,d);M&&(d=S.tickCoord-e*(w()/2+i),o[v]=cn(cn({},S),{},{isShow:!0}))},m=l-1;m>=0;m--)f(m);return o}function MJ(e,t,n,r,i,o){var l=(r||[]).slice(),c=l.length,{start:d,end:f}=t;if(o){var m=r[c-1],y=n(m,c-1),v=e*(m.coordinate+e*y/2-f);l[c-1]=m=cn(cn({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate});var S=hd(e,m.tickCoord,()=>y,d,f);S&&(f=m.tickCoord-e*(y/2+i),l[c-1]=cn(cn({},m),{},{isShow:!0}))}for(var T=o?c-1:c,w=function(P){var N=l[P],O,_=()=>(O===void 0&&(O=n(N,P)),O);if(P===0){var D=e*(N.coordinate-e*_()/2-d);l[P]=N=cn(cn({},N),{},{tickCoord:D<0?N.coordinate-D*e:N.coordinate})}else l[P]=N=cn(cn({},N),{},{tickCoord:N.coordinate});var k=hd(e,N.tickCoord,_,d,f);k&&(d=N.tickCoord+e*(_()/2+i),l[P]=cn(cn({},N),{},{isShow:!0}))},A=0;A<T;A++)w(A);return l}function Y0(e,t,n){var{tick:r,ticks:i,viewBox:o,minTickGap:l,orientation:c,interval:d,tickFormatter:f,unit:m,angle:y}=e;if(!i||!i.length||!r)return[];if(be(d)||fo.isSsr){var v;return(v=SJ(i,be(d)?d:0))!==null&&v!==void 0?v:[]}var S=[],T=c==="top"||c==="bottom"?"width":"height",w=m&&T==="width"?tu(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},A=(N,O)=>{var _=typeof f=="function"?f(N.value,O):N.value;return T==="width"?xJ(tu(_,{fontSize:t,letterSpacing:n}),w,y):tu(_,{fontSize:t,letterSpacing:n})[T]},M=i.length>=2?Mn(i[1].coordinate-i[0].coordinate):1,P=bJ(o,M,T);return d==="equidistantPreserveStart"?CJ(M,P,A,i,l):(d==="preserveStart"||d==="preserveStartEnd"?S=MJ(M,P,A,i,l,d==="preserveStartEnd"):S=EJ(M,P,A,i,l),S.filter(N=>N.isShow))}var _J=["viewBox"],NJ=["viewBox"];function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},as.apply(null,arguments)}function FE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(n),!0).forEach(function(r){W0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HE(e,t){if(e==null)return{};var n,r,i=RJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function RJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function W0(e,t,n){return(t=PJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PJ(e){var t=DJ(e,"string");return typeof t=="symbol"?t:t+""}function DJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ya extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=HE(t,_J),o=this.props,{viewBox:l}=o,c=HE(o,NJ);return!Kg(r,l)||!Kg(i,c)||!Kg(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:o,orientation:l,tickSize:c,mirror:d,tickMargin:f}=this.props,m,y,v,S,T,w,A=d?-1:1,M=t.tickSize||c,P=be(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":m=y=t.coordinate,S=r+ +!d*o,v=S-A*M,w=v-A*f,T=P;break;case"left":v=S=t.coordinate,y=n+ +!d*i,m=y-A*M,T=m-A*f,w=P;break;case"right":v=S=t.coordinate,y=n+ +d*i,m=y+A*M,T=m+A*f,w=P;break;default:m=y=t.coordinate,S=r+ +d*o,v=S+A*M,w=v+A*f,T=P;break}return{line:{x1:m,y1:v,x2:y,y2:S},tick:{x:T,y:w}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,r;switch(t){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:o,mirror:l,axisLine:c}=this.props,d=$t($t($t({},bt(this.props,!1)),bt(c,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!l||o==="bottom"&&l);d=$t($t({},d),{},{x1:t,y1:n+f*i,x2:t+r,y2:n+f*i})}else{var m=+(o==="left"&&!l||o==="right"&&l);d=$t($t({},d),{},{x1:t+m*r,y1:n,x2:t+m*r,y2:n+i})}return E.createElement("line",as({},d,{className:tt("recharts-cartesian-axis-line",eo(c,"className"))}))}static renderTickItem(t,n,r){var i,o=tt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,$t($t({},n),{},{className:o}));else if(typeof t=="function")i=t($t($t({},n),{},{className:o}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=tt(l,t.className)),i=E.createElement(j0,as({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:l,tickFormatter:c,unit:d,padding:f}=this.props,m=Y0($t($t({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),S=Ti(this.props),T=bt(l,!1),w=$t($t({},S),{},{fill:"none"},bt(i,!1)),A=m.map((M,P)=>{var{line:N,tick:O}=this.getTickLineCoord(M),_=$t($t($t($t({textAnchor:y,verticalAnchor:v},S),{},{stroke:"none",fill:o},T),O),{},{index:P,payload:M,visibleTicksCount:m.length,tickFormatter:c,padding:f});return E.createElement(hn,as({className:"recharts-cartesian-axis-tick",key:"tick-".concat(M.value,"-").concat(M.coordinate,"-").concat(M.tickCoord)},Cv(this.props,M,P)),i&&E.createElement("line",as({},w,N,{className:tt("recharts-cartesian-axis-tick-line",eo(i,"className"))})),l&&ya.renderTickItem(l,_,"".concat(typeof c=="function"?c(M.value,P):M.value).concat(d||"")))});return A.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},A):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(hn,{className:tt("recharts-cartesian-axis",i),ref:c=>{if(c){var d=c.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var f=d[0];if(f){var m=window.getComputedStyle(f).fontSize,y=window.getComputedStyle(f).letterSpacing;(m!==this.state.fontSize||y!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),Hn.renderCallByParent(this.props))}}W0(ya,"displayName","CartesianAxis");W0(ya,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var kJ=["x1","y1","x2","y2","key"],IJ=["offset"],OJ=["xAxisId","yAxisId"],LJ=["xAxisId","yAxisId"];function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(r){jJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jJ(e,t,n){return(t=UJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UJ(e){var t=$J(e,"string");return typeof t=="symbol"?t:t+""}function $J(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(null,arguments)}function pd(e,t){if(e==null)return{};var n,r,i=BJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var qJ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:l,ry:c}=e;return E.createElement("rect",{x:r,y:i,ry:c,width:o,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function eP(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:o,y2:l,key:c}=t,d=pd(t,kJ),f=Ti(d),{offset:m}=f,y=pd(f,IJ);n=E.createElement("line",Ka({},y,{x1:r,y1:i,x2:o,y2:l,fill:"none",key:c}))}return n}function VJ(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:l}=e,c=pd(e,OJ),d=i.map((f,m)=>{var y=dn(dn({},c),{},{x1:t,y1:f,x2:t+n,y2:f,key:"line-".concat(m),index:m});return eP(r,y)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function zJ(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:l}=e,c=pd(e,LJ),d=i.map((f,m)=>{var y=dn(dn({},c),{},{x1:f,y1:t,x2:f,y2:t+n,key:"line-".concat(m),index:m});return eP(r,y)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function FJ(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:o,height:l,horizontalPoints:c,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var f=c.map(y=>Math.round(y+i-i)).sort((y,v)=>y-v);i!==f[0]&&f.unshift(0);var m=f.map((y,v)=>{var S=!f[v+1],T=S?i+l-y:f[v+1]-y;if(T<=0)return null;var w=v%t.length;return E.createElement("rect",{key:"react-".concat(v),y,x:r,height:T,width:o,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function HJ(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:l,height:c,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var f=d.map(y=>Math.round(y+i-i)).sort((y,v)=>y-v);i!==f[0]&&f.unshift(0);var m=f.map((y,v)=>{var S=!f[v+1],T=S?i+l-y:f[v+1]-y;if(T<=0)return null;var w=v%n.length;return E.createElement("rect",{key:"react-".concat(v),x:y,y:o,width:T,height:c,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var GJ=(e,t)=>{var{xAxis:n,width:r,height:i,offset:o}=e;return tN(Y0(dn(dn(dn({},ya.defaultProps),n),{},{ticks:nN(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},KJ=(e,t)=>{var{yAxis:n,width:r,height:i,offset:o}=e;return tN(Y0(dn(dn(dn({},ya.defaultProps),n),{},{ticks:nN(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},YJ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function iv(e){var t=sN(),n=lN(),r=oN(),i=dn(dn({},pr(e,YJ)),{},{x:be(e.x)?e.x:r.left,y:be(e.y)?e.y:r.top,width:be(e.width)?e.width:r.width,height:be(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:l,x:c,y:d,width:f,height:m,syncWithTicks:y,horizontalValues:v,verticalValues:S}=i,T=pn(),w=Re(j=>KA(j,"xAxis",o,T)),A=Re(j=>KA(j,"yAxis",l,T));if(!be(f)||f<=0||!be(m)||m<=0||!be(c)||c!==+c||!be(d)||d!==+d)return null;var M=i.verticalCoordinatesGenerator||GJ,P=i.horizontalCoordinatesGenerator||KJ,{horizontalPoints:N,verticalPoints:O}=i;if((!N||!N.length)&&typeof P=="function"){var _=v&&v.length,D=P({yAxis:A?dn(dn({},A),{},{ticks:_?v:A.ticks}):void 0,width:t,height:n,offset:r},_?!0:y);eu(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}if((!O||!O.length)&&typeof M=="function"){var k=S&&S.length,B=M({xAxis:w?dn(dn({},w),{},{ticks:k?S:w.ticks}):void 0,width:t,height:n,offset:r},k?!0:y);eu(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(O=B)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(qJ,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(FJ,Ka({},i,{horizontalPoints:N})),E.createElement(HJ,Ka({},i,{verticalPoints:O})),E.createElement(VJ,Ka({},i,{offset:r,horizontalPoints:N,xAxis:w,yAxis:A})),E.createElement(zJ,Ka({},i,{offset:r,verticalPoints:O,xAxis:w,yAxis:A})))}iv.displayName="CartesianGrid";var tP=(e,t,n,r)=>Fr(e,"xAxis",t,r),nP=(e,t,n,r)=>zr(e,"xAxis",t,r),rP=(e,t,n,r)=>Fr(e,"yAxis",n,r),iP=(e,t,n,r)=>zr(e,"yAxis",n,r),WJ=ne([Ge,tP,rP,nP,iP],(e,t,n,r,i)=>Gr(e,"xAxis")?ro(t,r,!1):ro(n,i,!1)),JJ=(e,t,n,r,i)=>i;function XJ(e){return e.type==="line"}var QJ=ne([Au,JJ],(e,t)=>e.filter(XJ).find(n=>n.id===t)),ZJ=ne([Ge,tP,rP,nP,iP,QJ,WJ,Tu],(e,t,n,r,i,o,l,c)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:m}=c;if(!(o==null||t==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null)){var{dataKey:y,data:v}=o,S;if(v!=null&&v.length>0?S=v:S=d==null?void 0:d.slice(f,m+1),S!=null)return bX({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:y,bandSize:l,displayedData:S})}}),eX=["id"],tX=["type","layout","connectNulls","needClip"],nX=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(r){rX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rX(e,t,n){return(t=iX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iX(e){var t=aX(e,"string");return typeof t=="symbol"?t:t+""}function aX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J0(e,t){if(e==null)return{};var n,r,i=oX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oo.apply(null,arguments)}var sX=e=>{var{dataKey:t,name:n,stroke:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:Es(n,t),payload:e}]};function lX(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,unit:d}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:Es(l,t),hide:c,type:e.tooltipType,color:e.stroke,unit:d}}}var aP=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function uX(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...n];return r}var cX=(e,t,n)=>{var r=n.reduce((y,v)=>y+v);if(!r)return aP(t,e);for(var i=Math.floor(e/r),o=e%r,l=t-e,c=[],d=0,f=0;d<n.length;f+=n[d],++d)if(f+n[d]>o){c=[...n.slice(0,d),o-f];break}var m=c.length%2===0?[0,l]:[l];return[...uX(n,i),...c,...m].map(y=>"".concat(y,"px")).join(", ")};function fX(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var r=tt("recharts-line-dot",typeof e!="boolean"?e.className:"");n=E.createElement($0,oo({},t,{className:r}))}return n}function dX(e,t){return e==null?!1:t?!0:e.length===1}function mX(e){var{clipPathId:t,points:n,props:r}=e,{dot:i,dataKey:o,needClip:l}=r;if(!dX(n,i))return null;var{id:c}=r,d=J0(r,eX),f=Sd(i),m=Ti(d),y=bt(i,!0),v=n.map((T,w)=>{var A=Ar(Ar(Ar({key:"dot-".concat(w),r:3},m),y),{},{index:w,cx:T.x,cy:T.y,dataKey:o,value:T.value,payload:T.payload,points:n});return fX(i,A)}),S={clipPath:l?"url(#clipPath-".concat(f?"":"dots-").concat(t,")"):void 0};return E.createElement(hn,oo({className:"recharts-line-dots",key:"dots"},S),v)}function av(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:i,props:o,showLabels:l}=e,{type:c,layout:d,connectNulls:f,needClip:m}=o,y=J0(o,tX),v=Ar(Ar({},bt(y,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(t,")"):void 0,points:r,type:c,layout:d,connectNulls:f,strokeDasharray:i??o.strokeDasharray});return E.createElement(E.Fragment,null,(r==null?void 0:r.length)>1&&E.createElement(Zl,oo({},v,{pathRef:n})),E.createElement(mX,{points:r,clipPathId:t,props:o}),l&&gi.renderCallByParent(o,r))}function hX(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function pX(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:o}=e,{points:l,strokeDasharray:c,isAnimationActive:d,animationBegin:f,animationDuration:m,animationEasing:y,animateNewValues:v,width:S,height:T,onAnimationEnd:w,onAnimationStart:A}=n,M=i.current,P=V0(n,"recharts-line-"),[N,O]=E.useState(!1),_=E.useCallback(()=>{typeof w=="function"&&w(),O(!1)},[w]),D=E.useCallback(()=>{typeof A=="function"&&A(),O(!0)},[A]),k=hX(r.current),B=o.current;return E.createElement(H0,{begin:f,duration:m,isActive:d,easing:y,onAnimationEnd:_,onAnimationStart:D,key:P},j=>{var re=nn(B,k+B,j),K=Math.min(re,k),V;if(c){var U="".concat(c).split(/[,\s]+/gim).map(q=>parseFloat(q));V=cX(K,k,U)}else V=aP(k,K);if(M){var ee=M.length/l.length,ue=j===1?l:l.map((q,H)=>{var ae=Math.floor(H*ee);if(M[ae]){var pe=M[ae];return Ar(Ar({},q),{},{x:nn(pe.x,q.x,j),y:nn(pe.y,q.y,j)})}return v?Ar(Ar({},q),{},{x:nn(S*2,q.x,j),y:nn(T/2,q.y,j)}):Ar(Ar({},q),{},{x:q.x,y:q.y})});return i.current=ue,E.createElement(av,{props:n,points:ue,clipPathId:t,pathRef:r,showLabels:!N,strokeDasharray:V})}return j>0&&k>0&&(i.current=l,o.current=K),E.createElement(av,{props:n,points:l,clipPathId:t,pathRef:r,showLabels:!N,strokeDasharray:V})})}function gX(e){var{clipPathId:t,props:n}=e,{points:r,isAnimationActive:i}=n,o=E.useRef(null),l=E.useRef(0),c=E.useRef(null),d=o.current;return i&&r&&r.length&&d!==r?E.createElement(pX,{props:n,clipPathId:t,previousPointsRef:o,longestAnimatedLengthRef:l,pathRef:c}):E.createElement(av,{props:n,points:r,clipPathId:t,pathRef:c,showLabels:!0})}var yX=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:kt(e.payload,t)});class vX extends E.Component{render(){var t,{hide:n,dot:r,points:i,className:o,xAxisId:l,yAxisId:c,top:d,left:f,width:m,height:y,id:v,needClip:S}=this.props;if(n)return null;var T=tt("recharts-line",o),w=v,{r:A=3,strokeWidth:M=2}=(t=bt(r,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},P=Sd(r),N=A*2+M;return E.createElement(E.Fragment,null,E.createElement(hn,{className:T},S&&E.createElement("defs",null,E.createElement(G0,{clipPathId:w,xAxisId:l,yAxisId:c}),!P&&E.createElement("clipPath",{id:"clipPath-dots-".concat(w)},E.createElement("rect",{x:f-N/2,y:d-N/2,width:m+N,height:y+N}))),E.createElement(gX,{props:this.props,clipPathId:w}),E.createElement(K2,{xAxisId:l,yAxisId:c,data:i,dataPointFormatter:yX,errorBarOffset:0},this.props.children)),E.createElement(nv,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var oP={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!fo.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function xX(e){var t=pr(e,oP),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:l,connectNulls:c,dot:d,hide:f,isAnimationActive:m,label:y,legendType:v,xAxisId:S,yAxisId:T,id:w}=t,A=J0(t,nX),{needClip:M}=em(S,T),P=Zd(),N=vu(),O=pn(),_=Re(re=>ZJ(re,S,T,O,w));if(N!=="horizontal"&&N!=="vertical"||_==null||P==null)return null;var{height:D,width:k,x:B,y:j}=P;return E.createElement(vX,oo({},A,{id:w,connectNulls:c,dot:d,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:l,isAnimationActive:m,hide:f,label:y,legendType:v,xAxisId:S,yAxisId:T,points:_,layout:N,height:D,width:k,left:B,top:j,needClip:M}))}function bX(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,dataKey:l,bandSize:c,displayedData:d}=e;return d.map((f,m)=>{var y=kt(f,l);if(t==="horizontal"){var v=Hf({axis:n,ticks:i,bandSize:c,entry:f,index:m}),S=pt(y)?null:r.scale(y);return{x:v,y:S,value:y,payload:f}}var T=pt(y)?null:n.scale(y),w=Hf({axis:r,ticks:o,bandSize:c,entry:f,index:m});return T==null||w==null?null:{x:T,y:w,value:y,payload:f}}).filter(Boolean)}function X0(e){var t=pr(e,oP),n=pn();return E.createElement(z0,{id:t.id,type:"line"},r=>E.createElement(E.Fragment,null,E.createElement(q0,{legendPayload:sX(t)}),E.createElement(B0,{fn:lX,args:t}),E.createElement(F0,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),E.createElement(xX,oo({},t,{id:r}))))}X0.displayName="Line";var sP=(e,t,n,r)=>Fr(e,"xAxis",t,r),lP=(e,t,n,r)=>zr(e,"xAxis",t,r),uP=(e,t,n,r)=>Fr(e,"yAxis",n,r),cP=(e,t,n,r)=>zr(e,"yAxis",n,r),SX=ne([Ge,sP,uP,lP,cP],(e,t,n,r,i)=>Gr(e,"xAxis")?ro(t,r,!1):ro(n,i,!1)),CX=(e,t,n,r,i)=>i,fP=ne([Au,CX],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),TX=(e,t,n,r,i)=>{var o,l=fP(e,t,n,r,i);if(l!=null){var c=Ge(e),d=Gr(c,"xAxis"),f;if(d?f=fu(e,"yAxis",n,r):f=fu(e,"xAxis",t,r),f!=null){var{stackId:m}=l,y=Gd(l);if(!(m==null||y==null)){var v=(o=f[m])===null||o===void 0?void 0:o.stackedData;return v==null?void 0:v.find(S=>S.key===y)}}}},wX=ne([Ge,sP,uP,lP,cP,TX,Tu,SX,fP],(e,t,n,r,i,o,l,c,d)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:y}=l;if(!(d==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null)){var{data:v}=d,S;if(v&&v.length>0?S=v:S=f==null?void 0:f.slice(m,y+1),S!=null){var T=void 0;return FX({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:m,areaSettings:d,stackedData:o,displayedData:S,chartBaseValue:T,bandSize:c})}}}),AX=["id"],EX=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function dP(e,t){if(e==null)return{};var n,r,i=MX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function MX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function YE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(n),!0).forEach(function(r){_X(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _X(e,t,n){return(t=NX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NX(e){var t=RX(e,"string");return typeof t=="symbol"?t:t+""}function RX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yi(){return yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yi.apply(null,arguments)}function gd(e,t){return e&&e!=="none"?e:t}var PX=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:o,hide:l}=e;return[{inactive:l,dataKey:t,type:o,color:gd(r,i),value:Es(n,t),payload:e}]};function DX(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,unit:d}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:Es(l,t),hide:c,type:e.tooltipType,color:gd(r,o),unit:d}}}var kX=(e,t)=>{var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var r=tt("recharts-area-dot",typeof e!="boolean"?e.className:"");n=E.createElement($0,yi({},t,{className:r}))}return n};function IX(e,t){return e==null?!1:t?!0:e.length===1}function OX(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:o,dataKey:l}=r;if(!IX(n,o))return null;var c=Sd(o),d=Ti(r),f=bt(o,!0),m=n.map((v,S)=>{var T=Ya(Ya(Ya({key:"dot-".concat(S),r:3},d),f),{},{index:S,cx:v.x,cy:v.y,dataKey:l,value:v.value,payload:v.payload,points:n});return kX(o,T)}),y={clipPath:i?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return E.createElement(hn,yi({className:"recharts-area-dots"},y),m)}function ov(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:o,showLabels:l}=e,{layout:c,type:d,stroke:f,connectNulls:m,isRange:y}=o,{id:v}=o,S=dP(o,AX),T=Ti(S);return E.createElement(E.Fragment,null,(t==null?void 0:t.length)>1&&E.createElement(hn,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},E.createElement(Zl,yi({},T,{id:v,points:t,connectNulls:m,type:d,baseLine:n,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&E.createElement(Zl,yi({},T,{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:t})),f!=="none"&&y&&E.createElement(Zl,yi({},T,{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:n}))),E.createElement(OX,{points:t,props:S,clipPathId:i}),l&&gi.renderCallByParent(S,t))}function LX(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,o=r[0].y,l=r[r.length-1].y;if(!an(o)||!an(l))return null;var c=t*Math.abs(o-l),d=Math.max(...r.map(f=>f.x||0));return be(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(f=>f.x||0),d)),be(d)?E.createElement("rect",{x:0,y:o<l?o:o-c,width:d+(i?parseInt("".concat(i),10):1),height:Math.floor(c)}):null}function jX(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,o=r[0].x,l=r[r.length-1].x;if(!an(o)||!an(l))return null;var c=t*Math.abs(o-l),d=Math.max(...r.map(f=>f.y||0));return be(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(f=>f.y||0),d)),be(d)?E.createElement("rect",{x:o<l?o:o-c,y:0,width:c,height:Math.floor(d+(i?parseInt("".concat(i),10):1))}):null}function UX(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:o}=e;return n==="vertical"?E.createElement(LX,{alpha:t,points:r,baseLine:i,strokeWidth:o}):E.createElement(jX,{alpha:t,points:r,baseLine:i,strokeWidth:o})}function $X(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:o}=e,{points:l,baseLine:c,isAnimationActive:d,animationBegin:f,animationDuration:m,animationEasing:y,onAnimationStart:v,onAnimationEnd:S}=r,T=V0(r,"recharts-area-"),[w,A]=E.useState(!0),M=E.useCallback(()=>{typeof S=="function"&&S(),A(!1)},[S]),P=E.useCallback(()=>{typeof v=="function"&&v(),A(!0)},[v]),N=i.current,O=o.current;return E.createElement(H0,{begin:f,duration:m,isActive:d,easing:y,onAnimationEnd:M,onAnimationStart:P,key:T},_=>{if(N){var D=N.length/l.length,k=_===1?l:l.map((j,re)=>{var K=Math.floor(re*D);if(N[K]){var V=N[K];return Ya(Ya({},j),{},{x:nn(V.x,j.x,_),y:nn(V.y,j.y,_)})}return j}),B;return be(c)?B=nn(O,c,_):pt(c)||Nn(c)?B=nn(O,0,_):B=c.map((j,re)=>{var K=Math.floor(re*D);if(Array.isArray(O)&&O[K]){var V=O[K];return Ya(Ya({},j),{},{x:nn(V.x,j.x,_),y:nn(V.y,j.y,_)})}return j}),_>0&&(i.current=k,o.current=B),E.createElement(ov,{points:k,baseLine:B,needClip:t,clipPathId:n,props:r,showLabels:!w})}return _>0&&(i.current=l,o.current=c),E.createElement(hn,null,E.createElement("defs",null,E.createElement("clipPath",{id:"animationClipPath-".concat(n)},E.createElement(UX,{alpha:_,points:l,baseLine:c,layout:r.layout,strokeWidth:r.strokeWidth}))),E.createElement(hn,{clipPath:"url(#animationClipPath-".concat(n,")")},E.createElement(ov,{points:l,baseLine:c,needClip:t,clipPathId:n,props:r,showLabels:!0})))})}function BX(e){var{needClip:t,clipPathId:n,props:r}=e,{points:i,baseLine:o,isAnimationActive:l}=r,c=E.useRef(null),d=E.useRef(),f=c.current,m=d.current;return l&&i&&i.length&&(f!==i||m!==o)?E.createElement($X,{needClip:t,clipPathId:n,props:r,previousPointsRef:c,previousBaselineRef:d}):E.createElement(ov,{points:i,baseLine:o,needClip:t,clipPathId:n,props:r,showLabels:!0})}class qX extends E.PureComponent{render(){var t,{hide:n,dot:r,points:i,className:o,top:l,left:c,needClip:d,xAxisId:f,yAxisId:m,width:y,height:v,id:S,baseLine:T}=this.props;if(n)return null;var w=tt("recharts-area",o),A=S,{r:M=3,strokeWidth:P=2}=(t=bt(r,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},N=Sd(r),O=M*2+P;return E.createElement(E.Fragment,null,E.createElement(hn,{className:w},d&&E.createElement("defs",null,E.createElement(G0,{clipPathId:A,xAxisId:f,yAxisId:m}),!N&&E.createElement("clipPath",{id:"clipPath-dots-".concat(A)},E.createElement("rect",{x:c-O/2,y:l-O/2,width:y+O,height:v+O}))),E.createElement(BX,{needClip:d,clipPathId:A,props:this.props})),E.createElement(nv,{points:i,mainColor:gd(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(T)&&E.createElement(nv,{points:T,mainColor:gd(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var mP={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!fo.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function VX(e){var t,n=pr(e,mP),{activeDot:r,animationBegin:i,animationDuration:o,animationEasing:l,connectNulls:c,dot:d,fill:f,fillOpacity:m,hide:y,isAnimationActive:v,legendType:S,stroke:T,xAxisId:w,yAxisId:A}=n,M=dP(n,EX),P=vu(),N=A2(),{needClip:O}=em(w,A),_=pn(),{points:D,isRange:k,baseLine:B}=(t=Re(ee=>wX(ee,w,A,_,e.id)))!==null&&t!==void 0?t:{},j=Zd();if(P!=="horizontal"&&P!=="vertical"||j==null||N!=="AreaChart"&&N!=="ComposedChart")return null;var{height:re,width:K,x:V,y:U}=j;return!D||!D.length?null:E.createElement(qX,yi({},M,{activeDot:r,animationBegin:i,animationDuration:o,animationEasing:l,baseLine:B,connectNulls:c,dot:d,fill:f,fillOpacity:m,height:re,hide:y,layout:P,isAnimationActive:v,isRange:k,legendType:S,needClip:O,points:D,stroke:T,width:K,left:V,top:U,xAxisId:w,yAxisId:A}))}var zX=(e,t,n,r,i)=>{var o=n??t;if(be(o))return o;var l=e==="horizontal"?i:r,c=l.scale.domain();if(l.type==="number"){var d=Math.max(c[0],c[1]),f=Math.min(c[0],c[1]);return o==="dataMin"?f:o==="dataMax"||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]};function FX(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:o,chartBaseValue:l,xAxis:c,yAxis:d,displayedData:f,dataStartIndex:m,xAxisTicks:y,yAxisTicks:v,bandSize:S}=e,T=i&&i.length,w=zX(o,l,n,c,d),A=o==="horizontal",M=!1,P=f.map((O,_)=>{var D;T?D=i[m+_]:(D=kt(O,r),Array.isArray(D)?M=!0:D=[w,D]);var k=D[1]==null||T&&!t&&kt(O,r)==null;return A?{x:Hf({axis:c,ticks:y,bandSize:S,entry:O,index:_}),y:k?null:d.scale(D[1]),value:D,payload:O}:{x:k?null:c.scale(D[1]),y:Hf({axis:d,ticks:v,bandSize:S,entry:O,index:_}),value:D,payload:O}}),N;return T||M?N=P.map(O=>{var _=Array.isArray(O.value)?O.value[0]:null;return A?{x:O.x,y:_!=null&&O.y!=null?d.scale(_):null,payload:O.payload}:{x:_!=null?c.scale(_):null,y:O.y,payload:O.payload}}):N=A?d.scale(w):c.scale(w),{points:P,baseLine:N,isRange:M}}function hP(e){var t=pr(e,mP),n=pn();return E.createElement(z0,{id:t.id,type:"area"},r=>E.createElement(E.Fragment,null,E.createElement(q0,{legendPayload:PX(t)}),E.createElement(B0,{fn:DX,args:t}),E.createElement(F0,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:rN(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),E.createElement(VX,yi({},t,{id:r}))))}hP.displayName="Area";function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(r){HX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HX(e,t,n){return(t=GX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GX(e){var t=KX(e,"string");return typeof t=="symbol"?t:t+""}function KX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YX={xAxis:{},yAxis:{},zAxis:{}},pP=Xn({name:"cartesianAxis",initialState:YX,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=JE(JE({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:WX,removeXAxis:JX,addYAxis:XX,removeYAxis:QX,addZAxis:Dee,removeZAxis:kee,updateYAxisWidth:ZX}=pP.actions,eQ=pP.reducer,tQ=["children"],nQ=["dangerouslySetInnerHTML","ticks"];function gP(e,t,n){return(t=rQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rQ(e){var t=iQ(e,"string");return typeof t=="symbol"?t:t+""}function iQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sv.apply(null,arguments)}function yP(e,t){if(e==null)return{};var n,r,i=aQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oQ(e){var t=Kt(),n=E.useMemo(()=>{var{children:o}=e,l=yP(e,tQ);return l},[e]),r=Re(o=>Mi(o,n.id)),i=n===r;return E.useEffect(()=>(t(WX(n)),()=>{t(JX(n))}),[n,t]),i?e.children:null}var sQ=e=>{var{xAxisId:t,className:n}=e,r=Re(aN),i=pn(),o="xAxis",l=Re(S=>Ds(S,o,t,i)),c=Re(S=>i2(S,o,t,i)),d=Re(S=>e2(S,t)),f=Re(S=>_7(S,t));if(d==null||f==null)return null;var{dangerouslySetInnerHTML:m,ticks:y}=e,v=yP(e,nQ);return E.createElement(ya,sv({},v,{scale:l,x:f.x,y:f.y,width:d.width,height:d.height,className:tt("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:c}))},lQ=e=>{var t,n,r,i,o;return E.createElement(oQ,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter},E.createElement(sQ,e))};class so extends E.Component{render(){return E.createElement(lQ,this.props)}}gP(so,"displayName","XAxis");gP(so,"defaultProps",{allowDataOverflow:Vn.allowDataOverflow,allowDecimals:Vn.allowDecimals,allowDuplicatedCategory:Vn.allowDuplicatedCategory,height:Vn.height,hide:!1,mirror:Vn.mirror,orientation:Vn.orientation,padding:Vn.padding,reversed:Vn.reversed,scale:Vn.scale,tickCount:Vn.tickCount,type:Vn.type,xAxisId:0});var uQ=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=e,l=0;if(t){t.forEach(m=>{if(m){var y=m.getBoundingClientRect();y.width>l&&(l=y.width)}});var c=n?n.getBoundingClientRect().width:0,d=i+o,f=l+d+c+(n?r:0);return Math.round(f)}return 0},cQ=["dangerouslySetInnerHTML","ticks"];function vP(e,t,n){return(t=fQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fQ(e){var t=dQ(e,"string");return typeof t=="symbol"?t:t+""}function dQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(null,arguments)}function mQ(e,t){if(e==null)return{};var n,r,i=hQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pQ(e){var t=Kt();return E.useEffect(()=>(t(XX(e)),()=>{t(QX(e))}),[e,t]),null}var gQ=e=>{var t,{yAxisId:n,className:r,width:i,label:o}=e,l=E.useRef(null),c=E.useRef(null),d=Re(aN),f=pn(),m=Kt(),y="yAxis",v=Re(N=>Ds(N,y,n,f)),S=Re(N=>t2(N,n)),T=Re(N=>N7(N,n)),w=Re(N=>i2(N,y,n,f));if(E.useLayoutEffect(()=>{var N;if(!(i!=="auto"||!S||U0(o)||E.isValidElement(o))){var O=l.current,_=O==null||(N=O.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:D,tickMargin:k}=O.props,B=uQ({ticks:_,label:c.current,labelGapWithTick:5,tickSize:D,tickMargin:k});Math.round(S.width)!==Math.round(B)&&m(ZX({id:n,width:B}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,S==null?void 0:S.width,S,m,o,n,i]),S==null||T==null)return null;var{dangerouslySetInnerHTML:A,ticks:M}=e,P=mQ(e,cQ);return E.createElement(ya,lv({},P,{ref:l,labelRef:c,scale:v,x:T.x,y:T.y,width:S.width,height:S.height,className:tt("recharts-".concat(y," ").concat(y),r),viewBox:d,ticks:w}))},yQ=e=>{var t,n,r,i,o;return E.createElement(E.Fragment,null,E.createElement(pQ,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter}),E.createElement(gQ,e))},vQ={allowDataOverflow:zn.allowDataOverflow,allowDecimals:zn.allowDecimals,allowDuplicatedCategory:zn.allowDuplicatedCategory,hide:!1,mirror:zn.mirror,orientation:zn.orientation,padding:zn.padding,reversed:zn.reversed,scale:zn.scale,tickCount:zn.tickCount,type:zn.type,width:zn.width,yAxisId:0};class lo extends E.Component{render(){return E.createElement(yQ,this.props)}}vP(lo,"displayName","YAxis");vP(lo,"defaultProps",vQ);var Yg={exports:{}},Wg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function xQ(){if(XE)return Wg;XE=1;var e=xs();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return Wg.useSyncExternalStoreWithSelector=function(d,f,m,y,v){var S=i(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=l(function(){function A(_){if(!M){if(M=!0,P=_,_=y(_),v!==void 0&&T.hasValue){var D=T.value;if(v(D,_))return N=D}return N=_}if(D=N,n(P,_))return D;var k=y(_);return v!==void 0&&v(D,k)?(P=_,D):(P=_,N=k)}var M=!1,P,N,O=m===void 0?null:m;return[function(){return A(f())},O===null?void 0:function(){return A(O())}]},[f,m,y,v]);var w=r(d,S[0],S[1]);return o(function(){T.hasValue=!0,T.value=w},[w]),c(w),w},Wg}var QE;function bQ(){return QE||(QE=1,Yg.exports=xQ()),Yg.exports}bQ();function SQ(e){e()}function CQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){SQ(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var ZE={notify(){},get:()=>[]};function TQ(e,t){let n,r=ZE,i=0,o=!1;function l(w){m();const A=r.subscribe(w);let M=!1;return()=>{M||(M=!0,A(),y())}}function c(){r.notify()}function d(){T.onStateChange&&T.onStateChange()}function f(){return o}function m(){i++,n||(n=e.subscribe(d),r=CQ())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ZE)}function v(){o||(o=!0,m())}function S(){o&&(o=!1,y())}const T={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:f,trySubscribe:v,tryUnsubscribe:S,getListeners:()=>r};return T}var wQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AQ=wQ(),EQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",MQ=EQ(),_Q=()=>AQ||MQ?E.useLayoutEffect:E.useEffect,NQ=_Q(),Jg=Symbol.for("react-redux-context"),Xg=typeof globalThis<"u"?globalThis:{};function RQ(){if(!E.createContext)return{};const e=Xg[Jg]??(Xg[Jg]=new Map);let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var PQ=RQ();function DQ(e){const{children:t,context:n,serverState:r,store:i}=e,o=E.useMemo(()=>{const d=TQ(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);NQ(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const c=n||PQ;return E.createElement(c.Provider,{value:o},t)}var kQ=DQ,IQ=(e,t)=>t,Q0=ne([IQ,Ge,TR,qt,x2,_i,k9,Yt],U9),Z0=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},xP=mr("mouseClick"),bP=yu();bP.startListening({actionCreator:xP,effect:(e,t)=>{var n=e.payload,r=Q0(t.getState(),Z0(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(V7({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var uv=mr("mouseMove"),SP=yu();SP.startListening({actionCreator:uv,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=M0(r,r.tooltip.settings.shared),o=Q0(r,Z0(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?t.dispatch(d2({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(f2()))}});function OQ(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var eM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},CP=Xn({name:"rootProps",initialState:eM,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:eM.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),LQ=CP.reducer,{updateOptions:jQ}=CP.actions,TP=Xn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Iee}=TP.actions,UQ=TP.reducer,wP=mr("keyDown"),AP=mr("focus"),ex=yu();ex.startListening({actionCreator:wP,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var l=Number(_0(i,Is(n))),c=_i(n);if(o==="Enter"){var d=ud(n,"axis","hover",String(i.index));t.dispatch(Xy({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var f=k7(n),m=f==="left-to-right"?1:-1,y=o==="ArrowRight"?1:-1,v=l+y*m;if(!(c==null||v>=c.length||v<0)){var S=ud(n,"axis","hover",String(v));t.dispatch(Xy({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:S}))}}}}});ex.startListening({actionCreator:AP,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",l=ud(n,"axis","hover",String(o));t.dispatch(Xy({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:l}))}}}});var ur=mr("externalEvent"),EP=yu();EP.startListening({actionCreator:ur,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:w9(n),activeDataKey:T2(n),activeIndex:ao(n),activeLabel:C2(n),activeTooltipIndex:ao(n),isTooltipActive:A9(n)};e.payload.handler(r,e.payload.reactEvent)}}});var $Q=ne([ks],e=>e.tooltipItemPayloads),BQ=ne([$Q,Nu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(c=>c.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var l=t(o,n);return l}}}),MP=mr("touchMove"),_P=yu();_P.startListening({actionCreator:MP,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=M0(r,r.tooltip.settings.shared);if(i==="axis"){var o=Q0(r,Z0({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(d2({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var l,c=n.touches[0],d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(vz),m=(l=d.getAttribute(xz))!==null&&l!==void 0?l:void 0,y=BQ(t.getState(),f,m);t.dispatch(c2({activeDataKey:m,activeIndex:f,activeCoordinate:y}))}}});var qQ=P_({brush:uJ,cartesianAxis:eQ,chartData:eK,errorBars:dW,graphicalItems:HY,layout:V6,legend:Rz,options:W9,polarAxis:xY,polarOptions:UQ,referenceElements:gJ,rootProps:LQ,tooltip:z7}),VQ=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return m6({reducer:qQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([bP.middleware,SP.middleware,ex.middleware,EP.middleware,_P.middleware]),devTools:{serialize:{replacer:OQ},name:"recharts-".concat(n)}})};function zQ(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=pn(),o=E.useRef(null);if(i)return n;o.current==null&&(o.current=VQ(t,r));var l=Dv;return E.createElement(kQ,{context:l,store:o.current},n)}function FQ(e){var{layout:t,width:n,height:r,margin:i}=e,o=Kt(),l=pn();return E.useEffect(()=>{l||(o($6(t)),o(B6({width:n,height:r})),o(U6(i)))},[o,l,t,n,r,i]),null}function HQ(e){var t=Kt();return E.useEffect(()=>{t(jQ(e))},[t,e]),null}var GQ=["children"];function KQ(e,t){if(e==null)return{};var n,r,i=YQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yd(){return yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yd.apply(null,arguments)}var WQ={width:"100%",height:"100%"},JQ=E.forwardRef((e,t)=>{var n=sN(),r=lN(),i=cN();if(!Gf(n)||!Gf(r))return null;var{children:o,otherAttributes:l,title:c,desc:d}=e,f,m;return typeof l.tabIndex=="number"?f=l.tabIndex:f=i?0:void 0,typeof l.role=="string"?m=l.role:m=i?"application":void 0,E.createElement(t_,yd({},l,{title:c,desc:d,role:m,tabIndex:f,width:n,height:r,style:WQ,ref:t}),o)}),XQ=e=>{var{children:t}=e,n=Re(Id);if(!n)return null;var{width:r,height:i,y:o,x:l}=n;return E.createElement(t_,{width:r,height:i,x:l,y:o},t)},tM=E.forwardRef((e,t)=>{var{children:n}=e,r=KQ(e,GQ),i=pn();return i?E.createElement(XQ,null,n):E.createElement(JQ,yd({ref:t},r),n)});function QQ(){var e=Kt(),[t,n]=E.useState(null),r=Re(yz);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;an(o)&&o!==r&&e(q6(o))}},[t,e,r]),n}function nM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nM(Object(n),!0).forEach(function(r){eZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eZ(e,t,n){return(t=tZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tZ(e){var t=nZ(e,"string");return typeof t=="symbol"?t:t+""}function nZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rZ=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:l,onDoubleClick:c,onMouseDown:d,onMouseEnter:f,onMouseLeave:m,onMouseMove:y,onMouseUp:v,onTouchEnd:S,onTouchMove:T,onTouchStart:w,style:A,width:M}=e,P=Kt(),[N,O]=E.useState(null),[_,D]=E.useState(null);rK();var k=QQ(),B=E.useCallback(te=>{k(te),typeof t=="function"&&t(te),O(te),D(te)},[k,t,O,D]),j=E.useCallback(te=>{P(xP(te)),P(ur({handler:o,reactEvent:te}))},[P,o]),re=E.useCallback(te=>{P(uv(te)),P(ur({handler:f,reactEvent:te}))},[P,f]),K=E.useCallback(te=>{P(f2()),P(ur({handler:m,reactEvent:te}))},[P,m]),V=E.useCallback(te=>{P(uv(te)),P(ur({handler:y,reactEvent:te}))},[P,y]),U=E.useCallback(()=>{P(AP())},[P]),ee=E.useCallback(te=>{P(wP(te.key))},[P]),ue=E.useCallback(te=>{P(ur({handler:l,reactEvent:te}))},[P,l]),q=E.useCallback(te=>{P(ur({handler:c,reactEvent:te}))},[P,c]),H=E.useCallback(te=>{P(ur({handler:d,reactEvent:te}))},[P,d]),ae=E.useCallback(te=>{P(ur({handler:v,reactEvent:te}))},[P,v]),pe=E.useCallback(te=>{P(ur({handler:w,reactEvent:te}))},[P,w]),$=E.useCallback(te=>{P(MP(te)),P(ur({handler:T,reactEvent:te}))},[P,T]),Y=E.useCallback(te=>{P(ur({handler:S,reactEvent:te}))},[P,S]);return E.createElement(R2.Provider,{value:N},E.createElement(uV.Provider,{value:_},E.createElement("div",{className:tt("recharts-wrapper",r),style:ZQ({position:"relative",cursor:"default",width:M,height:i},A),onClick:j,onContextMenu:ue,onDoubleClick:q,onFocus:U,onKeyDown:ee,onMouseDown:H,onMouseEnter:re,onMouseLeave:K,onMouseMove:V,onMouseUp:ae,onTouchEnd:Y,onTouchMove:$,onTouchStart:pe,ref:B},n)))}),iZ=["children","className","width","height","style","compact","title","desc"];function aZ(e,t){if(e==null)return{};var n,r,i=oZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var sZ=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:o,style:l,compact:c,title:d,desc:f}=e,m=aZ(e,iZ),y=Ti(m);return c?E.createElement(tM,{otherAttributes:y,title:d,desc:f},n):E.createElement(rZ,{className:r,style:l,width:i,height:o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(tM,{otherAttributes:y,title:d,desc:f,ref:t},E.createElement(vJ,null,n)))}),lZ=["width","height"];function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cv.apply(null,arguments)}function uZ(e,t){if(e==null)return{};var n,r,i=cZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var fZ={top:5,right:5,bottom:5,left:5},dZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:fZ,reverseStackOrder:!1,syncMethod:"index"},tx=E.forwardRef(function(t,n){var r,i=pr(t.categoricalChartProps,dZ),{width:o,height:l}=i,c=uZ(i,lZ);if(!Gf(o)||!Gf(l))return null;var{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:y,categoricalChartProps:v}=t,S={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:y,eventEmitter:void 0};return E.createElement(zQ,{preloadedState:{options:S},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:d},E.createElement(lJ,{chartData:v.data}),E.createElement(FQ,{width:o,height:l,layout:i.layout,margin:i.margin}),E.createElement(HQ,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(sZ,cv({},c,{width:o,height:l,ref:n})))}),mZ=["axis"],hZ=E.forwardRef((e,t)=>E.createElement(tx,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mZ,tooltipPayloadSearcher:L0,categoricalChartProps:e,ref:t})),pZ=["axis","item"],nx=E.forwardRef((e,t)=>E.createElement(tx,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pZ,tooltipPayloadSearcher:L0,categoricalChartProps:e,ref:t})),gZ=["axis"],yZ=E.forwardRef((e,t)=>E.createElement(tx,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:gZ,tooltipPayloadSearcher:L0,categoricalChartProps:e,ref:t}));const vZ=(e,t=4)=>{if(e.length===0)return[];if(t<=1)return[...e];const n=new Array(e.length),r=Math.floor(t/2);for(let i=0;i<e.length;i++){const o=Math.max(0,i-r),l=Math.min(e.length,i+r+1),c=e.slice(o,l).filter(d=>d!=null&&!isNaN(d));if(c.length===0)n[i]=NaN;else{const d=c.reduce((f,m)=>f+m,0);n[i]=d/c.length}}return n},xZ=e=>{var r,i,o,l;if(!e||e.length===0)return"empty";const t=((r=e[0])==null?void 0:r.kpi)||((i=e[0])==null?void 0:i.date)||JSON.stringify(e[0]),n=((o=e[e.length-1])==null?void 0:o.kpi)||((l=e[e.length-1])==null?void 0:l.date)||JSON.stringify(e[e.length-1]);return`${e.length}_${t}_${n}`.replace(/[^a-zA-Z0-9]/g,"_").slice(0,32)},lr={kpi:"var(--color-teal)",grid:"rgba(26, 22, 40, 0.1)",text:"#1A1628",bar:"var(--color-orange)"},bZ=(e,t)=>{let n=0,r=0,i=0,o=0,l=0;const c=e.length;if(c===0)return 0;for(let m=0;m<c;m++){const y=e[m]||0,v=t[m]||0;n+=y,r+=v,i+=y*v,o+=y*y,l+=v*v}const d=c*i-n*r,f=Math.sqrt((c*o-n*n)*(c*l-r*r));return f===0?0:d/f},SZ=e=>e===1?"bg-gray-200/50":Math.abs(e)>.7?"bg-red-500/30":Math.abs(e)>.4?"bg-yellow-500/30":"bg-white",CZ=({selections:e,insights:t,diagnostics:n,onDiagnosticsChange:r,isLoadingInsights:i,parsedData:o,onProceed:l})=>{const[c,d]=E.useState("diagnostics"),[f,m]=E.useState(null),[y,v]=E.useState(null),[S,T]=E.useState(!1),[w,A]=E.useState(!1),[M,P]=E.useState("smoothed"),{rawTrendData:N,smoothedTrendData:O,datasetHash:_}=E.useMemo(()=>{const V=(t==null?void 0:t.trendData)||[],U=xZ(V);if(V.length===0)return{rawTrendData:[],smoothedTrendData:[],datasetHash:U};const ee=V.map(H=>H.kpi),ue=vZ(ee,4),q=V.map((H,ae)=>({...H,kpi:ue[ae]}));return{rawTrendData:V,smoothedTrendData:q,datasetHash:U}},[t==null?void 0:t.trendData]),D=(V,U)=>{const ee=n.map((ue,q)=>q===V?{...ue,isApproved:U}:ue);r(ee)},k=E.useMemo(()=>Object.keys(e).filter(V=>e[V]===Oe.MARKETING_ACTIVITY),[e]),B=()=>{f||S||(T(!0),setTimeout(()=>{const V={};for(const U of k){V[U]={};for(const ee of k){if(U===ee){V[U][ee]=1;continue}if(V[ee]&&typeof V[ee][U]<"u"){V[U][ee]=V[ee][U];continue}const ue=o.map(H=>Number(H[U])||0),q=o.map(H=>Number(H[ee])||0);V[U][ee]=bZ(ue,q)}}m(V),T(!1)},100))},j=()=>{y||w||(A(!0),setTimeout(()=>{const V=k.map(U=>{if(!o||o.length===0)return{name:U,sparsity:0};const q=o.map(H=>H[U]).filter(H=>H==null||H===0||String(H).trim()==="").length/o.length*100;return{name:U,sparsity:q}});v(V),A(!1)},100))},re=[{id:"diagnostics",name:"Channel Diagnostics"},{id:"correlation",name:"Correlation Matrix"},{id:"sparsity",name:"Sparsity Analysis"}],K=()=>{switch(c){case"diagnostics":return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"glass-pane p-6 mb-8",children:[x.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-500 to-blue-600 rounded-lg flex items-center justify-center",children:x.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"MixMind Key Insights"})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 p-5 rounded-lg border border-blue-200",children:[x.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[x.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded flex items-center justify-center",children:x.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})})}),x.jsx("h4",{className:"font-semibold text-blue-900",children:"Sales Trend Insights"})]}),x.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:(t==null?void 0:t.salesTrendInsights)||(t==null?void 0:t.trendsSummary)})]}),x.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-5 rounded-lg border border-orange-200",children:[x.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[x.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded flex items-center justify-center",children:x.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),x.jsx("h4",{className:"font-semibold text-orange-900",children:"Channel Execution Insights"})]}),x.jsx("p",{className:"text-orange-800 text-sm leading-relaxed",children:(t==null?void 0:t.channelExecutionInsights)||(t==null?void 0:t.diagnosticsSummary)})]})]})]}),x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("h4",{className:"font-semibold text-gray-800",children:"Sales Trend (Latest 12 Months)"}),x.jsxs("div",{className:"flex bg-gray-100 rounded-md p-1",children:[x.jsx("button",{onClick:()=>P("raw"),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${M==="raw"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Raw"}),x.jsx("button",{onClick:()=>P("smoothed"),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${M==="smoothed"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Smoothed"})]})]}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t==null?void 0:t.trendsSummary}),x.jsx(hu,{width:"100%",height:350,children:x.jsxs(yZ,{data:M==="smoothed"?O:N,margin:{top:10,right:30,left:20,bottom:60},children:[x.jsx(iv,{strokeDasharray:"3 3",stroke:lr.grid}),x.jsx(so,{dataKey:"date",stroke:lr.text,tick:{fontSize:10,fill:lr.text},interval:Math.floor((N.length||52)/8),angle:-45,textAnchor:"end",height:60,tickFormatter:V=>{try{if(!V)return"";const U=new Date(V);return isNaN(U.getTime())?"":`${(U.getMonth()+1).toString().padStart(2,"0")}/${U.getFullYear().toString().slice(-2)}`}catch(U){return console.error("Date formatting error:",U,V),""}}}),x.jsx(lo,{stroke:lr.kpi,tick:{fontSize:10,fill:lr.kpi},domain:[0,"dataMax * 1.1"],tickFormatter:V=>V>=1e6?`${(V/1e6).toFixed(1)}M`:V>=1e3?`${(V/1e3).toFixed(0)}k`:V.toFixed(0)}),x.jsx(mu,{wrapperClassName:"glass-pane",labelFormatter:V=>`Week of ${new Date(V).toLocaleDateString()}`,formatter:V=>[(V==null?void 0:V.toLocaleString())||"0","TRx"]}),M==="smoothed"&&x.jsx(X0,{type:"natural",dataKey:"kpi",data:N,stroke:lr.kpi,strokeWidth:1,strokeOpacity:.3,fill:"none",connectNulls:!0,dot:!1,name:"Raw data"}),x.jsx(hP,{type:"natural",dataKey:"kpi",stroke:lr.kpi,strokeWidth:2.5,fill:lr.kpi,fillOpacity:M==="smoothed"?.25:.15,connectNulls:!0,dot:!1,name:M==="smoothed"?"Smoothed (4-week avg)":"Raw TRx"})]})}),x.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Smoothing is for visualization only."})]}),x.jsxs("div",{className:"mt-12",children:[x.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Channel Diagnostics"}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-gray-100",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-3",children:"Channel"}),x.jsx("th",{className:"p-3",children:"Sparsity"}),x.jsx("th",{className:"p-3",children:"Volatility (CV)"}),x.jsx("th",{className:"p-3",children:"Latest 52W Spend"}),x.jsx("th",{className:"p-3",children:"YoY Spend Trend"}),x.jsx("th",{className:"p-3 w-2/5",children:"AI Commentary"}),x.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),x.jsx("tbody",{children:n.map((V,U)=>{const ee=parseFloat(V.yoySpendTrend||V.yoyTrend),ue=ee>0?"text-green-600":ee<0?"text-red-600":"text-gray-700",H=parseFloat(V.volatility)>50?"text-yellow-600":"text-gray-700";return x.jsxs("tr",{className:"border-b border-gray-200",children:[x.jsx("td",{className:"p-3 font-semibold",children:V.name}),x.jsx("td",{className:"p-3",children:V.sparsity}),x.jsx("td",{className:`p-3 font-mono ${H}`,children:V.volatility}),x.jsx("td",{className:"p-3 font-mono",children:V.latest52wSpend||"N/A"}),x.jsx("td",{className:`p-3 font-mono font-bold ${ue}`,children:V.yoySpendTrend||V.yoyTrend}),x.jsx("td",{className:"p-3 text-gray-500 text-xs italic",children:V.commentary}),x.jsx("td",{className:"p-3 text-center",children:x.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[x.jsx("button",{type:"button",onClick:()=>D(U,!0),className:`px-3 py-1 text-xs font-medium border rounded-l-lg transition-colors ${V.isApproved?"bg-[#32A29B] text-white border-[#32A29B]":"bg-transparent text-gray-600 border-gray-300 hover:bg-gray-100"}`,children:"Approve"}),x.jsx("button",{type:"button",onClick:()=>D(U,!1),className:`px-3 py-1 text-xs font-medium border rounded-r-lg transition-colors ${V.isApproved?"bg-transparent text-gray-600 border-gray-300 hover:bg-gray-100":"bg-gray-500 text-white border-gray-500"}`,children:"Exclude"})]})})]},V.name)})})]})})]})]});case"correlation":return x.jsxs("div",{className:"overflow-x-auto",children:[x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Correlation matrix of marketing channels. High values (>0.7, in red) may indicate multicollinearity, which can make model results unstable."}),S?x.jsx("div",{className:"flex justify-center items-center py-12",children:x.jsxs("div",{className:"text-center",children:[x.jsx(fa,{}),x.jsx("p",{className:"mt-2 font-medium text-gray-600",children:"Loading correlation matrix..."})]})}):f?x.jsxs("table",{className:"w-full text-center text-xs border-collapse",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2 border border-gray-200 bg-gray-100"}),k.map(V=>x.jsx("th",{className:"p-2 border border-gray-200 bg-gray-100 font-medium",children:V},V))]})}),x.jsx("tbody",{children:k.map(V=>x.jsxs("tr",{children:[x.jsx("td",{className:"p-2 border border-gray-200 font-medium bg-gray-100",children:V}),k.map(U=>{var ee,ue,q;return x.jsx("td",{className:`p-2 border border-gray-200 font-mono ${SZ(((ee=f[V])==null?void 0:ee[U])??0)}`,children:(q=(ue=f[V])==null?void 0:ue[U])==null?void 0:q.toFixed(2)},U)})]},V))})]}):x.jsx("div",{className:"text-center py-8 text-gray-500",children:"Click the tab to load correlation data"})]});case"sparsity":return x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Sparsity of marketing channels, measured as the percentage of zero-value entries. High sparsity may affect model stability or indicate "flighted" campaigns.'}),w?x.jsx("div",{className:"flex justify-center items-center py-12",children:x.jsxs("div",{className:"text-center",children:[x.jsx(fa,{}),x.jsx("p",{className:"mt-2 font-medium text-gray-600",children:"Loading sparsity analysis..."})]})}):y?x.jsx(hu,{width:"100%",height:350,children:x.jsxs(nx,{data:y,margin:{top:5,right:20,left:0,bottom:80},children:[x.jsx(iv,{strokeDasharray:"3 3",stroke:lr.grid}),x.jsx(so,{dataKey:"name",stroke:lr.text,angle:-45,textAnchor:"end",interval:0,height:100,tick:{fontSize:12}}),x.jsx(lo,{stroke:lr.text,unit:"%"}),x.jsx(mu,{wrapperClassName:"glass-pane",formatter:V=>`${Number(V).toFixed(1)}%`}),x.jsx(tm,{dataKey:"sparsity",name:"Sparsity %",children:y.map((V,U)=>x.jsx(Pu,{fill:V.sparsity>50?"#ef4444":V.sparsity>20?"#f59e0b":lr.bar},`cell-${U}`))})]})}):x.jsx("div",{className:"text-center py-8 text-gray-500",children:"Click the tab to load sparsity data"})]})}};return x.jsxs("div",{className:"p-4 md:p-6 space-y-8 max-w-7xl mx-auto",children:[i&&!t&&x.jsx("div",{className:"glass-pane p-6 flex justify-center items-center min-h-[24rem]",children:x.jsxs("div",{className:"text-center",children:[x.jsx(fa,{}),x.jsx("p",{className:"mt-2 font-medium text-gray-600",children:"Running initial diagnostics..."})]})}),t&&x.jsxs("div",{className:"glass-pane p-6 relative",children:[i&&x.jsx("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-sm flex justify-center items-center rounded-lg z-10",children:x.jsxs("div",{className:"text-center",children:[x.jsx(fa,{}),x.jsx("p",{className:"mt-2 font-medium text-gray-600",children:"Updating diagnostics..."})]})}),x.jsxs("div",{className:i?"opacity-40 transition-opacity":"",children:[x.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Data Validation & Quality Analysis"}),x.jsx("div",{className:"border-b border-gray-200 mb-6",children:x.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:re.map(V=>x.jsx("button",{onClick:()=>{d(V.id),V.id==="correlation"&&B(),V.id==="sparsity"&&j()},className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${c===V.id?"border-[#EC7200] text-[#EC7200]":"border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-300"}`,children:V.name},V.id))})}),x.jsx("div",{children:K()}),t&&l&&x.jsx("div",{className:"mt-8 flex justify-end",children:x.jsxs("button",{onClick:l,disabled:i,className:"primary-button flex items-center space-x-2",children:[x.jsx("span",{children:"Proceed to Feature Engineering"}),x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})]})},TZ=({edaResults:e,selections:t,onSelectionsChange:n,onProceed:r,isLoading:i=!1,onQuestionClick:o})=>{const l=()=>{r()},c=d=>{switch(d){case Oe.DEPENDENT_VARIABLE:return"Your main business metric (sales, conversions, prescriptions)";case Oe.TIME_DIMENSION:return"Date or time period column for trend analysis";case Oe.GEO_DIMENSION:return"Geographic identifier (DMA, region, store)";case Oe.MARKETING_SPEND:return"Marketing spend/investment amounts";case Oe.MARKETING_ACTIVITY:return"Marketing activity metrics (impressions, clicks, GRPs)";case Oe.CONTROL_VARIABLE:return"External factors (seasonality, competitors, events)";case Oe.IGNORE:return"Exclude from analysis";default:return""}};return x.jsx("div",{className:"p-4 md:p-6 space-y-8 max-w-6xl mx-auto",children:x.jsxs("div",{className:"glass-pane p-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Configure Your Data"}),x.jsx("p",{className:"text-gray-600 mb-6",children:"I've analyzed your columns and suggested roles for each. Review and adjust as needed for your Marketing Mix Model."}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(d=>x.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsx("h3",{className:"font-semibold text-gray-900",children:d.columnName}),x.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:d.suggestedType===(t[d.columnName]||d.suggestedType)?"AI Suggested":"Modified"})]}),x.jsx("select",{value:t[d.columnName]||d.suggestedType,onChange:f=>n({...t,[d.columnName]:f.target.value}),className:"w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-2 focus:ring-[#EC7200] focus:border-[#EC7200] text-gray-900 mb-2",children:Object.values(Oe).map(f=>x.jsx("option",{value:f,children:f},f))}),x.jsx("p",{className:"text-xs text-gray-500",children:c(t[d.columnName]||d.suggestedType)})]},d.columnName))}),x.jsx("div",{className:"mt-8 flex justify-end",children:x.jsxs("button",{onClick:l,disabled:i,className:"primary-button flex items-center space-x-2",children:[x.jsx("span",{children:i?"Processing...":"Proceed to Validation"}),!i&&x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})},rM=({min:e,max:t,step:n,value:r,onChange:i,formatValue:o=f=>f.toString(),label:l,isLocked:c=!1,onLockChange:d})=>{const f=E.useRef(null),m=E.useCallback(O=>{const _=Math.max(e,Math.min(O,r.max));i({...r,min:_})},[e,r,i]),y=E.useCallback(O=>{const _=Math.min(t,Math.max(O,r.min));i({...r,max:_})},[t,r,i]),v=E.useCallback(()=>{if(d){if(!c){const O=(r.min+r.max)/2,_=Math.round(O/n)*n;i({min:_,max:_})}d(!c)}},[c,d,r,i,n]),S=E.useCallback(O=>{c&&i({min:O,max:O})},[c,i]),T=(r.min-e)/(t-e)*100,w=(r.max-e)/(t-e)*100,A=Math.abs(r.max-r.min),M=t-e,P=A<M*.1,N=A>M*.8;return x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm font-medium text-gray-700",children:l}),d&&x.jsx("button",{onClick:v,className:`px-2 py-1 text-xs rounded transition-colors ${c?"bg-orange-100 text-orange-800 border border-orange-300":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200"}`,title:c?"Unlock to set range":"Lock to single value",children:c?" Locked":" Range"})]}),c?x.jsx("div",{className:"space-y-2",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("input",{type:"range",min:e,max:t,step:n,value:r.min,onChange:O=>S(parseFloat(O.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-thumb"}),x.jsx("span",{className:"font-mono text-gray-700 w-16 text-center",children:o(r.min)})]})}):x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"relative",children:x.jsxs("div",{ref:f,className:"relative w-full h-2 bg-gray-200 rounded-lg",children:[x.jsx("div",{className:"absolute h-2 bg-orange-400 rounded-lg",style:{left:`${T}%`,width:`${w-T}%`}}),x.jsx("input",{type:"range",min:e,max:t,step:n,value:r.min,onChange:O=>m(parseFloat(O.target.value)),className:"absolute w-full h-2 bg-transparent appearance-none cursor-pointer range-thumb pointer-events-none [&::-webkit-slider-thumb]:pointer-events-auto [&::-moz-range-thumb]:pointer-events-auto"}),x.jsx("input",{type:"range",min:e,max:t,step:n,value:r.max,onChange:O=>y(parseFloat(O.target.value)),className:"absolute w-full h-2 bg-transparent appearance-none cursor-pointer range-thumb pointer-events-none [&::-webkit-slider-thumb]:pointer-events-auto [&::-moz-range-thumb]:pointer-events-auto"})]})}),x.jsxs("div",{className:"flex items-center justify-between gap-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("label",{className:"text-xs text-gray-600",children:"Min:"}),x.jsx("input",{type:"number",min:e,max:r.max,step:n,value:r.min,onChange:O=>m(parseFloat(O.target.value)),className:"w-16 px-1 py-1 text-xs border border-gray-300 rounded font-mono"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("label",{className:"text-xs text-gray-600",children:"Max:"}),x.jsx("input",{type:"number",min:r.min,max:t,step:n,value:r.max,onChange:O=>y(parseFloat(O.target.value)),className:"w-16 px-1 py-1 text-xs border border-gray-300 rounded font-mono"})]})]}),(P||N)&&x.jsxs("div",{className:`text-xs px-2 py-1 rounded ${P?"bg-yellow-50 text-yellow-700 border border-yellow-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[P&&" Very narrow range - consider expanding for better model exploration",N&&" Wide range - model will explore many parameter values"]})]})]})},wZ=({initialParams:e,onParamsChange:t,agentSummary:n,onProceed:r,isLoading:i})=>{const[o,l]=E.useState({}),c=(m,y,v)=>{t(e.map(S=>S.channel===m?{...S,[y]:v}:S))},d=(m,y,v)=>{c(m,y,v)},f=(m,y,v)=>{l(S=>({...S,[m]:{...S[m],[y]:v}}))};return e.length===0?x.jsx("p",{className:"p-8 text-center",children:"Loading feature recommendations..."}):x.jsxs("div",{className:"p-4 md:p-6 max-w-7xl mx-auto space-y-8",children:[n&&x.jsx("div",{className:"glass-pane p-6 animate-fade-in",children:x.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",children:n.split(`
`).map((m,y)=>{var v;if(m.startsWith("##")){const S=((v=m.match(/^#+/))==null?void 0:v[0].length)||2,T=m.replace(/^#+\s*/,"");if(S===2)return x.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-4 mb-3",children:T},y);if(S===3)return x.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-3 mb-2",children:T},y)}if(m.includes("**")){const S=m.split(/\*\*(.*?)\*\*/g);return x.jsx("p",{className:"mb-2",children:S.map((T,w)=>w%2===0?T:x.jsx("strong",{className:"font-semibold text-gray-900",children:T},w))},y)}return m.startsWith("")||m.startsWith("-")?x.jsx("li",{className:"ml-4 mb-1",children:m.substring(1).trim()},y):m.trim()?x.jsx("p",{className:"mb-2",children:m},y):null})})}),x.jsxs("div",{className:"glass-pane p-6",children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Feature Engineering"}),x.jsx("p",{className:"text-gray-600 mb-6",children:"Review and adjust the agent's recommended parameters. Your domain expertise is valuable here."}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-gray-100",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-3 w-1/6",children:"Channel"}),x.jsx("th",{className:"p-3 w-1/4",children:"Adstock (Decay)"}),x.jsx("th",{className:"p-3 w-1/4",children:"Lag (Weeks)"}),x.jsx("th",{className:"p-3 w-1/6",children:"Transformation"}),x.jsx("th",{className:"p-3",children:"AI Rationale"})]})}),x.jsx("tbody",{children:e.map(m=>{var y,v;return x.jsxs("tr",{className:"border-b border-gray-200",children:[x.jsx("td",{className:"p-3 font-semibold",children:m.channel}),x.jsx("td",{className:"p-3",children:x.jsx(rM,{min:0,max:.95,step:.05,value:m.adstock,onChange:S=>d(m.channel,"adstock",S),formatValue:S=>S.toFixed(2),label:"",isLocked:((y=o[m.channel])==null?void 0:y.adstock)||!1,onLockChange:S=>f(m.channel,"adstock",S)})}),x.jsx("td",{className:"p-3",children:x.jsx(rM,{min:0,max:8,step:1,value:m.lag,onChange:S=>d(m.channel,"lag",S),formatValue:S=>S.toString(),label:"",isLocked:((v=o[m.channel])==null?void 0:v.lag)||!1,onLockChange:S=>f(m.channel,"lag",S)})}),x.jsx("td",{className:"p-2",children:x.jsxs("select",{value:m.transform,onChange:S=>c(m.channel,"transform",S.target.value),className:"w-full p-2 bg-white border border-gray-300 rounded-md",children:[x.jsx("option",{children:"Log-transform"}),x.jsx("option",{children:"Negative Exponential"}),x.jsx("option",{children:"S-Curve"}),x.jsx("option",{children:"Power"})]})}),x.jsx("td",{className:"p-3 text-gray-600 text-xs",children:x.jsx("div",{className:"space-y-1 whitespace-pre-wrap",children:m.rationale.split(`
`).map((S,T)=>{if(S.startsWith("**Why")){const[w,...A]=S.split(":");return x.jsxs("div",{children:[x.jsxs("span",{className:"font-semibold text-gray-800",children:[w.replace(/\*/g,""),":"]}),x.jsx("span",{className:"text-gray-600",children:A.join(":")})]},T)}else if(S.startsWith("**Watchout")){const[w,...A]=S.split(":");return x.jsxs("div",{className:"mt-1 p-1 bg-yellow-50 rounded",children:[x.jsxs("span",{className:"font-semibold text-yellow-800",children:[" ",w.replace(/\*/g,""),":"]}),x.jsx("span",{className:"text-yellow-700",children:A.join(":")})]},T)}return x.jsx("div",{children:S},T)})})})]},m.channel)})})]})}),r&&x.jsx("div",{className:"flex justify-end mt-8",children:x.jsxs("button",{onClick:r,disabled:i||e.length===0,className:"primary-button flex items-center space-x-2",children:[x.jsx("span",{children:"Proceed to Modeling"}),x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})},iM={algos:[],minR2:0,maxMAPE:50,minROI:0,showWarnings:null,showLegacy:!1},AZ=({models:e,selectedChannels:t,activeModelId:n,selectedModelIds:r,onSetActiveModel:i,onToggleModelSelection:o,onRecalibrate:l,isRecalibrating:c,currentFeaturesHash:d,currentRangesHash:f})=>{const[m,y]=E.useState(iM),[v,S]=E.useState(!1),T=E.useMemo(()=>Array.from(new Set(e.map(_=>_.algo))),[e]),{filteredModels:w,groupedModels:A,hasMatchingModels:M,hasStaleModels:P}=E.useMemo(()=>{console.log("Filtering models:",{totalModels:e.length,selectedChannels:t,filters:m,sampleModel:e[0]});let _=e.filter((B,j)=>{var V;const re=[];if(!gy(B,t)&&(re.push(`Channel mismatch: ${JSON.stringify(B.channels)} vs ${JSON.stringify(t)}`),!m.showLegacy))return!1;if(d&&f&&ew(B,d,f)&&!m.showLegacy)return re.push("Stale model excluded (provenance mismatch)"),!1;if(m.algos.length>0&&!m.algos.includes(B.algo))return re.push(`Algorithm ${B.algo} not in ${m.algos}`),!1;if(B.rsq!=null&&B.rsq<m.minR2)return re.push(`R ${B.rsq} < ${m.minR2}`),!1;if(B.mape!=null&&B.mape>m.maxMAPE)return re.push(`MAPE ${B.mape} > ${m.maxMAPE}`),!1;if(B.roi!=null&&B.roi<m.minROI)return re.push(`ROI ${B.roi} < ${m.minROI}`),!1;if(m.showWarnings!==null&&B.diagnostics){const U=((V=B.diagnostics)==null?void 0:V.warning_count)||0;if(m.showWarnings===!0&&U===0)return re.push("No warnings but warnings required"),!1;if(m.showWarnings===!1&&U>0)return re.push("Has warnings but warnings excluded"),!1}return j<3&&console.log(`Model ${B.id}: ${re.length>0?"FILTERED: "+re.join(", "):"PASSED"}`),!0});const D=_.reduce((B,j)=>(B[j.algo]||(B[j.algo]=[]),B[j.algo].push(j),B),{});Object.keys(D).forEach(B=>{D[B].sort((j,re)=>Math.abs(j.roi-re.roi)>.01?re.roi-j.roi:Math.abs(j.rsq-re.rsq)>.01?re.rsq-j.rsq:j.mape-re.mape)});const k=e.some(B=>{const j=!gy(B,t),re=d&&f&&ew(B,d,f);return j||re});return console.log(`Filter result: ${_.length}/${e.length} models passed`),{filteredModels:_,groupedModels:D,hasMatchingModels:_.length>0,hasStaleModels:k}},[e,t,m,d,f]),N=v?1/0:20;w.slice(0,N);const O=_=>{const D=[];return _.isNew&&D.push({text:"NEW",className:"bg-green-100 text-green-700"}),_.isPinned&&D.push({text:"PIN",className:"bg-blue-100 text-blue-700"}),_.diagnostics&&_.diagnostics.warning_count>0&&D.push({text:` ${_.diagnostics.warning_count}`,className:"bg-yellow-100 text-yellow-700"}),D};return!M&&!P?x.jsxs("div",{className:"w-1/2 flex flex-col glass-pane p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-xl font-bold",children:"Model Leaderboard"}),x.jsx("button",{onClick:l,disabled:c,className:"px-4 py-2 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white text-sm font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Training...":"Start Training"})]}),x.jsx("div",{className:"flex-grow flex items-center justify-center text-center p-8",children:x.jsxs("div",{children:[x.jsx("div",{className:"text-4xl mb-4",children:""}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No models match your current selection"}),x.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Train new models with your selected channels and parameter ranges."})]})})]}):x.jsxs("div",{className:"w-1/2 flex flex-col glass-pane p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold",children:["Model Leaderboard (",w.length,")"]}),e.length>w.length&&x.jsxs("p",{className:"text-xs text-gray-500",children:[e.length-w.length," models hidden by filters"]})]}),x.jsxs("div",{className:"space-x-2",children:[x.jsx("button",{onClick:()=>y(iM),className:"px-3 py-1 text-xs text-gray-600 hover:text-gray-800 border border-gray-300 rounded",children:"Reset Filters"}),x.jsx("button",{onClick:l,disabled:c,className:"px-4 py-2 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white text-sm font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Training...":"Recalibrate"})]})]}),x.jsxs("div",{className:"mb-4 space-y-3 p-3 bg-gray-50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("label",{className:"font-medium text-gray-700",children:"Algorithms:"}),x.jsxs("div",{className:"flex flex-wrap gap-1",children:[T.map(_=>x.jsxs("label",{className:"flex items-center space-x-1",children:[x.jsx("input",{type:"checkbox",checked:m.algos.includes(_),onChange:D=>{D.target.checked?y(k=>({...k,algos:[...k.algos,_]})):y(k=>({...k,algos:k.algos.filter(B=>B!==_)}))},className:"rounded text-xs"}),x.jsx("span",{className:"text-xs",children:_.replace(" Regression","")})]},_)),m.algos.length>0&&x.jsx("button",{onClick:()=>y(_=>({..._,algos:[]})),className:"text-xs text-red-600 hover:text-red-800",children:"Clear"})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("label",{className:"font-medium text-gray-700",children:"R"}),x.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:m.minR2,onChange:_=>y(D=>({...D,minR2:parseFloat(_.target.value)})),className:"w-16 text-xs border rounded px-1 py-1"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("label",{className:"font-medium text-gray-700",children:"MAPE"}),x.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:m.maxMAPE,onChange:_=>y(D=>({...D,maxMAPE:parseFloat(_.target.value)})),className:"w-16 text-xs border rounded px-1 py-1"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("label",{className:"font-medium text-gray-700",children:"ROI"}),x.jsx("input",{type:"number",min:"-10",max:"10",step:"0.1",value:m.minROI,onChange:_=>y(D=>({...D,minROI:parseFloat(_.target.value)})),className:"w-16 text-xs border rounded px-1 py-1"})]})]}),x.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[x.jsxs("div",{children:[x.jsx("label",{className:"font-medium text-gray-700",children:"Warnings:"}),x.jsxs("select",{value:m.showWarnings===null?"all":m.showWarnings.toString(),onChange:_=>{const D=_.target.value==="all"?null:_.target.value==="true";y(k=>({...k,showWarnings:D}))},className:"ml-2 text-xs border rounded px-2 py-1",children:[x.jsx("option",{value:"all",children:"All"}),x.jsx("option",{value:"true",children:"Only warnings"}),x.jsx("option",{value:"false",children:"No warnings"})]})]}),P&&x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("input",{type:"checkbox",id:"showLegacy",checked:m.showLegacy,onChange:_=>y(D=>({...D,showLegacy:_.target.checked})),className:"rounded text-orange-600 focus:ring-orange-500"}),x.jsxs("label",{htmlFor:"showLegacy",className:"font-medium text-orange-700 flex items-center gap-1",children:[x.jsx("span",{children:""}),x.jsx("span",{children:"Show legacy results (unsafe - mismatched channels/params)"})]})]})]}),!1]}),x.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 -mr-2",children:[Object.entries(A).map(([_,D])=>x.jsxs("div",{className:"mb-6 last:mb-0",children:[x.jsxs("h3",{className:"font-semibold text-gray-800 text-sm mb-2 bg-gray-50 px-2 py-1 rounded",children:[_.replace(" Regression","")," (",D.length,")"]}),x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-gray-100 sticky top-0",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2 w-8"}),x.jsx("th",{className:"p-2",children:"Model ID"}),x.jsx("th",{className:"p-2",children:"Metrics"}),x.jsx("th",{className:"p-2",children:"Status"})]})}),x.jsx("tbody",{children:D.slice(0,N).map(k=>{const B=k.id===n,j=r.includes(k.id),re=O(k);return x.jsxs("tr",{className:`border-b border-gray-200 cursor-pointer transition-colors hover:bg-gray-100 ${B?"bg-[#EC7200]/10":""}`,children:[x.jsx("td",{className:"p-2",children:x.jsx("input",{type:"checkbox",checked:j,onChange:()=>o(k.id),onClick:K=>K.stopPropagation(),className:"rounded"})}),x.jsx("td",{className:"p-2 font-semibold cursor-pointer",onClick:()=>i(k.id),children:k.id}),x.jsx("td",{className:"p-2 cursor-pointer",onClick:()=>i(k.id),children:x.jsx("div",{className:"space-y-1",children:x.jsxs("div",{className:"flex items-center space-x-3 text-xs",children:[x.jsxs("span",{className:"font-mono text-[#32A29B]",children:["R: ",k.rsq.toFixed(2)]}),x.jsxs("span",{className:"font-mono text-[#32A29B]",children:["MAPE: ",k.mape.toFixed(1),"%"]}),x.jsxs("span",{className:`font-mono ${k.roi<0?"text-red-600":"text-green-600"}`,children:["ROI: $",k.roi.toFixed(2)]})]})})}),x.jsx("td",{className:"p-2",children:x.jsx("div",{className:"flex flex-wrap gap-1",children:re.map((K,V)=>x.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${K.className}`,children:K.text},V))})})]},k.id)})})]})]},_)),!v&&w.length>N&&x.jsx("div",{className:"text-center py-4",children:x.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-lg",children:["Show ",w.length-N," more models"]})})]}),r.length>0&&x.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-3 mt-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{className:"text-sm text-gray-600",children:[r.length," model",r.length!==1?"s":""," selected"]}),x.jsxs("div",{className:"space-x-2",children:[x.jsx("button",{onClick:()=>r.forEach(_=>o(_)),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Clear"}),x.jsxs("button",{disabled:r.length<2||r.length>3,onClick:()=>{const _=new CustomEvent("modelsCompare",{detail:{selectedModelIds:r}});window.dispatchEvent(_)},className:"px-4 py-2 bg-[#32A29B] hover:bg-[#32A29B]/90 text-white text-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:["Compare (",r.length,")"]})]})]})})]})},fv=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},EZ=(e,t,n,r)=>{if(!e)return{model:null,contrib:null,diag:null,consistent:!1,inconsistencyReason:"No model selected"};const i=t[e]||null,o=n[e]||null,l=r[e]||null;if(!i||!o||!l){const y=[];return i||y.push("model"),o||y.push("contributions"),l||y.push("diagnostics"),{model:i,contrib:o,diag:l,consistent:!1,inconsistencyReason:`Missing data: ${y.join(", ")}`}}const c=new Set(i.channels||[]),d=new Set(o.channels),f=new Set(l.channels);if(!(fv(c,d)&&fv(c,f))){const y=`Channel mismatch - Model: [${Array.from(c).join(", ")}], Contributions: [${Array.from(d).join(", ")}], Diagnostics: [${Array.from(f).join(", ")}]`;return{model:i,contrib:o,diag:l,consistent:!1,inconsistencyReason:y}}return{model:i,contrib:o,diag:l,consistent:!0}},MZ=e=>{const t={},n={},r={};return e.forEach(i=>{t[i.id]=i;const o=i.channels||i.details.map(l=>l.name);n[i.id]={modelId:i.id,channels:o,contributions:i.details.map(l=>({channel:l.name,value:l.contribution,percentage:l.contribution}))},r[i.id]={modelId:i.id,channels:o,diagnostics:i.details.map(l=>{var c,d,f,m,y,v,S,T,w,A,M,P,N,O,_;return{channel:l.name,pValue:l.pValue,coefficient:(f=(d=(c=i.diagnostics)==null?void 0:c.channel_diagnostics)==null?void 0:d.find(D=>D.name===l.name))==null?void 0:f.coefficient,stderr:(v=(y=(m=i.diagnostics)==null?void 0:m.channel_diagnostics)==null?void 0:y.find(D=>D.name===l.name))==null?void 0:v.stderr,confidence_interval:(w=(T=(S=i.diagnostics)==null?void 0:S.channel_diagnostics)==null?void 0:T.find(D=>D.name===l.name))==null?void 0:w.confidence_interval,sign:(P=(M=(A=i.diagnostics)==null?void 0:A.channel_diagnostics)==null?void 0:M.find(D=>D.name===l.name))==null?void 0:P.actual_sign,importance:(_=(O=(N=i.diagnostics)==null?void 0:N.channel_diagnostics)==null?void 0:O.find(D=>D.name===l.name))==null?void 0:_.importance}})}}),{modelById:t,contributionsById:n,diagnosticsById:r}},NP=(e,t,n)=>{const{channel:r,value:i}=e;if(i<=0)return{channel:r,contribution:i,isReportable:!1,reason:"Negative or zero contribution"};if(!t)return{channel:r,contribution:i,isReportable:!1,reason:"No diagnostic data available"};if(n.includes("Regression")||n.includes("Bayesian")||n.includes("GLM")){const l=(t.coefficient||0)>0,c=t.pValue!==null&&t.pValue!==void 0?t.pValue<.05:!1,d=t.confidence_interval?t.confidence_interval[0]>0:!1;return l?!c&&!d?{channel:r,contribution:i,isReportable:!1,reason:"Not statistically significant (p>=0.05) and CI crosses zero"}:{channel:r,contribution:i,isReportable:!0,reason:c?"Statistically significant":"Confidence interval above zero"}:{channel:r,contribution:i,isReportable:!1,reason:"Non-positive coefficient"}}else return(t.importance||0)>0?{channel:r,contribution:i,isReportable:!0,reason:"Positive SHAP importance"}:{channel:r,contribution:i,isReportable:!1,reason:"Non-positive SHAP importance"}},_Z=(e,t,n,r=!1)=>{const i=e.map(y=>{const v=t.find(S=>S.channel===y.channel);return NP(y,v,n)}),o=[],l=[];i.forEach((y,v)=>{const S=e[v];r||y.isReportable?o.push(S):l.push(S)});const c=o.reduce((y,v)=>y+v.value,0),d=l.reduce((y,v)=>y+v.value,0),f=e.reduce((y,v)=>y+v.value,0),m=Math.abs(c+d-f);return{reportable:o,hidden:l,hiddenSum:d,totalSum:f,reconciliationCheck:{visibleSum:c,hiddenSum:d,totalSum:f,difference:m,isValid:m<1e-6}}},NZ=(e,t=!0)=>{const n=e.reportable.map(r=>({name:r.channel,contribution:r.percentage,color:"#32A29B"}));return t&&e.hiddenSum!==0&&n.push({name:"Unattributed / Hidden",contribution:e.hiddenSum/e.totalSum*100,isHidden:!0,color:"#9CA3AF"}),n},bf={reportable:"#32A29B",negative:"#ef4444",text:"#1A1628"},RZ=({contributions:e,diagnostics:t,modelAlgo:n,includeAll:r=!1,onToggleIncludeAll:i,showToggle:o=!0})=>{const l=_Z(e,t,n,r),c=r?e.map(f=>({name:f.channel,contribution:f.percentage,color:f.value<0?bf.negative:bf.reportable,isNegative:f.value<0})):NZ(l),d=l.hidden.length;return x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("h4",{className:"font-semibold text-gray-800",children:"Channel Contribution"}),o&&i&&x.jsx("button",{onClick:()=>i(!r),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border",title:r?"Hide negative/insignificant effects":"Show all contributions (debug)",children:r?"Hide filtered":"Include all (debug)"})]}),!r&&d>0&&x.jsx("div",{className:"mb-3",children:x.jsxs("div",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:[x.jsx("span",{className:"mr-1",children:""}),"Hiding ",d," negative/insignificant effect",d!==1?"s":""," (see diagnostics)"]})}),x.jsx("div",{className:"mb-4",children:x.jsx(hu,{width:"100%",height:200,children:x.jsxs(nx,{data:c,layout:"vertical",margin:{top:5,right:20,left:80,bottom:5},children:[x.jsx(so,{type:"number",hide:!0}),x.jsx(lo,{type:"category",dataKey:"name",width:75,stroke:bf.text,fontSize:11,interval:0}),x.jsx(mu,{wrapperClassName:"glass-pane",cursor:{fill:"rgba(0,0,0, 0.05)"},formatter:f=>[`${f.toFixed(1)}%`,"Contribution"]}),x.jsx(tm,{dataKey:"contribution",name:"Contribution",children:c.map((f,m)=>x.jsx(Pu,{fill:f.color||bf.reportable,stroke:f.isHidden?"#6B7280":"none",strokeWidth:f.isHidden?1:0,strokeDasharray:f.isHidden?"2,2":"none"},`cell-${m}`))})]})})}),!1,x.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[x.jsxs("div",{children:["Visible: ",l.reportable.length," channels (",l.reconciliationCheck.visibleSum.toFixed(1),"%)"]}),!r&&l.hiddenSum!==0&&x.jsxs("div",{children:["Hidden: ",l.hidden.length," channels (",(Math.abs(l.hiddenSum)/l.totalSum*100).toFixed(1),"%)"]}),x.jsxs("div",{children:["Total: ",l.totalSum.toFixed(1),"%",l.reconciliationCheck.isValid?" ":`  (${l.reconciliationCheck.difference.toFixed(6)} error)`]})]})]})},PZ=({diagnostics:e,contributions:t,modelAlgo:n,showAdvanced:r,includeAll:i=!1})=>{if(e.length===0)return null;const o=new Map;return t.forEach(l=>{const c=e.find(f=>f.channel===l.channel),d=NP(l,c,n);o.set(l.channel,{isReportable:d.isReportable,reason:d.reason})}),x.jsxs("div",{className:"overflow-x-auto",children:[x.jsxs("table",{className:"w-full text-left text-xs",children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Channel"}),x.jsx("th",{className:"p-2",children:"Coeff"}),r&&x.jsx("th",{className:"p-2",children:"Std Err"}),x.jsx("th",{className:"p-2",children:"P-Value"}),r&&x.jsx("th",{className:"p-2",children:"95% CI"}),x.jsx("th",{className:"p-2",children:"Sign"}),x.jsx("th",{className:"p-2",children:"Importance"}),x.jsx("th",{className:"p-2",children:"Shown?"})]})}),x.jsx("tbody",{children:e.map(l=>{const c=o.get(l.channel),d=i||((c==null?void 0:c.isReportable)??!1);return x.jsxs("tr",{className:"border-b border-gray-100",children:[x.jsx("td",{className:"p-2 font-medium",children:l.channel}),x.jsx("td",{className:"p-2 font-mono",children:l.coefficient!==void 0?l.coefficient.toFixed(4):"-"}),r&&x.jsx("td",{className:"p-2 font-mono",children:l.stderr!==void 0?l.stderr.toFixed(4):"-"}),x.jsx("td",{className:"p-2 font-mono",children:l.pValue!==null&&l.pValue!==void 0?l.pValue.toFixed(4):"-"}),r&&x.jsx("td",{className:"p-2 font-mono text-xs",children:l.confidence_interval?`[${l.confidence_interval[0].toFixed(2)}, ${l.confidence_interval[1].toFixed(2)}]`:"-"}),x.jsx("td",{className:"p-2",children:x.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${l.sign==="positive"?"bg-green-100 text-green-800":l.sign==="negative"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:l.sign==="positive"?"+":l.sign==="negative"?"-":"~"})}),x.jsx("td",{className:"p-2 font-mono",children:l.importance!==void 0?l.importance.toFixed(3):"-"}),x.jsx("td",{className:"p-2",children:x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("span",{className:`px-1 py-0.5 rounded text-xs font-medium ${d?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d?"Yes":"No"}),c&&!c.isReportable&&x.jsx("span",{className:"text-gray-400 cursor-help",title:c.reason,children:""})]})})]},l.channel)})})]}),x.jsxs("div",{className:"mt-3 text-xs text-gray-500 space-y-1",children:[x.jsx("div",{className:"font-medium",children:"Reportability rules:"}),x.jsxs("div",{className:"ml-2 space-y-1",children:[n.includes("Regression")||n.includes("Bayesian")||n.includes("GLM")?x.jsxs(x.Fragment,{children:[x.jsx("div",{children:" Statistical models: Show if coefficient > 0 AND (p < 0.05 OR CI lower bound > 0)"}),x.jsx("div",{children:" Hidden reasons: Negative coefficient, p  0.05 with CI crossing zero"})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{children:" Tree/NN models: Show if SHAP importance > 0"}),x.jsx("div",{children:" Hidden reasons: Non-positive SHAP importance"})]}),x.jsx("div",{children:" Negative contributions are never shown regardless of significance"})]})]})]})},DZ=({model:e})=>{const n=(()=>{const r=[];if(e.rsq>=.85?r.push(`Excellent model fit (R = ${(e.rsq*100).toFixed(1)}%) with ${e.mape.toFixed(1)}% MAPE indicates strong predictive accuracy across the business.`):e.rsq>=.7?r.push(`Good model performance (R = ${(e.rsq*100).toFixed(1)}%) with ${e.mape.toFixed(1)}% prediction error shows reliable attribution.`):r.push(`Limited model fit (R = ${(e.rsq*100).toFixed(1)}%) with ${e.mape.toFixed(1)}% MAPE suggests challenges in capturing business patterns.`),e.roi>2?r.push(`Strong economic performance with ${e.roi.toFixed(2)}x blended ROI demonstrates effective marketing efficiency.`):e.roi>0?r.push(`Positive ROI of ${e.roi.toFixed(2)}x shows profitable marketing allocation with optimization opportunities.`):r.push(`Negative ROI of ${e.roi.toFixed(2)}x indicates current marketing mix needs significant rebalancing.`),e.diagnostics&&e.diagnostics.warning_count>0){const i=[];e.diagnostics.weak_channels&&e.diagnostics.weak_channels.length>0&&i.push(`${e.diagnostics.weak_channels.length} channels showing weak statistical significance`),e.diagnostics.sign_mismatch&&e.diagnostics.sign_mismatch.length>0&&i.push(`${e.diagnostics.sign_mismatch.length} channels with unexpected coefficient signs`),e.diagnostics.overfit_risk&&i.push("potential overfitting detected"),r.push(`Model diagnostics flag ${i.join(", ")} - review channel selection and data quality.`)}else r.push("Clean diagnostics with no statistical warnings indicate robust model estimation.");return r})();return x.jsxs("div",{className:"space-y-3",children:[x.jsx("h5",{className:"font-medium text-gray-800 text-sm",children:"AI Explanation of Results"}),x.jsx("div",{className:"text-sm text-gray-700 space-y-2",children:n.map((r,i)=>x.jsx("p",{children:r},i))})]})},kZ=({model:e,models:t,onRecalibrate:n,onRequestFinalize:r,isRecalibrating:i,selectedChannels:o,isStale:l})=>{var M;const[c,d]=E.useState(!1),[f,m]=E.useState(!1),[y,v]=E.useState(!1),[S,T]=E.useState(!1),w=E.useMemo(()=>{const{modelById:P,contributionsById:N,diagnosticsById:O}=MZ(t);return EZ(e.id,P,N,O)},[e.id,t]);E.useEffect(()=>{var N;const P=!gy(e,o);v(P),P&&console.warn(`[ModelDetails] Channel mismatch detected: model has [${(N=e.channels)==null?void 0:N.join(", ")}] but selected are [${o.join(", ")}]`)},[e,o]);const A=e.roi>0?"text-green-600":"text-red-600";return l||y?x.jsx("div",{className:"glass-pane p-6 h-full flex flex-col items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-4xl mb-4",children:""}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:y?"Channel Mismatch Detected":"Model Parameters Outdated"}),x.jsx("p",{className:"text-gray-600 mb-2",children:y?`This model was trained with different channels: [${(M=e.channels)==null?void 0:M.join(", ")}]`:"Feature parameters or channel selections have changed since this model was trained."}),x.jsx("p",{className:"text-gray-500 text-sm mb-4",children:y?`Current selection: [${o.join(", ")}]`:"Recalibration is required to ensure accurate results."}),x.jsx("button",{onClick:n,disabled:i,className:"px-6 py-3 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white font-medium rounded-lg disabled:opacity-50",children:i?"Training...":"Recalibrate Now"})]})}):w.consistent?x.jsxs("div",{className:"glass-pane p-6 h-full flex flex-col relative",children:[i&&x.jsx("div",{className:"absolute inset-0 bg-white/70 backdrop-blur-sm flex justify-center items-center rounded-lg z-10 transition-opacity",children:x.jsxs("div",{className:"text-center",children:[x.jsx(fa,{}),x.jsx("p",{className:"mt-2 font-medium text-gray-600",children:"Training new models..."})]})}),x.jsxs("div",{className:`flex flex-col h-full ${i?"opacity-40 pointer-events-none":"opacity-100"}`,children:[x.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Active Model: ",e.id," (",e.algo.replace(" Regression",""),")"]}),x.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-6",children:[x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"R-Square"}),x.jsx("div",{className:"text-2xl font-bold text-[#32A29B]",children:e.rsq.toFixed(2)})]}),x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"MAPE"}),x.jsxs("div",{className:"text-2xl font-bold text-[#32A29B]",children:[e.mape.toFixed(1),"%"]})]}),x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Blended ROI"}),x.jsxs("div",{className:`text-2xl font-bold ${A}`,children:["$",e.roi.toFixed(2)]})]})]}),x.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 -mr-2 space-y-6",children:[x.jsx(DZ,{model:e}),w.contrib&&w.diag&&x.jsx(RZ,{contributions:w.contrib.contributions,diagnostics:w.diag.diagnostics,modelAlgo:e.algo,includeAll:S,onToggleIncludeAll:T,showToggle:!0}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h4",{className:"font-semibold text-gray-800",children:"Model Diagnostics"}),x.jsx("button",{onClick:()=>m(!f),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded",children:f?"Simple":"Advanced"})]}),e.diagnostics&&e.diagnostics.warning_count>0&&x.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[x.jsxs("h5",{className:"font-medium text-yellow-800 mb-2",children:[" Diagnostic Warnings (",e.diagnostics.warning_count,")"]}),x.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.diagnostics.weak_channels&&e.diagnostics.weak_channels.length>0&&x.jsxs("li",{children:[" Weak channels: ",e.diagnostics.weak_channels.join(", ")]}),e.diagnostics.sign_mismatch&&e.diagnostics.sign_mismatch.length>0&&x.jsxs("li",{children:[" Sign mismatches: ",e.diagnostics.sign_mismatch.join(", ")]}),e.diagnostics.overfit_risk&&x.jsx("li",{children:" Potential overfitting detected"})]})]}),w.diag&&w.contrib&&x.jsx(PZ,{diagnostics:w.diag.diagnostics,contributions:w.contrib.contributions,modelAlgo:e.algo,showAdvanced:f,includeAll:S})]}),x.jsxs("div",{children:[x.jsxs("button",{onClick:()=>d(!c),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100",children:[x.jsx("h4",{className:"font-semibold text-gray-800",children:"Chosen Parameters"}),x.jsx("span",{className:`transform transition-transform ${c?"rotate-180":""}`,children:""})]}),c&&x.jsx("div",{className:"mt-4 space-y-2",children:e.details.map(P=>x.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[x.jsx("span",{className:"font-medium",children:P.name}),x.jsxs("div",{className:"flex space-x-2 text-sm",children:[x.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded",children:["a=",P.adstock.toFixed(2)]}),x.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded",children:["L=",P.lag]}),x.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded",children:P.transform.replace("-transform","")})]})]},P.name))})]})]}),x.jsxs("div",{className:"mt-auto pt-6 space-y-3",children:[x.jsx("button",{onClick:n,disabled:i,className:"w-full bg-[#EC7200] hover:bg-[#EC7200]/90 text-white text-base font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Training New Models...":"Recalibrate (Create New Models)"}),x.jsx("button",{onClick:r,className:"w-full primary-button text-base font-semibold py-3 flex items-center justify-center gap-2",children:"Finalize Model & Generate Report"})]})]})]}):x.jsx("div",{className:"glass-pane p-6 h-full flex flex-col items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-4xl mb-4",children:""}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Data Inconsistency Detected"}),x.jsx("p",{className:"text-gray-600 mb-2",children:"Model data is not properly synchronized."}),x.jsx("p",{className:"text-sm text-gray-500 mb-4",children:w.inconsistencyReason}),x.jsx("button",{onClick:n,disabled:i,className:"px-6 py-3 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white font-medium rounded-lg disabled:opacity-50",children:i?"Training...":"Recalibrate Now"})]})})},IZ=({model:e,index:t})=>{const n=e.roi>0?"text-green-600":"text-red-600",r={text:"#1A1628"},i=["border-blue-500 bg-blue-50","border-green-500 bg-green-50","border-purple-500 bg-purple-50"];return x.jsxs("div",{className:`rounded-lg border-2 p-4 space-y-4 ${i[t]} flex-1`,children:[x.jsxs("div",{className:"text-center",children:[x.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:e.id}),x.jsx("p",{className:"text-sm text-gray-600",children:e.algo.replace(" Regression","")})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[x.jsxs("div",{className:"bg-white p-2 rounded",children:[x.jsx("div",{className:"text-xs text-gray-500",children:"R"}),x.jsx("div",{className:"font-bold text-[#32A29B]",children:e.rsq.toFixed(2)})]}),x.jsxs("div",{className:"bg-white p-2 rounded",children:[x.jsx("div",{className:"text-xs text-gray-500",children:"MAPE"}),x.jsxs("div",{className:"font-bold text-[#32A29B]",children:[e.mape.toFixed(1),"%"]})]}),x.jsxs("div",{className:"bg-white p-2 rounded",children:[x.jsx("div",{className:"text-xs text-gray-500",children:"ROI"}),x.jsxs("div",{className:`font-bold ${n}`,children:["$",e.roi.toFixed(2)]})]})]}),x.jsxs("div",{children:[x.jsx("h5",{className:"font-medium text-gray-800 mb-2 text-sm",children:"Channel Contribution"}),x.jsx(hu,{width:"100%",height:150,children:x.jsxs(nx,{data:e.details,layout:"vertical",margin:{top:5,right:10,left:40,bottom:5},children:[x.jsx(so,{type:"number",hide:!0}),x.jsx(lo,{type:"category",dataKey:"name",width:35,stroke:r.text,fontSize:10,interval:0}),x.jsx(mu,{wrapperClassName:"glass-pane",cursor:{fill:"rgba(0,0,0, 0.05)"},formatter:o=>`${o.toFixed(1)}%`}),x.jsx(tm,{dataKey:"contribution",name:"Contribution",stackId:"a",children:e.details.map((o,l)=>x.jsx(Pu,{fill:o.included?o.pValue!=null&&o.pValue>.1?"#f87171":"#32A29B":"#9ca3af"},`cell-${l}`))})]})})]}),x.jsxs("div",{children:[x.jsx("h5",{className:"font-medium text-gray-800 mb-2 text-sm",children:"Diagnostics"}),x.jsxs("div",{className:"space-y-1 text-xs",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:"Warnings:"}),x.jsx("span",{className:e.diagnostics&&e.diagnostics.warning_count>0?"text-yellow-600 font-medium":"text-green-600",children:e.diagnostics&&e.diagnostics.warning_count>0?` ${e.diagnostics.warning_count}`:" Clean"})]}),e.diagnostics&&e.diagnostics.weak_channels&&e.diagnostics.weak_channels.length>0&&x.jsxs("div",{className:"text-yellow-600",children:["Weak: ",e.diagnostics.weak_channels.slice(0,2).join(", "),e.diagnostics.weak_channels.length>2&&` +${e.diagnostics.weak_channels.length-2}`]}),e.diagnostics&&e.diagnostics.sign_mismatch&&e.diagnostics.sign_mismatch.length>0&&x.jsxs("div",{className:"text-red-600",children:["Sign issues: ",e.diagnostics.sign_mismatch.slice(0,2).join(", ")]}),e.diagnostics&&e.diagnostics.overfit_risk&&x.jsx("div",{className:"text-orange-600",children:"Overfit risk detected"})]})]}),x.jsxs("div",{children:[x.jsx("h5",{className:"font-medium text-gray-800 mb-2 text-sm",children:"Key Parameters"}),x.jsxs("div",{className:"space-y-1",children:[e.details.slice(0,3).map(o=>x.jsxs("div",{className:"flex justify-between items-center text-xs",children:[x.jsx("span",{className:"font-medium",children:o.name}),x.jsxs("div",{className:"flex space-x-1",children:[x.jsxs("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-800 rounded",children:["a=",o.adstock.toFixed(2)]}),x.jsxs("span",{className:"px-1 py-0.5 bg-green-100 text-green-800 rounded",children:["L=",o.lag]})]})]},o.name)),e.details.length>3&&x.jsxs("div",{className:"text-xs text-gray-500",children:["+",e.details.length-3," more channels"]})]})]})]})},OZ=e=>{const t=[],n=[...e].sort((c,d)=>d.rsq-c.rsq),r=[...e].sort((c,d)=>d.roi-c.roi);t.push(`Performance leader: ${n[0].id} shows highest R (${(n[0].rsq*100).toFixed(1)}%), while ${r[0].id} delivers best ROI (${r[0].roi.toFixed(2)}x).`);const i=e.map(c=>c.algo.replace(" Regression",""));new Set(i).size>1&&t.push(`Algorithm comparison: ${i.join(" vs ")} demonstrate different modeling approaches with varying complexity-accuracy tradeoffs.`);const o=e.map(c=>{var d;return((d=c.diagnostics)==null?void 0:d.warning_count)||0}),l=e.filter(c=>c.diagnostics&&c.diagnostics.warning_count===0);if(l.length>0)t.push(`Statistical reliability: ${l.map(c=>c.id).join(", ")} show${l.length===1?"s":""} clean diagnostics with no statistical warnings.`);else{const c=Math.min(...o),d=e.find(f=>f.diagnostics&&f.diagnostics.warning_count===c);t.push(`Diagnostic quality: ${d==null?void 0:d.id} has fewest warnings (${c}), suggesting better statistical foundation.`)}return t},LZ=({models:e,onClose:t})=>{const n=OZ(e);return x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[x.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Model Comparison"}),x.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]}),x.jsxs("div",{className:"p-6 space-y-6",children:[x.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[x.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"AI Comparison Analysis"}),x.jsx("div",{className:"space-y-2",children:n.map((r,i)=>x.jsx("p",{className:"text-sm text-blue-800",children:r},i))})]}),x.jsx("div",{className:"flex gap-4",children:e.map((r,i)=>x.jsx(IZ,{model:r,index:i},r.id))}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Detailed Parameter Comparison"}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm border border-gray-200 rounded-lg",children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-3 border-r border-gray-200",children:"Channel"}),e.map((r,i)=>x.jsx("th",{className:`p-3 text-center ${i<e.length-1?"border-r border-gray-200":""}`,children:r.id},r.id))]})}),x.jsx("tbody",{children:e[0].details.map(r=>x.jsxs("tr",{className:"border-t border-gray-100",children:[x.jsx("td",{className:"p-3 font-medium border-r border-gray-200",children:r.name}),e.map((i,o)=>{const l=i.details.find(c=>c.name===r.name);return x.jsx("td",{className:`p-3 text-center ${o<e.length-1?"border-r border-gray-200":""}`,children:l?x.jsxs("div",{className:"space-y-1",children:[x.jsxs("div",{className:"flex justify-center space-x-1",children:[x.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:["a=",l.adstock.toFixed(2)]}),x.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:["L=",l.lag]})]}),x.jsx("div",{className:"text-xs text-gray-600",children:l.transform.replace("-transform","")})]}):x.jsx("span",{className:"text-gray-400",children:"N/A"})},i.id)})]},r.name))})]})})]})]})]})})},jZ=({currentChannels:e,featureParams:t,activeModel:n,onRecalibrate:r,onCancel:i,isRecalibrating:o})=>{const[l,c]=E.useState("channels"),[d,f]=E.useState(!!n),[m,y]=E.useState((n==null?void 0:n.channels)||e),v=E.useMemo(()=>{if(!n)return{};const _={};return n.details.forEach(D=>{_[D.name]={channel:D.name,adstockDecay:D.adstock,lagWeeks:D.lag,transform:D.transform,hillK:2,reg:.1}}),_},[n]),[S,T]=E.useState(()=>{const _={};return((n==null?void 0:n.channels)||e).forEach(D=>{_[D]={locked:!1,delta:.2,lagSpan:2}}),_}),w=E.useMemo(()=>{if(!n)return!1;const _=new Set(n.channels),D=new Set(m);return _.size!==D.size||![..._].every(k=>D.has(k))},[n,m]),A=()=>m.map(_=>{const D=v[_],k=S[_]||{locked:!1,delta:.2,lagSpan:2};if(!D)return t.find(j=>j.channel===_)||{channel:_,adstock:{min:.1,max:.6},lag:{min:0,max:3},transform:"Log-transform",rationale:"Default parameters - no baseline available"};if(k.locked)return{channel:_,adstock:{min:D.adstockDecay,max:D.adstockDecay},lag:{min:D.lagWeeks,max:D.lagWeeks},transform:D.transform,rationale:`Locked to baseline: adstock=${D.adstockDecay}, lag=${D.lagWeeks}`};{const B=Math.max(0,D.adstockDecay*(1-k.delta)),j=Math.min(.9,D.adstockDecay*(1+k.delta)),re=Math.max(0,D.lagWeeks-k.lagSpan),K=Math.min(12,D.lagWeeks+k.lagSpan);return{channel:_,adstock:{min:B,max:j},lag:{min:re,max:K},transform:D.transform,rationale:`Baseline-centered: ${(k.delta*100).toFixed(0)}% adstock, ${k.lagSpan}w lag from ${D.adstockDecay.toFixed(2)}/${D.lagWeeks}`}}}),M=_=>{y(D=>D.includes(_)?D.filter(k=>k!==_):[...D,_])},P=(_,D,k)=>{T(B=>({...B,[_]:{...B[_],[D]:k}}))},N=()=>{const _=A(),D={selectedChannels:m,paramRanges:_};d&&n&&(D.baselineConfig={baseline_model_id:n.id,baseline_params:m.map(k=>v[k]).filter(Boolean),delta:{decayPct:Math.max(...Object.values(S).map(k=>k.delta)),lagSpan:Math.max(...Object.values(S).map(k=>k.lagSpan))}}),r(D)},O=_=>{var k,B;if(!n)return null;const D=(B=(k=n.diagnostics)==null?void 0:k.channel_diagnostics)==null?void 0:B.find(j=>j.name===_);return D?D.sign_mismatch?"Sign mismatch detected - unexpected coefficient direction":D.pValue&&D.pValue>.1||D.importance&&D.importance<.1?"Weak statistical significance - consider excluding or adjusting ranges":null:null};return x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[x.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Baseline-Aware Recalibration"}),x.jsx("button",{onClick:i,disabled:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:""})]}),x.jsxs("div",{className:"p-6",children:[l==="channels"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Channel Selection"}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose which channels to include in the recalibration. Training will focus on these selected channels."}),n&&x.jsx("div",{className:"mb-4",children:x.jsxs("label",{className:"flex items-center space-x-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("input",{type:"checkbox",checked:d,onChange:_=>f(_.target.checked),className:"h-4 w-4 text-blue-600 rounded"}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Start from active model (recommended)"}),x.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:['Use "',n.algo,'" parameters as baseline for focused exploration around proven results']})]})]})}),w&&x.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:x.jsxs("div",{className:"flex items-start space-x-2",children:[x.jsx("span",{className:"text-yellow-600 text-sm",children:""}),x.jsxs("div",{className:"text-xs text-yellow-800",children:[x.jsx("p",{className:"font-medium mb-1",children:"Channel set changed:"}),x.jsx("p",{children:"Previous results will be marked as legacy until training completes"})]})]})})]}),x.jsx("div",{className:"space-y-3 mb-6",children:(d&&(n==null?void 0:n.channels)||e).map(_=>{const D=O(_),k=v[_];return x.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg border-2 transition-colors ${m.includes(_)?"border-blue-500 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("input",{type:"checkbox",checked:m.includes(_),onChange:()=>M(_),className:"h-4 w-4 text-blue-600 rounded"}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-gray-900",children:_}),k&&x.jsxs("div",{className:"text-xs text-gray-500",children:["Baseline: Adstock ",k.adstockDecay.toFixed(2)," | Lag ",k.lagWeeks,"w | ",k.transform]}),D&&x.jsxs("div",{className:"text-xs text-yellow-600 mt-1",children:[" ",D]})]})]})},_)})}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"text-sm text-gray-600",children:[m.length," channels selected",d&&n&&x.jsxs("span",{className:"ml-2 text-blue-600",children:["(from ",n.algo,")"]})]}),x.jsxs("div",{className:"space-x-3",children:[x.jsx("button",{onClick:i,disabled:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Cancel"}),x.jsx("button",{onClick:()=>c("parameters"),disabled:m.length===0||o,className:"px-6 py-2 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white text-sm font-medium rounded-lg disabled:opacity-50",children:"Continue to Parameters"})]})]})]}),l==="parameters"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 2: Parameter Controls"}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Fine-tune parameter ranges for each channel. Ranges will be centered around baseline values."})]}),x.jsx("div",{className:"space-y-4 mb-6",children:m.map(_=>{const D=v[_],k=S[_]||{locked:!1,delta:.2,lagSpan:2};return x.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:_}),D&&x.jsx("div",{className:"bg-gray-50 rounded p-3 mb-3",children:x.jsxs("div",{className:"text-sm",children:[x.jsx("span",{className:"font-medium",children:"Baseline:"}),x.jsxs("span",{className:"ml-2",children:["Adstock: ",D.adstockDecay.toFixed(2)," | Lag: ",D.lagWeeks,"w | Transform: ",D.transform]})]})}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{children:[x.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[x.jsx("input",{type:"checkbox",checked:k.locked,onChange:B=>P(_,"locked",B.target.checked),className:"h-4 w-4 text-blue-600 rounded"}),x.jsx("span",{className:"text-sm font-medium",children:"Lock to baseline"})]}),x.jsx("p",{className:"text-xs text-gray-500",children:"Forces min = max = baseline value"})]}),!k.locked&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Adstock Range (",(k.delta*100).toFixed(0),"%)"]}),x.jsx("input",{type:"range",min:"0.05",max:"0.50",step:"0.05",value:k.delta,onChange:B=>P(_,"delta",parseFloat(B.target.value)),className:"w-full"}),x.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[x.jsx("span",{children:"5%"}),x.jsxs("span",{children:["",(k.delta*100).toFixed(0),"%"]}),x.jsx("span",{children:"50%"})]})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Lag Range (",k.lagSpan," weeks)"]}),x.jsx("input",{type:"range",min:"1",max:"6",step:"1",value:k.lagSpan,onChange:B=>P(_,"lagSpan",parseInt(B.target.value)),className:"w-full"}),x.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[x.jsx("span",{children:"1w"}),x.jsxs("span",{children:["",k.lagSpan,"w"]}),x.jsx("span",{children:"6w"})]})]})]})]})]},_)})}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("button",{onClick:()=>c("channels"),disabled:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Back"}),x.jsxs("div",{className:"space-x-3",children:[x.jsx("button",{onClick:i,disabled:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Cancel"}),x.jsx("button",{onClick:()=>c("confirm"),disabled:o,className:"px-6 py-2 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white text-sm font-medium rounded-lg disabled:opacity-50",children:"Review & Train"})]})]})]}),l==="confirm"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 3: Confirm Training Configuration"}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Review your configuration before starting the training process."})]}),x.jsxs("div",{className:"space-y-4 mb-6",children:[x.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[x.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Selected Channels (",m.length,")"]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(_=>x.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:_},_))})]}),d&&n&&x.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[x.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Baseline Model: ",n.algo]}),x.jsxs("div",{className:"text-sm text-blue-800",children:[x.jsxs("p",{children:["R: ",(n.rsq*100).toFixed(1),"% | MAPE: ",n.mape.toFixed(1),"% | ROI: ",n.roi.toFixed(2),"x"]}),x.jsx("p",{className:"mt-1",children:"Training will explore parameter ranges centered around this model's values"})]})]}),x.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Parameter Summary"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:m.map(_=>{const D=S[_];return v[_],x.jsxs("div",{className:"bg-white p-2 rounded border",children:[x.jsx("div",{className:"font-medium",children:_}),D!=null&&D.locked?x.jsx("div",{className:"text-gray-600",children:" Locked to baseline"}):x.jsxs("div",{className:"text-gray-600",children:["",(((D==null?void 0:D.delta)||.2)*100).toFixed(0),"% adstock, ",(D==null?void 0:D.lagSpan)||2,"w lag"]})]},_)})})]})]}),x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("button",{onClick:()=>c("parameters"),disabled:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Back"}),x.jsxs("div",{className:"space-x-3",children:[x.jsx("button",{onClick:i,disabled:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Cancel"}),x.jsx("button",{onClick:N,disabled:o,className:"px-6 py-2 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white text-sm font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Training New Models...":"Start Training"})]})]})]})]})]})})},UZ=async e=>{const t=[],n=[],r=[];let i=0;console.log(`[ModelValidation] Processing ${e.length} models...`);for(const l of e)try{const{metadata:c,contributions:d,diagnostics:f}=aq(l),m=iq(l.id,d,f);if(m.is_complete){t.push(l);const y={metadata:c,contributions:d,diagnostics:f,is_complete:!0,validation_errors:void 0};n.push(y)}else r.push(l.id),i++,console.warn(`[ModelValidation] Model ${l.id} excluded:`,m.errors)}catch(c){r.push(l.id),i++,console.error(`[ModelValidation] Failed to process model ${l.id}:`,c)}const o={total:e.length,complete:t.length,incomplete:r.length,validation_errors:i};return console.log("[ModelValidation] Results:",o),{validModels:t,activeModelResponses:n,incompleteModelIds:r,validationStats:o}},$Z=e=>{const[t,n]=Kn.useState(null),[r,i]=Kn.useState(!0);return Kn.useEffect(()=>{let o=!1;return(async()=>{i(!0);try{const c=await UZ(e);o||n(c)}catch(c){console.error("[ModelValidation] Validation failed:",c),o||n({validModels:[],activeModelResponses:[],incompleteModelIds:e.map(d=>d.id),validationStats:{total:e.length,complete:0,incomplete:e.length,validation_errors:e.length}})}finally{o||i(!1)}})(),()=>{o=!0}},[e]),{validationService:t,isValidating:r}},Qg=[{name:"Preparing",label:"Preparing data and features...",minDuration:[300,500],progress:20},{name:"Training",label:"Training models with selected parameters...",minDuration:[1200,1800],progress:70},{name:"Scoring",label:"Scoring models and generating diagnostics...",minDuration:[300,500],progress:100}],BZ=e=>{var T;const[t,n]=E.useState({loading:!1,stage:"Preparing",label:"",progress:0}),r=E.useRef(null),i=E.useRef(!0),o=E.useRef(null),l=E.useRef(null),c=E.useRef(0),d=E.useCallback(w=>{i.current&&n(A=>({...A,...w}))},[]),f=E.useCallback(w=>{const[A,M]=w;return Math.floor(Math.random()*(M-A+1))+A},[]),m=E.useCallback(()=>{r.current&&(r.current.abort(),r.current=null),o.current&&(clearTimeout(o.current),o.current=null),l.current=null},[]),y=E.useCallback(async(w,A)=>{const M=Qg[w];if(!M)return;c.current=Date.now();const P=f(M.minDuration);console.log(`[ModelProgress] Starting ${M.name} stage (min: ${P}ms)`),d({stage:M.name,label:M.label,progress:w===0?0:Qg[w-1].progress});const N=setInterval(()=>{if(!i.current){clearInterval(N);return}const O=Date.now()-c.current,_=Math.min(O/P,1),D=w===0?0:Qg[w-1].progress,k=M.progress,B=D+(k-D)*_;d({progress:Math.min(B,k)})},50);try{if(M.name==="Training"&&A){console.log("[ModelProgress] Starting fetch during Training stage"),l.current=A();const[,O]=await Promise.all([new Promise(_=>{o.current=setTimeout(_,P)}),l.current]);return clearInterval(N),i.current&&(d({progress:M.progress}),console.log("[ModelProgress] Training stage completed with fetch result")),O}else await new Promise(O=>{o.current=setTimeout(O,P)}),clearInterval(N),i.current&&(d({progress:M.progress}),console.log(`[ModelProgress] ${M.name} stage completed`))}catch(O){throw clearInterval(N),O instanceof Error&&O.name==="AbortError"&&console.log(`[ModelProgress] ${M.name} stage aborted`),O}},[d,f]),v=E.useCallback(async w=>{var A,M,P;if(t.loading){console.log("[ModelProgress] Already loading, ignoring new request");return}r.current=new AbortController;try{if(d({loading:!0,progress:0}),await y(0),(A=r.current)!=null&&A.signal.aborted)throw new DOMException("Operation aborted","AbortError");const N=await y(1,w);if((M=r.current)!=null&&M.signal.aborted)throw new DOMException("Operation aborted","AbortError");return await y(2),i.current&&!((P=r.current)!=null&&P.signal.aborted)&&(d({loading:!1,stage:"Scoring",label:"Models ready!",progress:100}),console.log("[ModelProgress] All stages completed successfully")),N}catch(N){throw i.current&&(N instanceof Error&&N.name==="AbortError"?(d({loading:!1,stage:"Preparing",label:"Training cancelled",progress:0}),console.log("[ModelProgress] Training aborted cleanly")):(d({loading:!1,stage:"Preparing",label:"Training failed",progress:0}),console.error("[ModelProgress] Training failed:",N))),N}finally{m()}},[t.loading,d,y,m]),S=E.useCallback(()=>{console.log("[ModelProgress] Aborting current operation"),r.current&&r.current.abort()},[]);return E.useEffect(()=>{t.loading&&(console.log("[ModelProgress] Trigger key changed, aborting current operation"),S())},[e,t.loading,S]),E.useEffect(()=>(i.current=!0,()=>{i.current=!1,m()}),[m]),{...t,executeWithProgress:v,abort:S,isAborted:((T=r.current)==null?void 0:T.signal.aborted)??!1}},qZ=async e=>{console.log("[TrainingAPI] Starting model training with request:",e);try{await new Promise(c=>setTimeout(c,50));const t=!!e.baselineConfig,n=t?`Baseline-aware training from model ${e.baselineConfig.baseline_model_id}`:"Recalibrated models with updated parameters",i=Nf(e.selectedChannels,void 0,n,e.paramRanges).map((c,d)=>{const f={...c,isNew:!0,isStale:!1,provenance:{...c.provenance,timestamp:Date.now(),features_hash:JSON.stringify(e.selectedChannels.sort()).slice(0,8),ranges_hash:JSON.stringify(e.paramRanges.map(m=>({channel:m.channel,adstock:m.adstock,lag:m.lag,transform:m.transform})).sort((m,y)=>m.channel.localeCompare(y.channel))).slice(0,8)}};if(t){const m=e.baselineConfig,y={};c.details.forEach(S=>{const T=m.baseline_params.find(w=>w.channel===S.name);if(T){const w=[];Math.abs(S.adstock-T.adstockDecay)>.05&&w.push("adstock"),S.lag!==T.lagWeeks&&w.push("lag"),S.transform!==T.transform&&w.push("transform"),w.length>0&&(y[S.name]=w)}}),f.provenance={...f.provenance,baseline_model_id:m.baseline_model_id,baseline_diff:y,exploration_method:"grid_search_centered"};const v=Object.keys(y).length;v>0?f.commentary+=` Explored ${v} parameter variations from baseline.`:f.commentary+=" Similar configuration to baseline with improved convergence."}return f}),o=`training_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log(`[TrainingAPI] Successfully trained ${i.length} new models`);const l={success:!0,newModels:i,message:t?`Successfully trained ${i.length} baseline-aware models`:`Successfully trained ${i.length} new models`,trainingId:o};return t&&(l.baselineInfo={baseline_model_id:e.baselineConfig.baseline_model_id,models_generated:i.length,exploration_method:"grid_search_centered"}),l}catch(t){return console.error("[TrainingAPI] Training failed:",t),{success:!1,newModels:[],message:`Training failed: ${t instanceof Error?t.message:"Unknown error"}`,trainingId:""}}},VZ=({models:e,selectedChannels:t,activeModelId:n,onSetActiveModel:r,onModelChange:i,onRequestFinalize:o,isRecalibrating:l,onRecalibrate:c,currentFeaturesHash:d="",currentRangesHash:f="",featureParams:m,currentStep:y="modeling",onModelsUpdated:v})=>{var q;const[S,T]=E.useState([]),[w,A]=E.useState(!1),[M,P]=E.useState(!1),[N,O]=E.useState(!0),_=BZ(y),{validationService:D,isValidating:k}=$Z(e),B=(D==null?void 0:D.validModels)||[],j=((q=D==null?void 0:D.incompleteModelIds)==null?void 0:q.length)||0,re=B.find(H=>H.id===n),K=E.useMemo(()=>!re||!re.provenance?!1:re.provenance.features_hash!==d||re.provenance.ranges_hash!==f,[re,d,f]),V=H=>{T(ae=>ae.includes(H)?ae.filter(pe=>pe!==H):[...ae,H])},U=async(H,ae)=>{let pe,$,Y;if(H&&typeof H=="object"&&"selectedChannels"in H){const te=H;pe=te.selectedChannels,$=te.paramRanges,Y=te.baselineConfig}else pe=H||[],$=ae||m;P(!1);try{const te=await _.executeWithProgress(async()=>{const he=await qZ({selectedChannels:pe,paramRanges:$,baselineConfig:Y,rationale:Y?"Baseline-aware recalibration":"Standard recalibration"});if(!he.success)throw new Error(he.message);return he});te!=null&&te.success&&te.newModels.length>0&&(v&&v(te.newModels),c(pe,$),console.log(`[ModelingView] Successfully added ${te.newModels.length} new models`))}catch(te){te instanceof Error&&te.name!=="AbortError"&&console.error("Recalibration failed:",te)}},ee=()=>{P(!0)},ue=e.filter(H=>S.includes(H.id));return Kn.useEffect(()=>{const H=()=>{A(!0)};return window.addEventListener("modelsCompare",H),()=>window.removeEventListener("modelsCompare",H)},[]),_.loading?x.jsx("div",{className:"flex h-full items-center justify-center p-6",children:x.jsxs("div",{className:"glass-pane p-8 max-w-md w-full text-center",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("div",{className:"w-16 h-16 mx-auto mb-4",children:x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("div",{className:"absolute inset-0 border-4 border-gray-200 rounded-full"}),x.jsx("div",{className:"absolute inset-0 border-4 border-[#EC7200] rounded-full border-t-transparent animate-spin",style:{transform:"rotate(0deg)"}})]})}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:_.stage}),x.jsx("p",{className:"text-gray-600 text-sm mb-4",children:_.label})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:x.jsx("div",{className:"bg-[#EC7200] h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${_.progress}%`}})}),x.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[Math.round(_.progress),"% complete"]}),x.jsx("button",{onClick:_.abort,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel Training"})]})}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex h-full p-4 md:p-6 gap-6",children:[x.jsx(AZ,{models:B,selectedChannels:t,activeModelId:n,selectedModelIds:S,onSetActiveModel:r,onToggleModelSelection:V,onRecalibrate:ee,isRecalibrating:_.loading||k,currentFeaturesHash:d,currentRangesHash:f}),x.jsx("div",{className:"w-1/2",children:re?x.jsx(kZ,{model:re,models:B,onRecalibrate:ee,onRequestFinalize:o,isRecalibrating:l,selectedChannels:t,isStale:K}):x.jsxs("div",{className:"glass-pane h-full flex flex-col items-center justify-center text-center p-8",children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Select a Model"}),x.jsx("p",{className:"text-gray-600 mt-2",children:"Click a model from the leaderboard on the left to view its detailed results and diagnostics."}),j>0&&x.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:x.jsxs("p",{className:"text-yellow-800 text-sm",children:[" ",j," model",j!==1?"s":""," excluded due to validation failures"]})})]})})]}),w&&ue.length>=2&&ue.length<=3&&x.jsx(LZ,{models:ue,onClose:()=>A(!1)}),M&&x.jsx(jZ,{currentChannels:t,featureParams:m,activeModel:re,onRecalibrate:U,onCancel:()=>P(!1),isRecalibrating:_.loading})]})};async function Zg(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(o=>o.toString(16).padStart(2,"0")).join("")}function zZ(e){if(e.length===0)return"";const t=Object.keys(e[0]).sort(),n=t.join(","),r=[],i=5;for(let c=0;c<Math.min(i,e.length);c++)r.push(e[c]);const o=Math.max(i,e.length-i);for(let c=o;c<e.length;c++)r.includes(e[c])||r.push(e[c]);const l=r.map(c=>t.map(d=>{const f=c[d];return typeof f=="number"?Number(f.toPrecision(10)):f||""}).join(","));return[n,...l].join(`
`)}async function FZ(e){if(e.length===0)throw new Error("Cannot generate hash for empty dataset");const t=zZ(e),n=Object.keys(e[0]).sort(),r={row_count:e.length,column_count:n.length,headers:n,canonical_sample:t},i=JSON.stringify(r),o=await Zg(i),l=e.slice(0,5).map(m=>n.map(y=>m[y]).join(",")).join(`
`),c=e.slice(-5).map(m=>n.map(y=>m[y]).join(",")).join(`
`),d=await Zg(l),f=await Zg(c);return{dataset_hash:o,row_count:e.length,last_updated:new Date().toISOString(),column_count:n.length,first_rows_hash:d,last_rows_hash:f}}function HZ(e,t,n){return{dataset_hash:e,features_hash:t,ranges_hash:n,timestamp:Date.now()}}let RP={currentData:null,datasetInfo:null,currentProvenance:null,lastValidationTime:null};const GZ=[];function KZ(){GZ.forEach(e=>e())}async function aM(e){try{const t=await FZ(e);return RP={currentData:e,datasetInfo:t,currentProvenance:HZ(t.dataset_hash),lastValidationTime:Date.now()},KZ(),t}catch(t){throw console.error("Failed to set current dataset:",t),t}}function PP(){return{...RP}}function YZ(e,t="ALL"){const n=PP();if(!n.currentData||!n.datasetInfo)throw new Error("No dataset loaded");if(n.datasetInfo.dataset_hash!==e)throw new Error(`Dataset hash mismatch. Expected: ${e}, Current: ${n.datasetInfo.dataset_hash}`);let r=n.currentData;if(t==="ALL"){const i=new Map;r.forEach(o=>{const l=String(o.Week||o.week);if(!l)return;i.has(l)||i.set(l,{Week:l,week:l});const c=i.get(l);Object.keys(o).forEach(d=>{if(d==="Week"||d==="week")return;const f=Number(o[d]);isNaN(f)?c[d]||(c[d]=o[d]):c[d]=(Number(c[d])||0)+f})}),r=Array.from(i.values()).sort((o,l)=>{const c=new Date(String(o.Week||o.week)),d=new Date(String(l.Week||l.week));return c.getTime()-d.getTime()}),r.forEach((o,l)=>{l===0?o.Lagged_TRx=o.TRx:o.Lagged_TRx=r[l-1].TRx})}else r=r.filter(i=>String(i.DMA_ID)===t);return{data:r,period:`${r.length} weeks`,scope:t==="ALL"?"National":`DMA ${t}`,dataset_hash:e}}function WZ(e,t="ALL"){let n=e.data;if(t!=="ALL"){const c=new Date(t.start),d=new Date(t.end);n=n.filter(f=>{const m=new Date(String(f.Week||f.week));return m>=c&&m<=d})}let r=0,i=0;const o={},l={};return n.forEach(c=>{const d=Number(c.TRx||c.trx||0);r+=d,Object.keys(c).forEach(f=>{if(f.includes("_Spend")||f.includes("_spend")){const m=Number(c[f])||0;i+=m;const y=f.replace(/_[Ss]pend$/,"");o[y]=(o[y]||0)+m}if(f.includes("_Impressions")||f.includes("_Clicks")||f.includes("_Events")||f.includes("_Count")||f.includes("_Sends")||f.includes("_Redemptions")||f.includes("_Engagements")){const m=Number(c[f])||0,y=f.replace(/_[A-Z][a-z]+$/,"");l[y]=(l[y]||0)+m}})}),{totalSpend:Math.round(i),totalKPI:Math.round(r),channelSpends:o,channelActivities:l,period:t==="ALL"?`All ${n.length} weeks`:`${t.start} to ${t.end}`}}function JZ(e,t,n,r,i="ALL",o="ALL"){if(!e)return{model:null,dataTotals:null,modelContributions:{},reconciliation:{dataSpend:0,modelSpend:0,spendMatch:!1,dataKPI:0,modelKPI:0,kpiMatch:!1},consistent:!1,inconsistencyReason:"No model selected"};const l=t.find(f=>f.id===e);if(!l)return{model:null,dataTotals:null,modelContributions:{},reconciliation:{dataSpend:0,modelSpend:0,spendMatch:!1,dataKPI:0,modelKPI:0,kpiMatch:!1},consistent:!1,inconsistencyReason:"Model not found"};const c=new Set(l.channels||l.details.map(f=>f.name)),d=new Set(n);if(!XZ(c,d))return{model:l,dataTotals:null,modelContributions:{},reconciliation:{dataSpend:0,modelSpend:0,spendMatch:!1,dataKPI:0,modelKPI:0,kpiMatch:!1},consistent:!1,inconsistencyReason:`Channel mismatch. Model: [${Array.from(c).join(", ")}], Selected: [${n.join(", ")}]`};try{const f=YZ(r,i),m=WZ(f,o),y={};let v=0;l.details.forEach(P=>{if(P.included){const N=P.contribution/100*m.totalKPI;y[P.name]=N,v+=N}});let S=0;Object.keys(m.channelSpends).forEach(P=>{c.has(P)&&(S+=m.channelSpends[P])});const T=.01,w=.02,A=Math.abs(m.totalSpend-S)/m.totalSpend<T,M=Math.abs(m.totalKPI-v)/m.totalKPI<w;return{model:l,dataTotals:m,modelContributions:y,reconciliation:{dataSpend:m.totalSpend,modelSpend:S,spendMatch:A,dataKPI:m.totalKPI,modelKPI:Math.round(v),kpiMatch:M},consistent:!0}}catch(f){return{model:l,dataTotals:null,modelContributions:{},reconciliation:{dataSpend:0,modelSpend:0,spendMatch:!1,dataKPI:0,modelKPI:0,kpiMatch:!1},consistent:!1,inconsistencyReason:`Data processing error: ${f instanceof Error?f.message:"Unknown error"}`}}}function XZ(e,t){return e.size===t.size&&[...e].every(n=>t.has(n))}const ey={line:"var(--color-teal)",text:"#1A1628"},QZ=(e,t)=>{const n=Array.from({length:21},(o,l)=>l*8),r=e.contribution/100*t*1.5;let i;switch(e.transform){case"S-Curve":{i=n.map(l=>r/(1+Math.exp(-5*(l-60)/100)));break}case"Power":{const o=1-e.adstock*.8,l=r/Math.pow(160,o);i=n.map(c=>l*Math.pow(c,o));break}case"Log-transform":{const o=r/Math.log(161);i=n.map(l=>o*Math.log(l+1));break}case"Negative Exponential":default:{const o=(1.1-e.adstock)*3;i=n.map(l=>r*(1-Math.exp(-o*l/100)));break}}return n.map((o,l)=>({x:o,y:i[l]||0}))},ZZ=({activeModelId:e,models:t,selectedChannels:n,onGoToOptimizer:r,onRecalibrate:i})=>{const o=E.useMemo(()=>{const k=PP();return k.datasetInfo?JZ(e,t,n,k.datasetInfo.dataset_hash,"ALL","ALL"):{model:null,dataTotals:null,modelContributions:{},reconciliation:{dataSpend:0,modelSpend:0,spendMatch:!1,dataKPI:0,modelKPI:0,kpiMatch:!1},consistent:!1,inconsistencyReason:"No dataset loaded"}},[e,t,n]);if(!e)return x.jsxs("div",{className:"p-8 text-center",children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Model Selected"}),x.jsx("p",{className:"text-gray-600",children:"Please go back to the Modeling tab and select a model to generate the report."})]});if(!o.consistent)return x.jsx("div",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:x.jsxs("div",{className:"glass-pane p-8 text-center",children:[x.jsx("div",{className:"text-4xl mb-4",children:""}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Selections Changed"}),x.jsx("p",{className:"text-gray-600 mb-2",children:"Recalibration required."}),x.jsx("p",{className:"text-sm text-gray-500 mb-6",children:o.inconsistencyReason}),i&&x.jsx("button",{onClick:i,className:"px-6 py-3 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white font-medium rounded-lg",children:"Recalibrate Now"})]})});const{model:l,dataTotals:c,modelContributions:d,reconciliation:f}=o;if(!l||!c)return x.jsx("p",{className:"p-8 text-center",children:"Data loading error. Please try again."});const m=l.details.filter(k=>k.included),y=m.reduce((k,B)=>k+Mf(B.name),0),v=c.totalKPI,S=Object.values(d).reduce((k,B)=>k+B,0),T=v-S,w=T/v*100;m.reduce((k,B)=>k+B.contribution,0);const M=v*1e3,P=m.map(k=>{const B=d[k.name]||0,j=B/v*100,re=k.roi,K=re*(1-k.adstock)*.8,V=Mf(k.name)/1e6;return{name:k.name,spend:V,attributedKPI:B,impactPercentage:j,avgROI:re,mROI:K}}),N=y>0?M/y:0,O=N<0?"text-red-600":"text-green-600",_=()=>{r(e)},D=()=>{let k=`MMM Final Report - Model ID: ${l.id} (${l.algo})
`;k+=`===================================================

`,k+=`KEY METRICS
`,k+=`--------------------------
`,k+=`R-Square: ${l.rsq.toFixed(2)}
`,k+=`MAPE: ${l.mape.toFixed(1)}%
`,k+=`Total Spend: $${(y/1e6).toFixed(1)}M
`,k+=`Blended ROI: $${N.toFixed(2)}

`,k+=`PERFORMANCE SUMMARY
`,k+=`--------------------------------------------------------------------------------------------------
`,k+=`| Channel                   | Spend      | Attributed KPI | Impact %   | Avg. ROI   | Marginal ROI |
`,k+=`--------------------------------------------------------------------------------------------------
`,P.forEach(V=>{k+=`| ${V.name.padEnd(25)} | $${V.spend.toFixed(1).padStart(7)}M | ${V.attributedKPI.toLocaleString(void 0,{maximumFractionDigits:0}).padStart(14)} | ${V.impactPercentage.toFixed(1).padStart(8)}% | $${V.avgROI.toFixed(2).padStart(8)} | $${V.mROI.toFixed(2).padStart(10)} |
`});const B=w.toFixed(1);k+=`| Base Sales / Intercept    | -          | ${T.toLocaleString().padStart(14)} | ${B.padStart(8)}% | -          | -            |
`,k+=`--------------------------------------------------------------------------------------------------

`,k+=`RESPONSE CURVE TRANSFORMS
`,k+=`--------------------------
`,m.forEach(V=>{k+=`- ${V.name}: ${V.transform}
`});const j=new Blob([k],{type:"text/plain"}),re=URL.createObjectURL(j),K=document.createElement("a");K.href=re,K.download=`MMx-Report-${l.id}.txt`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(re)};return x.jsx("div",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:x.jsxs("div",{className:"glass-pane p-6",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold",children:"MMx Final Report"}),x.jsxs("p",{className:"text-sm text-gray-500",children:["Generated from Active Model ID: ",x.jsxs("strong",{children:[l.id," (",l.algo,")"]})]})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("button",{onClick:D,className:"secondary-button",children:"Export Report"}),x.jsx("button",{onClick:_,className:"primary-button",children:"Proceed to Optimizer"})]})]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 my-8 text-center",children:[x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"R-Square"}),x.jsx("div",{className:"text-3xl font-bold",children:l.rsq.toFixed(2)})]}),x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"MAPE"}),x.jsxs("div",{className:"text-3xl font-bold",children:[l.mape.toFixed(1),"%"]})]}),x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Total Spend"}),x.jsxs("div",{className:"text-3xl font-bold",children:["$",(y/1e6).toFixed(1),"M"]})]}),x.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Blended ROI"}),x.jsxs("div",{className:`text-3xl font-bold ${O}`,children:["$",N.toFixed(2)]})]})]}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-8 mb-4",children:"Performance Summary"}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-gray-100",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-3",children:"Channel"}),x.jsx("th",{className:"p-3",children:"Spend"}),x.jsx("th",{className:"p-3",children:"Attributed KPI"}),x.jsx("th",{className:"p-3",children:"Impact %"}),x.jsx("th",{className:"p-3",children:"Avg. ROI"}),x.jsx("th",{className:"p-3",children:"Marginal ROI (mROI)"})]})}),x.jsxs("tbody",{children:[P.map(k=>x.jsxs("tr",{className:"border-b border-gray-200",children:[x.jsx("td",{className:"p-3 font-semibold",children:k.name}),x.jsxs("td",{className:"p-3",children:["$",k.spend.toFixed(1),"M"]}),x.jsx("td",{className:"p-3",children:k.attributedKPI.toLocaleString(void 0,{maximumFractionDigits:0})}),x.jsxs("td",{className:"p-3",children:[k.impactPercentage.toFixed(1),"%"]}),x.jsxs("td",{className:`p-3 font-bold ${k.avgROI<0?"text-red-600":"text-green-600"}`,children:["$",k.avgROI.toFixed(2)]}),x.jsxs("td",{className:`p-3 font-bold ${k.mROI<0?"text-red-600":"text-green-600"}`,children:["$",k.mROI.toFixed(2)]})]},k.name)),x.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[x.jsx("td",{className:"p-3 font-semibold",children:"Base Sales / Intercept"}),x.jsx("td",{children:"-"}),x.jsx("td",{children:T.toLocaleString()}),x.jsxs("td",{children:[w.toFixed(1),"%"]}),x.jsx("td",{children:"-"}),x.jsx("td",{children:"-"})]})]})]})}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-8 mb-4",children:"Response Curves"}),x.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"These curves show the estimated diminishing returns for each channel based on its transformation setting in the final model."}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(k=>{const B=QZ(k,S);return x.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[x.jsxs("h5",{className:"font-semibold text-center mb-2 text-gray-800",children:[k.name," ",x.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["(",k.transform,")"]})]}),x.jsx(hu,{width:"100%",height:200,children:x.jsxs(hZ,{data:B,children:[x.jsx(so,{type:"number",dataKey:"x",name:"Spend",stroke:ey.text,tick:{fontSize:10},unit:"k"}),x.jsx(lo,{stroke:ey.text,tick:{fontSize:10},domain:[0,"dataMax"]}),x.jsx(mu,{wrapperClassName:"glass-pane"}),x.jsx(X0,{type:"monotone",dataKey:"y",name:"Response",stroke:ey.line,strokeWidth:2,dot:!1})]})})]},k.name)})})]})})},dv=(e,t)=>{const n=Math.max(.1,e.projectedROI*Math.pow(.95,t/e.currentSpend-1));return{kpi:t*n,roi:n}},eee=({constraints:e,channels:t,isOpen:n,onClose:r,onChange:i})=>{if(!n)return null;const o=(c,d,f)=>{const m={...e,channelBounds:{...e.channelBounds,[c]:{...e.channelBounds[c],[d]:Math.max(0,Math.min(100,f))}}};i(m)},l=c=>{var f;const d={...e,channelBounds:{...e.channelBounds,[c]:{...e.channelBounds[c],frozen:!((f=e.channelBounds[c])!=null&&f.frozen)}}};i(d)};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:x.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-80vh overflow-y-auto",children:[x.jsxs("div",{className:"p-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"Edit Constraints"}),x.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:""})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Global Change Cap: ",e.globalChangeCap,"%"]}),x.jsx("input",{type:"range",min:"10",max:"100",value:e.globalChangeCap,onChange:c=>i({...e,globalChangeCap:parseInt(c.target.value)}),className:"w-full"})]}),x.jsxs("div",{className:"border-t pt-4",children:[x.jsx("h4",{className:"font-medium mb-3",children:"Per-Channel Constraints"}),x.jsx("div",{className:"space-y-3",children:t.map(c=>{const d=e.channelBounds[c]||{min:0,max:100,frozen:!1};return x.jsxs("div",{className:"grid grid-cols-5 gap-3 items-center text-sm",children:[x.jsx("div",{className:"font-medium",children:c}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs text-gray-500",children:"Min %"}),x.jsx("input",{type:"number",value:d.min,onChange:f=>o(c,"min",parseFloat(f.target.value)||0),className:"w-full p-1 border rounded text-xs",min:"0",max:"100"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs text-gray-500",children:"Max %"}),x.jsx("input",{type:"number",value:d.max,onChange:f=>o(c,"max",parseFloat(f.target.value)||100),className:"w-full p-1 border rounded text-xs",min:"0",max:"100"})]}),x.jsx("div",{children:x.jsxs("label",{className:"flex items-center text-xs",children:[x.jsx("input",{type:"checkbox",checked:d.frozen,onChange:()=>l(c),className:"mr-1"}),"Freeze"]})}),x.jsx("div",{children:d.frozen&&x.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Frozen"})})]},c)})})]})]})]}),x.jsx("div",{className:"px-6 py-3 bg-gray-50 rounded-b-lg",children:x.jsx("button",{onClick:r,className:"primary-button",children:"Apply Constraints"})})]})})},tee=({scenarios:e,onClose:t,onDuplicate:n})=>{const[r,i]=e;return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:x.jsx("div",{className:"bg-white rounded-lg max-w-6xl w-full mx-4 max-h-90vh overflow-y-auto",children:x.jsxs("div",{className:"p-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h3",{className:"text-xl font-semibold",children:"Compare Scenarios"}),x.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:""})]}),x.jsx("div",{className:"grid grid-cols-2 gap-6",children:e.map((o,l)=>x.jsxs("div",{className:"border rounded-lg p-4",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h4",{className:"font-semibold text-lg",children:o.title}),x.jsx("button",{onClick:()=>n(o),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Duplicate"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 text-sm",children:[x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-gray-500",children:"Total Budget"}),x.jsxs("div",{className:"font-bold",children:["$",o.recommendedSpend.toFixed(1),"M"]})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-gray-500",children:"Projected ROI"}),x.jsxs("div",{className:`font-bold ${o.projectedROI<0?"text-red-600":"text-green-600"}`,children:["$",o.projectedROI.toFixed(2)]})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded col-span-2",children:[x.jsx("div",{className:"text-gray-500",children:"Net Revenue"}),x.jsxs("div",{className:`font-bold ${o.netRevenue<0?"text-red-600":"text-green-600"}`,children:["$",o.netRevenue.toFixed(1),"M"]})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Channel Allocation"}),o.channels.map(c=>x.jsxs("div",{className:"flex justify-between items-center text-xs",children:[x.jsx("span",{children:c.name}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:`w-16 h-2 rounded ${l===0?"bg-blue-200":"bg-green-200"}`,children:x.jsx("div",{className:`h-2 rounded ${l===0?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(100,c.recommendedSpend/o.recommendedSpend*100)}%`}})}),x.jsxs("span",{className:"font-mono text-xs",children:["$",c.recommendedSpend.toFixed(1),"M"]})]})]},c.name))]})]},o.id))})]})})})},nee=({scenario:e,constraints:t,onScenarioChange:n,onRevertChannel:r})=>{const i=(o,l)=>{const c=e.channels.map(v=>{if(v.name===o){const S=dv(v,l),T=(l-v.currentSpend)/v.currentSpend*100;return{...v,recommendedSpend:l,change:T,projectedROI:S.roi}}return v}),d=c.reduce((v,S)=>v+S.recommendedSpend,0),f=c.reduce((v,S)=>v+S.recommendedSpend*S.projectedROI,0),m=d>0?f/d:0,y={...e,channels:c,recommendedSpend:d,projectedROI:m,netRevenue:f-d};n(y)};return x.jsx("div",{className:"overflow-x-auto flex-grow",children:x.jsxs("table",{className:"w-full text-left text-sm",children:[x.jsx("thead",{className:"bg-gray-100",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-3",children:"Channel"}),x.jsx("th",{className:"p-3",children:"Current Spend"}),x.jsx("th",{className:"p-3",children:"Recommended Spend"}),x.jsx("th",{className:"p-3",children:"Change"}),x.jsx("th",{className:"p-3",children:"Projected ROI"}),x.jsx("th",{className:"p-3",children:"Actions"}),x.jsx("th",{className:"p-3 w-1/4",children:"Agent Commentary"})]})}),x.jsx("tbody",{children:e.channels.map(o=>{const l=o.change>=0?"text-green-600":"text-red-600",c=o.projectedROI<0?"text-red-600":"text-green-600",d=t.channelBounds[o.name],f=d==null?void 0:d.frozen,m=d&&(o.recommendedSpend/e.recommendedSpend*100<=d.min||o.recommendedSpend/e.recommendedSpend*100>=d.max);return x.jsxs("tr",{className:"border-b border-gray-200",children:[x.jsx("td",{className:"p-3 font-semibold",children:x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{children:o.name}),f&&x.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Frozen"}),m&&x.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"At Bound"})]})}),x.jsxs("td",{className:"p-3",children:["$",o.currentSpend.toFixed(1),"M"]}),x.jsx("td",{className:"p-3",children:f?x.jsxs("span",{className:"font-bold",children:["$",o.recommendedSpend.toFixed(1),"M"]}):x.jsx("input",{type:"number",value:o.recommendedSpend.toFixed(1),onChange:y=>i(o.name,parseFloat(y.target.value)||0),className:"w-20 p-1 border rounded font-mono text-xs",step:"0.1",min:"0"})}),x.jsxs("td",{className:`p-3 font-bold ${l}`,children:[o.change>=0?"+":"",o.change.toFixed(0),"%"]}),x.jsxs("td",{className:`p-3 font-bold ${c}`,children:["$",o.projectedROI.toFixed(2)]}),x.jsx("td",{className:"p-3",children:x.jsx("button",{onClick:()=>r(o.name),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",title:"Revert to solver recommendation",children:"Revert"})}),x.jsx("td",{className:"p-3 text-gray-500 text-xs italic",children:o.agentCommentary})]},o.name)})})]})})},ree=({activeModelId:e,models:t,selectedChannels:n,scenarios:r,activeScenarioId:i,onSelectScenario:o,onUpdateScenario:l,onCreateScenario:c,onRecalibrate:d})=>{var V;const[f,m]=E.useState({globalChangeCap:30,channelBounds:{},budgetMultiplier:1}),[y,v]=E.useState(!1),[S,T]=E.useState([]),[w,A]=E.useState(!1),[M,P]=E.useState(null),N=E.useMemo(()=>e?t.find(U=>U.id===e):null,[e,t]),O=E.useMemo(()=>{if(!N||!e)return!1;const U=new Set(N.channels||[]),ee=new Set(n);return fv(U,ee)},[N,n,e]);E.useEffect(()=>{if(N&&r.length>0){const U=r.find(ee=>ee.id===i);if(U){(!M||M.id!==U.id)&&(P(JSON.parse(JSON.stringify(U))),m(ue=>({...ue,budgetMultiplier:1})));const ee={...f};U.channels.forEach(ue=>{ee.channelBounds[ue.name]||(ee.channelBounds[ue.name]={min:0,max:100,frozen:!1})}),m(ue=>({...ue,channelBounds:ee.channelBounds}))}}},[N,r,i]);const _=r.find(U=>U.id===i)||r[0],D=E.useCallback(U=>{if(!_||!M)return;const ee=M.channels.find(ue=>ue.name===U);if(ee){const ue=ee.recommendedSpend*f.budgetMultiplier,q=dv(ee,ue),H=(ue-ee.currentSpend)/ee.currentSpend*100,ae=_.channels.map(Y=>Y.name===U?{...Y,recommendedSpend:ue,change:H,projectedROI:q.roi}:Y),pe=ae.reduce((Y,te)=>Y+te.recommendedSpend,0),$=ae.reduce((Y,te)=>Y+te.recommendedSpend*te.projectedROI,0);k({..._,channels:ae,recommendedSpend:pe,projectedROI:pe>0?$/pe:0,netRevenue:$-pe})}},[_,M,f.budgetMultiplier,l]),k=E.useCallback(U=>{l(U)},[l]),B=E.useCallback(U=>{if(!_||!M)return;m(ae=>({...ae,budgetMultiplier:U}));const ee=M.channels.map(ae=>{const pe=ae.recommendedSpend*U,$=dv(ae,pe),Y=(pe-ae.currentSpend)/ae.currentSpend*100;return{...ae,recommendedSpend:pe,change:Y,projectedROI:$.roi}}),ue=ee.reduce((ae,pe)=>ae+pe.recommendedSpend,0),q=ee.reduce((ae,pe)=>ae+pe.recommendedSpend*pe.projectedROI,0),H={..._,channels:ee,recommendedSpend:ue,projectedROI:ue>0?q/ue:0,netRevenue:q-ue};l(H)},[_,M,l]),j=E.useCallback(()=>{if(!_||!N)return;const U={model_id:N.id,bounds:f.channelBounds,frozen:Object.keys(f.channelBounds).filter(ae=>f.channelBounds[ae].frozen),changeCap:f.globalChangeCap,budgetMultiplier:f.budgetMultiplier,timestamp:Date.now()};let ee=`Channel,Current,Recommended,Change%,Projected ROI,Notes
`;_.channels.forEach(ae=>{ee+=`${ae.name},${ae.currentSpend},${ae.recommendedSpend},${ae.change.toFixed(1)},${ae.projectedROI.toFixed(2)},"${ae.agentCommentary}"
`}),ee+=`
Provenance:
`,ee+=`Model ID,${U.model_id}
`,ee+=`Timestamp,${new Date(U.timestamp).toISOString()}
`,ee+=`Change Cap,${U.changeCap}%
`,ee+=`Budget Multiplier,${U.budgetMultiplier}
`,ee+=`Frozen Channels,"${U.frozen.join(", ")}"
`;const ue=new Blob([ee],{type:"text/csv"}),q=URL.createObjectURL(ue),H=document.createElement("a");H.href=q,H.download=`Optimizer-${_.id}-${Date.now()}.csv`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(q)},[_,N,f]),re=E.useCallback(U=>{T(ee=>ee.includes(U)?ee.filter(ue=>ue!==U):ee.length<2?[...ee,U]:[ee[1],U])},[]),K=E.useCallback(U=>{const ee={...U,id:`custom_${Date.now()}`,title:`${U.title} (Copy)`};c(ee),A(!1)},[c]);return e?O?!N||r.length===0?x.jsx("p",{className:"p-8 text-center",children:"No optimization scenarios available. Please finalize a model first."}):x.jsx("div",{className:"p-4 md:p-6 max-w-full mx-auto h-full",children:x.jsxs("div",{className:"glass-pane p-6 h-full flex flex-col",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Budget Optimization"}),x.jsxs("p",{className:"text-gray-600",children:["Based on active model ",x.jsx("strong",{children:N.id}),". Edit spend allocations and constraints below."]})]}),x.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-6",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-sm font-medium",children:"Budget:"}),x.jsx("input",{type:"range",min:"0.7",max:"1.3",step:"0.05",value:f.budgetMultiplier,onChange:U=>B(parseFloat(U.target.value)),className:"w-32"}),x.jsxs("span",{className:"text-sm font-mono",children:[(f.budgetMultiplier*100-100).toFixed(0),"%"]})]}),x.jsxs("div",{className:"text-sm",children:[x.jsx("span",{className:"font-medium",children:"Change Cap:"})," ",f.globalChangeCap,"%"]}),x.jsx("button",{onClick:()=>v(!0),className:"text-sm px-3 py-1 bg-white border rounded hover:bg-gray-50",children:"Edit Constraints"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[S.length===2&&x.jsxs("button",{onClick:()=>A(!0),className:"text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:["Compare (",S.length,")"]}),x.jsx("button",{onClick:j,className:"secondary-button text-sm",children:"Export CSV"})]})]})}),x.jsxs("div",{className:"flex-grow flex gap-8 overflow-hidden",children:[x.jsx("nav",{className:"w-1/3 md:w-1/4 flex-shrink-0 overflow-y-auto custom-scrollbar pr-4 -mr-4 border-r border-gray-200",children:x.jsx("ul",{className:"space-y-2",children:r.map(U=>{const ee=U.id===i,ue=S.includes(U.id);return x.jsx("li",{children:x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsxs("button",{onClick:()=>o(U.id),className:`flex-grow text-left p-3 rounded-lg transition-colors relative text-sm ${ee?"bg-[#EC7200]/20 text-[#1A1628] font-semibold":"text-gray-700 hover:bg-gray-100"}`,children:[ee&&x.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-[#EC7200] rounded-l-lg"}),U.title]}),x.jsx("label",{className:"flex items-center",children:x.jsx("input",{type:"checkbox",checked:ue,onChange:()=>re(U.id),className:"w-4 h-4",disabled:S.length>=2&&!ue})})]})},U.id)})})}),x.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar flex flex-col",children:_&&x.jsxs("div",{className:"animate-fade-in flex flex-col h-full",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6",children:[x.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Total Budget"}),x.jsxs("div",{className:"text-3xl font-bold",children:["$",_.recommendedSpend.toFixed(1),"M"]})]}),x.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Projected ROI"}),x.jsxs("div",{className:`text-3xl font-bold ${_.projectedROI<0?"text-red-600":"text-green-600"}`,children:["$",_.projectedROI.toFixed(2)]})]}),x.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Net Revenue"}),x.jsxs("div",{className:`text-3xl font-bold ${_.netRevenue<0?"text-red-600":"text-green-600"}`,children:["$",_.netRevenue.toFixed(1),"M"]})]})]}),x.jsx(nee,{scenario:_,constraints:f,onScenarioChange:k,onRevertChannel:D})]})})]}),y&&x.jsx(eee,{constraints:f,channels:(_==null?void 0:_.channels.map(U=>U.name))||[],isOpen:y,onClose:()=>v(!1),onChange:m}),w&&S.length===2&&x.jsx(tee,{scenarios:S.map(U=>r.find(ee=>ee.id===U)).filter(Boolean),onClose:()=>A(!1),onDuplicate:K})]})}):x.jsx("div",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:x.jsxs("div",{className:"glass-pane p-8 text-center",children:[x.jsx("div",{className:"text-4xl mb-4",children:""}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Recalibration Required"}),x.jsx("p",{className:"text-gray-600 mb-2",children:"Model channels don't match current selections."}),x.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Model channels: [",(V=N==null?void 0:N.channels)==null?void 0:V.join(", "),"] | Selected: [",n.join(", "),"]"]}),d&&x.jsx("button",{onClick:d,className:"px-6 py-3 bg-[#EC7200] hover:bg-[#EC7200]/90 text-white font-medium rounded-lg",children:"Recalibrate Now"})]})}):x.jsxs("div",{className:"p-8 text-center",children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Model Selected"}),x.jsx("p",{className:"text-gray-600",children:"Please go back to the Report tab and select a model."})]})},iee=({summary:e})=>!e||e.length===0?null:x.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 mt-3",children:x.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[x.jsx("thead",{className:"bg-gray-100",children:x.jsxs("tr",{children:[x.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Role"}),x.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Assigned Columns"})]})}),x.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:e.filter(t=>t.columns.length>0).map(({role:t,columns:n})=>x.jsxs("tr",{children:[x.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-semibold text-gray-800",children:t}),x.jsx("td",{className:"px-3 py-2 whitespace-normal text-sm text-gray-600",children:n.join(", ")})]},t))})]})}),aee=(e,t)=>{const n={maximizeROI:{TV_Impressions:"Forward-looking signals show high engagement. Increasing spend to capture strong mROI before saturation.",Digital_Clicks:"Performance KPIs show this channel is near saturation. Recommending a 15% budget reallocation to more efficient channels.",Default:"Reallocating budget towards this channel based on its high marginal ROI."},maximizeContrib:{TV_Impressions:"Increasing budget to saturation point to maximize reach and contribution, accepting a lower ROI.",Search_Spend:"Aggressively increasing spend to capture all available volume for growth, despite diminishing returns.",Default:"Increasing spend to drive maximum volume contribution, a key goal of this scenario."},balanced:{TV_Impressions:"Optimized budget increase, balancing its strong mROI with the need to fund other channels.",Search_Spend:"High executional costs (CPCs) are compressing ROI. A slight reduction frees up budget for more efficient tactics.",Default:"Spend adjusted to balance its performance KPIs with overall portfolio efficiency."}},i={"Efficiency-First Strategy":"maximizeROI","Growth Acceleration Plan":"maximizeContrib","Balanced Portfolio Strategy":"balanced"}[t]||"balanced";return n[i][e]||n[i].Default},ty=(e,t,n,r,i,o)=>{const l=e.details.filter(m=>m.included).map(m=>{const y=Mf(m.name)/1e6,v=r(m.roi),S=y*v,T=S===0&&y===0?0:(S-y)/y*100;return{name:m.name,currentSpend:y,recommendedSpend:S,change:T,projectedROI:m.roi*(1+o+(v-1)*.1),agentCommentary:aee(m.name,n)}}),c=l.reduce((m,y)=>m+y.recommendedSpend,0);l.reduce((m,y)=>m+y.currentSpend,0);const d=e.roi+o,f=c*(d-1);return{id:t,title:n,recommendedSpend:c,projectedROI:d,netRevenue:f,channels:l}},oee=e=>{const t=[];return t.push(ty(e,"efficiency_focus","Efficiency-First Strategy",n=>n>e.roi*1.1?1.5:n<e.roi*.9?.5:.8,.9,.15)),t.push(ty(e,"growth_acceleration","Growth Acceleration Plan",n=>n>e.roi*.5?1.5:1.1,1.2,-.1)),t.push(ty(e,"balanced_portfolio","Balanced Portfolio Strategy",n=>n>e.roi*1.1?1.25:n<e.roi*.9?.75:1,1.05,.05)),t},DP=()=>x.jsxs("div",{className:"flex items-center justify-center space-x-3 py-1",children:[x.jsxs("svg",{width:"38",height:"38",viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":"MixMind Logo",children:[x.jsx("path",{d:"M27.5,6.88C17.3,7.38,9.5,15.12,9.5,25.38c0,8.62,5.75,16,13.62,18.12",stroke:"#32A29B",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{d:"M20.25,41.38c-4.25-3.38-6.75-8.62-6.75-14.5",stroke:"#32A29B",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{d:"M19.12,17.25c3.25-2.88,7.75-4.25,12.38-3.62",stroke:"#32A29B",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{d:"M17.38,25.38c2.12-3.38,5.75-5.62,9.88-5.62",stroke:"#32A29B",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{d:"M20.25,33.5c2.38-1.5,5-2.38,7.88-2.38",stroke:"#32A29B",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{d:"M28.12,25.38h10",stroke:"#1A1628",strokeWidth:"2.5",strokeLinecap:"round"}),x.jsx("path",{d:"M38.12,25.38l5-5",stroke:"#1A1628",strokeWidth:"2.5",strokeLinecap:"round"}),x.jsx("circle",{cx:"45.62",cy:"17.88",r:"4.5",fill:"#EC7200"})]}),x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold text-[#1A1628] tracking-tight leading-none",children:[x.jsx("span",{className:"font-semibold",children:"Mix"}),"Mind"]}),x.jsx("p",{className:"text-xs text-gray-500 tracking-wide mt-0.5",children:"From Data to Decisions"})]})]}),see=({onLogin:e})=>{const[t,n]=E.useState(""),[r,i]=E.useState(""),[o,l]=E.useState(!1),c="dce_ai_mmx_2025",d=f=>{f.preventDefault(),l(!0),i(""),setTimeout(()=>{t===c?(sessionStorage.setItem("mmx_authenticated","true"),e()):(i("Invalid password. Please try again."),n("")),l(!1)},500)};return x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:x.jsxs("div",{className:"glass-pane p-8 max-w-md w-full",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"flex justify-center mb-4",children:x.jsx(DP,{})}),x.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"MixMind - Agentic Marketing Mix Modeling"}),x.jsx("p",{className:"text-sm text-gray-600",children:"AI-Powered Marketing Analytics"})]}),x.jsxs("form",{onSubmit:d,className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter Password"}),x.jsx("input",{type:"password",id:"password",value:t,onChange:f=>n(f.target.value),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#EC7200] ${r?"border-red-300":"border-gray-300"}`,placeholder:"Enter access password",required:!0,disabled:o,autoFocus:!0}),r&&x.jsx("p",{className:"mt-2 text-sm text-red-600",children:r})]}),x.jsx("button",{type:"submit",disabled:o||!t,className:"w-full py-2 px-4 bg-gradient-to-r from-[#EC7200] to-[#FF8C24] text-white font-semibold rounded-lg hover:from-[#DA6600] hover:to-[#FF8C24] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?x.jsxs("span",{className:"flex items-center justify-center",children:[x.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Access Platform"})]}),x.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:x.jsxs("div",{className:"text-center text-xs text-gray-500",children:[x.jsx("p",{className:"mb-1",children:"Powered by AI  Built for Marketing Excellence"}),x.jsx("p",{children:" 2025 DCE AI Lab"})]})})]})})},ny=[{id:"preparing",label:"Preparing features...",duration:900},{id:"training",label:"Training candidates...",duration:1200},{id:"scoring",label:"Scoring & ranking...",duration:800}],lee=({isVisible:e,onComplete:t,minDuration:n=2900})=>{const[r,i]=E.useState(0),[o,l]=E.useState(0),[c,d]=E.useState(null);return E.useEffect(()=>{if(!e){i(0),l(0),d(null);return}d(Date.now());let f=[],m;return(()=>{let v=0;ny.forEach((T,w)=>{const A=setTimeout(()=>{i(w),l(0);const M=Date.now();m=setInterval(()=>{const P=Date.now()-M,N=Math.min(100,P/T.duration*100);l(N),N>=100&&clearInterval(m)},50)},v);f.push(A),v+=T.duration});const S=setTimeout(()=>{const T=Date.now()-(c||0),w=Math.max(0,n-T);w>0?setTimeout(()=>{t()},w):t()},v);f.push(S)})(),()=>{f.forEach(v=>clearTimeout(v)),m&&clearInterval(m)}},[e,t,n,c]),e?x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#EC7200]/10 rounded-full mb-4",children:x.jsx("div",{className:"w-8 h-8 border-4 border-[#EC7200] border-t-transparent rounded-full animate-spin"})}),x.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Training Models"}),x.jsxs("p",{className:"text-gray-600 text-sm",children:["Running ",ny.length," steps with multiple algorithms..."]})]}),x.jsx("div",{className:"space-y-4",children:ny.map((f,m)=>{const y=m<r,v=m===r;return x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${y?"bg-green-500 text-white":v?"bg-[#EC7200] text-white":"bg-gray-200 text-gray-500"}`,children:y?"":m+1}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:`text-sm font-medium ${y?"text-green-600":v?"text-[#EC7200]":"text-gray-400"}`,children:f.label}),v&&x.jsx("div",{className:"mt-2",children:x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"bg-[#EC7200] h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})})]})]},f.id)})}),x.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:"This process typically takes 2-3 minutes"})]})}):null},oM=[{id:"data_prep",name:"Data Preparation",description:"Cleaning and preprocessing input data",duration:3,status:"pending"},{id:"feature_engineering",name:"Feature Engineering",description:"Applying adstock, lag, and transformation parameters",duration:5,status:"pending"},{id:"model_training",name:"Model Training",description:"Training multiple regression algorithms",duration:12,status:"pending"},{id:"validation",name:"Model Validation",description:"Computing diagnostics and performance metrics",duration:4,status:"pending"},{id:"optimization",name:"Hyperparameter Optimization",description:"Fine-tuning model parameters for best performance",duration:8,status:"pending"}],uee=({isActive:e,onComplete:t,selectedChannels:n,algorithmCount:r=3})=>{const[i,o]=E.useState(oM),[l,c]=E.useState(0),[d,f]=E.useState(0),[m,y]=E.useState(0),v=i.reduce((T,w)=>T+w.duration,0);if(E.useEffect(()=>{if(!e){o(oM.map(w=>({...w,status:"pending"}))),c(0),f(0),y(0);return}const T=setInterval(()=>{f(w=>{const A=w+100/i[l].duration;return A>=100?(o(M=>M.map((P,N)=>N===l?{...P,status:"completed"}:N===l+1?{...P,status:"active"}:P)),l<i.length-1?(c(M=>M+1),0):(setTimeout(t,500),100)):A}),y(w=>w+1)},1e3);return l===0&&i[0].status==="pending"&&o(w=>w.map((A,M)=>M===0?{...A,status:"active"}:A)),()=>clearInterval(T)},[e,l,t,i]),!e)return null;const S=(l+d/100)/i.length*100;return x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full p-6",children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsx(fa,{}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Training Models"}),x.jsxs("p",{className:"text-gray-600 mt-2",children:["Building ",r," algorithms for ",n.length," channels"]})]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),x.jsxs("span",{className:"text-sm text-gray-600",children:[Math.floor(m/60),":",(m%60).toString().padStart(2,"0")," / ~",Math.floor(v/60),":",(v%60).toString().padStart(2,"0")]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"bg-[#EC7200] h-2 rounded-full transition-all duration-1000 ease-out",style:{width:`${Math.min(S,100)}%`}})})]}),x.jsx("div",{className:"space-y-4",children:i.map((T,w)=>x.jsxs("div",{className:`flex items-start space-x-4 p-4 rounded-lg transition-colors ${T.status==="active"?"bg-blue-50 border border-blue-200":T.status==="completed"?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[x.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${T.status==="active"?"bg-blue-500 text-white":T.status==="completed"?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:T.status==="completed"?"":T.status==="active"?"":w+1}),x.jsxs("div",{className:"flex-grow",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:`font-medium ${T.status==="active"?"text-blue-900":T.status==="completed"?"text-green-900":"text-gray-700"}`,children:T.name}),T.status==="active"&&x.jsxs("span",{className:"text-xs text-blue-600",children:[Math.floor(d),"%"]})]}),x.jsx("p",{className:`text-sm mt-1 ${T.status==="active"?"text-blue-700":T.status==="completed"?"text-green-700":"text-gray-500"}`,children:T.description}),T.status==="active"&&x.jsx("div",{className:"mt-3",children:x.jsx("div",{className:"w-full bg-blue-200 rounded-full h-1",children:x.jsx("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-1000 ease-out",style:{width:`${d}%`}})})})]})]},T.id))}),x.jsxs("div",{className:"mt-6 p-3 bg-gray-100 rounded-lg",children:[x.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Channels"}),x.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.slice(0,8).map(T=>x.jsx("span",{className:"px-2 py-1 bg-white text-xs text-gray-600 rounded border",children:T},T)),n.length>8&&x.jsxs("span",{className:"px-2 py-1 bg-white text-xs text-gray-500 rounded border",children:["+",n.length-8," more"]})]})]}),x.jsx("div",{className:"text-center mt-4",children:x.jsx("p",{className:"text-xs text-gray-500",children:"This process cannot be interrupted. Please wait while we build your models."})})]})})},ry=[{id:"demo",name:"Demo Dataset",filename:"demo-dataset.csv",description:"Sample pharmaceutical marketing data with TV, Display, Search, and other channels",size:"~2KB"},{id:"pharma",name:"Pharma MMM Sample",filename:"pharma-mmm-sample.csv",description:"Alternative pharmaceutical marketing dataset for testing",size:"~2KB"},{id:"mixmind_demo",name:"MixMind Demo 100M Weekly",filename:"mixmind_demo_100M_weekly.csv",description:"MixMind demonstration dataset with 100M weekly marketing data across multiple channels",size:"~3KB"}];async function kP(e){try{const t=await fetch(`/${e}`);if(!t.ok)throw new Error(`Failed to load dataset: ${t.statusText}`);const n=await t.text();return KM(n,i=>{const o={};for(const l in i)if(i[l]!==void 0){const c=Number(i[l]);o[l]=isNaN(c)||i[l].trim()===""?i[l]:c}return o})}catch(t){throw console.error("Error loading dataset:",t),new Error(`Could not load dataset: ${e}. Please check that the file exists in the public folder.`)}}async function cee(){return kP("demo-dataset.csv")}async function fee(){try{return(await fetch("/demo-dataset.csv",{method:"HEAD"})).ok}catch{return!1}}const dee=()=>{const[e,t]=E.useState(!1);E.useEffect(()=>{const G=sessionStorage.getItem("mmx_authenticated")==="true";t(G)},[]),E.useEffect(()=>{if(e&&c.length===0){const G=setTimeout(()=>{const J=Date.now()+Math.random();d([{id:J,sender:"ai",text:"Hi! I'm your MMM assistant. Upload your marketing data to start analyzing channel performance and optimizing budgets.",actions:[]}])},500);return()=>clearTimeout(G)}},[e]);const n=()=>{t(!0)},[r,i]=E.useState(xe.Welcome),[o,l]=E.useState(new Set([xe.Welcome])),[c,d]=E.useState([]),[f,m]=E.useState(!1),[y,v]=E.useState(""),[S,T]=E.useState(!1),[w,A]=E.useState(null),[M,P]=E.useState(new Set),[N,O]=E.useState([]),[_,D]=E.useState([]),[k,B]=E.useState(null),[j,re]=E.useState({}),[K,V]=E.useState([]),[U,ee]=E.useState([]),[ue,q]=E.useState(""),[H,ae]=E.useState([]),[pe,$]=E.useState(null),[Y,te]=E.useState(null),[he,Ce]=E.useState([]),[De,Ae]=E.useState(""),[Ye,$e]=E.useState(""),[ve,Le]=E.useState(!1),[Ee,se]=E.useState(!1),[Ze,Ue]=E.useState(null),[ct,We]=E.useState(!1),[et,Rr]=E.useState(!1),[Os,va]=E.useState(!1),[go,yo]=E.useState(!1),[ku,Ni]=E.useState(!1),[Ls,Pr]=E.useState(!1),[Lt,yr]=E.useState(null),[gn,Iu]=E.useState(!1),js=E.useRef(!1),Ou=E.useRef(null),vo=()=>{var G;(G=Ou.current)==null||G.scrollIntoView({behavior:"smooth"})},Ri=E.useCallback(G=>{P(J=>new Set(J).add(G))},[]),Kr=E.useCallback(()=>M.has("column_assignment")||M.has("approve_exclude")||M.has("chat_interaction")||c.length>3,[M,c.length]);E.useEffect(()=>{vo()},[c]);const de=E.useCallback((G,J="ai",ie,fe)=>{const ge=Date.now()+Math.random();d(ye=>[...ye,{id:ge,sender:J,text:G,actions:ie||[],meta:fe}])},[]),Pi=E.useCallback(()=>{if(r===xe.Welcome)return[];if(N.length===0)return[];switch(r){case xe.Configure:const G=Object.keys(j).filter(me=>j[me]===Oe.MARKETING_SPEND),J=Object.keys(j).filter(me=>j[me]===Oe.MARKETING_ACTIVITY),ie=Object.values(j).includes(Oe.TIME_DIMENSION),fe=Object.values(j).includes(Oe.GEO_DIMENSION),ge=Object.keys(j).filter(me=>j[me]===Oe.DEPENDENT_VARIABLE),ye=Object.keys(j).filter(me=>j[me]===Oe.CONTROL_VARIABLE),Me=Object.keys(j).filter(me=>j[me]===Oe.IGNORE),Ke=c.slice(-8).map(me=>typeof me.text=="string"?me.text.toLowerCase():"").filter(me=>me.length>0),Pe=Ke.some(me=>me.includes("spend")||me.includes("budget")||me.includes("roi")),xn=Ke.some(me=>me.includes("activity")||me.includes("impression")||me.includes("reach")),Dn=Ke.some(me=>me.includes("dependent")||me.includes("kpi")||me.includes("target")),xr=Ke.some(me=>me.includes("time")||me.includes("date")||me.includes("weekly")),br=Ke.some(me=>me.includes("control")||me.includes("external")||me.includes("seasonal")),gt=[];if(G.length>0&&J.length>0&&!Pe?gt.push({text:"Why do I have both spend and activity data?",style:"secondary"}):!Pe&&!xn&&gt.push({text:"What's the difference between Spend and Activity?",style:"secondary"}),G.length>=3&&!Pe&&gt.push({text:`How will my ${G.length} spend channels work in MMM?`,style:"secondary"}),ge.length===0?gt.push({text:"Help me choose the right KPI for modeling",style:"secondary"}):ge.length>1?gt.push({text:"Can I model multiple KPIs at once?",style:"secondary"}):Dn||gt.push({text:`Why is ${ge[0]} a good choice for MMM?`,style:"secondary"}),!ie&&!xr?gt.push({text:"Do I really need a time dimension?",style:"secondary"}):ie&&!xr&&gt.push({text:"How does time granularity affect model quality?",style:"secondary"}),fe&&gt.push({text:"What advantages does geographic modeling give me?",style:"secondary"}),ye.length===0&&!br?gt.push({text:"Should I include external factors as controls?",style:"secondary"}):ye.length>0&&!br&&gt.push({text:`How will my ${ye.length} control variables improve the model?`,style:"secondary"}),Me.length>0&&gt.push({text:`Review why ${Me.length} columns are being ignored`,style:"secondary"}),ge.length>0&&ie&&(G.length>0||J.length>0)&&gt.filter(me=>me.style==="secondary").length<2&&gt.push({text:"Are my column assignments ready for validation?",style:"primary"}),gt.length<3){const me=["What makes marketing data modeling-ready?","How do I handle seasonality in MMM?","What's the ideal data timeframe for MMM?","Common mistakes in column classification"],Jr=Math.floor(Date.now()/45e3)%me.length,Qn=me.slice(Jr).concat(me.slice(0,Jr));for(const Jt of Qn){if(gt.length>=3)break;Ke.some(In=>In.includes(Jt.toLowerCase().split(" ").slice(0,2).join(" ")))||gt.push({text:Jt,style:"secondary"})}}return gt;case xe.DataValidation:const Fu=K.filter(me=>me.isApproved).length,bn=K.length,Vs=K.filter(me=>parseFloat(me.sparsity)>50).length,Hu=K.filter(me=>parseFloat(me.volatility)>80).length,Yr=c.slice(-6).map(me=>typeof me.text=="string"?me.text.toLowerCase():"").filter(me=>me.length>0),Gu=Yr.some(me=>me.includes("sparsity")),So=Yr.some(me=>me.includes("correlation")),im=Yr.some(me=>me.includes("diagnostic")),Ct=[];Vs>0&&!Gu&&Ct.push({text:`Why do ${Vs} channels have high sparsity?`,style:"secondary"}),Hu>0&&Ct.push({text:`Analyze high volatility in ${Hu} channels`,style:"secondary"}),Fu<bn?Ct.push({text:"Should I exclude problematic channels?",style:"secondary"}):im||Ct.push({text:"Why are all channels approved?",style:"secondary"}),So||Ct.push({text:"Check correlation patterns",style:"secondary"}),k&&Ct.push({text:"Proceed to feature engineering",style:"primary"});const zs=Date.now(),Ku=Math.floor(zs/3e4)%4;if(Ct.filter(me=>me.style==="secondary").length<2){const me=[["Explain the trend smoothing method","What's causing the volatility?","How reliable is this data?"],["Which channels need attention?","How does seasonality affect this?","What's the business implication?"],["Should I be concerned about gaps?","How does this compare to benchmarks?","What would ideal data look like?"],["What should I investigate next?","How do I improve measurement?","Ready for feature engineering?"]],Jr=me[Ku]||me[0];for(const Qn of Jr){if(Ct.filter(In=>In.style==="secondary").length>=2)break;const Jt=Qn.toLowerCase().split(" ").slice(0,3).join(" ");Yr.some(In=>In.includes(Jt))||Ct.push({text:Qn,style:"secondary"})}}return Ct;case xe.FeatureEngineering:const Co=U.filter(me=>me.adstock>=.6),Wr=U.filter(me=>me.adstock<.2),Fs=U.filter(me=>me.lag>0),Yu=U.filter(me=>me.lag===0),Oi=U.filter(me=>me.transform==="S-Curve"),am=U.filter(me=>me.transform==="Log-transform"),Ca=c.slice(-8).map(me=>typeof me.text=="string"?me.text.toLowerCase():"").filter(me=>me.length>0),Hs=Ca.some(me=>me.includes("adstock")||me.includes("carryover")),To=Ca.some(me=>me.includes("lag")||me.includes("delay")),Wu=Ca.some(me=>me.includes("transform")||me.includes("saturation")),kn=[];if(Co.length>0&&!Hs?kn.push({text:`Why do ${Co.length} channels have high adstock?`,style:"secondary"}):Wr.length>=2&&!Hs&&kn.push({text:`Should ${Wr.map(me=>me.channel).slice(0,2).join(" and ")} have higher carryover?`,style:"secondary"}),Fs.length>0&&!To?kn.push({text:`Explain the ${Fs.length} week delay effects`,style:"secondary"}):Yu.length>=3&&!To&&kn.push({text:"Why do most channels have immediate impact?",style:"secondary"}),Oi.length>0&&am.length>0&&!Wu?kn.push({text:"Compare S-Curve vs Log saturation patterns",style:"secondary"}):Wu||kn.push({text:"How do saturation curves affect optimization?",style:"secondary"}),kn.push({text:"Validate these settings against industry norms",style:"secondary"}),U.length>0&&kn.push({text:"Ready to proceed with modeling",style:"primary"}),kn.filter(me=>me.style==="secondary").length<2){const me=["How to adjust parameters for better performance","Industry benchmarks for my channel types","What if my adstock settings are wrong?","How to interpret transformation effects"],Jr=Date.now(),Qn=Math.floor(Jr/4e4)%me.length,Jt=me[Qn];Ca.some(In=>In.includes(Jt.toLowerCase().split(" ").slice(0,2).join(" ")))||kn.push({text:Jt,style:"secondary"})}return kn;case xe.Modeling:const Ta=H.length>0?H[0]:null,wo=pe?H.find(me=>me.id===pe):null;return[{text:"Which model performs best and why?",style:"secondary"},...Ta?[{text:`Why does ${Ta.algo} work well here?`,style:"secondary"}]:[],...wo?[{text:`Calibrate ${wo.id}`,style:"secondary"}]:[],{text:"How do I interpret these metrics?",style:"secondary"},...pe?[{text:"Finalize this model",style:"primary"}]:[]];case xe.Report:const Ao=(Y==null?void 0:Y.details.filter(me=>me.included).length)||0;return[{text:"Summarize the key findings",style:"secondary"},{text:"Which channels drive the most ROI?",style:"secondary"},...Ao>0?[{text:`Explain all ${Ao} channel contributions`,style:"secondary"}]:[],{text:"How should I present these results?",style:"secondary"},{text:"Go to budget optimization",style:"primary"}];case xe.Optimize:const Li=he.length,Sr=he.find(me=>me.id===De),Gs=Sr?Math.round(Sr.recommendedSpend):100;return Sr&&Sr.projectedROI.toFixed(1),[{text:"Explain the rationale behind this allocation strategy",style:"secondary"},{text:`Create a $${Gs+50}M efficiency-focused budget`,style:"secondary"},{text:`Maximize volume with $${Gs+100}M investment`,style:"secondary"},{text:"Protect TV spend but optimize other channels",style:"secondary"},{text:"What's my optimal budget for 15% revenue growth?",style:"secondary"},...Li>2?[{text:"Compare ROI vs Volume scenarios side-by-side",style:"primary"}]:[]];default:return[]}},[r,N,j,K,k,U,H,pe,Y,he,c]),xo=E.useCallback(G=>{if(N.length===0&&G!==xe.Welcome)return[];switch(G){case xe.Configure:const J=Object.values(j).includes(Oe.TIME_DIMENSION),ie=Object.values(j).includes(Oe.GEO_DIMENSION),fe=Object.keys(j).filter(sn=>j[sn]===Oe.MARKETING_SPEND);return[{text:"What's the difference between Marketing Spend and Activity?",style:"secondary"},...fe.length>0?[{text:`Explain my ${fe.length} spend channels`,style:"secondary"}]:[],...ie?[{text:"How do geographic models work?",style:"secondary"}]:[],...J?[]:[{text:"Why do I need a time dimension?",style:"secondary"}],{text:"What makes a good dependent variable?",style:"secondary"}];case xe.DataValidation:const ge=K.filter(sn=>sn.isApproved).length,ye=K.length;return[{text:"Explain these diagnostics",style:"secondary"},{text:"What does sparsity mean for my channels?",style:"secondary"},...ge<ye?[{text:"Should I exclude high-sparsity channels?",style:"secondary"}]:[],{text:"How do I interpret correlation patterns?",style:"secondary"}];case xe.FeatureEngineering:const Me=U.filter(sn=>sn.adstock>.5).length,Ke=U.some(sn=>sn.lag>0);return[{text:"What is adstock and why does it matter?",style:"secondary"},...Me>0?[{text:`Why do ${Me} channels have high adstock?`,style:"secondary"}]:[],...Ke?[{text:"Explain the lag effects in my model",style:"secondary"}]:[],{text:"How were these transformations chosen?",style:"secondary"}];case xe.Modeling:const Pe=H.length>0?H[0]:null,xn=pe?H.find(sn=>sn.id===pe):null;return[{text:"Which model performs best and why?",style:"secondary"},...Pe?[{text:`Why does ${Pe.algo} work well here?`,style:"secondary"}]:[],...xn?[{text:`Analyze ${xn.id} performance`,style:"secondary"}]:[],{text:"How do I calibrate this model?",style:"secondary"}];case xe.Report:const Dn=(Y==null?void 0:Y.details.filter(sn=>sn.included).length)||0;return[{text:"Summarize the key findings",style:"secondary"},{text:"Which channels drive the most ROI?",style:"secondary"},...Dn>0?[{text:`Explain contribution of all ${Dn} channels`,style:"secondary"}]:[],{text:"Take me to budget optimization",style:"primary"}];case xe.Optimize:const xr=he.length,br=he.find(sn=>sn.id===De),gt=br?Math.round(br.recommendedSpend):100;return br&&br.projectedROI.toFixed(1),[{text:"Explain the rationale behind this allocation strategy",style:"secondary"},{text:`Create a $${gt+50}M efficiency-focused budget`,style:"secondary"},{text:`Maximize volume with $${gt+100}M investment`,style:"secondary"},{text:"Protect TV spend but optimize other channels",style:"secondary"},{text:"What's my optimal budget for 15% revenue growth?",style:"secondary"},...xr>2?[{text:"Compare ROI vs Volume scenarios side-by-side",style:"primary"}]:[]];default:return[]}},[N,j,K,U,H,pe,Y,he]);E.useEffect(()=>{(async()=>{if(js.current)return;js.current=!0;const J=await fee();se(J),de("Hello! I'm MixMind, your Marketing Mix Modeling assistant. Upload a CSV file to begin analysis.","ai")})()},[]);const xa=E.useCallback(G=>{var fe;const J=G?H.find(ge=>ge.id===G):Y;if(!J){const ge=H.length>0?H[0]:null;if(!ge){de("I need a valid model to proceed to optimization. Please finalize a model first.","ai");return}return console.log("Using fallback model for optimization:",ge.id),te(ge),xa(ge.id)}l(ge=>new Set(ge).add(xe.Report)),i(xe.Optimize),console.log("Generating scenarios for model:",J==null?void 0:J.id,J);const ie=oee(J);console.log("Generated scenarios:",ie),Ce(ie),Ae(((fe=ie[0])==null?void 0:fe.id)||""),de(x.jsxs(x.Fragment,{children:[x.jsx("p",{children:"Excellent. Welcome to the Budget Optimizer. I've created three starter scenarios based on your model performance. You can explore them using the list on the left."}),x.jsx("p",{className:"mt-2",children:"To create a custom plan, tell me your goals. For example:"}),x.jsxs("p",{className:"mt-2",children:[' "Create an efficiency-focused $250M allocation"',x.jsx("br",{}),' "Maximize revenue growth with $400M investment"',x.jsx("br",{}),' "Protect TV budget but optimize digital channels"',x.jsx("br",{}),' "What budget delivers 15% incremental revenue?"']})]}),"ai")},[de,Y,H]),Lu=E.useCallback(G=>{Ce(J=>J.map(ie=>ie.id===G.id?G:ie))},[]),Us=E.useCallback(G=>{Ce(J=>[...J,G]),Ae(G.id)},[]),ba=E.useCallback(()=>{i(xe.Welcome),l(new Set([xe.Welcome])),d([]),rf(),O([]),D([]),B(null),re({}),V([]),ee([]),q(""),ae([]),$(null),te(null),Ce([]),Ae(""),A(null),$e(""),Le(!1),Rr(!1),va(!1),yo(!1),Ni(!1),js.current=!1,setTimeout(()=>de("Ready for a new analysis. Please upload your CSV file."),100)},[de]),nm=E.useCallback(async()=>{l(G=>new Set(G).add(xe.Configure)),i(xe.DataValidation),de("Running data quality diagnostics...")},[de,xo]),ju=E.useCallback(async()=>{const G=K.filter(J=>J.isApproved).map(J=>J.name);if(G.length===0){de("Please approve at least one channel from the diagnostics table before proceeding to feature engineering.","ai");return}l(J=>new Set(J).add(xe.DataValidation)),i(xe.FeatureEngineering),de("Data looks good. Configuring feature engineering parameters..."),m(!0),v("Generating feature recommendations...");try{const{generateDemoFeatures:J}=await Wk(async()=>{const{generateDemoFeatures:Pe}=await Promise.resolve().then(()=>oq);return{generateDemoFeatures:Pe}},void 0),ie=J(G);ee(ie);const fe=ie.filter(Pe=>Pe.adstock>=.6),ge=ie.filter(Pe=>Pe.lag===0),ye=ie.filter(Pe=>Pe.lag>=2),Me=ie.filter(Pe=>Pe.transform==="S-Curve"),Ke=`## Feature Engineering Configuration

### Overview
I've analyzed your **${G.length} marketing channels** and configured MMM parameters based on their behavior patterns in your data.

### Key Recommendations

** Carryover Effects (Adstock)**
${fe.length>0?` **Strong carryover (0.6-0.9):** ${fe.map(Pe=>Pe.channel).join(", ")} - These channels build lasting brand equity
`:""}${ge.length>0?` **Minimal carryover (<0.3):** ${ge.filter(Pe=>Pe.adstock<.3).map(Pe=>Pe.channel).join(", ")} - Direct response channels with quick decay
`:""}
** Response Timing (Lag)**
${ge.length>0?` **Immediate impact (0 weeks):** ${ge.map(Pe=>Pe.channel).join(", ")} - Same-week conversion
`:""}${ye.length>0?` **Delayed response (2+ weeks):** ${ye.map(Pe=>Pe.channel).join(", ")} - Consideration period needed
`:""}
** Saturation Curves**
${Me.length>0?` **S-Curve transformation:** ${Me.map(Pe=>Pe.channel).join(", ")} - Clear saturation at high spend levels
`:""}${ie.filter(Pe=>Pe.transform==="Log-transform").length>0?` **Log transformation:** ${ie.filter(Pe=>Pe.transform==="Log-transform").map(Pe=>Pe.channel).join(", ")} - Diminishing returns from the start
`:""}

### Next Steps
Review each channel's settings in the table below. Adjust based on your business knowledge - for example:
- Increase adstock if you know a channel has strong brand-building effects
- Add lag if there's a known delay between exposure and conversion
- Change transformation if you have evidence of different saturation patterns`;q(Ke),de("Feature recommendations ready. Adjust parameters based on your expertise.","ai")}catch(J){const ie=J instanceof Error?J.message:"An unknown error occurred.";A(`Failed to generate feature recommendations: ${ie}`),de(`I'm sorry, I couldn't generate feature recommendations. Error: ${ie}.`,"ai"),i(xe.DataValidation)}finally{m(!1)}},[de,K]),Uu=E.useCallback(()=>{const G=H.find(J=>J.id===pe);G&&(Ni(!1),l(J=>new Set(J).add(xe.Modeling)),te(G),i(xe.Report),de("Model finalized! I'm now generating the final report with key findings, performance summaries, and response curves. When you're done reviewing, you can ask to 'go to optimizer' or 'start over'."))},[de,pe,H]),$s=E.useCallback(()=>{if(!pe){de("Please select a model from the leaderboard first before finalizing.","ai");return}de(`You have requested to finalize model **${pe}**. This will lock the model and generate the final report. Are you sure you want to proceed? (Type 'yes' to confirm)`,"ai"),Ni(!0)},[de,pe]),Dr=E.useCallback(async()=>{const G=[],J=Object.keys(j).filter(ie=>[Oe.MARKETING_SPEND,Oe.MARKETING_ACTIVITY].includes(j[ie]));for(const ie of U){if(!J.includes(ie.channel)){G.push(`**${ie.channel} Type Mismatch:** This channel is configured for modeling, but its type is currently set to '${j[ie.channel]||"Not Set"}', not a marketing channel. Please go back to the 'Validate' step to correct the column type.`);continue}N.some(ge=>{const ye=ge[ie.channel];return ye!=null&&ye!==""&&isNaN(Number(ye))})&&G.push(`**${ie.channel} Data Type Mismatch:** This channel contains non-numeric text values that cannot be used in modeling. Please check your source data or re-classify this column in the 'Validate' step.`)}if(G.length>0){let ie=`To proceed to modeling, a few issues require your attention:

`+G.map((fe,ge)=>`${ge+1}. ${fe}`).join(`

`);de(ie),$e(""),yo(!0);return}yo(!1),de("Starting model training..."),Iu(!0),Pr(!0),A(null),l(ie=>new Set(ie).add(xe.FeatureEngineering)),i(xe.Modeling),de("I'm now building multiple regression models with realistic staged training. This process takes 30-60 seconds for thorough model development...")},[de,j,N,Ye,U,H]),$u=E.useCallback(async()=>{Iu(!1),m(!0);try{const G=U.map(ye=>ye.channel),ie=Nf(G,j,Ye,U,k==null?void 0:k.channelDiagnostics).map((ye,Me)=>({...ye,id:`${ye.id}_${Date.now()}_${Me}`,isNew:!0})),fe=H.map(ye=>({...ye,isNew:!1}));ae([...fe,...ie]),Pr(!1),Lt&&(clearTimeout(Lt),yr(null)),ie.length>0&&!pe&&$(ie[0].id);const ge=H.length===0;de(ge?"Modeling complete! Here is the new Modeling Workspace with enhanced diagnostics and filtering. The leaderboard shows models ranked by performance. Click a model to see detailed diagnostics including p-values, confidence intervals, and statistical warnings.":`Training complete! Generated ${ie.length} new models with enhanced diagnostics. Models are grouped by algorithm and filtered by your current channel selection. Use the filters to explore performance patterns and diagnostics.`)}catch(G){console.error("Error generating models:",G),de("There was an issue generating the models. Please try again.")}finally{m(!1),$e("")}},[de,j,N,Ye,U,H,k,pe,Lt]),rm=E.useCallback(async()=>{We(!1),m(!0);try{const G=U.map(ye=>ye.channel),ie=Nf(G,j,Ye,U,k==null?void 0:k.channelDiagnostics).map((ye,Me)=>({...ye,id:`${ye.id}_${Date.now()}_${Me}`,isNew:!0})),fe=H.map(ye=>({...ye,isNew:!1}));ae([...fe,...ie]);const ge=H.length===0;de(ge?"Modeling complete! Here is the new Modeling Workspace. The leaderboard is on the left. Click a model ID to see its detailed results and calibration controls on the right. You can ask me questions about these results (e.g., 'What is the TV impact in br_1?'), request a re-run with new parameters, or tune the active model via chat.":`Training complete! Generated ${ie.length} new models marked as 'NEW' in the leaderboard. Models are grouped by algorithm and sorted by performance. The new models respect your current parameter ranges and channel selection.`)}catch(G){const J=G instanceof Error?G.message:"An unknown error occurred during modeling.";A(`Modeling failed: ${J}`),de(`I'm sorry, the modeling process failed. Error: ${J}.`),i(xe.FeatureEngineering)}finally{m(!1),$e("")}},[de,j,N,Ye,U,H,k]),vr=E.useCallback(async()=>{const G=K.filter(J=>J.isApproved).map(J=>J.name).filter(J=>Object.keys(j).filter(fe=>j[fe]===Oe.MARKETING_ACTIVITY).some(fe=>{const ge=fe.toLowerCase().replace(/_?(impressions?|clicks?|grps?|reach|views?|activity|count|events?|sends?|engagements?)$/i,""),ye=J.toLowerCase();return ge.includes(ye)||ye.includes(ge)||ge.replace(/[^a-z]/g,"")===ye.replace(/[^a-z]/g,"")}));if(G.length===0){de("It looks like no channels are approved. Please approve at least one channel from the diagnostics table on the right to continue, then let me know you want to proceed.","ai"),va(!0);return}va(!1),de("Thanks for confirming the data diagnostics. Now, let's think about how to model these channels."),m(!0),v("Recommending features...");try{de("I'll recommend feature engineering parameters like adstock and lag effects based on industry best practices and your data. These represent the lingering and delayed effects of your advertising.");const J=await fq(j,G,Ye);ee(J);const ie=await dq(J,j,Ye);q(ie),l(fe=>new Set(fe).add(xe.DataValidation)),i(xe.FeatureEngineering),de("Here are my recommendations. You can adjust them based on your domain expertise. When you're ready, let me know so I can summarize the settings and we can proceed to modeling.","ai"),yo(!0)}catch(J){const ie=J instanceof Error?J.message:"An unknown error occurred.";A(`Failed to get features: ${ie}`),de(`I'm sorry, I couldn't generate the features. Error: ${ie}.`)}finally{m(!1),$e("")}},[de,Ye,K,j]),Mt=E.useCallback(async(G,J,ie)=>{m(!0),v("Updating diagnostics...");try{const fe=VM(G,J);return B(fe),V(fe.channelDiagnostics),fe}catch(fe){const ge=fe instanceof Error?fe.message:"An unknown error occurred during EDA.";throw A(`EDA failed: ${ge}`),de(`I'm sorry, I couldn't update the insights. Error: ${ge}.`),fe}finally{m(!1),v("")}},[de]),on=E.useCallback(async()=>{de("Thank you for confirming. We are now proceeding with the data validation checks.","ai");try{const G=await Mt(j,N,"");Le(!0);const J=x.jsxs(x.Fragment,{children:[x.jsx("p",{children:"Diagnostics complete:"}),x.jsxs("ul",{className:"list-disc list-inside mt-2 text-sm",children:[x.jsxs("li",{children:[x.jsx("strong",{children:"KPI Trend:"})," ",G.trendsSummary]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Data Quality:"})," ",G.diagnosticsSummary]})]})]});de(J,"ai"),Kr()?de("Say 'proceed to features' when ready to continue.","ai"):de("Review channel diagnostics on the right. Approve/exclude channels as needed, then say 'proceed to features' when ready.","ai"),va(!0)}catch{}finally{$e("")}},[de,j,N,Mt]);E.useEffect(()=>{if(r===xe.DataValidation&&!ve&&Object.keys(j).length>0){const G=setTimeout(()=>{Mt(j,N,""),Le(!0)},1e3);return()=>{clearTimeout(G)}}},[j,r,ve,N,Mt]),E.useEffect(()=>{if(N.length>0&&r===xe.DataValidation&&ve&&k){const J=setTimeout(()=>{if(xo(r).length>0){const ge={[xe.DataValidation]:" **Data validation insights you might want to explore:**"}[r];ge&&c.some(ye=>typeof ye.text=="string"&&ye.text.includes(ge))}},1500);return()=>clearTimeout(J)}},[r,N.length,_.length,ve,k,U.length,xo,de,c]);const Pn=E.useCallback(async G=>{m(!0),v("Analyzing columns..."),de("Analyzing column structure...");try{const J=await cq(G);D(J);const ie=J.reduce((ye,Me)=>({...ye,[Me.columnName]:Me.suggestedType}),{});re(ie);const ge=[Oe.DEPENDENT_VARIABLE,Oe.TIME_DIMENSION,Oe.GEO_DIMENSION,Oe.MARKETING_SPEND,Oe.MARKETING_ACTIVITY,Oe.CONTROL_VARIABLE,Oe.IGNORE].map(ye=>({role:ye,columns:Object.entries(ie).filter(([,Me])=>Me===ye).map(([Me])=>Me)})).filter(ye=>ye.columns.length>0);de(x.jsxs(x.Fragment,{children:[x.jsx("p",{children:"Column analysis complete:"}),x.jsx(iee,{summary:ge})]}),"ai"),de("Review column assignments on the right. Say 'yes' when ready to proceed.","ai"),Rr(!0)}catch(J){const ie=J instanceof Error?J.message:"An unknown error occurred during column analysis.";A(`Analysis failed: ${ie}`),de(`I'm sorry, I ran into an issue. Error: ${ie}. Please check your data or API key.`),i(xe.Welcome)}finally{m(!1)}},[de,xo]),Bs=G=>KM(G,J=>{const ie={};for(const fe in J){const ge=J[fe];if(ge!==void 0){const ye=Number(ge);ie[fe]=isNaN(ye)||ge.trim()===""?ge:ye}}return ie}),qs=E.useCallback(async G=>{A(null),de(`Loading ${G.name}...`,"user"),m(!0),v(`Loading ${G.name}...`);try{const J=await kP(G.filename);if(rf(),O(J),await aM(J),Ue(G),l(ie=>new Set(ie).add(xe.Welcome)),i(xe.Configure),de(`Perfect! I've loaded the ${G.name}. Let me analyze the column structure...`),J.length>0){const ie=Object.keys(J[0]),fe=[ie.join(",")],ge=J.slice(0,10).map(Me=>ie.map(Ke=>`"${String(Me[Ke]||"").replace(/"/g,'""')}"`).join(","));fe.push(...ge);const ye=fe.join(`
`);await Pn(ye)}}catch(J){console.error("Error loading dataset:",J);const ie=J instanceof Error?J.message:"Unknown error occurred";A(`Failed to load dataset: ${ie}`),de(`Sorry, I couldn't load the dataset. Error: ${ie}`)}finally{m(!1)}},[de,Pn]),Bu=E.useCallback(async()=>{const G=ry.find(J=>J.id==="demo");G&&await qs(G)},[qs]);E.useCallback(async()=>{A(null),de("Loading demo dataset...","user"),m(!0),v("Loading embedded dataset...");try{const G=await cee();if(rf(),O(G),await aM(G),l(J=>new Set(J).add(xe.Welcome)),i(xe.Configure),de("Perfect! I've loaded your dataset. Let me analyze the column structure and suggest appropriate roles for each column."),G.length>0){const J=Object.keys(G[0]),ie=[J.join(",")],fe=G.slice(0,10).map(ye=>J.map(Me=>`"${String(ye[Me]||"").replace(/"/g,'""')}"`).join(","));ie.push(...fe);const ge=ie.join(`
`);await Pn(ge)}}catch(G){const J=G instanceof Error?G.message:"Failed to load demo dataset.";A(J),de(`Sorry, I couldn't load the demo dataset. ${J}`)}finally{m(!1)}},[de,Pn]);const qu=E.useCallback(async G=>{var ie;const J=(ie=G.target.files)==null?void 0:ie[0];if(J){A(null),de(`Uploading "${J.name}"...`,"user");const fe=new FileReader;fe.onload=async ge=>{var Me;const ye=(Me=ge.target)==null?void 0:Me.result;try{const Ke=Bs(ye);rf(),O(Ke),l(Pe=>new Set(Pe).add(xe.Welcome)),i(xe.Configure),await Pn(ye)}catch(Ke){const Pe=Ke instanceof Error?Ke.message:"Unknown parsing error.";A(`Failed to parse CSV: ${Pe}`),de(`Sorry, I couldn't parse that CSV file. Details: ${Pe}`)}},fe.onerror=()=>{A("Failed to read file."),de("Sorry, I encountered an error reading that file.")},fe.readAsText(J)}},[de,Pn]),Sa=E.useCallback(G=>{o.has(G)&&(i(G),de(`Navigating to the ${xe[G].replace(/([A-Z])/g," $1").trim()} step.`,"ai"))},[o,de]),bo=async G=>{if(G.trim()){if(de(G,"user"),Ri("chat_interaction"),G.toLowerCase().includes("start over")){ba();return}if(r===xe.Report&&G.toLowerCase().includes("optimizer")){xa();return}if(r===xe.Configure){if(G.toLowerCase().includes("ignore")||G.toLowerCase().includes("set")||G.toLowerCase().includes("change")){await Di(G),$e(""),m(!1);return}const J=[{keywords:["marketing spend","what is marketing spend"],response:`Marketing Spend: Dollar amounts invested per channel (TV_Spend, Display_Spend, etc.)

Key for ROI calculations and budget optimization.`},{keywords:["marketing activity","activity","impressions","clicks"],response:`Marketing Activity: Volume metrics like impressions, clicks, GRPs, emails sent.

These measure exposure and reach before conversion.`},{keywords:["dependent variable","kpi","target"],response:`Dependent Variable: Your main business metric to predict and optimize.

Examples: Sales revenue, prescriptions, conversions. Choose your most important outcome.`},{keywords:["time dimension","date","week"],response:`Time Dimension: Enables trend analysis and captures how marketing effects evolve.

Weekly or monthly data works best for MMM.`},{keywords:["control variable","external","seasonality"],response:`Control Variables: External factors affecting your business like seasonality, competitor activity, economic indicators, holidays.

These isolate true marketing impact.`},{keywords:["geo","geography","dma","region"],response:"Geographic Dimension: Identifies your analysis unit (DMA, region, store) for location-based modeling and local optimization."},{keywords:["ignore","exclude"],response:`Ignore irrelevant columns: internal IDs, calculated fields, redundant data.

Keep it focused on what drives results.`},{keywords:["proceed","continue","next","validation"],response:"Ready to validate? I'll run diagnostics on data quality, correlations, and channel sparsity before modeling."},{keywords:["control variables","what are control"],response:"Control Variables account for external business influences (competition, economy, seasonality) to isolate your marketing impact."},{keywords:["correlation","correlations","interpret correlation"],response:`Correlation measures how variables move together (-1 to +1):

Strong (0.7+): Close relationship
Moderate (0.3-0.7): Some relationship
Weak (<0.3): Little relationship

High correlations between channels may indicate redundancy or shared effects.`},{keywords:["spend channels work","channels work in mmm","spend channels in mmm"],response:`Your spend channels provide the key inputs for MMM analysis:

High variability channels (like TV, Display) give the model strong signals to measure impact. Consistent investment channels help establish baseline performance. Each channel's unique spending pattern helps isolate its individual contribution.

MMM will measure how each dollar spent drives your business outcome.`}];for(const ie of J)if(ie.keywords.some(fe=>G.toLowerCase().includes(fe))){de(ie.response),$e(""),m(!1);return}}if(r===xe.Welcome&&Ee&&(G.toLowerCase().includes("load")||G.toLowerCase().includes("demo")||G.toLowerCase().includes("start")||G.toLowerCase().includes("proceed"))){await Bu();return}T(!0);try{if(r===xe.DataValidation){if(!et&&!Os&&(G.toLowerCase().includes("approve")||G.toLowerCase().includes("exclude")||G.toLowerCase().includes("include")||G.toLowerCase().includes("remove"))){await ki(G),$e(""),m(!1);return}if(et){const J=await af(G);if(J==="affirmative")Rr(!1),await on();else if(J==="negative")de("No problem. Please adjust the column types on the right. Let me know when you're ready to try again.","ai");else{const ie=await Bl(G,r,{},N);de(ie,"ai"),de("When you're ready to proceed with the column assignments, please say 'yes'.","ai")}}else if(Os){const J=await af(G);if(J==="affirmative")await vr();else if(J==="negative")de("Okay, please continue to review the diagnostics and approve/exclude channels. Let me know when you are ready to proceed.","ai");else{const ie=await Bl(G,r,{},N);de(ie,"ai")}}else{const J=await Bl(G,r,{},N);de(J,"ai")}}else if(r===xe.FeatureEngineering)if(go)if(!c.some(ie=>typeof ie.text=="string"&&ie.text.startsWith("Okay, acknowledged."))){const ie=await mq(U,j);de(ie,"ai"),de("Does this look right? If so, say 'proceed to modeling'.","ai")}else await af(G)==="affirmative"?await Dr():de("No problem. Please continue to adjust the feature parameters. Let me know when you are ready to proceed again.","ai");else{const J=await Bl(G,r,{featureParams:U},N);de(J,"ai")}else if(r===xe.Modeling){const J=H.find(ie=>ie.id===pe);if(pe&&G.toLowerCase().includes("finalize"))de(`You'd like to finalize model ${pe}. Are you sure? This will generate the final report.`,"ai"),Ni(!0);else if(ku)await af(G)==="affirmative"?Uu():(Ni(!1),de("Okay, finalization cancelled. You can continue to explore and calibrate the models.","ai"));else{let ie=!1;if(J&&(ie=["adstock","lag","include","exclude","remove","add back","set","change"].some(ge=>G.toLowerCase().includes(ge))),ie&&J){de(`Okay, applying this change to model ${pe}...`,"ai");const fe=await yq(G,J);de(fe.text,"ai"),ae(ge=>ge.map(ye=>ye.id===pe?fe.updatedModel:ye))}else{const fe=await pq(G,H);de(fe.text,"ai"),fe.newModel&&ae(ge=>[...ge,fe.newModel]),fe.selectModelId&&(H.find(ye=>ye.id===fe.selectModelId)?($(fe.selectModelId),de(`Model ${fe.selectModelId} is now active. Its details and controls are shown on the right.`,"ai")):de(`I couldn't find model "${fe.selectModelId}". Please check the ID and try again.`,"ai"))}}}else if(r===xe.Optimize){if(!Y){de("Something went wrong. A model needs to be finalized before optimization.","ai");return}const J=G.toLowerCase();if(J.includes("explain")&&(J.includes("rationale")||J.includes("allocation"))){const ye=he.find(Me=>Me.id===De);if(ye){const Me=Math.round(ye.recommendedSpend),Ke=ye.projectedROI.toFixed(1);de(`This allocation strategy focuses on optimizing your $${Me}M budget for maximum efficiency. The projected ${Ke}x ROI is achieved by reallocating spend toward your highest-performing channels while maintaining portfolio diversification. Key shifts include scaling up channels with strong marginal returns and reducing investment in saturated areas. This data-driven approach balances short-term efficiency with long-term growth sustainability.`,"ai");return}}if(J.includes("compare")&&(J.includes("scenario")||J.includes("side-by-side")))if(he.length>=2){const ye=he[0],Me=he[1];de(`Scenario Comparison Analysis:

${ye.title}: $${Math.round(ye.recommendedSpend)}M budget, ${ye.projectedROI.toFixed(1)}x ROI, $${Math.round(ye.netRevenue)}M net revenue
${Me.title}: $${Math.round(Me.recommendedSpend)}M budget, ${Me.projectedROI.toFixed(1)}x ROI, $${Math.round(Me.netRevenue)}M net revenue

Key Trade-offs: ${ye.projectedROI>Me.projectedROI?ye.title+" prioritizes efficiency":Me.title+" prioritizes efficiency"} while ${ye.recommendedSpend>Me.recommendedSpend?ye.title+" focuses on scale":Me.title+" focuses on scale"}. Choose based on your strategic priorities: efficiency vs. volume growth.`,"ai");return}else{de("You need at least 2 scenarios to compare. Let me help you create another optimization scenario first.","ai");return}de("Perfect! Let me create a strategic optimization scenario based on your request. Analyzing market dynamics and efficiency curves...","ai"),T(!0);const ie=await bq(G,Y,he);de(ie.text,"ai");const fe=he.length+1,ge={...ie.newScenario,id:`scenario_${fe}_${Date.now()}`,title:`Scenario ${fe}: ${ie.newScenario.title}`};Ce(ye=>[...ye,ge]),Ae(ge.id)}else{const J=[{keywords:["sparsity","gaps","zero"],response:`Sparsity: Percentage of zero/null values.

High sparsity (>50%) can hurt model accuracy. Consider excluding sparse channels or investigating data collection issues.`},{keywords:["volatility","variation","cv"],response:`Volatility (CV): Coefficient of variation measuring fluctuation.

High volatility (>100%) may indicate unstable spend patterns or seasonal effects.`},{keywords:["approve","include","good"],response:"Approved channels will be included in modeling. You can exclude problematic ones anytime."},{keywords:["exclude","remove","bad"],response:"Excluded channels won't be modeled. Use for channels with poor data quality or business reasons."},{keywords:["diagnostic","health","quality"],response:"Channel diagnostics show data quality metrics: sparsity, volatility, and trends to help you decide inclusion."}];if(r===xe.DataValidation){for(const ie of J)if(ie.keywords.some(fe=>G.toLowerCase().includes(fe))){de(ie.response);return}}if(r===xe.Welcome&&N.length===0)de("Upload data first to start analysis.","ai");else{const ie={currentStep:xe[r],dataSummary:N.length>0?{columns:Object.keys(N[0]||{}),rows:N.length}:"No data loaded."},fe=await Bl(G,r,ie,N);de(fe,"ai")}}}catch(J){const ie=J instanceof Error?J.message:"An unknown error occurred.";de(`Error: ${ie}`,"ai")}finally{T(!1),$e("")}}},Di=E.useCallback(async G=>{const J=G.toLowerCase(),ie={...j};let fe=0;if(J.includes("ignore")){const ye=Object.keys(ie);for(const Ke of ye)J.includes(Ke.toLowerCase())&&(ie[Ke]=Oe.IGNORE,fe++);const Me=[{pattern:"population",type:Oe.IGNORE},{pattern:"competitor",type:Oe.IGNORE},{pattern:"seasonality",type:Oe.IGNORE}];for(const{pattern:Ke,type:Pe}of Me)if(J.includes(Ke))for(const xn of ye)xn.toLowerCase().includes(Ke)&&(ie[xn]=Pe,fe++)}const ge=J.match(/set (.+?) to (.+)/);if(ge){const[,ye,Me]=ge,Pe=Object.keys(ie).find(Dn=>ye.toLowerCase().includes(Dn.toLowerCase())||Dn.toLowerCase().includes(ye.toLowerCase())),xn=Object.values(Oe).find(Dn=>Dn.toLowerCase().includes(Me.toLowerCase())||Me.toLowerCase().includes(Dn.toLowerCase()));Pe&&xn&&(ie[Pe]=xn,fe++)}fe>0?(re(ie),de(` Applied ${fe} column configuration change(s). You can review the updated assignments on the right.`,"ai")):de("I couldn't identify specific columns to modify from your request. Could you be more specific about which columns you'd like to change? For example: 'set TV_Spend to Marketing Spend' or 'ignore DMA_Population'","ai")},[j,de]),ki=E.useCallback(async G=>{const J=G.toLowerCase(),ie=[...K];let fe=0;if(J.includes("exclude")||J.includes("remove"))for(const ge of ie)J.includes(ge.name.toLowerCase())&&(ge.isApproved=!1,fe++);if(J.includes("approve")||J.includes("include"))for(const ge of ie)J.includes(ge.name.toLowerCase())&&(ge.isApproved=!0,fe++);J.includes("all")&&(J.includes("approve")||J.includes("include")?(ie.forEach(ge=>ge.isApproved=!0),fe=ie.length):(J.includes("exclude")||J.includes("remove"))&&(ie.forEach(ge=>ge.isApproved=!1),fe=ie.length)),fe>0?(Ri("approve_exclude"),V(ie),de(` Updated approval status for ${fe} channel(s). Check the diagnostics panel on the right to see the changes.`,"ai")):de("I couldn't identify specific channels to modify from your request. Try being more specific, like 'exclude TV channel' or 'approve Display and Search'","ai")},[K,de]),kr=G=>{if(G==="Load demo dataset"){Bu();return}if(G==="Proceed to feature engineering"){vr();return}if(G==="Run models with these parameters"){Dr();return}if(G==="Finalize this model"){pe&&(de(`Please confirm: finalize model ${pe}?`,"ai"),Ni(!0));return}if(G==="Go to budget optimization"){xa();return}bo(G)},Ii=G=>{Lt&&clearTimeout(Lt),Pr(!0),ae(ie=>ie.map(fe=>fe.id===G.id?G:fe));const J=setTimeout(async()=>{try{const ie=await Cq(G);ae(fe=>{const ge=fe.filter(ye=>ye.id!==G.id);return[ie,...ge]}),$(ie.id),de(`Recalibration complete. The new model, **${ie.id}**, is now active and has been added to the leaderboard.`,"ai")}catch(ie){const fe=ie instanceof Error?ie.message:"An unknown error occurred.";de(`Sorry, the recalibration failed. Error: ${fe}`,"ai"),ae(ge=>ge.map(ye=>ye.id===G.id&&H.find(Me=>Me.id===G.id)||ye))}finally{Pr(!1)}},2e3);yr(J)},Rt=()=>{switch(r){case xe.Welcome:return x.jsx("div",{className:"flex flex-col items-center justify-center h-full p-6",children:x.jsxs("div",{className:"max-w-4xl w-full",children:[x.jsxs("div",{className:"text-center space-y-8",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"MixMind - Agentic Marketing Mix Modeling"}),x.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"AI-Powered Marketing Attribution & Budget Optimization"}),x.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-[#EC7200] to-[#FF8C24] mx-auto rounded-full"})]}),x.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[x.jsxs("label",{className:"cursor-pointer group h-full",children:[x.jsx("input",{type:"file",accept:".csv",onChange:qu,disabled:f,className:"hidden"}),x.jsx("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-gray-100 hover:border-[#EC7200] hover:shadow-xl transition-all duration-300 p-8 group-hover:scale-[1.02] h-full flex flex-col",children:x.jsxs("div",{className:"flex flex-col items-center space-y-4 flex-grow justify-center",children:[x.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#EC7200] to-[#FF8C24] rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",children:x.jsx(_q,{className:"w-8 h-8 text-white"})}),x.jsxs("div",{className:"text-center flex-grow flex flex-col justify-center",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload Your Data"}),x.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-6",children:"Upload a CSV file with your weekly marketing data, channels, and KPI metrics"})]}),x.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 mt-auto",children:[x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),x.jsx("span",{children:"CSV files only"})]})]})})]}),x.jsx("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-gray-100 p-8 h-full flex flex-col",children:x.jsxs("div",{className:"flex flex-col items-center space-y-4 flex-grow",children:[x.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center",children:x.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),x.jsxs("div",{className:"text-center",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Try Sample Data"}),x.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-6",children:"Explore the platform with pharmaceutical MMM sample datasets"})]}),ry.length>0&&x.jsx("div",{className:"w-full space-y-2 flex-grow flex flex-col justify-center",children:ry.map(G=>x.jsxs("button",{onClick:()=>qs(G),disabled:f,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 hover:bg-[#EC7200] hover:text-white rounded-lg disabled:opacity-50 transition-all duration-200 group text-sm",children:[x.jsx("span",{className:"font-medium",children:G.filename}),x.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},G.id))})]})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto pt-4",children:[x.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-md border border-gray-100",children:[x.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:x.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),x.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Data Analysis"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Automated EDA & diagnostics"})]}),x.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-md border border-gray-100",children:[x.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:x.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),x.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Model Building"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Advanced MMM algorithms"})]}),x.jsxs("div",{className:"text-center p-6 bg-white rounded-xl shadow-md border border-gray-100",children:[x.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:x.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),x.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Optimization"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Budget allocation strategies"})]})]})]}),w&&x.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-xl max-w-2xl mx-auto",children:x.jsx("p",{className:"text-red-700 text-center",children:w})})]})});case xe.Configure:return x.jsx(TZ,{edaResults:_,selections:j,onSelectionsChange:G=>{re(G),Ri("column_assignment")},onProceed:nm,isLoading:f,onQuestionClick:kr});case xe.DataValidation:return x.jsx(CZ,{selections:j,insights:k,diagnostics:K,onDiagnosticsChange:V,isLoadingInsights:f&&y.includes("diagnostics"),parsedData:N,onProceed:ju});case xe.FeatureEngineering:return x.jsx(wZ,{initialParams:U,onParamsChange:ee,agentSummary:ue,onProceed:Dr,isLoading:f});case xe.Modeling:{const G=K.filter(fe=>fe.isApproved).map(fe=>fe.name),J=JSON.stringify(G.sort()).slice(0,8),ie=U?JSON.stringify(U.map(fe=>({channel:fe.channel,adstock:fe.adstock,lag:fe.lag,transform:fe.transform})).sort((fe,ge)=>fe.channel.localeCompare(ge.channel))).slice(0,8):"default";return x.jsx(VZ,{models:H,selectedChannels:G,activeModelId:pe,onSetActiveModel:$,onModelChange:Ii,onRequestFinalize:$s,isRecalibrating:Ls,onRecalibrate:(fe,ge)=>{fe&&ge&&(ee(ge),V(ye=>ye.map(Me=>({...Me,isApproved:fe.includes(Me.name)})))),Dr()},onModelsUpdated:fe=>{const ge=fe.map((Me,Ke)=>({...Me,id:`${Me.id}_${Date.now()}_${Ke}`,isNew:!0})),ye=H.map(Me=>({...Me,isNew:!1}));ae([...ye,...ge]),ge.length>0&&!pe&&$(ge[0].id),console.log(`[App] Added ${ge.length} new models from recalibration`)},currentFeaturesHash:J,currentRangesHash:ie,featureParams:U})}case xe.Report:{const G=K.filter(J=>J.isApproved).map(J=>J.name);return x.jsx(ZZ,{activeModelId:(Y==null?void 0:Y.id)||null,models:H,selectedChannels:G,onGoToOptimizer:xa,onRecalibrate:Dr})}case xe.Optimize:{const G=K.filter(J=>J.isApproved).map(J=>J.name);return x.jsx(ree,{activeModelId:(Y==null?void 0:Y.id)||null,models:H,selectedChannels:G,scenarios:he,activeScenarioId:De,onSelectScenario:Ae,onUpdateScenario:Lu,onCreateScenario:Us,onRecalibrate:Dr})}default:return null}},Vu=![xe.Welcome].includes(r),zu=c.filter(G=>G.sender==="ai"&&G.meta?!(["suggestion","insight","validate_suggestions"].includes(G.meta.kind||"")||G.meta.suggestion===!0):!0);return e?x.jsxs("div",{className:"flex h-screen font-sans bg-[#F4F3F3] text-[#1A1628]",children:[x.jsxs("div",{className:"w-full max-w-md bg-white flex flex-col p-4 border-r border-gray-200",children:[x.jsx("div",{className:"mb-4 pb-3 border-b border-gray-200",children:x.jsx(DP,{})}),x.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 custom-scrollbar",children:[zu.map(G=>x.jsx(nw,{message:G,onActionClick:kr},G.id)),(f||S)&&x.jsx(nw,{message:{id:0,sender:"ai",text:x.jsx(fa,{})},onActionClick:kr}),x.jsx("div",{ref:Ou})]}),x.jsx("div",{className:"border-t border-gray-200 pt-3 mb-3",children:Pi().length>0?x.jsx(Mq,{suggestions:Pi(),onActionClick:kr,isDisabled:f||S||Ls,maxPills:6,maxChars:60}):N.length===0&&r!==xe.Welcome?x.jsx("div",{className:"text-xs text-gray-400 italic text-center py-2 px-4",children:"Upload data to see contextual suggestions"}):null}),Vu&&x.jsx(Uq,{value:Ye,onValueChange:$e,onSubmit:bo,placeholder:"Ask a question or give a command...",disabled:f||S||Ls})]}),x.jsxs("main",{className:"flex-1 flex flex-col bg-[#F4F3F3]",children:[x.jsx("div",{className:"p-6 border-b border-gray-200 bg-white",children:x.jsx(Tq,{currentStep:r,completedSteps:o,onStepClick:Sa})}),x.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:f&&!S&&!k&&r!==xe.DataValidation&&r!==xe.Optimize?x.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[x.jsx(fa,{}),x.jsx("p",{className:"text-xl mt-4 text-gray-700",children:y}),x.jsx("p",{className:"text-gray-500",children:"This may take a moment."})]}):Rt()})]}),x.jsx(lee,{isVisible:ct,onComplete:rm,minDuration:900}),x.jsx(uee,{isActive:gn,onComplete:$u,selectedChannels:K.filter(G=>G.isApproved).map(G=>G.name),algorithmCount:4})]}):x.jsx(see,{onLogin:n})},sM=document.getElementById("root");sM&&Gk.createRoot(sM).render(x.jsx(Kn.StrictMode,{children:x.jsx(dee,{})}));
